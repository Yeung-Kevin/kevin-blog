<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Serializers 序列化组件 | Kevin-Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/kevin-blog/logo.png">
    <meta name="description" content="">
    <link rel="preload" href="/kevin-blog/assets/css/0.styles.267bc68b.css" as="style"><link rel="preload" href="/kevin-blog/assets/js/app.dd46475d.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/2.97d04891.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/32.07887ecb.js" as="script"><link rel="prefetch" href="/kevin-blog/assets/js/10.2b686438.js"><link rel="prefetch" href="/kevin-blog/assets/js/100.cfc5acd5.js"><link rel="prefetch" href="/kevin-blog/assets/js/101.628bd39e.js"><link rel="prefetch" href="/kevin-blog/assets/js/102.41585307.js"><link rel="prefetch" href="/kevin-blog/assets/js/103.5d18350a.js"><link rel="prefetch" href="/kevin-blog/assets/js/104.85cd65cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/105.9d303bac.js"><link rel="prefetch" href="/kevin-blog/assets/js/106.73f6a263.js"><link rel="prefetch" href="/kevin-blog/assets/js/107.9dfe114c.js"><link rel="prefetch" href="/kevin-blog/assets/js/108.315e8c63.js"><link rel="prefetch" href="/kevin-blog/assets/js/109.ef21ffa0.js"><link rel="prefetch" href="/kevin-blog/assets/js/11.2b0f6358.js"><link rel="prefetch" href="/kevin-blog/assets/js/110.dfe062a3.js"><link rel="prefetch" href="/kevin-blog/assets/js/111.08f0c3e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/112.0e180f10.js"><link rel="prefetch" href="/kevin-blog/assets/js/113.295f1fca.js"><link rel="prefetch" href="/kevin-blog/assets/js/114.5645d09d.js"><link rel="prefetch" href="/kevin-blog/assets/js/115.ebe19212.js"><link rel="prefetch" href="/kevin-blog/assets/js/116.b3eb5cab.js"><link rel="prefetch" href="/kevin-blog/assets/js/117.076c6372.js"><link rel="prefetch" href="/kevin-blog/assets/js/118.226fb513.js"><link rel="prefetch" href="/kevin-blog/assets/js/119.298c0302.js"><link rel="prefetch" href="/kevin-blog/assets/js/12.01390043.js"><link rel="prefetch" href="/kevin-blog/assets/js/120.943d0d71.js"><link rel="prefetch" href="/kevin-blog/assets/js/121.2d1bd8ef.js"><link rel="prefetch" href="/kevin-blog/assets/js/122.84b9dff1.js"><link rel="prefetch" href="/kevin-blog/assets/js/123.85d93d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/124.4913aefd.js"><link rel="prefetch" href="/kevin-blog/assets/js/125.cf667169.js"><link rel="prefetch" href="/kevin-blog/assets/js/126.eefd3250.js"><link rel="prefetch" href="/kevin-blog/assets/js/127.f9697daf.js"><link rel="prefetch" href="/kevin-blog/assets/js/128.aff6033d.js"><link rel="prefetch" href="/kevin-blog/assets/js/129.fa7ec9a8.js"><link rel="prefetch" href="/kevin-blog/assets/js/13.e55a4126.js"><link rel="prefetch" href="/kevin-blog/assets/js/130.9d50b78d.js"><link rel="prefetch" href="/kevin-blog/assets/js/131.f384aa34.js"><link rel="prefetch" href="/kevin-blog/assets/js/132.e60091dc.js"><link rel="prefetch" href="/kevin-blog/assets/js/133.09a9de16.js"><link rel="prefetch" href="/kevin-blog/assets/js/134.a7739a99.js"><link rel="prefetch" href="/kevin-blog/assets/js/135.bea491db.js"><link rel="prefetch" href="/kevin-blog/assets/js/136.92af3a82.js"><link rel="prefetch" href="/kevin-blog/assets/js/137.dbda7b02.js"><link rel="prefetch" href="/kevin-blog/assets/js/138.9fea4ca4.js"><link rel="prefetch" href="/kevin-blog/assets/js/139.0a81aff9.js"><link rel="prefetch" href="/kevin-blog/assets/js/14.efd69f3b.js"><link rel="prefetch" href="/kevin-blog/assets/js/140.3f048218.js"><link rel="prefetch" href="/kevin-blog/assets/js/141.002d7568.js"><link rel="prefetch" href="/kevin-blog/assets/js/142.aec10062.js"><link rel="prefetch" href="/kevin-blog/assets/js/143.2e682c5b.js"><link rel="prefetch" href="/kevin-blog/assets/js/144.d05092f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/145.358437b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/146.af219f24.js"><link rel="prefetch" href="/kevin-blog/assets/js/147.061cb5fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/148.422d1f87.js"><link rel="prefetch" href="/kevin-blog/assets/js/149.c97f27f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/15.271f58eb.js"><link rel="prefetch" href="/kevin-blog/assets/js/150.177533a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/151.d70f314c.js"><link rel="prefetch" href="/kevin-blog/assets/js/152.ca40e6fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/153.a2bca317.js"><link rel="prefetch" href="/kevin-blog/assets/js/154.22edbf9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/155.e59b2d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/156.d5a38de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/157.cbe5199a.js"><link rel="prefetch" href="/kevin-blog/assets/js/158.31c5b8b2.js"><link rel="prefetch" href="/kevin-blog/assets/js/159.0763ed0c.js"><link rel="prefetch" href="/kevin-blog/assets/js/16.e92cdd55.js"><link rel="prefetch" href="/kevin-blog/assets/js/160.a05ced02.js"><link rel="prefetch" href="/kevin-blog/assets/js/161.7e52ed13.js"><link rel="prefetch" href="/kevin-blog/assets/js/162.f5df7208.js"><link rel="prefetch" href="/kevin-blog/assets/js/163.78a78de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/164.54fd347c.js"><link rel="prefetch" href="/kevin-blog/assets/js/165.a0347ed3.js"><link rel="prefetch" href="/kevin-blog/assets/js/166.0702e96e.js"><link rel="prefetch" href="/kevin-blog/assets/js/167.69136cd0.js"><link rel="prefetch" href="/kevin-blog/assets/js/168.d0aa7e0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/169.6229f0ca.js"><link rel="prefetch" href="/kevin-blog/assets/js/17.9a006e5d.js"><link rel="prefetch" href="/kevin-blog/assets/js/170.b6571721.js"><link rel="prefetch" href="/kevin-blog/assets/js/171.600f9683.js"><link rel="prefetch" href="/kevin-blog/assets/js/172.6e1792a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/173.cef126b3.js"><link rel="prefetch" href="/kevin-blog/assets/js/174.97b3e897.js"><link rel="prefetch" href="/kevin-blog/assets/js/175.fcefca30.js"><link rel="prefetch" href="/kevin-blog/assets/js/176.31862a66.js"><link rel="prefetch" href="/kevin-blog/assets/js/177.089b09c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/178.a5dcd25c.js"><link rel="prefetch" href="/kevin-blog/assets/js/179.a9d685f2.js"><link rel="prefetch" href="/kevin-blog/assets/js/18.a1c24192.js"><link rel="prefetch" href="/kevin-blog/assets/js/180.4ad69266.js"><link rel="prefetch" href="/kevin-blog/assets/js/181.691d48a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/182.e77aa679.js"><link rel="prefetch" href="/kevin-blog/assets/js/183.2b4341f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/184.b3610e8b.js"><link rel="prefetch" href="/kevin-blog/assets/js/185.08107897.js"><link rel="prefetch" href="/kevin-blog/assets/js/186.9f5a3f65.js"><link rel="prefetch" href="/kevin-blog/assets/js/187.ac2fe2c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/188.09023a78.js"><link rel="prefetch" href="/kevin-blog/assets/js/189.409b4ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/19.c733cdfe.js"><link rel="prefetch" href="/kevin-blog/assets/js/190.ca5d775c.js"><link rel="prefetch" href="/kevin-blog/assets/js/191.8052fe42.js"><link rel="prefetch" href="/kevin-blog/assets/js/192.31ebe059.js"><link rel="prefetch" href="/kevin-blog/assets/js/193.9bf32e11.js"><link rel="prefetch" href="/kevin-blog/assets/js/194.0667554a.js"><link rel="prefetch" href="/kevin-blog/assets/js/195.ea249ba4.js"><link rel="prefetch" href="/kevin-blog/assets/js/196.6278ec5a.js"><link rel="prefetch" href="/kevin-blog/assets/js/197.90f6af7b.js"><link rel="prefetch" href="/kevin-blog/assets/js/198.2e358b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/199.a0bd0085.js"><link rel="prefetch" href="/kevin-blog/assets/js/20.890583ea.js"><link rel="prefetch" href="/kevin-blog/assets/js/200.bc1e237a.js"><link rel="prefetch" href="/kevin-blog/assets/js/201.767e166e.js"><link rel="prefetch" href="/kevin-blog/assets/js/202.a52f0e94.js"><link rel="prefetch" href="/kevin-blog/assets/js/203.06f0ebab.js"><link rel="prefetch" href="/kevin-blog/assets/js/204.7ae45191.js"><link rel="prefetch" href="/kevin-blog/assets/js/205.b8412fbc.js"><link rel="prefetch" href="/kevin-blog/assets/js/206.682f9a3e.js"><link rel="prefetch" href="/kevin-blog/assets/js/207.8978346c.js"><link rel="prefetch" href="/kevin-blog/assets/js/208.35db8c05.js"><link rel="prefetch" href="/kevin-blog/assets/js/209.1eebeab0.js"><link rel="prefetch" href="/kevin-blog/assets/js/21.48328b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/210.b56db64f.js"><link rel="prefetch" href="/kevin-blog/assets/js/211.31da36f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/212.2f2d2d1f.js"><link rel="prefetch" href="/kevin-blog/assets/js/213.be55b8cc.js"><link rel="prefetch" href="/kevin-blog/assets/js/214.aeffc247.js"><link rel="prefetch" href="/kevin-blog/assets/js/215.137bae15.js"><link rel="prefetch" href="/kevin-blog/assets/js/216.2692c636.js"><link rel="prefetch" href="/kevin-blog/assets/js/217.a6a9cf62.js"><link rel="prefetch" href="/kevin-blog/assets/js/218.7353ed7a.js"><link rel="prefetch" href="/kevin-blog/assets/js/219.f1fdfe8e.js"><link rel="prefetch" href="/kevin-blog/assets/js/22.5fd865e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/220.e20ab2b5.js"><link rel="prefetch" href="/kevin-blog/assets/js/221.0d06c8b0.js"><link rel="prefetch" href="/kevin-blog/assets/js/222.e39491a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/223.ae98df72.js"><link rel="prefetch" href="/kevin-blog/assets/js/224.4ba5d334.js"><link rel="prefetch" href="/kevin-blog/assets/js/225.913ee059.js"><link rel="prefetch" href="/kevin-blog/assets/js/226.b8d730bd.js"><link rel="prefetch" href="/kevin-blog/assets/js/227.69ee92e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/228.1cf17cff.js"><link rel="prefetch" href="/kevin-blog/assets/js/229.6ce44fac.js"><link rel="prefetch" href="/kevin-blog/assets/js/23.9ef4ab20.js"><link rel="prefetch" href="/kevin-blog/assets/js/230.30c28e05.js"><link rel="prefetch" href="/kevin-blog/assets/js/231.ef327150.js"><link rel="prefetch" href="/kevin-blog/assets/js/232.6cb791d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/233.473fa94b.js"><link rel="prefetch" href="/kevin-blog/assets/js/234.848de787.js"><link rel="prefetch" href="/kevin-blog/assets/js/235.f5db4ed9.js"><link rel="prefetch" href="/kevin-blog/assets/js/236.5da3f87c.js"><link rel="prefetch" href="/kevin-blog/assets/js/237.018a543d.js"><link rel="prefetch" href="/kevin-blog/assets/js/238.74d22845.js"><link rel="prefetch" href="/kevin-blog/assets/js/239.fca187a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/24.3dff5faa.js"><link rel="prefetch" href="/kevin-blog/assets/js/240.0dbbfe84.js"><link rel="prefetch" href="/kevin-blog/assets/js/241.8b1ccf29.js"><link rel="prefetch" href="/kevin-blog/assets/js/242.f5216a9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/243.8e5c5e34.js"><link rel="prefetch" href="/kevin-blog/assets/js/244.8f78ae9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/245.e0b2e7b9.js"><link rel="prefetch" href="/kevin-blog/assets/js/246.7700207e.js"><link rel="prefetch" href="/kevin-blog/assets/js/247.c1e13b57.js"><link rel="prefetch" href="/kevin-blog/assets/js/248.63d6adf8.js"><link rel="prefetch" href="/kevin-blog/assets/js/249.500fdd00.js"><link rel="prefetch" href="/kevin-blog/assets/js/25.0ebddc27.js"><link rel="prefetch" href="/kevin-blog/assets/js/250.ebbb5c92.js"><link rel="prefetch" href="/kevin-blog/assets/js/251.4e51605e.js"><link rel="prefetch" href="/kevin-blog/assets/js/252.2534bb33.js"><link rel="prefetch" href="/kevin-blog/assets/js/253.330d0073.js"><link rel="prefetch" href="/kevin-blog/assets/js/254.da99904b.js"><link rel="prefetch" href="/kevin-blog/assets/js/255.f9a1774e.js"><link rel="prefetch" href="/kevin-blog/assets/js/256.7ee8ac66.js"><link rel="prefetch" href="/kevin-blog/assets/js/257.41594669.js"><link rel="prefetch" href="/kevin-blog/assets/js/258.9d8beffc.js"><link rel="prefetch" href="/kevin-blog/assets/js/259.1539043a.js"><link rel="prefetch" href="/kevin-blog/assets/js/26.7e91ac9d.js"><link rel="prefetch" href="/kevin-blog/assets/js/260.034695f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/261.953910a0.js"><link rel="prefetch" href="/kevin-blog/assets/js/262.e2b0764f.js"><link rel="prefetch" href="/kevin-blog/assets/js/263.fe9b0b70.js"><link rel="prefetch" href="/kevin-blog/assets/js/264.489e20f7.js"><link rel="prefetch" href="/kevin-blog/assets/js/265.43596b34.js"><link rel="prefetch" href="/kevin-blog/assets/js/266.07bb7008.js"><link rel="prefetch" href="/kevin-blog/assets/js/267.5caf5b93.js"><link rel="prefetch" href="/kevin-blog/assets/js/268.fc6e09e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/269.764500c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/27.55c7093f.js"><link rel="prefetch" href="/kevin-blog/assets/js/270.9760648a.js"><link rel="prefetch" href="/kevin-blog/assets/js/271.019b1f9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/272.bce07ec6.js"><link rel="prefetch" href="/kevin-blog/assets/js/273.038ff1e3.js"><link rel="prefetch" href="/kevin-blog/assets/js/274.2cb7fd59.js"><link rel="prefetch" href="/kevin-blog/assets/js/275.3c831af6.js"><link rel="prefetch" href="/kevin-blog/assets/js/276.8d0732f8.js"><link rel="prefetch" href="/kevin-blog/assets/js/277.5aa0c664.js"><link rel="prefetch" href="/kevin-blog/assets/js/278.a3cdd3b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/279.d049a479.js"><link rel="prefetch" href="/kevin-blog/assets/js/28.da28db4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/280.6b7f68c4.js"><link rel="prefetch" href="/kevin-blog/assets/js/281.eff251cb.js"><link rel="prefetch" href="/kevin-blog/assets/js/282.f0dc7866.js"><link rel="prefetch" href="/kevin-blog/assets/js/283.36ca2fb9.js"><link rel="prefetch" href="/kevin-blog/assets/js/284.470e6db4.js"><link rel="prefetch" href="/kevin-blog/assets/js/285.a9c60b36.js"><link rel="prefetch" href="/kevin-blog/assets/js/286.3eff6f51.js"><link rel="prefetch" href="/kevin-blog/assets/js/287.f406cf63.js"><link rel="prefetch" href="/kevin-blog/assets/js/288.d6bb5731.js"><link rel="prefetch" href="/kevin-blog/assets/js/289.518409f3.js"><link rel="prefetch" href="/kevin-blog/assets/js/29.37ea8137.js"><link rel="prefetch" href="/kevin-blog/assets/js/290.e4795980.js"><link rel="prefetch" href="/kevin-blog/assets/js/291.6ca97e3d.js"><link rel="prefetch" href="/kevin-blog/assets/js/292.f434852f.js"><link rel="prefetch" href="/kevin-blog/assets/js/293.256f39e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/294.0e051edc.js"><link rel="prefetch" href="/kevin-blog/assets/js/295.d6a1cfbb.js"><link rel="prefetch" href="/kevin-blog/assets/js/296.9a3f4bb2.js"><link rel="prefetch" href="/kevin-blog/assets/js/297.374bbc2d.js"><link rel="prefetch" href="/kevin-blog/assets/js/298.c37b0145.js"><link rel="prefetch" href="/kevin-blog/assets/js/299.008098d2.js"><link rel="prefetch" href="/kevin-blog/assets/js/3.0c6053de.js"><link rel="prefetch" href="/kevin-blog/assets/js/30.24e20f30.js"><link rel="prefetch" href="/kevin-blog/assets/js/300.ab07139a.js"><link rel="prefetch" href="/kevin-blog/assets/js/301.69ee5ffa.js"><link rel="prefetch" href="/kevin-blog/assets/js/302.05af46d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/303.cec1cf65.js"><link rel="prefetch" href="/kevin-blog/assets/js/304.7c82ba6c.js"><link rel="prefetch" href="/kevin-blog/assets/js/305.7ac25f4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/306.82149841.js"><link rel="prefetch" href="/kevin-blog/assets/js/307.f56afc9c.js"><link rel="prefetch" href="/kevin-blog/assets/js/308.7c084ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/309.feb89623.js"><link rel="prefetch" href="/kevin-blog/assets/js/31.19d1e3af.js"><link rel="prefetch" href="/kevin-blog/assets/js/310.1e33889a.js"><link rel="prefetch" href="/kevin-blog/assets/js/311.416e7d20.js"><link rel="prefetch" href="/kevin-blog/assets/js/312.ee11dbec.js"><link rel="prefetch" href="/kevin-blog/assets/js/313.f58bb112.js"><link rel="prefetch" href="/kevin-blog/assets/js/314.543b2b1c.js"><link rel="prefetch" href="/kevin-blog/assets/js/315.18b9a70e.js"><link rel="prefetch" href="/kevin-blog/assets/js/316.6dfba854.js"><link rel="prefetch" href="/kevin-blog/assets/js/317.19590777.js"><link rel="prefetch" href="/kevin-blog/assets/js/318.a3ec0c19.js"><link rel="prefetch" href="/kevin-blog/assets/js/319.f990a61a.js"><link rel="prefetch" href="/kevin-blog/assets/js/320.a3c5cbbf.js"><link rel="prefetch" href="/kevin-blog/assets/js/321.1f58e49c.js"><link rel="prefetch" href="/kevin-blog/assets/js/322.032ff5a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/323.cdd3ba68.js"><link rel="prefetch" href="/kevin-blog/assets/js/324.5238a4e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/325.df06c071.js"><link rel="prefetch" href="/kevin-blog/assets/js/33.9539a78e.js"><link rel="prefetch" href="/kevin-blog/assets/js/34.fa08dd12.js"><link rel="prefetch" href="/kevin-blog/assets/js/35.d6823664.js"><link rel="prefetch" href="/kevin-blog/assets/js/36.5e074071.js"><link rel="prefetch" href="/kevin-blog/assets/js/37.f4a65a95.js"><link rel="prefetch" href="/kevin-blog/assets/js/38.4f127420.js"><link rel="prefetch" href="/kevin-blog/assets/js/39.a5427f94.js"><link rel="prefetch" href="/kevin-blog/assets/js/4.a60d4c06.js"><link rel="prefetch" href="/kevin-blog/assets/js/40.859a530c.js"><link rel="prefetch" href="/kevin-blog/assets/js/41.b61d8247.js"><link rel="prefetch" href="/kevin-blog/assets/js/42.cd204014.js"><link rel="prefetch" href="/kevin-blog/assets/js/43.8076c8fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/44.8a85cf72.js"><link rel="prefetch" href="/kevin-blog/assets/js/45.f46f354b.js"><link rel="prefetch" href="/kevin-blog/assets/js/46.5990e5be.js"><link rel="prefetch" href="/kevin-blog/assets/js/47.9381b746.js"><link rel="prefetch" href="/kevin-blog/assets/js/48.77d95473.js"><link rel="prefetch" href="/kevin-blog/assets/js/49.fc6dff0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/5.6b8c7ebc.js"><link rel="prefetch" href="/kevin-blog/assets/js/50.297dac6d.js"><link rel="prefetch" href="/kevin-blog/assets/js/51.c6ed15a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/52.8bb5ec6f.js"><link rel="prefetch" href="/kevin-blog/assets/js/53.32ab5818.js"><link rel="prefetch" href="/kevin-blog/assets/js/54.1fe541f9.js"><link rel="prefetch" href="/kevin-blog/assets/js/55.6084b23b.js"><link rel="prefetch" href="/kevin-blog/assets/js/56.242cd75a.js"><link rel="prefetch" href="/kevin-blog/assets/js/57.a3aa61b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/58.5dc813ec.js"><link rel="prefetch" href="/kevin-blog/assets/js/59.0649b9f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/6.8f60ce79.js"><link rel="prefetch" href="/kevin-blog/assets/js/60.e912e60f.js"><link rel="prefetch" href="/kevin-blog/assets/js/61.2348484b.js"><link rel="prefetch" href="/kevin-blog/assets/js/62.43b03d30.js"><link rel="prefetch" href="/kevin-blog/assets/js/63.6e56096d.js"><link rel="prefetch" href="/kevin-blog/assets/js/64.c45908b4.js"><link rel="prefetch" href="/kevin-blog/assets/js/65.aab0a20e.js"><link rel="prefetch" href="/kevin-blog/assets/js/66.2555ebea.js"><link rel="prefetch" href="/kevin-blog/assets/js/67.80828b1b.js"><link rel="prefetch" href="/kevin-blog/assets/js/68.5b1b38ff.js"><link rel="prefetch" href="/kevin-blog/assets/js/69.d735686b.js"><link rel="prefetch" href="/kevin-blog/assets/js/7.8fc0c0e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/70.fd567fdf.js"><link rel="prefetch" href="/kevin-blog/assets/js/71.3dc39cbd.js"><link rel="prefetch" href="/kevin-blog/assets/js/72.6fe3454c.js"><link rel="prefetch" href="/kevin-blog/assets/js/73.80c96fab.js"><link rel="prefetch" href="/kevin-blog/assets/js/74.7b652913.js"><link rel="prefetch" href="/kevin-blog/assets/js/75.a9cc5506.js"><link rel="prefetch" href="/kevin-blog/assets/js/76.81bca567.js"><link rel="prefetch" href="/kevin-blog/assets/js/77.1851c464.js"><link rel="prefetch" href="/kevin-blog/assets/js/78.06a9be2e.js"><link rel="prefetch" href="/kevin-blog/assets/js/79.89ac9186.js"><link rel="prefetch" href="/kevin-blog/assets/js/8.d7f3575e.js"><link rel="prefetch" href="/kevin-blog/assets/js/80.76b8cfc2.js"><link rel="prefetch" href="/kevin-blog/assets/js/81.7c87b7a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/82.1995f469.js"><link rel="prefetch" href="/kevin-blog/assets/js/83.dd77915d.js"><link rel="prefetch" href="/kevin-blog/assets/js/84.d167dd7d.js"><link rel="prefetch" href="/kevin-blog/assets/js/85.b858e7d4.js"><link rel="prefetch" href="/kevin-blog/assets/js/86.c4508e18.js"><link rel="prefetch" href="/kevin-blog/assets/js/87.e5015ac2.js"><link rel="prefetch" href="/kevin-blog/assets/js/88.03ea7184.js"><link rel="prefetch" href="/kevin-blog/assets/js/89.6c4aecd6.js"><link rel="prefetch" href="/kevin-blog/assets/js/9.541bf307.js"><link rel="prefetch" href="/kevin-blog/assets/js/90.e64c083e.js"><link rel="prefetch" href="/kevin-blog/assets/js/91.208ff0cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/92.0247f769.js"><link rel="prefetch" href="/kevin-blog/assets/js/93.1d51e9e8.js"><link rel="prefetch" href="/kevin-blog/assets/js/94.52fd5e59.js"><link rel="prefetch" href="/kevin-blog/assets/js/95.3641a4fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/96.a96da06a.js"><link rel="prefetch" href="/kevin-blog/assets/js/97.877152bf.js"><link rel="prefetch" href="/kevin-blog/assets/js/98.4fe249c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/99.400d0dc4.js">
    <link rel="stylesheet" href="/kevin-blog/assets/css/0.styles.267bc68b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kevin-blog/" class="home-link router-link-active"><!----> <span class="site-name">Kevin-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Django Rest-Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="sidebar-link">JWT - JSON Web Tokens</a></li><li><a href="/kevin-blog/Django Rest-Framework/ModelSerializer 序列化组件.html" class="sidebar-link">ModelSerializer 序列化组件</a></li><li><a href="/kevin-blog/Django Rest-Framework/RESTful 规范.html" class="sidebar-link">RESTful 规范</a></li><li><a href="/kevin-blog/Django Rest-Framework/Serializers 序列化组件.html" class="active sidebar-link">Serializers 序列化组件</a></li><li><a href="/kevin-blog/Django Rest-Framework/rest-framework token认证.html" class="sidebar-link">rest-framework token认证</a></li><li><a href="/kevin-blog/Django Rest-Framework/rest-framework 的基本使用.html" class="sidebar-link">rest-framework 的基本使用</a></li><li><a href="/kevin-blog/Django Rest-Framework/为什么要使用 token 认证 而不是 session 认证.html" class="sidebar-link">为什么要使用 token 认证 而不是 session 认证</a></li><li><a href="/kevin-blog/Django Rest-Framework/分页.html" class="sidebar-link">分页</a></li><li><a href="/kevin-blog/Django Rest-Framework/权限组件.html" class="sidebar-link">权限组件</a></li><li><a href="/kevin-blog/Django Rest-Framework/注册url的新方法.html" class="sidebar-link">注册url的新方法</a></li><li><a href="/kevin-blog/Django Rest-Framework/渲染器.html" class="sidebar-link">渲染器</a></li><li><a href="/kevin-blog/Django Rest-Framework/版本.html" class="sidebar-link">版本</a></li><li><a href="/kevin-blog/Django Rest-Framework/视图四部曲.html" class="sidebar-link">视图四部曲</a></li><li><a href="/kevin-blog/Django Rest-Framework/解析器.html" class="sidebar-link">解析器</a></li><li><a href="/kevin-blog/Django Rest-Framework/认证组件.html" class="sidebar-link">认证组件</a></li><li><a href="/kevin-blog/Django Rest-Framework/频率组件.html" class="sidebar-link">频率组件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><span><div><div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Serializers 序列化组件</span></h2><div><br></div><div><span style="font-size:14pt;">只要继承了 APIView 就可以使用序列化组件</span></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span><span style="font-size:14pt;font-weight:bold;"> 序列化组件的基本使用</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>序列化组件 的使用和 form 组件的使用类似，都需要定义一个类，而这个类就叫: 序列化类</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='用户名')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all()</div><div><br></div><div>        ps = PublishSerializers(publish_obj, many=True)  <font color="#E30000"># 通过你所创建的 序列化类 序列化数据</font></div><div>        data = ps.data  <font color="#E30000"># Serializer对象.data 获取序列化后的数据</font> <font color="#41AD1C">-&gt; [OrderedDict([('name', '东莞出版社'), ('email', '123@qq.com')]), OrderedDict([('name', '广州出版社'), ('email', '123@qq.com')])]</font></div><div><br></div><div>        return Response(data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/publish/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>[</div><div>    {</div><div>        &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;</div><div>    },</div><div>    {</div><div>        &quot;name&quot;: &quot;广州出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;</div><div>    }</div><div>]</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span><span style="font-size:14pt;font-weight:bold;"> many 参数</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>many 参数: 说明所要序列化的数据是 queryset对象（查询到的数据列表）还是 查询到的数据对象</div></li></ul><div><br></div><ul><li><div>many=True -&gt; 所要序列化的数据是 queryset对象（查询到的数据列表）</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='用户名')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all()</div><div><br></div><div>        ps = PublishSerializers(publish_obj, <font color="#FA7A00">many</font>=True)  <font color="#41AD1C"># 所要序列化的数据是 queryset对象（查询到的数据列表）</font></div><div>        data = ps.data</div><div><br></div><div>        return Response(data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/publish/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>[</div><div>    {</div><div>        &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;</div><div>    },</div><div>    {</div><div>        &quot;name&quot;: &quot;广州出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;</div><div>    }</div><div>]</div></div><div><br></div><ul><li><div>many=False -&gt; 所要序列化的数据是查询到的数据对象，且 many 参数默认值为False，所以在序列化查询到的数据对象的时候 many 参数可以不用传</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='用户名')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all().first()</div><div><br></div><div><font color="#41AD1C"># ps = PublishSerializers(publish_obj,</font> <font color="#FA7A00">many</font><font color="#41AD1C">=False)  # 所要序列化的数据是查询到的数据对象</font></div><div>        ps = PublishSerializers(publish_obj)  <font color="#41AD1C"># 所要序列化的数据是查询到的数据对象</font></div><div>        data = ps.data</div><div><br></div><div>        return Response(data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/publish/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>{</div><div>    &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>    &quot;email&quot;: &quot;123@qq.com&quot;</div><div>}</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span><span style="font-size:14pt;font-weight:bold;"> Response() 方法</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">rest-framework 所提供的 Response() 方法实际上也是继承了 </span>HttpResponse ，只是在 HttpResponse 的基础上扩展了一些功能</div></li><li><div>如果使用了 <span style="font-size:12pt;">rest-framework 那么就使用它所提供的 </span><span style="font-size:12pt;">Response() 方法将数据发送给前端</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='用户名')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all().first()</div><div>        ps = PublishSerializers(publish_obj)</div><div>        data = ps.data</div><div><br></div><div>        return <font color="#FA7A00">Response</font>(data)</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">Response() 方法可以直接对 字典、列表、元祖、字符串、数字 进行发送</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div><br></div><div>    def get(self, request):</div><div>        return Response({'a': 1, 'b': 2})</div><div><font color="#41AD1C"> # return Response([1, 2, 3])</font></div><div><font style="color:rgb(65, 173, 28);">        # return Response((1, 2, 3))</font></div><div><font style="color:rgb(65, 173, 28);"></font><font color="#41AD1C"># return Response('字符串')</font></div><div><font color="#41AD1C">        # return Response(10)</font></div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">序列化日期对象并且处理日期格式</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>format='日期格式'</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div>    pub_date = serializers.CharField(label='未处理的出版日期')</div><div>    production_date = serializers.<font color="#FA7A00">DateTimeField</font>(<font color="#FA7A00">format='%Y-%m-%d %H:%M:%S'</font>)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True)</div><div>        data = bs.data</div><div>        return Response(data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/book/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><font color="#41AD1C"><br></font></div><div>[</div><div>    {</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div>        &quot;price&quot;: &quot;100&quot;,</div><div>        &quot;pub_date&quot;: &quot;2019-08-11&quot;,</div><div>        &quot;<font color="#FA7A00">production_date</font>&quot;: &quot;2019-08-11 18:07:19&quot;</div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;红楼梦&quot;,</div><div>        &quot;price&quot;: &quot;200&quot;,</div><div>        &quot;pub_date&quot;: &quot;2019-08-11&quot;,</div><div>        &quot;<font color="#FA7A00">production_date</font>&quot;: &quot;2019-08-11 18:08:06&quot;</div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">Serializer 类的 depth </span><span style="font-size:14pt;font-weight:bold;">参数说明</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>作用: 序列化 一对多 或 多对多 字段</div></li></ul><div><br></div><ul><li><div>depth 的缺点: 获取很多与当前接口无用的字段数据（即: 获取到一对多或多对多字段中的全部数据）</div></li></ul><div><br></div><ul><li><div>depth 值的说明: 必须为数值</div></li><ul><li><div>当前值为0: 序列化出来的是 一对多 或 多对多字段 所保存的 id 值</div></li><li><div>当前值为1: 序列化出来的是 一对多 或 多对多字段 所对应的表的数据</div></li><li><div>当前值为2: 如果 一对多 或 多对多字段 中还有 一对多 或 多对多字段，那么就序列化出该 一对多 或 多对多字段 所对应的表的数据</div></li><li><div>当前数值为n: ……</div></li></ul></ul><div><br></div><ul><li><div>depth 的默认值: 0</div></li></ul><div><br></div><ul><li><div>depth 官方取值范围推荐: 1-10</div></li></ul><div><br></div><ul><li><div>depth = 0</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div>from .models import *</div><div><br></div><div><br></div><div>class BookSerializers(serializers.ModelSerializer):</div><div>    class Meta:</div><div>        model = Book</div><div>        fields = '__all__'</div><div><font color="#FA7A00">depth</font> = 1</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .serializer import *</div><div>from .models import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True)</div><div>        return Response(bs.data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># </span>depth = 0</div><div><br></div><div><font style="color:rgb(65, 173, 28);"># 接口: http://127.0.0.1:8001/book/</font></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;id&quot;: 2,</div><div>        &quot;title&quot;: &quot;三体（第二部）&quot;,</div><div>        &quot;price&quot;: 100,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: 1,</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            1,</div><div>            2</div><div>        ]</div><div>    },</div><div>    {</div><div>        &quot;id&quot;: 5,</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div>        &quot;price&quot;: 100,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: 1,</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            1,</div><div>            2</div><div>        ]</div><div>    }</div><div>]</div><div><br></div><div><font color="#FA7A00"># --------------------------------------------------------------</font></div><div><font color="#FA7A00"><br></font></div><div><font color="#41AD1C">#</font> <font color="#000000">depth = 1</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 接口: http://127.0.0.1:8001/book/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>[</div><div>    {</div><div>        &quot;id&quot;: 2,</div><div>        &quot;title&quot;: &quot;三体（第二部）&quot;,</div><div>        &quot;price&quot;: 100,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: {</div><div>            &quot;id&quot;: 1,</div><div>            &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>            &quot;email&quot;: &quot;123@qq.com&quot;</div><div>        },</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            {</div><div>                &quot;id&quot;: 1,</div><div>                &quot;name&quot;: &quot;Kevin&quot;,</div><div>                &quot;age&quot;: 18</div><div>            },</div><div>            {</div><div>                &quot;id&quot;: 2,</div><div>                &quot;name&quot;: &quot;Aimer&quot;,</div><div>                &quot;age&quot;: 20</div><div>            }</div><div>        ]</div><div>    },</div><div>    {</div><div>        &quot;id&quot;: 5,</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div>        &quot;price&quot;: 100,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: {</div><div>            &quot;id&quot;: 1,</div><div>            &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>            &quot;email&quot;: &quot;123@qq.com&quot;</div><div>        },</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            {</div><div>                &quot;id&quot;: 1,</div><div>                &quot;name&quot;: &quot;Kevin&quot;,</div><div>                &quot;age&quot;: 18</div><div>            },</div><div>            {</div><div>                &quot;id&quot;: 2,</div><div>                &quot;name&quot;: &quot;Aimer&quot;,</div><div>                &quot;age&quot;: 20</div><div>            }</div><div>        ]</div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">Serializer 类的 </span><span style="font-size:14pt;font-weight:bold;">source 参数说明</span></div><div><br></div><ul><li><div>source 参数一般用于序列化 choices 字段 和 一对多字段</div></li></ul><div><br></div><ul><li><div>source 参数可以序列化自身字段，但是没有意义</div></li><ul><li><div>即: username = serializers.CharField(source='username') 等同于 username = serializers.CharField()</div></li></ul></ul><div><br></div><ul><li><div>source 参数的值支持像模板语言中的链式操作</div></li><ul><li><div>source='get_choices字段_display' -&gt; source='get_user_type_display'</div></li><li><div>source='一对多字段名.字段' -&gt; source='publish.name'</div></li><li><div>source='多对多字段名.all' -&gt; source='authors.all'</div></li></ul></ul><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">6.</span><span style="font-size:14pt;font-weight:bold;"> 序列化 </span><span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">choices </span></span><span style="font-size:14pt;font-weight:bold;">字段的方法</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>使用 source 参数序列化 choices 字段</div></li></ul><div><br></div><ul><li><div>如果不使用 source 参数序列化 choices 字段，那么在序列化 choices 字段的时候默认会取与该字段所保存的数值</div></li></ul><div><br></div><ul><li><div>语法: source='get_choices字段_display'</div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class UserSerializers(serializers.Serializer):</div><div>    username = serializers.CharField(label='用户名')</div><div>    user_type = serializers.CharField(label='用户类型', <font color="#FA7A00">source</font>='<font color="#FA7A00">get_</font>user_type<font color="#FA7A00">_display</font>')</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .serializer import *</div><div>from .models import *</div><div><br></div><div><br></div><div>class UserView(APIView):</div><div>    def get(self, request):</div><div>        user_list = User.objects.all()</div><div>        us = UserSerializers(user_list, many=True)</div><div>        print(us.data)  <font color="#41AD1C"># [OrderedDict([('username', 'Kevin'), ('</font><font color="#FA7A00">user_type</font><font color="#41AD1C">', 'SVIP')]), OrderedDict([('username', 'Aimer'), ('</font><font color="#FA7A00">user_type</font><font color="#41AD1C">', 'VIP')]), OrderedDict([('username', 'Jack'), ('</font><font color="#FA7A00">user_type</font><font color="#41AD1C">', '普通用户')])]</font></div><div>        return Response(us.data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);">#</span> <font color="#41AD1C">接口: http://127.0.0.1:8001/user/</font></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;username&quot;: &quot;Kevin&quot;,</div><div>        &quot;<font color="#FA7A00">user_type</font>&quot;: &quot;SVIP&quot;</div><div>    },</div><div>    {</div><div>        &quot;username&quot;: &quot;Aimer&quot;,</div><div>        &quot;<font color="#FA7A00">user_type</font>&quot;: &quot;VIP&quot;</div><div>    },</div><div>    {</div><div>        &quot;username&quot;: &quot;Jack&quot;,</div><div>        &quot;<font color="#FA7A00">user_type</font>&quot;: &quot;普通用户&quot;</div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">7.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">SerializerMethodField 自定义字段</span></span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">SerializerMethodField() 字段方法的作用: 自定义字段的返回值</span></div></li></ul><div><br></div><ul><li><div>使用场景: 当我们想返回一些自定义的值的时候，就可以使用 <span style="font-size:12pt;">SerializerMethodField</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">函数名定义规则: get_字段名</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div><br></div><div>    custom_field = serializers.<font color="#FA7A00">SerializerMethodField</font>()</div><div><br></div><div>    def <font color="#FA7A00">get_custom_field</font>(self, obj):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param</font> <font color="#FA7A00">obj</font><font color="#41AD1C">:</font> <font color="#FA7A00">obj 就是数据库中的一条数据</font></div><div><font color="#41AD1C">        :</font><font color="#FA7A00">return</font><font color="#41AD1C">:</font> <font color="#FA7A00">所要显示的数据</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        price = obj.price</div><div>        return price + 100</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True)</div><div>        print(bs.data)  <span style="color:rgb(65, 173, 28);">#</span><font color="#41AD1C"> [OrderedDict([('title', '三体'), ('price', '100'), ('</font><font color="#FA7A00">custom_field</font><font color="#41AD1C">', 200)]), OrderedDict([('title', '七大罪'), ('price', '50'), ('</font><font color="#FA7A00">custom_field</font><font color="#41AD1C">', 150)])]</font></div><div>        return Response(bs.data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/book/</font></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;title&quot;: &quot;三体&quot;,</div><div>        &quot;price&quot;: &quot;100&quot;,</div><div>        &quot;<font color="#FA7A00">custom_field</font>&quot;: 200</div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;七大罪&quot;,</div><div>        &quot;price&quot;: &quot;50&quot;,</div><div>        &quot;<font color="#FA7A00">custom_field</font>&quot;: 150</div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">8.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">context </span><font style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">参数</span><span style="font-size:14pt;font-weight:bold;">（即: </span><span style="font-size:14pt;color:rgb(227, 0, 0);font-weight:bold;">在 </span><span style="font-size:14pt;color:rgb(227, 0, 0);font-weight:bold;">serializers 中获取 request 对象</span><span style="font-size:14pt;font-weight:bold;">）</span></font></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>视图类没有使用 serializer_class 参数</div></li></ul><div><br></div><ul><ul><li><div>通过 context 参数 <span style="font-size:12pt;">serializers 可以接收视图传递过来的参数</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True, <font color="#FA7A00">context</font>={'request': request, 'username': 'Kevin', 'age': 18})</div><div>        return Response(bs.data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># serializers.py</font></div><div><br></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div><br></div><div>    custom_field = serializers.SerializerMethodField()</div><div><br></div><div>    def get_custom_field(self, obj):</div><div>        print(<font color="#FA7A00">self.context</font>) <font color="#41AD1C"> # {'request': &lt;rest_framework.request.Request object at 0x0000025F75F0D668&gt;, 'age': 18, 'username': 'Kevin'}</font></div><div>        request = <font color="#FA7A00">self.context</font>.get('request')</div><div>        username = <font color="#FA7A00">self.context</font>.get('username')</div><div>        age = <font color="#FA7A00">self.context</font>.get('age')</div><div>        return 1</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>视图类使用了 serializer_class 参数</div></li></ul><div><br></div><ul><ul><li><div>当视图类使用了 serializer_class 参数，那么 <span style="font-size:12pt;">serializers 默认只会接收到三个参数:</span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div>request -&gt; request 对象，当前视图的请求对象</div></li><li><div>format -&gt; 当前请求期望返回的数据格式</div></li><li><div>view -&gt; 当前请求的类视图对象，相当于视图类中的 self</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div>from rest_framework import viewsets</div><div><br></div><div><br></div><div>class BookView(viewsets.ModelViewSet):</div><div>    queryset = Book.objects.all()</div><div><font color="#FA7A00">serializer_class</font> = BookSerializers</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># serializers.py</font></div><div><font color="#41AD1C"><br></font></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div><br></div><div>    custom_field = serializers.SerializerMethodField()</div><div><br></div><div>    def get_custom_field(self, obj):</div><div>        print(<font color="#FA7A00">self.context</font>)  <font color="#41AD1C"># {'view': &lt;api.views.BookView object at 0x00000229E4FCA5C0&gt;, 'request': &lt;rest_framework.request.Request object at 0x00000229E5077898&gt;, 'format': None}</font></div><div>        request = <font color="#FA7A00">self.context</font>.get('request')</div><div>        response_format = <font color="#FA7A00">self.context</font>.get('format')</div><div>        view = <font color="#FA7A00">self.context</font>.get('view')</div><div>        return 1</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">9.</span><span style="font-size:14pt;font-weight:bold;"> 序列化组件传递或不传递 request 对象的区别</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>不传递 request 对象</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># models.py</font></div><div><font color="#41AD1C"><br></font></div><div>class Picture(models.Model):</div><div>    title = models.CharField(max_length=32, verbose_name='标题')</div><div>    img = models.ImageField(upload_to='img/', verbose_name='图片')</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.picture import PictureSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class PictureView(APIView):</div><div>    def get(self, request, *args, **kwargs):</div><div>        picture_queryset = Picture.objects.all()</div><div>        ps = PictureSerializers(picture_queryset, many=True)</div><div>        data = ps.data</div><div>        return Response(data)</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializers.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PictureSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='标题')</div><div>    img = serializers.FileField(label='图片')</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># 接口: </span>http://127.0.0.1:8000/api/picture/</div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;/media/img/20200526210016.png&quot;</font></div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;西游记&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;/media/img/GVOMVF_OVT0RISCUC2G_McjmBMt.png&quot;</font></div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;红楼梦&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;/media/img/GVOMVF_OVT0RISCUC2G_ospZsQ2.png&quot;</font></div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">传递 request 对象</span></div></li></ul><div><br></div><ul><ul><li><div>注意: 在 django_rest_framework 官网提及到如果涉及到路径字段，应当传递 request 对象，以便生成完整的 url 而不是相对 url</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># models.py</span></div><div><br></div><div>class Picture(models.Model):</div><div>    title = models.CharField(max_length=32, verbose_name='标题')</div><div>    img = models.ImageField(upload_to='img/', verbose_name='图片')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.picture import PictureSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class PictureView(APIView):</div><div>    def get(self, request, *args, **kwargs):</div><div>        picture_queryset = Picture.objects.all()</div><div>        ps = PictureSerializers(picture_queryset, many=True, <font color="#FA7A00">context={'request': request}</font>)</div><div>        data = ps.data</div><div>        return Response(data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializers.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PictureSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='标题')</div><div>    img = serializers.FileField(label='图片')</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># 接口: </span>http://127.0.0.1:8000/api/picture/</div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;id&quot;: 9,</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;http://127.0.0.1:8000/media/img/20200526210016.png&quot;</font></div><div>    },</div><div>    {</div><div>        &quot;id&quot;: 10,</div><div>        &quot;title&quot;: &quot;西游记&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;http://127.0.0.1:8000/media/img/GVOMVF_OVT0RISCUC2G_McjmBMt.png&quot;</font></div><div>    },</div><div>    {</div><div>        &quot;id&quot;: 11,</div><div>        &quot;title&quot;: &quot;红楼梦&quot;,</div><div><font color="#FA7A00">&quot;img&quot;: &quot;http://127.0.0.1:8000/media/img/GVOMVF_OVT0RISCUC2G_ospZsQ2.png&quot;</font></div><div>    }</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">10.</span><span style="font-size:14pt;font-weight:bold;"> 序列化一对多字段的方法 -&gt; 正向查询</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>使用 source 参数序列化一对多字段</div></li></ul><div><br></div><ul><li><div>如果不使用 source 参数序列化一对多字段，那么在序列化一对多字段的时候默认会取与该字段所关联的表类里面的 __str__ 的返回值</div></li></ul><div><br></div><ul><li><div>语法: source='一对多字段名.字段'</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div>    pub_date = serializers.CharField(label='出版日期')</div><div>    publish = serializers.CharField(label='出版社', <font color="#FA7A00">source</font>='publish.name')  <font color="#41AD1C"># 序列化一对多字段，且在序列化一对多字段的时候默认取 publish 表下的 name 字段的数据</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True)</div><div>        print(bs.data)  <font color="#41AD1C"># [OrderedDict([('title', '西游记'), ('price', '111'), ('pub_date', None), ('</font><font color="#FA7A00">publish</font><font color="#41AD1C">', '东莞出版社')]), OrderedDict([('title', '三体'), ('price', '222'), ('pub_date', None), ('</font><font color="#FA7A00">publish</font><font color="#41AD1C">', '东莞出版社')])]</font></div><div>        return Response(bs.data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/book/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>[</div><div>    {</div><div>        &quot;title&quot;: &quot;三体&quot;,</div><div>        &quot;price&quot;: &quot;222&quot;,</div><div>        &quot;pub_date&quot;: null,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: &quot;东莞出版社&quot;</div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div>        &quot;price&quot;: &quot;100&quot;,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">publish</font>&quot;: &quot;东莞出版社&quot;</div><div>    }</div><div>]</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">11.</span><span style="font-size:14pt;font-weight:bold;"> 序列化一对多字段的方法 -&gt; 反向查询</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用 SerializerMethodField() 字段方法，自定义函数返回值，实现序列化一对多字段的反向查询</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">SerializerMethodField() 字段方法的作用: 自定义字段的返回值</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">函数名定义规则: get_字段名</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"><br></font></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='出版社名称')</div><div>    email = serializers.CharField(label='邮箱')</div><div><br></div><div>    book = serializers.<font color="#FA7A00">SerializerMethodField</font>()</div><div><br></div><div>    def <font color="#FA7A00">get_book</font>(self, obj):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param obj: 当前数据的对象（即: 和查询到的数据对象是一样的）</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        temp = []</div><div>        for book in obj.book_set.all():  <font color="#41AD1C"># 反向查询</font></div><div>            temp.append({</div><div>                'title': book.title,</div><div>                'price': book.price,</div><div>                'pub_date': book.pub_date,</div><div>            })</div><div>        return temp</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .serializer import *</div><div>from .models import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_list = Publish.objects.all()</div><div>        ps = PublishSerializers(publish_list, many=True)</div><div>        return Response(ps.data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8001/publish/</font></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;name&quot;: &quot;东莞出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;,</div><div>        &quot;<font color="#FA7A00">book</font>&quot;: [</div><div>            {</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;title&quot;: &quot;三体（第二部）&quot;</div><div>            },</div><div>            {</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;title&quot;: &quot;三国演义&quot;</div><div>            },</div><div>            {</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;title&quot;: &quot;红楼梦&quot;</div><div>            }</div><div>        ]</div><div>    },</div><div>    {</div><div>        &quot;name&quot;: &quot;广州出版社&quot;,</div><div>        &quot;email&quot;: &quot;123@qq.com&quot;,</div><div>        &quot;<font color="#FA7A00">book</font>&quot;: []</div><div>    }</div><div>]</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">12.</span><span style="font-size:14pt;font-weight:bold;"> 序列化多对多字段的方法 -&gt; 正向查询</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>使用 SerializerMethodField() 字段方法，自定义函数返回值，实现序列化多对多字段的正向查询</div></li></ul><div><br></div><ul><li><div>SerializerMethodField() 字段方法的作用: 自定义字段的返回值</div></li></ul><div><br></div><ul><li><div>函数名定义规则: get_字段名</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class BookSerializers(serializers.Serializer):</div><div>    title = serializers.CharField(label='书籍名称')</div><div>    price = serializers.CharField(label='价格')</div><div>    pub_date = serializers.CharField(label='出版日期')</div><div>    authors = serializers.<font color="#FA7A00">SerializerMethodField</font>()</div><div><br></div><div>    def <font color="#FA7A00">get_authors</font>(self, obj):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param obj: 当前数据的对象（即: 和查询到的数据对象是一样的）</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        temp = []</div><div>        for author in obj.authors.all():</div><div>            temp.append(author.name)</div><div>        return temp</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class BookView(APIView):</div><div>    def get(self, request):</div><div>        book_list = Book.objects.all()</div><div>        bs = BookSerializers(book_list, many=True)</div><div>        print(bs.data)  <font color="#41AD1C"># [OrderedDict([('title', '西游记'), ('price', '111'), ('pub_date', None), ('</font><font color="#FA7A00">authors</font><font color="#41AD1C">', ['Kevin'])]), OrderedDict([('title', '三体'), ('price', '222'), ('pub_date', None), ('</font><font color="#FA7A00">authors</font><font color="#41AD1C">', ['Aimer'])])]</font></div><div>        return Response(bs.data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/book/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: GET</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>[</div><div>    {</div><div>        &quot;title&quot;: &quot;三体&quot;,</div><div>        &quot;price&quot;: &quot;222&quot;,</div><div>        &quot;pub_date&quot;: null,</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            &quot;Aimer&quot;</div><div>        ]</div><div>    },</div><div>    {</div><div>        &quot;title&quot;: &quot;三国演义&quot;,</div><div>        &quot;price&quot;: &quot;100&quot;,</div><div>        &quot;pub_date&quot;: &quot;2012-12-12&quot;,</div><div>        &quot;<font color="#FA7A00">authors</font>&quot;: [</div><div>            &quot;Kevin&quot;,</div><div>            &quot;Aimer&quot;</div><div>        ]</div><div>    }</div><div>]</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">13.</span><span style="font-size:14pt;font-weight:bold;"> 序列化多对多字段的方法 -&gt; 反向查询</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用 SerializerMethodField() 字段方法，自定义函数返回值，实现序列化多对多字段的反向查询</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">SerializerMethodField() 字段方法的作用: 自定义字段的返回值</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">函数名定义规则: get_字段名</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class AuthorSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='作者名称')</div><div>    age = serializers.IntegerField(label='年龄')</div><div><br></div><div>    book = serializers.<font color="#FA7A00">SerializerMethodField</font>()</div><div><br></div><div>    def <font color="#FA7A00">get_book</font>(self, obj):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param obj: 当前数据的对象（即: 和查询到的数据对象是一样的）</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        temp = []</div><div>        for book in obj.book_set.all():  <font color="#41AD1C"># 反向查询</font></div><div>            temp.append({</div><div>                'title': book.title,</div><div>                'price': book.price,</div><div>                'pub_date': book.pub_date,</div><div>            })</div><div>        return temp</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size:9pt;font-family:Monaco;"><font color="#41AD1C"># views.py</font></span></div><div><span style="font-size:9pt;font-family:Monaco;"><font color="#41AD1C"><br></font></span></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .serializer import *</div><div>from .models import *</div><div><br></div><div><br></div><div>class AuthorView(APIView):</div><div>    def get(self, request):</div><div>        author_list = Author.objects.all()</div><div>        aus = AuthorSerializers(author_list, many=True)</div><div>        return Response(aus.data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口: http://127.0.0.1:8001/author/</font></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: GET</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><br></div><div>[</div><div>    {</div><div>        &quot;name&quot;: &quot;Kevin&quot;,</div><div>        &quot;age&quot;: 18,</div><div>        &quot;<font color="#FA7A00">book</font>&quot;: [</div><div>            {</div><div>                &quot;title&quot;: &quot;红楼梦&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;</div><div>            },</div><div>            {</div><div>                &quot;title&quot;: &quot;勿忘我&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;</div><div>            }</div><div>        ]</div><div>    },</div><div>    {</div><div>        &quot;name&quot;: &quot;Aimer&quot;,</div><div>        &quot;age&quot;: 20,</div><div>        &quot;<font color="#FA7A00">book</font>&quot;: [</div><div>            {</div><div>                &quot;title&quot;: &quot;三体（第二部）&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;</div><div>            },</div><div>            {</div><div>                &quot;title&quot;: &quot;三国演义&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;</div><div>            },</div><div>            {</div><div>                &quot;title&quot;: &quot;超人&quot;,</div><div>                &quot;price&quot;: 100,</div><div>                &quot;pub_date&quot;: &quot;2012-12-12&quot;</div><div>            }</div><div>        ]</div><div>    }</div><div>]</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">14.</span><span style="font-size:14pt;font-weight:bold;"> 验证数据是否有误</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>一般都是验证提交过来的数据</div></li></ul><div><br></div><ul><li><div>这里的验证数据功能和Form组件或者ModelForm是一样的</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(error_messages={'required': '出版社名称不能为空'})</div><div>    email = serializers.CharField(error_messages={'required': '邮箱不能为空'})</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def post(self, request):</div><div>        ps = PublishSerializers(<font color="#FA7A00">data</font>=request.data)  <font color="#41AD1C"># 将提交过来的数据传入data参数中进行验证</font></div><div>        if ps.<font color="#FA7A00">is_valid</font>():  <font color="#41AD1C"># 验证提交过来的数据</font></div><div>            print(ps.<font color="#FA7A00">validated_data</font>)  <font color="#41AD1C"># 获取验证通过的数据 -&gt; OrderedDict([('name', '深圳出版社'), ('email', '123@qq.com')])</font></div><div>            publish = Publish.objects.create(**ps.validated_data)  <font color="#41AD1C"># 将数据保存到数据库</font></div><div>            p_ps = PublishSerializers(publish)  <font color="#41AD1C"># 序列化数据</font></div><div>            return Response(p_ps.data)</div><div>        else:</div><div>            print(ps.<font color="#FA7A00">errors</font>)  <font color="#41AD1C"># 获取验证失败后的错误信息</font></div><div>            return Response(ps.errors)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 接口说明: 添加出版社</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 接口: http://127.0.0.1:8000/publish/</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 请求类型: POST</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 发送数据的编码格式: application/json -&gt; 即: json 格式</font></div><div><br></div><div><font color="#41AD1C"># 所要发送的数据: </font>{&quot;name&quot;:&quot;上海出版社&quot;,&quot;email&quot;:&quot;123@qq.com&quot;}</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 结果:</font></div><div><br></div><div>{</div><div>    &quot;name&quot;: &quot;上海出版社&quot;,</div><div>    &quot;email&quot;: &quot;123@qq.com&quot;</div><div>}</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">15.</span><span style="font-size:14pt;font-weight:bold;"> 验证器</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>验证器相当于局部钩子函数，定义在 serializers 类字段中</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># serializer.py</font></div><div><font color="#41AD1C"><br></font></div><div>import re</div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>def <font color="#FA7A00">phone_validator</font>(value):</div><div><font color="#41AD1C"> &quot;&quot;&quot;</font></div><div><font color="#41AD1C">    :param value: 当前字段的内容</font></div><div><font color="#41AD1C">    :return: 验证通过无需返回任何内容，验证失败直接抛出异常</font></div><div><font color="#41AD1C">    &quot;&quot;&quot;</font></div><div>    if not re.match(r'^(1[3|4|5|6|7|8|9]\d{9})$', value):</div><div>        raise serializers.ValidationError('手机格式错误')</div><div><br></div><div><br></div><div>class UserInfoSerializers(serializers.Serializer):</div><div>    username = serializers.CharField(label='用户名')</div><div>    phone = serializers.CharField(label='电话号码', <font color="#FA7A00">validators</font>=[<font color="#FA7A00">phone_validator</font>])</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.picture import UserInfoSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class UserInfoView(APIView):</div><div>    def post(self, request, *args, **kwargs):</div><div>        us = UserInfoSerializers(data=request.data)</div><div>        data = {}</div><div>        if us.is_valid():</div><div>            print(us.validated_data)  <font color="#41AD1C"># 验证通过的数据 -&gt; 有序字典: OrderedDict([('username', 'Kevin'), ('phone', '13022024070')])</font></div><div>            userinfo = UserInfo.objects.create(**us.validated_data)  <font color="#41AD1C"># 将数据保存到数据库</font></div><div>            u_us = UserInfoSerializers(userinfo)</div><div>            data = u_us.data</div><div>        else:</div><div>            data = us.errors</div><div>        return Response(data)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">16.</span><span style="font-size:14pt;font-weight:bold;"> 部分更新</span></div><div><br></div><ul><li><div>默认情况下，序列化器必须传递所有必填字段的值，否则就会引发验证错误。你可以使用 partial 参数来允许部分更新</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># models.py</font></div><div><br></div><div>class UserInfo(models.Model):</div><div>    username = models.CharField(max_length=32, verbose_name='用户名')</div><div>    phone = models.CharField(max_length=32, verbose_name='电话号码')</div><div>    age = models.IntegerField(verbose_name='年龄')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class UserInfoSerializers(serializers.Serializer):</div><div>    username = serializers.CharField(label='用户名')</div><div>    phone = serializers.CharField(label='电话号码')</div><div>    age = serializers.IntegerField(label='年龄')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.picture import PictureSerializers, UserInfoSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class UserInfoView(APIView):</div><div>    def put(self, request, *args, **kwargs):</div><div>        data = {}</div><div>        pk = kwargs.get('pk')</div><div>        user_queryset = UserInfo.objects.filter(pk=pk)</div><div>        user_obj = user_queryset.first()</div><div><br></div><div>        us = UserInfoSerializers(data=request.data, <font style="color:rgb(250, 122, 0);">partial=True</font>)</div><div><br></div><div>        if us.is_valid():</div><div>            user_obj.phone = request.data.get('phone')</div><div>            user_obj.age = int(request.data.get('age'))</div><div>            user_obj.save()</div><div>            u_us = UserInfoSerializers(user_obj)</div><div>            data = u_us.data</div><div>        else:</div><div>            data = us.errors</div><div>        return Response(data)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># 接口: </span>http://127.0.0.1:8000/api/userinfo/13/</div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 请求类型: PUT</span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 传递的参数: </span></div><div><br></div><div><font color="#464646"><span style="font-size:9pt;font-family:Monaco;">phone = </span>13038802402</font></div><div><br></div><div>age = 22</div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 结果:</span></div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>{</div><div>    &quot;username&quot;: &quot;Kevin&quot;,</div><div>    &quot;phone&quot;: &quot;13038802402&quot;,</div><div>    &quot;age&quot;: 22</div><div>}</div></div><div><br></div><div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">序列化数据的方式</span></h2><div><br></div><div><span style="font-size:18.6667px;">这里的序列化数据指的是将 </span><span style="font-size:18.6667px;color:rgb(250, 122, 0);">queryset对象</span><span style="font-size:18.6667px;"> 或 </span><span style="font-size:18.6667px;color:rgb(65, 173, 28);">查询到的数据对象</span><span style="font-size:18.6667px;"> 转换成 </span><span style="font-size:18.6667px;color:rgb(250, 122, 0);">列表</span><span style="font-size:18.6667px;"> 或 </span><span style="font-size:18.6667px;color:rgb(65, 173, 28);">字典，</span><span style="font-size:18.6667px;">然后将序列化好的数据发送给前端</span></div></div><div><span style="font-size:18.6667px;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span><span style="font-size:14pt;font-weight:bold;"> 序列化 queryset 对象（查询到的数据列表）</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>方式一</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from django.http import JsonResponse</div><div>from rest_framework.views import APIView</div><div>from .models import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_queryset = Publish.objects.all().values('name', 'email')</div><div>        publish_list = list(publish_queryset)</div><div>        print(publish_list)  <font color="#41AD1C"># [{'name': '东莞出版社', 'email': '123@qq.com'}, {'name': '广州出版社', 'email': '123@qq.com'}]</font></div><div>        return JsonResponse(publish_list, safe=False)</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">方式二</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from django.http import JsonResponse</div><div>from rest_framework.views import APIView</div><div>from django.forms.models import model_to_dict</div><div>from .models import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_queryset = Publish.objects.all()</div><div>        publish_list = []</div><div>        for publish in publish_queryset:</div><div>            publish_list.append(model_to_dict(publish))</div><div>        print(publish_list)  <font color="#41AD1C"># [{'id': 1, 'name': '东莞出版社', 'email': '123@qq.com'}, {'id': 2, 'name': '广州出版社', 'email': '123@qq.com'}]</font></div><div>        return JsonResponse(publish_list, safe=False)</div></div><div><br></div><ul><li><div>方式三</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from rest_framework.views import APIView</div><div>from django.core import serializers</div><div>from .models import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_queryset = Publish.objects.all()</div><div>        publish_list = serializers.serialize(&quot;json&quot;, publish_queryset)</div><div>        print(publish_list)  <font color="#41AD1C"># [{&quot;model&quot;: &quot;app01.publish&quot;, &quot;pk&quot;: 1, &quot;fields&quot;: {&quot;name&quot;: &quot;\u4e1c\u839e\u51fa\u7248\u793e&quot;, &quot;email&quot;: &quot;123@qq.com&quot;'+'}'+'}'}}, {&quot;model&quot;: &quot;app01.publish&quot;, &quot;pk&quot;: 2, &quot;fields&quot;: {&quot;name&quot;: &quot;\u5e7f\u5dde\u51fa\u7248\u793e&quot;, &quot;email&quot;: &quot;123@qq.com&quot;'+'}'+'}'}}]</font></div><div>        return HttpResponse(publish_list)</div></div><div><br></div><ul><li><div>方式四 -&gt; 推荐使用</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer.py</font></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='出版社名称')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_queryset = Publish.objects.all().values('name', 'email')</div><div>        ps = PublishSerializers(publish_queryset, many=True)</div><div>        print(ps.data)  <font color="#41AD1C"># 获取序列化之后的数据 -&gt; [OrderedDict([('name', '东莞出版社'), ('email', '123@qq.com')]), OrderedDict([('name', '广州出版社'), ('email', '123@qq.com')])]</font></div><div>        return Response(ps.data)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span><span style="font-size:14pt;font-weight:bold;"> 序列化查询到的数据对象</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>方式一</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from django.http import JsonResponse</div><div>from rest_framework.views import APIView</div><div>from django.forms.models import model_to_dict</div><div>from .models import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all().first()</div><div>        publish_dict = model_to_dict(publish_obj)</div><div>        print(publish_dict)  <font color="#41AD1C"># {'email': '123@qq.com', 'name': '东莞出版社', 'id': 1}</font></div><div>        return JsonResponse(publish_dict)</div></div><div><br></div><ul><li><div>方式二</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># serializer.py</span></div><div><br></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class PublishSerializers(serializers.Serializer):</div><div>    name = serializers.CharField(label='出版社名称')</div><div>    email = serializers.CharField(label='邮箱')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from django.shortcuts import render, HttpResponse</div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from .models import *</div><div>from .serializer import *</div><div><br></div><div><br></div><div>class PublishView(APIView):</div><div>    def get(self, request):</div><div>        publish_obj = Publish.objects.all().first()</div><div>        ps = PublishSerializers(publish_obj)</div><div>        print(ps.data)  <font color="#41AD1C"># 获取序列化之后的数据 -&gt; {'email': '123@qq.com', 'name': '东莞出版社'}</font></div><div>        return Response(ps.data)</div></div><div><br></div></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">钩子函数</span></h2><div><br></div><ul><li><div>什么是钩子函数: Django源码通过反射找到指定前缀的函数并且执行该函数，即: 该指定前缀的函数就是钩子函数</div></li></ul><div><br></div><ul><li><div>什么时候使用钩子函数: 当 Serializers 组件所提供的校验规则无法满足你的校验，那么可以使用钩子函数自定义校验规则</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">局部钩子函数</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>使用场景: 对某一个字段进行校验，如: 在注册的时候判断用户名字段是否已经被注册过了</div></li></ul><div><br></div><ul><li><div><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">在 </span>Serializers <span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">类中定义</span> validate_<span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">字段名() 方法，就能够实现对特定字段进行校验</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"><span style="font-size:9pt;font-family:Monaco;"># </span>serializer/userinfo.py</font></div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>from rest_framework import serializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class UserInfoSerializers(serializers.Serializer):</div><div>    username = serializers.CharField(label='用户名')</div><div><br></div><div><font color="#41AD1C"># 定义局部钩子（validate_字段名() 方法），用来校验username字段</font></div><div>    def <font color="#FA7A00">validate_</font>username(self, value):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param value: 当前字段的数据</font></div><div><font color="#41AD1C">        :return: 通过验证的数据</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        username_obj = UserInfo.objects.filter(username=value).first()</div><div>        if username_obj:</div><div>            raise serializers.ValidationError('用户名已注册')</div><div>        return value</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.userinfo import UserInfoSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class UserInfoView(APIView):</div><div>    def post(self, request):</div><div>        ser = UserInfoSerializers(data=request.data)  <font color="#41AD1C"># 将提交过来的数据传入data参数中进行验证</font></div><div>        if ser.is_valid():  <font color="#41AD1C"># 验证提交过来的数据</font></div><div>            print(ser.validated_data)  <font color="#41AD1C"># 获取验证通过的数据 -&gt; 有序字典 OrderedDict([('username', 'Kevin')])</font></div><div>            userinfo_obj = UserInfo.objects.create(**ser.validated_data)  <font color="#41AD1C"># 将数据保存到数据库</font></div><div>            ser_data = UserInfoSerializers(userinfo_obj)  <font color="#41AD1C"># 序列化数据</font></div><div>            return Response(ser_data.data)</div><div>        else:</div><div>            print(ser.errors) <font color="#41AD1C"> # 获取验证失败后的错误信息 -&gt; {'username': [ErrorDetail(string='用户名已注册', code='invalid')]}</font></div><div>            return Response(ser.errors)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">全局钩子函数</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用场景: 获取所有已经通过验证的字段，然后取某几个字段进行二次判断，如: 校验两次密码是否一致</span></div></li></ul><div><br></div><ul><li><div>全局钩子的说明: 当全部校验通过后才会执行clean()方法，且在clean()方法中一定可以获取到所有已经通过验证的数据</div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">在Form类中定义 clean() 方法，就能够实现对字段进行全局校验</span></div></li></ul><div><br></div></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># serializer/userinfo.py</font></div><div><font color="#41AD1C"><br></font></div><div>from rest_framework import serializers</div><div><br></div><div><br></div><div>class UserInfoSerializers(serializers.Serializer):</div><div>    username = serializers.CharField(label='用户名')</div><div>    password = serializers.CharField(label='密码')</div><div>    confirm_password = serializers.CharField()</div><div><br></div><div><font color="#41AD1C"># 全局钩子</font></div><div>    def <font color="#FA7A00">validate</font>(self, attrs):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">        :param attrs: 所有验证通过的数据</font></div><div><font color="#41AD1C">        :return: 验证通过的数据</font></div><div><font color="#41AD1C">        &quot;&quot;&quot;</font></div><div>        print(attrs)  <font color="#41AD1C"># 有序字典 -&gt; OrderedDict([('username', 'Kevin'), ('password', '123'), ('confirm_password', '1234')])</font></div><div>        if attrs.get('password') != attrs.get('confirm_password'):</div><div>            raise serializers.ValidationError(&quot;两次密码不一致&quot;)</div><div>        attrs.pop('confirm_password')</div><div>        return attrs</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>from rest_framework.views import APIView</div><div>from rest_framework.response import Response</div><div>from app01.serializer.userinfo import UserInfoSerializers</div><div>from app01.models import *</div><div><br></div><div><br></div><div>class UserInfoView(APIView):</div><div>    def post(self, request):</div><div>        ser = UserInfoSerializers(data=request.data)  <font color="#41AD1C"># 将提交过来的数据传入data参数中进行验证</font></div><div>        if ser.is_valid():  <font color="#41AD1C"># 验证提交过来的数据</font></div><div>            print(ser.validated_data)  <font color="#41AD1C"># 获取验证通过的数据 -&gt; 有序字典 OrderedDict([('username', 'Kevin'), ('password', '123')])</font></div><div>            UserInfo.objects.create(**ser.validated_data)  <font color="#41AD1C"># 将数据保存到数据库</font></div><div>            return Response({'msg': '添加成功'})</div><div>        else:</div><div>            print(ser.errors)  <font color="#41AD1C"># 获取验证失败后的错误信息 -&gt; {'non_field_errors': [ErrorDetail(string='两次密码不一致', code='invalid')]}</font></div><div>            return Response(ser.errors)</div></div><div><br></div></span></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kevin-blog/Django Rest-Framework/RESTful 规范.html" class="prev">
        RESTful 规范
      </a></span> <span class="next"><a href="/kevin-blog/Django Rest-Framework/rest-framework token认证.html">
        rest-framework token认证
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/kevin-blog/assets/js/app.dd46475d.js" defer></script><script src="/kevin-blog/assets/js/2.97d04891.js" defer></script><script src="/kevin-blog/assets/js/32.07887ecb.js" defer></script>
  </body>
</html>
