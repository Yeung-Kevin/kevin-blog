<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 缓存 | Kevin-Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/kevin-blog/logo.png">
    <meta name="description" content="">
    <link rel="preload" href="/kevin-blog/assets/css/0.styles.267bc68b.css" as="style"><link rel="preload" href="/kevin-blog/assets/js/app.dd46475d.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/2.97d04891.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/201.767e166e.js" as="script"><link rel="prefetch" href="/kevin-blog/assets/js/10.2b686438.js"><link rel="prefetch" href="/kevin-blog/assets/js/100.cfc5acd5.js"><link rel="prefetch" href="/kevin-blog/assets/js/101.628bd39e.js"><link rel="prefetch" href="/kevin-blog/assets/js/102.41585307.js"><link rel="prefetch" href="/kevin-blog/assets/js/103.5d18350a.js"><link rel="prefetch" href="/kevin-blog/assets/js/104.85cd65cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/105.9d303bac.js"><link rel="prefetch" href="/kevin-blog/assets/js/106.73f6a263.js"><link rel="prefetch" href="/kevin-blog/assets/js/107.9dfe114c.js"><link rel="prefetch" href="/kevin-blog/assets/js/108.315e8c63.js"><link rel="prefetch" href="/kevin-blog/assets/js/109.ef21ffa0.js"><link rel="prefetch" href="/kevin-blog/assets/js/11.2b0f6358.js"><link rel="prefetch" href="/kevin-blog/assets/js/110.dfe062a3.js"><link rel="prefetch" href="/kevin-blog/assets/js/111.08f0c3e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/112.0e180f10.js"><link rel="prefetch" href="/kevin-blog/assets/js/113.295f1fca.js"><link rel="prefetch" href="/kevin-blog/assets/js/114.5645d09d.js"><link rel="prefetch" href="/kevin-blog/assets/js/115.ebe19212.js"><link rel="prefetch" href="/kevin-blog/assets/js/116.b3eb5cab.js"><link rel="prefetch" href="/kevin-blog/assets/js/117.076c6372.js"><link rel="prefetch" href="/kevin-blog/assets/js/118.226fb513.js"><link rel="prefetch" href="/kevin-blog/assets/js/119.298c0302.js"><link rel="prefetch" href="/kevin-blog/assets/js/12.01390043.js"><link rel="prefetch" href="/kevin-blog/assets/js/120.943d0d71.js"><link rel="prefetch" href="/kevin-blog/assets/js/121.2d1bd8ef.js"><link rel="prefetch" href="/kevin-blog/assets/js/122.84b9dff1.js"><link rel="prefetch" href="/kevin-blog/assets/js/123.85d93d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/124.4913aefd.js"><link rel="prefetch" href="/kevin-blog/assets/js/125.cf667169.js"><link rel="prefetch" href="/kevin-blog/assets/js/126.eefd3250.js"><link rel="prefetch" href="/kevin-blog/assets/js/127.f9697daf.js"><link rel="prefetch" href="/kevin-blog/assets/js/128.aff6033d.js"><link rel="prefetch" href="/kevin-blog/assets/js/129.fa7ec9a8.js"><link rel="prefetch" href="/kevin-blog/assets/js/13.e55a4126.js"><link rel="prefetch" href="/kevin-blog/assets/js/130.9d50b78d.js"><link rel="prefetch" href="/kevin-blog/assets/js/131.f384aa34.js"><link rel="prefetch" href="/kevin-blog/assets/js/132.e60091dc.js"><link rel="prefetch" href="/kevin-blog/assets/js/133.09a9de16.js"><link rel="prefetch" href="/kevin-blog/assets/js/134.a7739a99.js"><link rel="prefetch" href="/kevin-blog/assets/js/135.bea491db.js"><link rel="prefetch" href="/kevin-blog/assets/js/136.92af3a82.js"><link rel="prefetch" href="/kevin-blog/assets/js/137.dbda7b02.js"><link rel="prefetch" href="/kevin-blog/assets/js/138.9fea4ca4.js"><link rel="prefetch" href="/kevin-blog/assets/js/139.0a81aff9.js"><link rel="prefetch" href="/kevin-blog/assets/js/14.efd69f3b.js"><link rel="prefetch" href="/kevin-blog/assets/js/140.3f048218.js"><link rel="prefetch" href="/kevin-blog/assets/js/141.002d7568.js"><link rel="prefetch" href="/kevin-blog/assets/js/142.aec10062.js"><link rel="prefetch" href="/kevin-blog/assets/js/143.2e682c5b.js"><link rel="prefetch" href="/kevin-blog/assets/js/144.d05092f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/145.358437b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/146.af219f24.js"><link rel="prefetch" href="/kevin-blog/assets/js/147.061cb5fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/148.422d1f87.js"><link rel="prefetch" href="/kevin-blog/assets/js/149.c97f27f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/15.271f58eb.js"><link rel="prefetch" href="/kevin-blog/assets/js/150.177533a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/151.d70f314c.js"><link rel="prefetch" href="/kevin-blog/assets/js/152.ca40e6fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/153.a2bca317.js"><link rel="prefetch" href="/kevin-blog/assets/js/154.22edbf9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/155.e59b2d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/156.d5a38de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/157.cbe5199a.js"><link rel="prefetch" href="/kevin-blog/assets/js/158.31c5b8b2.js"><link rel="prefetch" href="/kevin-blog/assets/js/159.0763ed0c.js"><link rel="prefetch" href="/kevin-blog/assets/js/16.e92cdd55.js"><link rel="prefetch" href="/kevin-blog/assets/js/160.a05ced02.js"><link rel="prefetch" href="/kevin-blog/assets/js/161.7e52ed13.js"><link rel="prefetch" href="/kevin-blog/assets/js/162.f5df7208.js"><link rel="prefetch" href="/kevin-blog/assets/js/163.78a78de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/164.54fd347c.js"><link rel="prefetch" href="/kevin-blog/assets/js/165.a0347ed3.js"><link rel="prefetch" href="/kevin-blog/assets/js/166.0702e96e.js"><link rel="prefetch" href="/kevin-blog/assets/js/167.69136cd0.js"><link rel="prefetch" href="/kevin-blog/assets/js/168.d0aa7e0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/169.6229f0ca.js"><link rel="prefetch" href="/kevin-blog/assets/js/17.9a006e5d.js"><link rel="prefetch" href="/kevin-blog/assets/js/170.b6571721.js"><link rel="prefetch" href="/kevin-blog/assets/js/171.600f9683.js"><link rel="prefetch" href="/kevin-blog/assets/js/172.6e1792a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/173.cef126b3.js"><link rel="prefetch" href="/kevin-blog/assets/js/174.97b3e897.js"><link rel="prefetch" href="/kevin-blog/assets/js/175.fcefca30.js"><link rel="prefetch" href="/kevin-blog/assets/js/176.31862a66.js"><link rel="prefetch" href="/kevin-blog/assets/js/177.089b09c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/178.a5dcd25c.js"><link rel="prefetch" href="/kevin-blog/assets/js/179.a9d685f2.js"><link rel="prefetch" href="/kevin-blog/assets/js/18.a1c24192.js"><link rel="prefetch" href="/kevin-blog/assets/js/180.4ad69266.js"><link rel="prefetch" href="/kevin-blog/assets/js/181.691d48a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/182.e77aa679.js"><link rel="prefetch" href="/kevin-blog/assets/js/183.2b4341f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/184.b3610e8b.js"><link rel="prefetch" href="/kevin-blog/assets/js/185.08107897.js"><link rel="prefetch" href="/kevin-blog/assets/js/186.9f5a3f65.js"><link rel="prefetch" href="/kevin-blog/assets/js/187.ac2fe2c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/188.09023a78.js"><link rel="prefetch" href="/kevin-blog/assets/js/189.409b4ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/19.c733cdfe.js"><link rel="prefetch" href="/kevin-blog/assets/js/190.ca5d775c.js"><link rel="prefetch" href="/kevin-blog/assets/js/191.8052fe42.js"><link rel="prefetch" href="/kevin-blog/assets/js/192.31ebe059.js"><link rel="prefetch" href="/kevin-blog/assets/js/193.9bf32e11.js"><link rel="prefetch" href="/kevin-blog/assets/js/194.0667554a.js"><link rel="prefetch" href="/kevin-blog/assets/js/195.ea249ba4.js"><link rel="prefetch" href="/kevin-blog/assets/js/196.6278ec5a.js"><link rel="prefetch" href="/kevin-blog/assets/js/197.90f6af7b.js"><link rel="prefetch" href="/kevin-blog/assets/js/198.2e358b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/199.a0bd0085.js"><link rel="prefetch" href="/kevin-blog/assets/js/20.890583ea.js"><link rel="prefetch" href="/kevin-blog/assets/js/200.bc1e237a.js"><link rel="prefetch" href="/kevin-blog/assets/js/202.a52f0e94.js"><link rel="prefetch" href="/kevin-blog/assets/js/203.06f0ebab.js"><link rel="prefetch" href="/kevin-blog/assets/js/204.7ae45191.js"><link rel="prefetch" href="/kevin-blog/assets/js/205.b8412fbc.js"><link rel="prefetch" href="/kevin-blog/assets/js/206.682f9a3e.js"><link rel="prefetch" href="/kevin-blog/assets/js/207.8978346c.js"><link rel="prefetch" href="/kevin-blog/assets/js/208.35db8c05.js"><link rel="prefetch" href="/kevin-blog/assets/js/209.1eebeab0.js"><link rel="prefetch" href="/kevin-blog/assets/js/21.48328b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/210.b56db64f.js"><link rel="prefetch" href="/kevin-blog/assets/js/211.31da36f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/212.2f2d2d1f.js"><link rel="prefetch" href="/kevin-blog/assets/js/213.be55b8cc.js"><link rel="prefetch" href="/kevin-blog/assets/js/214.aeffc247.js"><link rel="prefetch" href="/kevin-blog/assets/js/215.137bae15.js"><link rel="prefetch" href="/kevin-blog/assets/js/216.2692c636.js"><link rel="prefetch" href="/kevin-blog/assets/js/217.a6a9cf62.js"><link rel="prefetch" href="/kevin-blog/assets/js/218.7353ed7a.js"><link rel="prefetch" href="/kevin-blog/assets/js/219.f1fdfe8e.js"><link rel="prefetch" href="/kevin-blog/assets/js/22.5fd865e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/220.e20ab2b5.js"><link rel="prefetch" href="/kevin-blog/assets/js/221.0d06c8b0.js"><link rel="prefetch" href="/kevin-blog/assets/js/222.e39491a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/223.ae98df72.js"><link rel="prefetch" href="/kevin-blog/assets/js/224.4ba5d334.js"><link rel="prefetch" href="/kevin-blog/assets/js/225.913ee059.js"><link rel="prefetch" href="/kevin-blog/assets/js/226.b8d730bd.js"><link rel="prefetch" href="/kevin-blog/assets/js/227.69ee92e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/228.1cf17cff.js"><link rel="prefetch" href="/kevin-blog/assets/js/229.6ce44fac.js"><link rel="prefetch" href="/kevin-blog/assets/js/23.9ef4ab20.js"><link rel="prefetch" href="/kevin-blog/assets/js/230.30c28e05.js"><link rel="prefetch" href="/kevin-blog/assets/js/231.ef327150.js"><link rel="prefetch" href="/kevin-blog/assets/js/232.6cb791d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/233.473fa94b.js"><link rel="prefetch" href="/kevin-blog/assets/js/234.848de787.js"><link rel="prefetch" href="/kevin-blog/assets/js/235.f5db4ed9.js"><link rel="prefetch" href="/kevin-blog/assets/js/236.5da3f87c.js"><link rel="prefetch" href="/kevin-blog/assets/js/237.018a543d.js"><link rel="prefetch" href="/kevin-blog/assets/js/238.74d22845.js"><link rel="prefetch" href="/kevin-blog/assets/js/239.fca187a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/24.3dff5faa.js"><link rel="prefetch" href="/kevin-blog/assets/js/240.0dbbfe84.js"><link rel="prefetch" href="/kevin-blog/assets/js/241.8b1ccf29.js"><link rel="prefetch" href="/kevin-blog/assets/js/242.f5216a9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/243.8e5c5e34.js"><link rel="prefetch" href="/kevin-blog/assets/js/244.8f78ae9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/245.e0b2e7b9.js"><link rel="prefetch" href="/kevin-blog/assets/js/246.7700207e.js"><link rel="prefetch" href="/kevin-blog/assets/js/247.c1e13b57.js"><link rel="prefetch" href="/kevin-blog/assets/js/248.63d6adf8.js"><link rel="prefetch" href="/kevin-blog/assets/js/249.500fdd00.js"><link rel="prefetch" href="/kevin-blog/assets/js/25.0ebddc27.js"><link rel="prefetch" href="/kevin-blog/assets/js/250.ebbb5c92.js"><link rel="prefetch" href="/kevin-blog/assets/js/251.4e51605e.js"><link rel="prefetch" href="/kevin-blog/assets/js/252.2534bb33.js"><link rel="prefetch" href="/kevin-blog/assets/js/253.330d0073.js"><link rel="prefetch" href="/kevin-blog/assets/js/254.da99904b.js"><link rel="prefetch" href="/kevin-blog/assets/js/255.f9a1774e.js"><link rel="prefetch" href="/kevin-blog/assets/js/256.7ee8ac66.js"><link rel="prefetch" href="/kevin-blog/assets/js/257.41594669.js"><link rel="prefetch" href="/kevin-blog/assets/js/258.9d8beffc.js"><link rel="prefetch" href="/kevin-blog/assets/js/259.1539043a.js"><link rel="prefetch" href="/kevin-blog/assets/js/26.7e91ac9d.js"><link rel="prefetch" href="/kevin-blog/assets/js/260.034695f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/261.953910a0.js"><link rel="prefetch" href="/kevin-blog/assets/js/262.e2b0764f.js"><link rel="prefetch" href="/kevin-blog/assets/js/263.fe9b0b70.js"><link rel="prefetch" href="/kevin-blog/assets/js/264.489e20f7.js"><link rel="prefetch" href="/kevin-blog/assets/js/265.43596b34.js"><link rel="prefetch" href="/kevin-blog/assets/js/266.07bb7008.js"><link rel="prefetch" href="/kevin-blog/assets/js/267.5caf5b93.js"><link rel="prefetch" href="/kevin-blog/assets/js/268.fc6e09e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/269.764500c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/27.55c7093f.js"><link rel="prefetch" href="/kevin-blog/assets/js/270.9760648a.js"><link rel="prefetch" href="/kevin-blog/assets/js/271.019b1f9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/272.bce07ec6.js"><link rel="prefetch" href="/kevin-blog/assets/js/273.038ff1e3.js"><link rel="prefetch" href="/kevin-blog/assets/js/274.2cb7fd59.js"><link rel="prefetch" href="/kevin-blog/assets/js/275.3c831af6.js"><link rel="prefetch" href="/kevin-blog/assets/js/276.8d0732f8.js"><link rel="prefetch" href="/kevin-blog/assets/js/277.5aa0c664.js"><link rel="prefetch" href="/kevin-blog/assets/js/278.a3cdd3b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/279.d049a479.js"><link rel="prefetch" href="/kevin-blog/assets/js/28.da28db4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/280.6b7f68c4.js"><link rel="prefetch" href="/kevin-blog/assets/js/281.eff251cb.js"><link rel="prefetch" href="/kevin-blog/assets/js/282.f0dc7866.js"><link rel="prefetch" href="/kevin-blog/assets/js/283.36ca2fb9.js"><link rel="prefetch" href="/kevin-blog/assets/js/284.470e6db4.js"><link rel="prefetch" href="/kevin-blog/assets/js/285.a9c60b36.js"><link rel="prefetch" href="/kevin-blog/assets/js/286.3eff6f51.js"><link rel="prefetch" href="/kevin-blog/assets/js/287.f406cf63.js"><link rel="prefetch" href="/kevin-blog/assets/js/288.d6bb5731.js"><link rel="prefetch" href="/kevin-blog/assets/js/289.518409f3.js"><link rel="prefetch" href="/kevin-blog/assets/js/29.37ea8137.js"><link rel="prefetch" href="/kevin-blog/assets/js/290.e4795980.js"><link rel="prefetch" href="/kevin-blog/assets/js/291.6ca97e3d.js"><link rel="prefetch" href="/kevin-blog/assets/js/292.f434852f.js"><link rel="prefetch" href="/kevin-blog/assets/js/293.256f39e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/294.0e051edc.js"><link rel="prefetch" href="/kevin-blog/assets/js/295.d6a1cfbb.js"><link rel="prefetch" href="/kevin-blog/assets/js/296.9a3f4bb2.js"><link rel="prefetch" href="/kevin-blog/assets/js/297.374bbc2d.js"><link rel="prefetch" href="/kevin-blog/assets/js/298.c37b0145.js"><link rel="prefetch" href="/kevin-blog/assets/js/299.008098d2.js"><link rel="prefetch" href="/kevin-blog/assets/js/3.0c6053de.js"><link rel="prefetch" href="/kevin-blog/assets/js/30.24e20f30.js"><link rel="prefetch" href="/kevin-blog/assets/js/300.ab07139a.js"><link rel="prefetch" href="/kevin-blog/assets/js/301.69ee5ffa.js"><link rel="prefetch" href="/kevin-blog/assets/js/302.05af46d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/303.cec1cf65.js"><link rel="prefetch" href="/kevin-blog/assets/js/304.7c82ba6c.js"><link rel="prefetch" href="/kevin-blog/assets/js/305.7ac25f4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/306.82149841.js"><link rel="prefetch" href="/kevin-blog/assets/js/307.f56afc9c.js"><link rel="prefetch" href="/kevin-blog/assets/js/308.7c084ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/309.feb89623.js"><link rel="prefetch" href="/kevin-blog/assets/js/31.19d1e3af.js"><link rel="prefetch" href="/kevin-blog/assets/js/310.1e33889a.js"><link rel="prefetch" href="/kevin-blog/assets/js/311.416e7d20.js"><link rel="prefetch" href="/kevin-blog/assets/js/312.ee11dbec.js"><link rel="prefetch" href="/kevin-blog/assets/js/313.f58bb112.js"><link rel="prefetch" href="/kevin-blog/assets/js/314.543b2b1c.js"><link rel="prefetch" href="/kevin-blog/assets/js/315.18b9a70e.js"><link rel="prefetch" href="/kevin-blog/assets/js/316.6dfba854.js"><link rel="prefetch" href="/kevin-blog/assets/js/317.19590777.js"><link rel="prefetch" href="/kevin-blog/assets/js/318.a3ec0c19.js"><link rel="prefetch" href="/kevin-blog/assets/js/319.f990a61a.js"><link rel="prefetch" href="/kevin-blog/assets/js/32.07887ecb.js"><link rel="prefetch" href="/kevin-blog/assets/js/320.a3c5cbbf.js"><link rel="prefetch" href="/kevin-blog/assets/js/321.1f58e49c.js"><link rel="prefetch" href="/kevin-blog/assets/js/322.032ff5a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/323.cdd3ba68.js"><link rel="prefetch" href="/kevin-blog/assets/js/324.5238a4e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/325.df06c071.js"><link rel="prefetch" href="/kevin-blog/assets/js/33.9539a78e.js"><link rel="prefetch" href="/kevin-blog/assets/js/34.fa08dd12.js"><link rel="prefetch" href="/kevin-blog/assets/js/35.d6823664.js"><link rel="prefetch" href="/kevin-blog/assets/js/36.5e074071.js"><link rel="prefetch" href="/kevin-blog/assets/js/37.f4a65a95.js"><link rel="prefetch" href="/kevin-blog/assets/js/38.4f127420.js"><link rel="prefetch" href="/kevin-blog/assets/js/39.a5427f94.js"><link rel="prefetch" href="/kevin-blog/assets/js/4.a60d4c06.js"><link rel="prefetch" href="/kevin-blog/assets/js/40.859a530c.js"><link rel="prefetch" href="/kevin-blog/assets/js/41.b61d8247.js"><link rel="prefetch" href="/kevin-blog/assets/js/42.cd204014.js"><link rel="prefetch" href="/kevin-blog/assets/js/43.8076c8fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/44.8a85cf72.js"><link rel="prefetch" href="/kevin-blog/assets/js/45.f46f354b.js"><link rel="prefetch" href="/kevin-blog/assets/js/46.5990e5be.js"><link rel="prefetch" href="/kevin-blog/assets/js/47.9381b746.js"><link rel="prefetch" href="/kevin-blog/assets/js/48.77d95473.js"><link rel="prefetch" href="/kevin-blog/assets/js/49.fc6dff0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/5.6b8c7ebc.js"><link rel="prefetch" href="/kevin-blog/assets/js/50.297dac6d.js"><link rel="prefetch" href="/kevin-blog/assets/js/51.c6ed15a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/52.8bb5ec6f.js"><link rel="prefetch" href="/kevin-blog/assets/js/53.32ab5818.js"><link rel="prefetch" href="/kevin-blog/assets/js/54.1fe541f9.js"><link rel="prefetch" href="/kevin-blog/assets/js/55.6084b23b.js"><link rel="prefetch" href="/kevin-blog/assets/js/56.242cd75a.js"><link rel="prefetch" href="/kevin-blog/assets/js/57.a3aa61b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/58.5dc813ec.js"><link rel="prefetch" href="/kevin-blog/assets/js/59.0649b9f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/6.8f60ce79.js"><link rel="prefetch" href="/kevin-blog/assets/js/60.e912e60f.js"><link rel="prefetch" href="/kevin-blog/assets/js/61.2348484b.js"><link rel="prefetch" href="/kevin-blog/assets/js/62.43b03d30.js"><link rel="prefetch" href="/kevin-blog/assets/js/63.6e56096d.js"><link rel="prefetch" href="/kevin-blog/assets/js/64.c45908b4.js"><link rel="prefetch" href="/kevin-blog/assets/js/65.aab0a20e.js"><link rel="prefetch" href="/kevin-blog/assets/js/66.2555ebea.js"><link rel="prefetch" href="/kevin-blog/assets/js/67.80828b1b.js"><link rel="prefetch" href="/kevin-blog/assets/js/68.5b1b38ff.js"><link rel="prefetch" href="/kevin-blog/assets/js/69.d735686b.js"><link rel="prefetch" href="/kevin-blog/assets/js/7.8fc0c0e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/70.fd567fdf.js"><link rel="prefetch" href="/kevin-blog/assets/js/71.3dc39cbd.js"><link rel="prefetch" href="/kevin-blog/assets/js/72.6fe3454c.js"><link rel="prefetch" href="/kevin-blog/assets/js/73.80c96fab.js"><link rel="prefetch" href="/kevin-blog/assets/js/74.7b652913.js"><link rel="prefetch" href="/kevin-blog/assets/js/75.a9cc5506.js"><link rel="prefetch" href="/kevin-blog/assets/js/76.81bca567.js"><link rel="prefetch" href="/kevin-blog/assets/js/77.1851c464.js"><link rel="prefetch" href="/kevin-blog/assets/js/78.06a9be2e.js"><link rel="prefetch" href="/kevin-blog/assets/js/79.89ac9186.js"><link rel="prefetch" href="/kevin-blog/assets/js/8.d7f3575e.js"><link rel="prefetch" href="/kevin-blog/assets/js/80.76b8cfc2.js"><link rel="prefetch" href="/kevin-blog/assets/js/81.7c87b7a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/82.1995f469.js"><link rel="prefetch" href="/kevin-blog/assets/js/83.dd77915d.js"><link rel="prefetch" href="/kevin-blog/assets/js/84.d167dd7d.js"><link rel="prefetch" href="/kevin-blog/assets/js/85.b858e7d4.js"><link rel="prefetch" href="/kevin-blog/assets/js/86.c4508e18.js"><link rel="prefetch" href="/kevin-blog/assets/js/87.e5015ac2.js"><link rel="prefetch" href="/kevin-blog/assets/js/88.03ea7184.js"><link rel="prefetch" href="/kevin-blog/assets/js/89.6c4aecd6.js"><link rel="prefetch" href="/kevin-blog/assets/js/9.541bf307.js"><link rel="prefetch" href="/kevin-blog/assets/js/90.e64c083e.js"><link rel="prefetch" href="/kevin-blog/assets/js/91.208ff0cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/92.0247f769.js"><link rel="prefetch" href="/kevin-blog/assets/js/93.1d51e9e8.js"><link rel="prefetch" href="/kevin-blog/assets/js/94.52fd5e59.js"><link rel="prefetch" href="/kevin-blog/assets/js/95.3641a4fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/96.a96da06a.js"><link rel="prefetch" href="/kevin-blog/assets/js/97.877152bf.js"><link rel="prefetch" href="/kevin-blog/assets/js/98.4fe249c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/99.400d0dc4.js">
    <link rel="stylesheet" href="/kevin-blog/assets/css/0.styles.267bc68b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kevin-blog/" class="home-link router-link-active"><!----> <span class="site-name">Kevin-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="sidebar-link">DBUtils 数据库连接池模块</a></li><li><a href="/kevin-blog/Python/IO模型.html" class="sidebar-link">IO模型</a></li><li><a href="/kevin-blog/Python/MySQLdb 模块.html" class="sidebar-link">MySQLdb 模块</a></li><li><a href="/kevin-blog/Python/ORM框架 - SQLAchemy 模块.html" class="sidebar-link">ORM框架 - SQLAchemy 模块</a></li><li><a href="/kevin-blog/Python/PIL 图像处理模块.html" class="sidebar-link">PIL 图像处理模块</a></li><li><a href="/kevin-blog/Python/Python2 和 Python3 的区别.html" class="sidebar-link">Python2 和 Python3 的区别</a></li><li><a href="/kevin-blog/Python/Redis 缓存.html" class="active sidebar-link">Redis 缓存</a></li><li><a href="/kevin-blog/Python/SQLAchemy 模块.html" class="sidebar-link">SQLAchemy 模块</a></li><li><a href="/kevin-blog/Python/collections 模块.html" class="sidebar-link">collections 模块</a></li><li><a href="/kevin-blog/Python/configparser 配置文件模块.html" class="sidebar-link">configparser 配置文件模块</a></li><li><a href="/kevin-blog/Python/datetime 时间模块.html" class="sidebar-link">datetime 时间模块</a></li><li><a href="/kevin-blog/Python/hashlib 加密模块.html" class="sidebar-link">hashlib 加密模块</a></li><li><a href="/kevin-blog/Python/hmac 加密模块.html" class="sidebar-link">hmac 加密模块</a></li><li><a href="/kevin-blog/Python/if 条件语句.html" class="sidebar-link">if 条件语句</a></li><li><a href="/kevin-blog/Python/importlib 模块.html" class="sidebar-link">importlib 模块</a></li><li><a href="/kevin-blog/Python/io 模块.html" class="sidebar-link">io 模块</a></li><li><a href="/kevin-blog/Python/logging 日志模块.html" class="sidebar-link">logging 日志模块</a></li><li><a href="/kevin-blog/Python/multiprocessing 进程模块.html" class="sidebar-link">multiprocessing 进程模块</a></li><li><a href="/kevin-blog/Python/os 模块.html" class="sidebar-link">os 模块</a></li><li><a href="/kevin-blog/Python/pipreqs 模块.html" class="sidebar-link">pipreqs 模块</a></li><li><a href="/kevin-blog/Python/pymysql 模块.html" class="sidebar-link">pymysql 模块</a></li><li><a href="/kevin-blog/Python/queue 队列模块.html" class="sidebar-link">queue 队列模块</a></li><li><a href="/kevin-blog/Python/raise 主动抛出异常.html" class="sidebar-link">raise 主动抛出异常</a></li><li><a href="/kevin-blog/Python/random 随机数模块.html" class="sidebar-link">random 随机数模块</a></li><li><a href="/kevin-blog/Python/re 模块.html" class="sidebar-link">re 模块</a></li><li><a href="/kevin-blog/Python/requests 请求模块.html" class="sidebar-link">requests 请求模块</a></li><li><a href="/kevin-blog/Python/select IO多路复用模块.html" class="sidebar-link">select IO多路复用模块</a></li><li><a href="/kevin-blog/Python/socket 模块.html" class="sidebar-link">socket 模块</a></li><li><a href="/kevin-blog/Python/socketserver 模块.html" class="sidebar-link">socketserver 模块</a></li><li><a href="/kevin-blog/Python/struct 转成固定长度的bytes模块.html" class="sidebar-link">struct 转成固定长度的bytes模块</a></li><li><a href="/kevin-blog/Python/subprocess 执行系统命令模块.html" class="sidebar-link">subprocess 执行系统命令模块</a></li><li><a href="/kevin-blog/Python/sys 模块.html" class="sidebar-link">sys 模块</a></li><li><a href="/kevin-blog/Python/threading 线程模块.html" class="sidebar-link">threading 线程模块</a></li><li><a href="/kevin-blog/Python/time 时间模块.html" class="sidebar-link">time 时间模块</a></li><li><a href="/kevin-blog/Python/uuid 通用唯一识别码模块.html" class="sidebar-link">uuid 通用唯一识别码模块</a></li><li><a href="/kevin-blog/Python/virtualenv 模块.html" class="sidebar-link">virtualenv 模块</a></li><li><a href="/kevin-blog/Python/三元表达式.html" class="sidebar-link">三元表达式</a></li><li><a href="/kevin-blog/Python/使用 Pycharm 的数据库可视化工具.html" class="sidebar-link">使用 Pycharm 的数据库可视化工具</a></li><li><a href="/kevin-blog/Python/偏函数.html" class="sidebar-link">偏函数</a></li><li><a href="/kevin-blog/Python/公共方法.html" class="sidebar-link">公共方法</a></li><li><a href="/kevin-blog/Python/公钥和私钥.html" class="sidebar-link">公钥和私钥</a></li><li><a href="/kevin-blog/Python/内存转换.html" class="sidebar-link">内存转换</a></li><li><a href="/kevin-blog/Python/内置函数.html" class="sidebar-link">内置函数</a></li><li><a href="/kevin-blog/Python/函数.html" class="sidebar-link">函数</a></li><li><a href="/kevin-blog/Python/分别赋值.html" class="sidebar-link">分别赋值</a></li><li><a href="/kevin-blog/Python/包.html" class="sidebar-link">包</a></li><li><a href="/kevin-blog/Python/匿名函数.html" class="sidebar-link">匿名函数</a></li><li><a href="/kevin-blog/Python/协程.html" class="sidebar-link">协程</a></li><li><a href="/kevin-blog/Python/双下方法.html" class="sidebar-link">双下方法</a></li><li><a href="/kevin-blog/Python/反射.html" class="sidebar-link">反射</a></li><li><a href="/kevin-blog/Python/变量 和 常量.html" class="sidebar-link">变量 和 常量</a></li><li><a href="/kevin-blog/Python/命名空间-作用域-作用域链.html" class="sidebar-link">命名空间-作用域-作用域链</a></li><li><a href="/kevin-blog/Python/基础的网络概念.html" class="sidebar-link">基础的网络概念</a></li><li><a href="/kevin-blog/Python/大练习.html" class="sidebar-link">大练习</a></li><li><a href="/kevin-blog/Python/安装第三方模块.html" class="sidebar-link">安装第三方模块</a></li><li><a href="/kevin-blog/Python/并发编程（重要必看）.html" class="sidebar-link">并发编程（重要必看）</a></li><li><a href="/kevin-blog/Python/序列化模块.html" class="sidebar-link">序列化模块</a></li><li><a href="/kevin-blog/Python/开发规范.html" class="sidebar-link">开发规范</a></li><li><a href="/kevin-blog/Python/异常处理.html" class="sidebar-link">异常处理</a></li><li><a href="/kevin-blog/Python/循环删除列表或字典中的值.html" class="sidebar-link">循环删除列表或字典中的值</a></li><li><a href="/kevin-blog/Python/循环语句.html" class="sidebar-link">循环语句</a></li><li><a href="/kevin-blog/Python/报错的查看技巧.html" class="sidebar-link">报错的查看技巧</a></li><li><a href="/kevin-blog/Python/控制台输出带颜色的文字.html" class="sidebar-link">控制台输出带颜色的文字</a></li><li><a href="/kevin-blog/Python/推导式.html" class="sidebar-link">推导式</a></li><li><a href="/kevin-blog/Python/数据类型 dict 字典 方法.html" class="sidebar-link">数据类型 dict 字典 方法</a></li><li><a href="/kevin-blog/Python/数据类型 int 方法.html" class="sidebar-link">数据类型 int 方法</a></li><li><a href="/kevin-blog/Python/数据类型 list 列表 方法.html" class="sidebar-link">数据类型 list 列表 方法</a></li><li><a href="/kevin-blog/Python/数据类型 set 集合 方法.html" class="sidebar-link">数据类型 set 集合 方法</a></li><li><a href="/kevin-blog/Python/数据类型 str 方法.html" class="sidebar-link">数据类型 str 方法</a></li><li><a href="/kevin-blog/Python/数据类型 tuple 元组 方法.html" class="sidebar-link">数据类型 tuple 元组 方法</a></li><li><a href="/kevin-blog/Python/数据类型 和 数据结构.html" class="sidebar-link">数据类型 和 数据结构</a></li><li><a href="/kevin-blog/Python/数据类型的转换.html" class="sidebar-link">数据类型的转换</a></li><li><a href="/kevin-blog/Python/文件操作.html" class="sidebar-link">文件操作</a></li><li><a href="/kevin-blog/Python/条件判断.html" class="sidebar-link">条件判断</a></li><li><a href="/kevin-blog/Python/格式化输出.html" class="sidebar-link">格式化输出</a></li><li><a href="/kevin-blog/Python/模块.html" class="sidebar-link">模块</a></li><li><a href="/kevin-blog/Python/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/kevin-blog/Python/注释.html" class="sidebar-link">注释</a></li><li><a href="/kevin-blog/Python/深浅 copy().html" class="sidebar-link">深浅 copy()</a></li><li><a href="/kevin-blog/Python/生成器.html" class="sidebar-link">生成器</a></li><li><a href="/kevin-blog/Python/算法.html" class="sidebar-link">算法</a></li><li><a href="/kevin-blog/Python/线程 - Timer 定时器.html" class="sidebar-link">线程 - Timer 定时器</a></li><li><a href="/kevin-blog/Python/线程 - 生产者消费者模型.html" class="sidebar-link">线程 - 生产者消费者模型</a></li><li><a href="/kevin-blog/Python/线程同步 - Condition 条件（了解）.html" class="sidebar-link">线程同步 - Condition 条件（了解）</a></li><li><a href="/kevin-blog/Python/线程同步 - Event 事件（了解）.html" class="sidebar-link">线程同步 - Event 事件（了解）</a></li><li><a href="/kevin-blog/Python/线程同步 - Lock互斥锁.html" class="sidebar-link">线程同步 - Lock互斥锁</a></li><li><a href="/kevin-blog/Python/线程同步 - RLock递归锁.html" class="sidebar-link">线程同步 - RLock递归锁</a></li><li><a href="/kevin-blog/Python/线程同步 - Semaphore 信号量（了解）.html" class="sidebar-link">线程同步 - Semaphore 信号量（了解）</a></li><li><a href="/kevin-blog/Python/线程概念（重要）.html" class="sidebar-link">线程概念（重要）</a></li><li><a href="/kevin-blog/Python/线程池.html" class="sidebar-link">线程池</a></li><li><a href="/kevin-blog/Python/线程间通信 - 队列.html" class="sidebar-link">线程间通信 - 队列</a></li><li><a href="/kevin-blog/Python/编码和解码.html" class="sidebar-link">编码和解码</a></li><li><a href="/kevin-blog/Python/获取页面的内容（代码）.html" class="sidebar-link">获取页面的内容（代码）</a></li><li><a href="/kevin-blog/Python/装饰器.html" class="sidebar-link">装饰器</a></li><li><a href="/kevin-blog/Python/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/kevin-blog/Python/转义.html" class="sidebar-link">转义</a></li><li><a href="/kevin-blog/Python/运算符.html" class="sidebar-link">运算符</a></li><li><a href="/kevin-blog/Python/运行效率.html" class="sidebar-link">运行效率</a></li><li><a href="/kevin-blog/Python/进制.html" class="sidebar-link">进制</a></li><li><a href="/kevin-blog/Python/进程 - 生产者消费者模型.html" class="sidebar-link">进程 - 生产者消费者模型</a></li><li><a href="/kevin-blog/Python/进程同步 - Event 事件（了解）.html" class="sidebar-link">进程同步 - Event 事件（了解）</a></li><li><a href="/kevin-blog/Python/进程同步 - Lock互斥锁.html" class="sidebar-link">进程同步 - Lock互斥锁</a></li><li><a href="/kevin-blog/Python/进程同步 - Semaphore 信号量（了解）.html" class="sidebar-link">进程同步 - Semaphore 信号量（了解）</a></li><li><a href="/kevin-blog/Python/进程概念.html" class="sidebar-link">进程概念</a></li><li><a href="/kevin-blog/Python/进程池.html" class="sidebar-link">进程池</a></li><li><a href="/kevin-blog/Python/进程间通信 - JoinableQueue 队列.html" class="sidebar-link">进程间通信 - JoinableQueue 队列</a></li><li><a href="/kevin-blog/Python/进程间通信 - Manager （了解）.html" class="sidebar-link">进程间通信 - Manager （了解）</a></li><li><a href="/kevin-blog/Python/进程间通信 - Pipe 管道（了解）.html" class="sidebar-link">进程间通信 - Pipe 管道（了解）</a></li><li><a href="/kevin-blog/Python/进程间通信 - Queue 队列.html" class="sidebar-link">进程间通信 - Queue 队列</a></li><li><a href="/kevin-blog/Python/迭代器.html" class="sidebar-link">迭代器</a></li><li><a href="/kevin-blog/Python/递归函数.html" class="sidebar-link">递归函数</a></li><li><a href="/kevin-blog/Python/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/kevin-blog/Python/面向对象.html" class="sidebar-link">面向对象</a></li><li><a href="/kevin-blog/Python/面向对象-内置的类方法.html" class="sidebar-link">面向对象-内置的类方法</a></li><li><a href="/kevin-blog/Python/面向对象-单例模式.html" class="sidebar-link">面向对象-单例模式</a></li><li><a href="/kevin-blog/Python/面向对象-多态.html" class="sidebar-link">面向对象-多态</a></li><li><a href="/kevin-blog/Python/面向对象-封装.html" class="sidebar-link">面向对象-封装</a></li><li><a href="/kevin-blog/Python/面向对象-接口类抽象类.html" class="sidebar-link">面向对象-接口类抽象类</a></li><li><a href="/kevin-blog/Python/面向对象-私有属性方法静态属性.html" class="sidebar-link">面向对象-私有属性方法静态属性</a></li><li><a href="/kevin-blog/Python/面向对象-类执行顺序.html" class="sidebar-link">面向对象-类执行顺序</a></li><li><a href="/kevin-blog/Python/面向对象-继承.html" class="sidebar-link">面向对象-继承</a></li><li><a href="/kevin-blog/Python/面向对象-装饰器.html" class="sidebar-link">面向对象-装饰器</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><span><div><div><div><div><div><div><div><div><span style="font-size:14pt;">Redis所有方法: </span> <a href="https://www.cnblogs.com/wupeiqi/articles/5132791.html" style="font-size:14pt;">https://www.cnblogs.com/wupeiqi/articles/5132791.html</a></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Redis的安装</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">Redis 的下载</span></div><div><br></div><ul><li><div>下载网址</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>https://github.com/microsoftarchive/redis/releases</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image.png" type="image/png"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">Redis 的安装</span></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [1].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [2].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [3].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [4].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [5].png" type="image/png"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">启动 Redis </span><span style="font-size:14pt;font-weight:bold;">服务端软件</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">服务端软件的作用: 解析客户端发送过来的指令对内存中写入或读取缓存数据</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div>找到 Redis 的安装目录然后执行 redis-server.exe 启动 Redis</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [6].png" type="image/png"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">Redis 的客户端软件 -&gt; redis-cli.exe</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">客户端软件的作用: 向服务端发送指令，从而对缓存数据进行操作</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">redis-cli.exe 用于设置缓存</span></div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [7].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Python/Redis 缓存_files/Image [8].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Redis的介绍</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">为什么要使用缓存</span></div><div><br></div><div>在Django中，当用户请求到达视图后，视图会先从数据库提取数据放到模板中进行动态渲染，渲染后的结果就是用户看到的网页。如果用户每次请求都从数据库提取数据并渲染，将极大降低性能，不仅服务器压力大，而且客户端也无法即时获得响应。如果能将渲染后的结果放到速度更快的缓存中，每次有请求过来，先检查缓存中是否有对应的资源，如果有，直接从缓存中取出来返回响应，节省取数据和渲染的时间，不仅能大大提高系统性能，还能提高用户体验</div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">Redis 的介绍</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;"><span style="font-size:12pt;color:rgb(255, 0, 0);">Redis 就是一个软件 和 Mysql 类似，都是用于存储数据</span></span></div></li></ul><div><br></div><ul><li><div><span style="color:rgb(255, 0, 0);">Redis 是一个非关系型数据库（即: 以键值对的形式存储数据）</span></div></li></ul><div><br></div><ul><li><div><span style="color:rgb(255, 0, 0);">Redis 所存储的都是字符串，不能储存数字（就算在开发的时候value所填写的是数字，那么 redis 模块也会将数字转换为字符串再进行存储）</span></div></li></ul><div><br></div><ul><li><div><span style="color:rgb(255, 0, 0);">Redis 可以被多台机器连接，然后操作缓存中的数据（和Mysql一样可以被别的机器连接）</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">Redis 和 MySQL 的区别</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">MySQL是一个软件，帮助开发者对一台机器的</span><span style="font-size:12pt;color:rgb(250, 122, 0);">硬盘</span><span style="font-size:12pt;">进行操作</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">Redis是一个软件，</span><span style="font-size:12pt;">帮助开发者对一台机器的</span><span style="font-size:12pt;color:rgb(250, 122, 0);">内存</span><span style="font-size:12pt;">进行操作</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">使用 Redis 的好处</span></span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">速度快，提高效率，因为 Redis 的数据是存放在内存中的，而Mysql是存放在磁盘中的（因为使用Mysql的时候，需用进行打开读写操作，所以要比 Redis 直接从内存中获取数据要慢）</span></div></li></ul><div><br></div><ul><li><div>支持丰富的数据类型: string（字符串），list（列表），set（集合），sorted set（有序集合），hash（字典）</div></li></ul><div><br></div><ul><li><div>支持事务，操作都是原子性，所谓的原子性就是对数据的更改要么全部执行，要么全部不执行</div></li></ul><div><br></div><ul><li><div>丰富的特性：可用于缓存，消息，按key设置过期时间，过期后将会自动删除</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span> <span style="font-size:14pt;font-weight:bold;">使用 Redis 的缺点</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">服务器一旦崩溃，储存在内存中的缓存数据就会没有</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">6.</span> <span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">Redis 相比 Memcached有哪些优势</span></span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">(Memcached的说明: Memcached 的功能和 </span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">redis 是一样的，用于缓存数据</span><span style="font-size:12pt;">)</span></div></li></ul><div><br></div><ul><li><div>Memcached 所有的值均是简单的字符串，redis作为其替代者，支持更为丰富的数据类型</div></li></ul><div><br></div><ul><li><div>redis的速度比Memcached快很多</div></li></ul><div><br></div><ul><li><div>redis可以持久化其数据 -&gt; 将数据保存到磁盘上</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">7.</span> <span style="font-size:14pt;font-weight:bold;">redis 和 Memcached 的区别</span></div><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">存储方式</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><ul><li><div><span style="font-size:12pt;">Memecache 把数据全部存在内存之中，断电后会全部丢失，数据不能超过内存大小</span></div></li></ul></ul><div><br></div><ul><ul><li><div>Redis有部份存在硬盘上，这样能保证数据的持久性</div></li></ul></ul><div><br></div><ul><li><div>数据类型</div></li></ul><div><br></div><ul><ul><li><div><span style="font-size:12pt;">Memecache 只支持简单的字符串</span></div></li></ul></ul><div><br></div><ul><ul><li><div>Redis 支持丰富的数据类型: string（字符串），list（列表），set（集合），sorted set（有序集合），hash（字典）</div></li></ul></ul><div><br></div><ul><li><div>存储空间的大小</div></li></ul><div><br></div><ul><ul><li><div><span style="font-size:12pt;">Memecache 最大只有 1M</span></div></li></ul></ul><div><br></div><ul><ul><li><div>Redis 最大可以达到 1G</div></li></ul></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">8.</span> <span style="font-size:14pt;font-weight:bold;">redis 的使用场景</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>通俗理解: 临时状态，且频繁修改状态，如: 购物车</div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">会话缓存（</span>Session Cache<span style="font-size:12pt;">）</span></div></li></ul><div><br></div><ul><ul><li><div>最常用的一种使用Redis的情景是会话缓存（session cache）。用Redis缓存会话比其他存储（如Memcached）的优势在于：Redis提供持久化。当维护一个不是严格要求一致性的缓存时，如果用户的购物车信息全部丢失，大部分人都会不高兴的，现在，他们还会这样吗？幸运的是，随着 Redis 这些年的改进，很容易找到怎么恰当的使用Redis来缓存会话的文档。甚至广为人知的商业平台Magento也提供Redis的插件</div></li></ul></ul><div><br></div><ul><li><div>全页缓存（FPC）</div></li></ul><div><br></div><ul><ul><li><div>除基本的会话token之外，Redis还提供很简便的FPC平台。回到一致性问题，即使重启了Redis实例，因为有磁盘的持久化，用户也不会看到页面加载速度的下降，这是一个极大改进，类似PHP本地FPC。再次以Magento为例，Magento提供一个插件来使用Redis作为全页缓存后端。此外，对WordPress的用户来说，Pantheon有一个非常好的插件 wp-redis，这个插件能帮助你以最快速度加载你曾浏览过的页面。</div></li></ul></ul><div><br></div><ul><li><div>队列</div></li></ul><div><br></div><ul><ul><li><div>Reids在内存存储引擎领域的一大优点是提供 list 和 set 操作，这使得Redis能作为一个很好的消息队列平台来使用。Redis作为队列使用的操作，就类似于本地程序语言（如Python）对 list 的 push/pop 操作</div></li></ul></ul><div><br></div><ul><ul><li><div>如果你快速的在Google中搜索“Redis queues”，你马上就能找到大量的开源项目，这些项目的目的就是利用Redis创建非常好的后端工具，以满足各种队列需求。例如，Celery有一个后台就是使用Redis作为broker，你可以从这里去查看</div></li></ul></ul><div><br></div><ul><li><div>排行榜/计数器</div></li></ul><div><br></div><ul><ul><li><div>Redis在内存中对数字进行递增或递减的操作实现的非常好。集合（Set）和有序集合（Sorted Set）也使得我们在执行这些操作的时候变的非常简单，Redis只是正好提供了这两种数据结构。所以，我们要从排序集合中获取到排名最靠前的10个用户–我们称之为“user_scores”，我们只需要像下面一样执行即可:</div></li></ul></ul><div><br></div><ul><ul><li><div>当然，这是假定你是根据你用户的分数做递增的排序。如果你想返回用户及用户的分数，你需要这样执行:</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>ZRANGE user_scores 0 10 WITHSCORES</div></li><li><div>Agora Games就是一个很好的例子，用Ruby实现的，它的排行榜就是使用Redis来存储数据的，你可以在这里看到</div></li></ul></ul></ul><div><br></div><ul><li><div>发布/订阅</div></li></ul><div><br></div><ul><ul><li><div>发布/订阅的使用场景确实非常多。我已看见人们在社交网络连接中使用，还可作为基于发布/订阅的脚本触发器，甚至用Redis的发布/订阅功能来建立聊天系统！（不，这是真的，你可以去核实）</div></li></ul></ul><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Python 安装 Redis</span></h2><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>pip3 install redis -i https://pypi.douban.com/simple  <font color="#41AD1C"># 使用豆瓣的镜像</font></div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>安装 redis 最好同时安装上 hiredis</div></li></ul><div><br></div><ul><li><div>hiredis 的作用: 提升 redis 的使用性能</div></li></ul><div><br></div><ul><li><div>如果已经安装了hiredis模块，redis 默认会尝试使用HiredisParser，否则会使用PythonParser</div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>pip3 install hiredis -i https://pypi.douban.com/simple  <font color="#41AD1C"># 使用豆瓣的镜像</font></div></div><div><span style="font-size:14pt;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">连接 Redis Server</span></h2><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">方式一</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>redis.Redis(host='ip地址', port=端口号, password='密码')</div></li></ul><div><br></div><ul><ul><li><div>如果 host 和 port 不传，默认使用本地的ip和端口</div></li></ul></ul><div><br></div><ul><ul><li><div>如果没有密码可以不用填写 password 参数</div></li></ul></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 固定写法</font></div><div><br></div><div>import redis</div><div><br></div><div>r = redis.Redis(host='<font color="#FA7A00">ip地址</font>', port=<font color="#FA7A00">端口号</font><font color="#464646">,</font><font color="#FA7A00"></font>password='<font color="#FA7A00">密码</font>') </div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># </font>r = redis.Redis()  <font style="color:rgb(65, 173, 28);"># 如果 host 和 port 不传，默认使用本地的ip和端口</font></div><div><br></div><div><font style="color:rgb(65, 173, 28);"># 使用 r 对象操作缓存中的数据</font></div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>r = redis.Redis(host='10.211.55.4', port=6379, password='123')</div><div><br></div><div><font color="#41AD1C">#</font> r = redis.Redis()  <font color="#41AD1C"># 如果 host 和 port 不传，默认使用本地的ip和端口</font></div><div><font color="#41AD1C"><br></font></div><div><font style="color:rgb(65, 173, 28);"># 使用 r 对象操作缓存中的数据</font></div></div><div><br></div><ul><li><div>decode_responses 参数</div></li></ul><div><br></div><ul><ul><li><div>decode_responses 参数默认值 Flase</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数 -&gt; 是否自动进行解码，因为从缓存中获取到的值是 Bytes 类型的需要手动进行解码，当 <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">decode_responses=True 的时候，在获取缓存中的值的时候会自动进行解码</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>r = redis.Redis(host='10.211.55.4', port=6379, password='123', <font color="#FA7A00">decode_responses</font>=True)</div><div><br></div><div><font color="#41AD1C">#</font> r = redis.Redis(<font color="#FA7A00">decode_responses</font>=True)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">方式二</span></div><div><br></div><ul><li><div>连接池 -&gt; 推荐使用</div></li></ul><div><br></div><ul><li><div>连接池: 避免每次建立、释放连接的开销。默认，每个Redis实例都会维护一个自己的连接池。可以直接建立一个连接池，然后作为参数Redis，这样就可以实现多个Redis实例共享一个连接池</div></li></ul><div><br></div><ul><li><div><span style="color:rgb(255, 0, 0);">注意: 连接池只创建一次，使用模块的单例模式方式创建连接池，避免在导入模块的时候重复创建连接池，如果每一次使用redis都创建一个连接池，那么性能就会和方式一一样</span></div></li></ul><div><br></div><ul><li><div>固定写法</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color:rgb(65, 173, 28);"># redis_pool.py</font></div><div><br></div><div>import redis</div><div><br></div><div><font color="#41AD1C"># 创建连接池</font></div><div>POOL = redis.ConnectionPool(host='<font color="#FA7A00">ip地址</font>', port=<font color="#FA7A00">端口号</font>, password='<font color="#FA7A00">密码</font>', max_connections=<font color="#FA7A00">最大连接数</font>) <font style="color:rgb(255, 0, 0);"> # 注意: 连接池只创建一次，使用模块的单例模式方式创建连接池，避免在导入模块的时候重复创建连接池</font></div><div><font color="#41AD1C"># </font>POOL = redis.ConnectionPool()  <font color="#41AD1C"># 如果 host 和 port 不传，默认使用本地的ip和端口</font></div><div><font color="#41AD1C">                                 # </font><font color="#41AD1C">如果没有密码可以不用填写 password 参数</font></div><div><font color="#41AD1C">                                 # 如果 max_connections 不传，默认使用redis连接池的最大连接数</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># xxx.py</font></div><div><br></div><div>import redis</div><div>from redis_pool import POOL</div><div><br></div><div><font color="#41AD1C"># 去连接池中获取连接</font></div><div>r = redis.Redis(connection_pool=POOL)</div><div><br></div><div><font color="#41AD1C"># 使用 r 对象操作缓存中的数据</font></div></div><div><br></div><ul><li><div>实例</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># redis_pool.py</font></div><div><font color="#41AD1C"><br></font></div><div>import redis</div><div><br></div><div><font color="#41AD1C"># 创建连接池</font></div><div>POOL = redis.ConnectionPool(host='10.211.55.4', port=6379, password='123', max_connections=1000)  <font color="#FF0000"># 注意: 连接池只创建一次，使用模块的单例模式方式创建连接池，避免在导入模块的时候重复创建连接池</font></div><div><font color="#41AD1C">#</font> POOL = redis.ConnectionPool()  <font color="#41AD1C"># 如果 host 和 port 不传，默认使用本地的ip和端口</font></div><div><font color="#41AD1C"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></font><font color="#41AD1C"># 如果没有密码可以不用填写 password 参数</font></div><div><font color="#41AD1C">                                 # 如果 max_connections 不传，默认使用redis连接池的最大连接数</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># xxx.py</font></div><div><br></div><div>import redis</div><div>from redis_pool import POOL</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 去连接池中获取连接</font></div><div>r = redis.Redis(connection_pool=POOL)</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 使用 r 对象操作缓存中的数据</font></div></div><div><br></div><ul><li><div>decode_responses 参数</div></li></ul><div><br></div><ul><ul><li><div>decode_responses 参数默认值 Flase</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数 -&gt; 是否自动进行解码，因为从缓存中获取到的值是 Bytes 类型的需要手动进行解码，当 <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">decode_responses=True 的时候，在获取缓存中的值的时候会自动进行解码</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># redis_pool.py</span></div><div><br></div><div>import redis</div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 创建连接池</span></div><div>POOL = redis.ConnectionPool(host='10.211.55.4', port=6379, password='123', max_connections=1000, <font color="#FA7A00">decode_responses</font>=True)  <span style="color:rgb(255, 0, 0);"># 注意: 连接池只创建一次，使用模块的单例模式方式创建连接池，避免在导入模块的时候重复创建连接池</span></div><div><span style="color:rgb(65, 173, 28);">#</span> POOL = redis.ConnectionPool(<font color="#FA7A00">decode_responses</font>=True)</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># xxx.py</span></div><div><br></div><div>import redis</div><div>from redis_pool import POOL</div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>r = redis.Redis(connection_pool=POOL)</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Redis 的使用</span></h2><div><br></div><div><span style="font-size:14pt;color:rgb(227, 0, 0);font-weight:bold;">注意: 连接池一定要使用模块的单例模式方式创建，否则性能方面和上面的方式一的性能是一样的，这里只是为了方便才写在一块的</span></div><div><font style="font-size:14pt;"><br></font></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 日常开发的时候连接池一定要使用模块的单例模式方式创建，在这里只是为了方便笔记才写在一块的</font></div><div><br></div><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">String（字符串）类型的操作</span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="未标题-1.png" src="/kevin-blog/Python/Redis 缓存_files/未标题-1.png" type="image/png" width="426"></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">set(name, value, ex=None, px=None, nx=False, xx=False)</span></div></li></ul><div><br></div><ul><ul><li><div><span style="font-size:12pt;">添加或修改缓存（包含过期时间）</span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要缓存的字符串类型的值</div></li><li><div>ex: 过期时间（秒）</div></li><li><div>px: 过期时间（毫秒）</div></li><li><div>nx: 如果值为 True，当 name 不存在的时候，当前set操作才会执行</div></li><li><div>xx: 如果值为 True，当 name 存在的时候，当前set操作才会执行</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">set</font>(name='username', value='Kevin', ex=5)</div></div><div><br></div><ul><li><div>setnx(name, value) </div></li></ul><div><br></div><ul><ul><li><div>添加<span style="font-size:12pt;">缓存（不包含过期时间）</span></div></li></ul></ul><div><br></div><ul><ul><li><div>只有 name 不存在时，才添加 <span style="font-size:12pt;">value 等于字符串类型的缓存</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">setnx</font>(name='username', value='Kevin')</div></div><div><br></div><ul><li><div>setex(name, value, time)</div></li></ul><div><br></div><ul><ul><li><div><span style="font-size:12pt;">添加或修改过期时间单位为秒的缓存</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">（包含过期时间）</span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要缓存的字符串类型的值</div></li><li><div>time: 过期时间（数字秒 或 timedelta对象）</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">setex</font>(name='username', value='Kevin', time=5)</div></div><div><br></div><ul><li><div>psetex(name, time_ms, value)</div></li></ul><div><br></div><ul><ul><li><div><span style="font-size:12pt;">添加或修改</span><span style="font-size:12pt;">过期时间单位为毫秒</span><span style="font-size:12pt;">缓存</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">（包含过期时间）</span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要缓存的字符串类型的值</div></li><li><div>time_ms: 过期时间（数字毫秒 或 timedelta对象）</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">psetex</font>(name='username', value='Kevin', time_ms=5000)</div></div><div><br></div><ul><li><div>mset(mapping)</div></li></ul><div><br></div><ul><ul><li><div>批量设置<span style="font-size:12pt;">缓存</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">（</span><span style="font-size:12pt;">不包含过期时间</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">）</span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>mapping: 字典，如：{'k1':'v1', 'k2': 'v2'}</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">mset</font>({'k1': 'v1', 'k2': 'v2'})</div></div><div><br></div><ul><li><div>msetnx(mapping)</div></li></ul><div><br></div><ul><ul><li><div>批量设置<span style="font-size:12pt;">缓存</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">（</span><span style="font-size:12pt;">不包含过期时间</span><span style="font-size:16px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">），如果该缓存存在则不进行添加</span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>mapping: 字典，如：{'k1':'v1', 'k2': 'v2'}</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">msetnx</font>({'k1': 'v3', 'k2': 'v4'})</div></div><div><br></div><ul><li><div>get(name)</div></li></ul><div><br></div><ul><ul><li><div>获取缓存中的值，且 value 的类型为 String（字符串）</div></li></ul></ul><div><br></div><ul><ul><li><div>当 decode_responses=False/decode_responses参数没有设置 的时候获取到的值是 bytes 类型</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool()</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>username = r.<font color="#FA7A00">get</font>('username')</div><div><br></div><div>print(username)  <font color="#41AD1C"># b'Kevin'</font></div></div><div><br></div><ul><ul><li><div>当 decode_responses=True 的时候获取到的值是经过解码后的值（即: 字符串类型）</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(<font color="#FA7A00">decode_responses=True</font>)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>username = r.<font color="#FA7A00">get</font>('username')</div><div><br></div><div>print(username)  <font color="#41AD1C"># Kevin</font></div></div><div><br></div><ul><li><div>mget(keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>批量获取缓存中的值，且 value 的类型为 String（字符串）</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r_value_list = r.<font color="#FA7A00">mget</font>(['k1', 'k2'])</div><div><br></div><div>print(r_value_list)  <font color="#41AD1C"># ['v1', 'v2']</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r_value_list = r.<font color="#FA7A00">mget</font>('k1', 'k2')</div><div><br></div><div>print(r_value_list) <font color="#41AD1C"> # ['v1', 'v2']</font></div></div><div><br></div><ul><li><div>getset(name, value)</div></li></ul><div><br></div><ul><ul><li><div>设置新值并返回原来的值</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>old_value = r.<font color="#FA7A00">getset</font>(name='username', value='Yeung')</div><div><br></div><div>print(old_value)  <font color="#41AD1C"># Kevin</font></div></div><div><br></div><ul><li><div>getrange(key, start, end)</div></li></ul><div><br></div><ul><ul><li><div>切片</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>key: 缓存中key的名字</div></li><li><div>start: 切片起始值</div></li><li><div>end: 切片结束值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>result = r.<font color="#FA7A00">getrange</font>(key='username', start=0, end=1)</div><div><br></div><div>print(result)  <font color="#41AD1C"># 原本的值: Kevin，切片后得到的值: Ke</font></div></div><div><br></div><ul><li><div>setrange(name, offset, value)</div></li></ul><div><br></div><ul><ul><li><div>修改字符串内容，从指定字符串索引开始向后替换（新值太长时，则向后添加）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数: </div></li><ul><li><div>name: 缓存名</div></li><li><div>offset: 字符串的索引，字节（一个汉字3个字节）</div></li><li><div>value: 需要插入的值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">setrange</font>(name='username', offset=2, value='_插入的值_')</div><div><br></div><div>print(r.get('username'))  <font color="#41AD1C"># 原本的值: Kevin，插值后: Ke_插入的值_</font></div></div><div><br></div><ul><li><div>strlen(name)</div></li></ul><div><br></div><ul><ul><li><div>返回name对应缓存的值的字节长度（一个汉字3个字节）</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>english_length = r.strlen('username')</div><div>print(english_length)  <font color="#41AD1C"># 值: Kevin，长度: 5</font></div><div><br></div><div>chinese_length = r.strlen('chinese')</div><div>print(chinese_length)  <font color="#41AD1C"># 值: 中文，长度: 6</font></div></div><div><br></div><ul><li><div>incr(name, amount)</div></li></ul><div><br></div><ul><ul><li><div>整数自增，当name不存在时，则创建name＝amount，否则，进行整数自增</div></li></ul></ul><div><br></div><ul><ul><li><div>需要自增的value必须是整数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数: </div></li><ul><li><div>name: 缓存名</div></li><li><div>amount: 每次自增的数量（即: 每次添加的数量），必须是整数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">incr</font>(name='age', amount=2)</div><div><br></div><div>print(r.get('age'))  <font color="#41AD1C"># 原本的值: 1，自增后的值: 3</font></div></div><div><br></div><ul><li><div>incrbyfloat(name, amount)</div></li></ul><div><br></div><ul><ul><li><div>浮点数自增，当name不存在时，则创建name＝amount，否则，进行浮点数自增</div></li></ul></ul><div><br></div><ul><ul><li><div>需要自增的value可以是整数或浮点数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>amount: 每次自增的数量（即: 每次添加的数量），可以是整数或浮点数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">incrbyfloat</font>(name='age', amount=2.5)</div><div><br></div><div>print(r.get('age'))  <font color="#41AD1C"># 原本的值: 1，自增后的值: 3.5</font></div></div><div><br></div><ul><li><div>decr(name, amount=1)</div></li></ul><div><br></div><ul><ul><li><div>整数自减，当name不存在时，则创建name＝amount，否则，进行整数自减</div></li></ul></ul><div><br></div><ul><ul><li><div>需要自减的value必须是整数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>amount: 每次自减的数量（即: 每次减少的数量），必须是整数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">decr</font>(name='age', amount=2)</div><div><br></div><div>print(r.get('age'))  <font color="#41AD1C"># 原本的值: 2，自增后的值: 0</font></div></div><div><br></div><ul><li><div>append(key, value)</div></li></ul><div><br></div><ul><ul><li><div>在指定的缓存值后面追加内容</div></li></ul></ul><div><br></div><ul><ul><li><div>参数</div></li><ul><li><div>key: 缓存中key的名字</div></li><li><div>value: 需要追加的内容</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">append</font>(key='username', value='追加的内容')</div><div><br></div><div>print(r.get('username'))  <font color="#41AD1C"># 原本的值: Kevin，追加内容后的值: Kevin追加的内容</font></div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">List（列表）类型的操作</span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="未标题-2.png" src="/kevin-blog/Python/Redis 缓存_files/未标题-2.png" type="image/png" width="507"></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">lpush(name, *values)</span></div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中添加元素，每个新的元素都添加到列表的最左边 -&gt; 相当于创建一个列表</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>values: 要添加的元素，可以接收多个值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#41AD1C">lpush</font>('books', '三国演义', '红楼梦', '西游记', '水浒传')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># ['水浒传', '西游记', '红楼梦', '三国演义']</font></div></div><div><span style="font-size:14pt;"><br></span></div><ul><ul><li><div><span style="font-size:12pt;">写法二</span></div></li></ul></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size:9pt;">import redis</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">pool = redis.ConnectionPool(decode_responses=True)</font></div><div><font style="font-size:9pt;">r = redis.Redis(connection_pool=pool)</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">books = ['三国演义', '红楼梦', '西游记', '水浒传']</font></div><div><font style="font-size:9pt;">r.<font color="#FA7A00">lpush</font>('books', *books)</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">print(r.lrange('books', 0, -1))  <font color="#41AD1C"># ['水浒传', '西游记', '红楼梦', '三国演义']</font></font></div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">rpush(name, *values)</span></div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中添加元素，每个新的元素都添加到列表的最右边 -&gt; 相当于创建一个列表</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>values: 要添加的元素，可以接收多个值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">rpush</font>('books', '三国演义', '红楼梦', '西游记', '水浒传')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># ['三国演义', '红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><ul><li><div><span style="font-size:12pt;">写法二</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>books = ['三国演义', '红楼梦', '西游记', '水浒传']</div><div>r.<font color="#FA7A00">rpush</font>('books', *books)</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># ['三国演义', '红楼梦', '西游记', '水浒传']</font></div></div></div><div><br></div><ul><li><div>lpushx(name, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中添加元素，只有当name已经存在时，值才会添加到列表的最左边</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 要添加的元素，只能接收一个值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">lpushx</font>(name='books', value='三体')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '水浒传']，添加新元素后的值: ['三体', '三国演义', '红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><li><div>rpushx(name, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中添加元素，只有当name已经存在时，值才会添加到列表的最右边</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 要添加的元素，只能接收一个值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">rpushx</font>(name='books', value='三体')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '水浒传']，添加新元素后的值: ['三国演义', '红楼梦', '西游记', '水浒传', '三体']</font></div></div><div><br></div><ul><li><div>llen(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的list元素的个数</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>books_len = r.<font color="#FA7A00">llen</font>('books')</div><div><br></div><div>print(books_len)  <font color="#41AD1C"># 值: ['三国演义', '红楼梦', '西游记', '水浒传']，长度: 4</font></div></div><div><br></div><ul><li><div>linsert(name, where, refvalue, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的列表的某一个值前面或后面插入一个新值</div></li></ul></ul><div><br></div><ul><ul><li><div>如果要在某个值前后插入一个新值，且这某个值有重复，那么只会获取第一个，作为标杆值</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>where: BEFORE（之前）/ AFTER（之后）</div></li><li><div>refvalue: 标杆值（即：列表中的值，在它前后插入数据），如果有相同的标杆值，那么只会获取第一个</div></li><li><div>value: 需要插入的数据</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">linsert</font>(name='books', where='BEFORE', refvalue='红楼梦', value='三体')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '红楼梦', '西游记', '水浒传']，添加新元素后的值: ['三国演义', '三体', '红楼梦', '红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><li><div>lset(name, index, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中的指定索引位置重新赋值</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>index: 索引</div></li><li><div>value: 需要重新赋值的值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">lset</font>(name='books', index=1, value='三体')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '水浒传']，添加新元素后的值: ['三国演义', '三体', '西游记', '水浒传']</font></div></div><div><br></div><ul><li><div>lrem(name, count, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的list中删除指定的值</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 要删除的值</div></li><li><div>count: 要删除的数量</div></li><ul><li><div>count &gt; 0: 从表头开始向表尾搜索，移除 count 个与value值相等的元素</div></li><li><div>count &lt; 0: 从表尾开始向表头搜索，移除 count的绝对值 个与value值相等的元素</div></li><li><div>count = 0: 移除表中所有与 value 相等的值</div></li></ul></ul></ul></ul><div><br></div><ul><ul><li><div>count &gt; 0: 从表头开始向表尾搜索，移除 count 个与value值相等的元素</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">lrem</font>(name='books', count=2, value='三国演义')  <font color="#41AD1C"># count &gt; 0，从表头开始向表尾搜索，移除 2 个与 '三国演义' 相等的值</font></div><div><br></div><div>print(r.lrange('books', 0, -1))  <font style="color:rgb(65, 173, 28);"># 原本的值: ['三国演义', '红楼梦', '西游记', '三国演义', '水浒传', '三国演义']，移除相关元素后的值: ['红楼梦', '西游记', '水浒传', '三国演义']</font></div></div><div><br></div><ul><ul><li><div>count &lt; 0: 从表尾开始向表头搜索，移除 count的绝对值 个与value值相等的元素</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">lrem</font>(name='books', count=-2, value='三国演义') <font color="#41AD1C"> # count &lt; 0，从表尾开始向表头搜索，移除 2 个与 三国演义 相等的值</font></div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '三国演义', '水浒传', '三国演义']，移除相关元素后的值: ['三国演义', '红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><ul><li><div>count = 0: 移除表中所有与 value 相等的值</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">lrem</font>(name='books', count=0, value='三国演义')  <font color="#41AD1C"># count = 0，移除表中所有与 三国演义 相等的值</font></div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '三国演义', '水浒传', '三国演义']，移除相关元素后的值: ['红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><li><div>lpop(name)</div></li></ul><div><br></div><ul><ul><li><div>删除指定列表的左边第一个元素（即: 列表的一个元素），返回值: 被删除的元素</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>del_book = r.<font color="#FA7A00">lpop</font>('books')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '水浒传']，移除相关元素后的值: ['红楼梦', '西游记', '水浒传']</font></div><div><font color="#000000">print(</font>del_book<font color="#000000">) </font> <font color="#41AD1C"># 三国演义</font></div></div><div><br></div><ul><li><div>rpop(name)</div></li></ul><div><br></div><ul><ul><li><div>删除指定列表的右边第一个元素（即: 列表的最后一个元素），返回值: 被删除的元素</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>del_book = r.<font color="#FA7A00">rpop</font>('books')</div><div><br></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 原本的值: ['三国演义', '红楼梦', '西游记', '水浒传']，移除相关元素后的值: ['三国演义', '红楼梦', '西游记']</font></div><div>print(del_book)  <font color="#41AD1C"># 水浒传</font></div></div><div><br></div><ul><li><div>lindex(name, index)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的列表中根据索引获取列表中的元素</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>index: 索引</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>book = r.<font color="#FA7A00">lindex</font>(name='books', index=2)</div><div><br></div><div>print(book)  <font color="#41AD1C"># 西游记</font></div></div><div><br></div><ul><li><div>lrange(name, start, end)</div></li></ul><div><br></div><ul><ul><li><div>切片</div></li></ul></ul><div><br></div><ul><ul><li><div>只有通过切片才能获取到缓存列表中的所有数据</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>start: 索引的起始位置</div></li><li><div>end: 索引的结束位置</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>获取所有数据</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>all_data = r.<font color="#FA7A00">lrange</font>(name='books', start=0, end=-1)</div><div><br></div><div>print(all_data)  <font color="#41AD1C"># ['三国演义', '红楼梦', '西游记', '水浒传']</font></div></div><div><br></div><ul><ul><li><div>获取指定区域的数据</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>all_data = r.<font color="#FA7A00">lrange</font>(name='books', start=1, end=2)</div><div><br></div><div>print(all_data)  <font color="#41AD1C"># 所有的数据: ['三国演义', '红楼梦', '西游记', '水浒传']，切片后获取到的数据: ['红楼梦', '西游记']</font></div></div><div><br></div><ul><li><div>ltrim(name, start, end)</div></li></ul><div><br></div><ul><ul><li><div>移除name对应列表不在 start-end 范围内的值</div></li></ul></ul><div><br></div><ul><ul><li><div>和lrange的区别: lrange不修改原列表直接返回切片的结果，ltrim 直接修改原列表</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>start: 索引的起始位置</div></li><li><div>end: 索引的结束位置</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>all_data = r.<font color="#FA7A00">ltrim</font>(name='books', start=1, end=2)</div><div><br></div><div>print(all_data)  <font color="#41AD1C"># True</font></div><div>print(r.lrange('books', 0, -1))  <font color="#41AD1C"># 所有的数据: ['三国演义', '红楼梦', '西游记', '水浒传']，移除后的数据: ['红楼梦', '西游记']</font></div></div><div><br></div><ul><li><div>rpoplpush(src, dst)</div></li></ul><div><br></div><ul><ul><li><div>从一个列表取出最右边的元素，同时将其添加至另一个列表的最左边</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>src: 要取数据的列表的name</div></li><li><div>dst: 要添加数据的列表的name</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">rpoplpush</font>(src='library1', dst='library2')</div><div><br></div><div>print(r.lrange('library1', 0, -1))  <font color="#41AD1C"># 原本数据: ['book1_1', 'book1_2', 'book1_3']，执行 rpoplpush 后的数据: ['book1_1', 'book1_2']</font></div><div>print(r.lrange('library2', 0, -1))  <font color="#41AD1C"># 原本数据: ['book2_1', 'book2_2', 'book2_3']，执行 rpoplpush 后的数据: ['book1_3', 'book2_1', 'book2_2', 'book2_3']</font></div></div><div><br></div><ul><li><div>blpop(keys, timeout)</div></li></ul><div><br></div><ul><ul><li><div>移出并获取列表的第一个元素，如果列表没有元素就会进入阻塞直到等待超时或发现元素位置（如果没有设置 timeout 或者 timeout=0，那么当列表为空的时候就会阻塞着，直到列表有值）</div></li></ul></ul><div><br></div><ul><ul><li><div>返回值: 如果列表为空，返回 None，否则，返回一个列表，第一个元素: 本删除元素所属的name，第二元素: 被删除的值</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>keys: 缓存名的集合</div></li><li><div>timeout: 超时时间，当元素所有列表的元素获取完之后，阻塞等待列表内有数据的时间（秒）, 0 表示永远阻塞</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.rpush('list1', '一', '二', '三')</div><div>r.rpush('list2', '一', '二', '三')</div><div><br></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># ('list1', '一')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># ('list1', '二')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># ('list1', '三')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># ('list2', '一')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2)) <font color="#41AD1C"> # ('list2', '二')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># ('list2', '三')</font></div><div>print(r.<font color="#FA7A00">blpop</font>(keys=['list1', 'list2', 'list3'], timeout=2))  <font color="#41AD1C"># None -&gt; 因为 list3 为空</font></div><div><br></div><div>print(r.lrange('list1', 0, -1))  <font color="#41AD1C"># []</font></div><div>print(r.lrange('list2', 0, -1))  <font color="#41AD1C"># []</font></div></div><div><br></div><ul><li><div>brpoplpush(src, dst, timeout=0)</div></li></ul><div><br></div><ul><ul><li><div>从一个列表的右侧移除一个元素并将其添加到另一个列表的左侧，如果src的列表没有元素就会进入阻塞直到等待超时或发现元素位置（如果没有设置 timeout 或者 timeout=0，那么当列表为空的时候就会阻塞着，直到列表有值）</div></li></ul></ul><div><br></div><ul><ul><li><div>返回值: src 列表为空，返回None，否者，返回 src 列表被移除的最后一个元素</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>src: 要取数据的列表的name</div></li><li><div>dst: 要添加数据的列表的name</div></li><li><div>当src对应的列表中没有数据时，阻塞等待其有数据的超时时间（秒），0 表示永远阻塞</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.rpush('library1', 'book1_1', 'book1_2', 'book1_3')</div><div>r.rpush('library2', 'book2_1', 'book2_2', 'book2_3')</div><div><br></div><div>print(r.<font color="#FA7A00">brpoplpush</font>(src='library1', dst='library2', timeout=2))  <font color="#41AD1C"># book1_3</font></div><div>print(r.<font color="#FA7A00">brpoplpush</font>(src='library1', dst='library2', timeout=2))  <font color="#41AD1C"># book1_2</font></div><div>print(r.<font color="#FA7A00">brpoplpush</font>(src='library1', dst='library2', timeout=2))  <font color="#41AD1C"># book1_1</font></div><div>print(r.<font color="#FA7A00">brpoplpush</font>(src='library1', dst='library2', timeout=2))  <font color="#41AD1C"># None</font></div><div><br></div><div>print(r.lrange('library1', 0, -1))  <font color="#41AD1C"># []</font></div><div>print(r.lrange('library2', 0, -1))  <font color="#41AD1C"># ['book1_1', 'book1_2', 'book1_3', 'book2_1', 'book2_2', 'book2_3']</font></div></div><div><br></div><ul><li><div>自定义增量迭代</div></li></ul><div><br></div><ul><ul><li><div>由于redis类库中没有提供对列表元素的增量迭代，如果想要循环name对应的列表的所有元素，那么就需要：</div></li><ul><li><div>获取name对应的所有列表</div></li><li><div>循环列表</div></li></ul><li><div>但是，如果列表非常大，那么就有可能在第一步时就将程序的内容撑爆，所有有必要自定义一个增量迭代的功能：</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def list_iter(name):</div><div><font color="#41AD1C">&quot;&quot;&quot;</font></div><div><font color="#41AD1C">    自定义redis列表增量迭代</font></div><div><font color="#41AD1C">    :param name: redis中的name，即：迭代name对应的列表</font></div><div><font color="#41AD1C">    :return: yield 返回 列表元素</font></div><div><font color="#41AD1C">    &quot;&quot;&quot;</font></div><div>    list_count = r.llen(name)</div><div>    for index in range(list_count):</div><div>        yield r.lindex(name, index)</div><div><br></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 使用</font></div><div>for item in list_iter('pp'):</div><div>    print(item)</div></div><div><br></div></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">3.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">Hash（字典）类型的操作</span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div><img data-filename="未标题-3.png" src="/kevin-blog/Python/Redis 缓存_files/未标题-3.png" type="image/png" width="546"></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div>hset(name, key, value)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的hash中设置一个键值对（不存在，则创建；否则，修改）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>key: name对应的hash中的key</div></li><li><div>value: name对应的hash中的value</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hset</font>(name='info', key='username', value='Kevin')</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># {'username': 'Kevin'}</font></div></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div>hsetnx(name, key, value)</div></li></ul><div><br></div><ul><ul><li><div>当name对应的hash中不存在当前key时则创建（相当于只做添加）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>key: name对应的hash中的key</div></li><li><div>value: name对应的hash中的value</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hsetnx</font>(name='info', key='age', value='18')</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># {'username': 'Kevin', 'age': '18'}</font></div></div><div><br></div><ul><li><div>hmset(name, mapping)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的hash中批量设置键值对</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>mapping: 字典，如：{'k1':'v1', 'k2': 'v2'}</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hmset</font>(name='info', mapping={'username': 'Kevin', 'age': '18'})</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># {'age': '18', 'username': 'Kevin'}</font></div></div><div><br></div><ul><li><div><span style="font-size:12pt;">添加嵌套 hash 的方法</span></div></li></ul><div><br></div><ul><ul><li><div>方法一:</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>使用 json.dumps 序列化字典</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div>import <font color="#FA7A00">json</font></div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.hmset(name='info', mapping={</div><div>    'username': 'Kevin',</div><div>    'age': 18,</div><div>    'address': json.dumps({</div><div>        'province': '广东省',</div><div>        'city': '东莞市',</div><div>        'town': '南城'</div><div>    })</div><div>})</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># {'username': 'Kevin', 'address': '{&quot;province&quot;: &quot;\\u5e7f\\u4e1c\\u7701&quot;, &quot;town&quot;: &quot;\\u5357\\u57ce&quot;, &quot;city&quot;: &quot;\\u4e1c\\u839e\\u5e02&quot;}', 'age': '18'}</font></div><div><br></div><div>json_address = r.hget('info', 'address')</div><div>address = json.loads(json_address)</div><div><br></div><div>print(address) <font color="#41AD1C"> # {'province': '广东省', 'city': '东莞市', 'town': '南城'}</font></div></div><div><br></div><ul><ul><li><div><span style="font-size:12pt;">方法二:</span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div>使用: r.set + json.dumps</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div>import <font color="#FA7A00">json</font></div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_dic = {</div><div>    'username': 'Kevin',</div><div>    'age': 18,</div><div>    'address': {</div><div>        'province': '广东省',</div><div>        'city': '东莞市',</div><div>        'town': '南城'</div><div>    }</div><div>}</div><div><br></div><div>r.set(name='info', value=json.dumps(info_dic))</div><div><br></div><div>print(r.get('info'))  <font color="#41AD1C"># {&quot;username&quot;: &quot;Kevin&quot;, &quot;age&quot;: 18, &quot;address&quot;: {&quot;town&quot;: &quot;\u5357\u57ce&quot;, &quot;city&quot;: &quot;\u4e1c\u839e\u5e02&quot;, &quot;province&quot;: &quot;\u5e7f\u4e1c\u7701&quot;'+'}'+'}'}}</font></div><div><br></div><div>json_info = r.get('info')</div><div>info = json.loads(json_info)</div><div>address = info['address']</div><div>print(address)  <font color="#41AD1C"># {'province': '广东省', 'city': '东莞市', 'town': '南城'}</font></div></div><div><br></div><ul><ul><li><div>错误示范</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>不要直接编写嵌套 hash，因为不是json结构，无法通过 json.loads 解析出来</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.hmset(name='info', mapping={</div><div>    'username': 'Kevin',</div><div>    'age': 18,</div><div>    'address': {  <font color="#FF0000"># 必须是序列化后的字符串</font></div><div>        'province': '广东省',</div><div>        'city': '东莞市',</div><div>        'town': '南城'</div><div>    }</div><div>})</div></div><div><br></div><ul><li><div>hget(name, key)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的hash中根据key获取value</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>key: name对应的hash中的key</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>username = r.<font color="#FA7A00">hget</font>(name='info', key='username')</div><div><br></div><div>print(username)  <font color="#41AD1C"># Kevin</font></div></div><div><br></div><ul><li><div>hmget(name, keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的hash中获取多个key所对应的value值（即: 批量获取key的value值）</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>keys: key的集合，如: ['k1', 'k2', 'k3']</div></li><li><div>*args: keys 打散后的结果，如: k1, k2, k3</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_values = r.<font color="#FA7A00">hmget</font>(name='info', keys=['username', 'age'])</div><div><br></div><div>print(info_values)  <font color="#41AD1C"># ['Kevin', '18']</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_values = r.<font color="#FA7A00">hmget</font>('info', 'username', 'age')</div><div><br></div><div>print(info_values)  <font color="#41AD1C"># ['Kevin', '18']</font></div></div><div><br></div><ul><li><div>hgetall(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应hash的所有键值对</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info = r.<font color="#FA7A00">hgetall</font>('info')</div><div><br></div><div>print(info)  <font color="#41AD1C"># {'username': 'Kevin', 'age': '18'}</font></div></div><div><br></div><ul><li><div>hlen(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的hash中键值对的个数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_len = r.<font color="#FA7A00">hlen</font>('info')</div><div><br></div><div>print(info_len)  <font color="#41AD1C"># 值: {'username': 'Kevin', 'age': '18'}，长度: 2</font></div></div><div><br></div><ul><li><div>hkeys(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的hash中所有的key的值</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_keys = r.<font color="#FA7A00">hkeys</font>('info')</div><div><br></div><div>print(info_keys)  <font color="#41AD1C"># ['age', 'username']</font></div></div><div><br></div><ul><li><div>hvals(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的hash中所有的value的值</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_values = r.<font color="#FA7A00">hvals</font>('info')</div><div><br></div><div>print(info_values)  <font color="#41AD1C"># ['18', 'Kevin']</font></div></div><div><br></div><ul><li><div>hexists(name, key)</div></li></ul><div><br></div><ul><ul><li><div>检查name对应的hash是否存在当前传入的key</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>key: 需要检测的 key 名字</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>返回值: True/False</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>has_key = r.<font color="#FA7A00">hexists</font>(name='info', key='address')</div><div>print(has_key)  <font color="#41AD1C"># 值: {'age': '18', 'username': 'Kevin'}，检测结果: False</font></div><div><br></div><div>has_key = r.<font color="#FA7A00">hexists</font>(name='info', key='username')</div><div>print(has_key)  <font style="color:rgb(65, 173, 28);"># 值: {'age': '18', 'username': 'Kevin'}，检测结果: True</font></div></div><div><br></div><ul><li><div>hdel(name, *keys)</div></li></ul><div><br></div><ul><ul><li><div>将name对应的hash中指定key的键值对删除（即: 删除指定的键值对）</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>写法一</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hdel</font>('info', 'username', 'age')</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># 原本的值: {'username': 'Kevin', 'age': '18', 'address': '广东'}，删除后的值: {'address': '广东'}</font></div></div><div><br></div><ul><ul><ul><li><div>写法二</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>del_keys = ['username', 'age']</div><div><br></div><div>r.<font color="#FA7A00">hdel</font>('info', *del_keys)</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># 原本的值: {'username': 'Kevin', 'age': '18', 'address': '广东'}，删除后的值: {'address': '广东'}</font></div></div><div><br></div><ul><ul><li><div>将name对应的hash中的键值对清空</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>info_keys = r.hkeys('info')  <font color="#41AD1C"># 获取 info 的所有 key 值</font></div><div><br></div><div>r.<font color="#FA7A00">hdel</font>('info', *info_keys)</div><div><br></div><div>print(r.hgetall('info')) <font color="#41AD1C"> # 原本的值: {'username': 'Kevin', 'age': '18', 'address': '广东'}，删除后的值: {}</font></div></div><div><br></div></div><ul><li><div>hincrby(name, key, amount)</div></li></ul><div><br></div><ul><ul><li><div>整数自增name对应的hash中的指定key的值，当key不存在时，则创建key＝amount，否则，进行整数自增</div></li></ul></ul><div><br></div><ul><ul><li><div>需要自增的value必须是整数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数: </div></li><ul><li><div>name: 缓存名</div></li><li><div>key: name对应的hash中的key</div></li><li><div>amount: 每次自增的数量（即: 每次添加的数量），必须是整数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hincrby</font>(name='info', key='age', amount=2)</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># 原本的值: {'username': 'Kevin', 'age': '18'}，自增后的值: {'username': 'Kevin', 'age': '20'}</font></div></div><div><br></div><ul><li><div>hincrbyfloat(name, key, amount)</div></li></ul><div><br></div><ul><ul><li><div>浮点数自增name对应的hash中的指定key的值，当key不存在时，则创建key＝amount，否则，进行浮点数自增</div></li></ul></ul><div><br></div><ul><ul><li><div>需要自增的value可以是整数或浮点数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数: </div></li><ul><li><div>name: 缓存名</div></li><li><div>key: name对应的hash中的key</div></li><li><div>amount: 每次自增的数量（即: 每次添加的数量），可以是整数或浮点数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">hincrbyfloat</font>(name='info', key='age', amount=2.5)</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># 原本的值: {'username': 'Kevin', 'age': '20'}，自增后的值: {'username': 'Kevin', 'age': '22.5'}</font></div></div><div><br></div><ul><li><div>hscan(name, cursor, match, count)</div></li></ul><div><br></div><ul><ul><li><div>增量式迭代获取，对于数据大的数据非常有用，hscan可以实现分片的获取数据，并非一次性将数据全部获取完，从而防止内存被撑爆</div></li></ul></ul><div><br></div><ul><ul><li><div>当 hash 中的键值对数量过少的时候，hscan 是无效的</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>cursor: 游标（基于游标分批取获取数据）</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>返回值:</div></li><ul><li><div>返回值有两个</div></li><li><div>第一个: 游标 -&gt; 当游标为0的时候表示数据以及获取完</div></li><li><div>第二个: 获取到的值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>说明 hscan 的用法的写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.hmset('info', {</font></div><div><font color="#41AD1C">#         'username%s' % i: 'Kevin', 'age%s' % i: '18',</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>cursor1, data1 = r.<font color="#FA7A00">hscan</font>('info', cursor=0, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 1408 {'age873': '18', 'age834': '18', 'username817': 'Kevin', 'age370': '18', 'age49': '18', 'age349': '18', 'age420': '18', 'username647': 'Kevin', 'username309': 'Kevin', 'age25': '18', 'username261': 'Kevin'}</font></div><div>cursor2, data2 = r.<font color="#FA7A00">hscan</font>('info', cursor=cursor1, match=None, count=None)</div><div>print(cursor2, data2)  <font color="#41AD1C"># 1344 {'age880': '18', 'username439': 'Kevin', 'username964': 'Kevin', 'age640': '18', 'age769': '18', 'username807': 'Kevin', 'age478': '18', 'age605': '18', 'username629': 'Kevin', 'age990': '18', 'username457': 'Kevin'}</font></div><div>cursor1, data1 = r.<font color="#FA7A00">hscan</font>('info', cursor=cursor2, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 1472 {'username1011': 'Kevin', 'username494': 'Kevin', 'age329': '18', 'username987': 'Kevin', 'age426': '18', 'username927': 'Kevin', 'age993': '18', 'username884': 'Kevin', 'username786': 'Kevin', 'username624': 'Kevin'}</font></div></div><div><br></div><ul><ul><li><div>实际应用写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.hmset('info', {</font></div><div><font color="#41AD1C">#         'username%s' % i: 'Kevin', 'age%s' % i: '18',</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>cursor = 1</div><div><br></div><div>while cursor:</div><div>    cursor, data = r.<font color="#FA7A00">hscan</font>('info', cursor=cursor, match=None, count=None)</div><div>    print(cursor, data)</div></div><div><br></div><ul><li><div>hscan_iter(name, match, count)</div></li></ul><div><br></div><ul><ul><li><div>hscan_iter利用yield封装hscan创建的生成器，实现分批去redis中获取数据</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.hmset('info', {</font></div><div><font color="#41AD1C">#         'username%s' % i: 'Kevin', 'age%s' % i: '18',</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>for i in r.<font color="#FA7A00">hscan_iter</font>('info'):</div><div>    print(i)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">Set（集合）类型的操作，不允许有重复数据的列表</span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="未标题-4.png" src="/kevin-blog/Python/Redis 缓存_files/未标题-4.png" type="image/png" width="506"></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">sadd(name, values)</span></div></li></ul><div><br></div><ul><ul><li><div>在 name 对应的集合中添加元素</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>values: 要添加的元素，可以接收多个值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">sadd</font>('books', '三国演义', '红楼梦', '西游记', '水浒传')</div><div><br></div><div>print(r.smembers('books'))  <font color="#41AD1C"># {'红楼梦', '三国演义', '西游记', '水浒传'}</font></div></div><div><span style="font-size:14pt;"><br></span></div><ul><ul><li><div><span style="font-size:12pt;">写法二</span></div></li></ul></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size:9pt;">import redis</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">pool = redis.ConnectionPool(decode_responses=True)</font></div><div><font style="font-size:9pt;">r = redis.Redis(connection_pool=pool)</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">books = ['三国演义', '红楼梦', '西游记', '水浒传']</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">r.<font color="#FA7A00">sadd</font>('books', *books)</font></div><div><font style="font-size:9pt;"><br></font></div><div><font style="font-size:9pt;">print(r.smembers('books'))  <font color="#41AD1C"># {'红楼梦', '三国演义', '西游记', '水浒传'}</font></font></div></div><div><br></div><ul><li><div>scard(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的集合中元素个数</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>books_len = r.<font color="#FA7A00">scard</font>('books')</div><div><br></div><div>print(books_len)  <font color="#41AD1C"># 值: {'红楼梦', '三国演义', '西游记', '水浒传'}，长度: 4</font></div></div><div><br></div><ul><li><div>sdiff(keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>返回多个集合之间的差集</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>keys: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>，如: ['k1', 'k2', 'k3']</div></li><li><div>*args: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>打散后的结果，如: k1, k2, k3</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>diff = r.<font color="#FA7A00">sdiff</font>(['library1', 'library2'])</div><div><br></div><div>print(diff) <font color="#41AD1C"> # {'匆匆那年', '红楼梦'}</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>diff = r.<font color="#FA7A00">sdiff</font>('library1', 'library2')</div><div><br></div><div>print(diff)  <font color="#41AD1C"># {'匆匆那年', '红楼梦'}</font></div></div><div><br></div><ul><li><div>sdiffstore(dest, keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>将集合之间的差集存储在指定的集合中，如果指定的集合已存在，则会将其覆盖</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>dest: 存储差集的集合名称</div></li><li><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">keys:</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">，如: ['k1', 'k2', 'k3']</span></div></li><li><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">*args: </span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">打散后的结果，如: k1, k2, k3</span></div></li></ul></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_diff', 'testdata')</div><div>r.<span style="color:rgb(250, 122, 0);">sdiffstore</span>(dest='save_diff', keys=['library1', 'library2'])</div><div><br></div><div>print(r.smembers('save_diff'))  <span style="color:rgb(65, 173, 28);"># {'匆匆那年', '红楼梦'}</span></div></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><ul><ul><li><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;">写法二</div></li></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_diff', 'testdata')</div><div>r.<font color="#FA7A00">sdiffstore</font>('save_diff', 'library1', 'library2')</div><div><br></div><div>print(r.smembers('save_diff'))  <font color="#41AD1C"># {'匆匆那年', '红楼梦'}</font></div></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><ul><li><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;">sinter(keys, *args)</div></li></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"></div><div><br></div><ul><ul><li><div>返回多个集合之间的交集，不存在的集合 key 被视为空集，当给定集合当中有一个空集时，结果也为空集</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>keys: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>，如: ['k1', 'k2', 'k3']</div></li><li><div>*args: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>打散后的结果，如: k1, k2, k3</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>inter = r.<span style="color:rgb(250, 122, 0);">sinter</span>(['library1', 'library2'])</div><div><br></div><div>print(inter)  <span style="color:rgb(65, 173, 28);"># {'三国演义', '水浒传'}</span></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>inter = r.<font color="#FA7A00">sinter</font>('library1', 'library2')</div><div><br></div><div>print(inter)  <font color="#41AD1C"># {'三国演义', '水浒传'}</font></div></div><div><br></div><ul><li><div>sinterstore(dest, keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>将集合之间的交集存储在指定的集合中，如果指定的集合已存在，则会将其覆盖</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>dest: 存储交集的集合名称</div></li><li><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">keys:</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">，如: ['k1', 'k2', 'k3']</span></div></li><li><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">*args: </span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">打散后的结果，如: k1, k2, k3</span></div></li></ul></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_inter', 'testdata')</div><div>r.<font color="#FA7A00">sinterstore</font>(dest='save_inter', keys=['library1', 'library2'])</div><div><br></div><div>print(r.smembers('save_inter'))  <font color="#41AD1C"># {'水浒传', '三国演义'}</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_inter', 'testdata')</div><div>r.<font color="#FA7A00">sinterstore</font>('save_inter', 'library1', 'library2')</div><div><br></div><div>print(r.smembers('save_inter'))  <font color="#41AD1C"># {'水浒传', '三国演义'}</font></div></div><div><br></div><ul><li><div>sunion(keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>返回多个集合之间的并集，不存在的集合 key 被视为空集，当给定集合当中有一个空集时，结果也为空集</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>keys: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>，如: ['k1', 'k2', 'k3']</div></li><li><div>*args: <span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span>打散后的结果，如: k1, k2, k3</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>union = r.<font color="#FA7A00">sunion</font>(['library1', 'library2'])</div><div><br></div><div>print(union)  <font color="#41AD1C"># {'三国演义', '水浒传', '匆匆那年', '三体', '红楼梦', '西游记'}</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>union = r.<font color="#FA7A00">sunion</font>('library1', 'library2')</div><div><br></div><div>print(union) <font color="#41AD1C"> # {'三国演义', '水浒传', '匆匆那年', '三体', '红楼梦', '西游记'}</font></div></div><div><br></div><ul><li><div>sunionstore(dest, keys, *args)</div></li></ul><div><br></div><ul><ul><li><div>将集合之间的并集存储在指定的集合中，如果指定的集合已存在，则会将其覆盖</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>dest: 存储并集的集合名称</div></li><li><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">keys:</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">，如: ['k1', 'k2', 'k3']</span></div></li><li><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">*args: </span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">打散后的结果，如: k1, k2, k3</span></div></li></ul></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_union', 'testdata')</div><div>r.<font color="#FA7A00">sunionstore</font>(dest='save_union', keys=['library1', 'library2'])</div><div><br></div><div>print(r.smembers('save_union'))  <font color="#41AD1C"># {'匆匆那年', '水浒传', '三国演义', '三体', '西游记', '红楼梦'}</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.sadd('save_union', 'testdata')</div><div>r.<font color="#FA7A00">sunionstore</font>('save_union', 'library1', 'library2')</div><div><br></div><div>print(r.smembers('save_union'))  <font color="#41AD1C"># {'匆匆那年', '水浒传', '三国演义', '三体', '西游记', '红楼梦'}</font></div></div><div><br></div><ul><li><div>sismember(name, value)</div></li></ul><div><br></div><ul><ul><li><div>检查value是否是name对应的集合的成员</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要检测的值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>is_has = r.<font color="#FA7A00">sismember</font>(name='info', value='三国演义')</div><div><br></div><div>print(is_has)  <font color="#41AD1C"># 值: {'三国演义', '红楼梦', '水浒传', '西游记'}，检测后的结果: True</font></div></div><div><br></div><ul><li><div>smove(src, dst, value)</div></li></ul><div><br></div><ul><ul><li><div>将某个成员从一个集合中移动到另外一个集合</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>src: 要取数据的集合的name</div></li><li><div>dst: 要添加数据的集合的name</div></li><li><div>value: 要取的数据</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('library1', '三国演义', '红楼梦', '匆匆那年', '水浒传')</div><div>r.sadd('library2', '三国演义', '三体', '西游记', '水浒传')</div><div><br></div><div>r.<font color="#FA7A00">smove</font>(src='library1', dst='library2', value='匆匆那年')</div><div><br></div><div>print(r.smembers('library1'))  <font color="#41AD1C"># {'三国演义', '红楼梦', '水浒传'}</font></div><div>print(r.smembers('library2'))  <font color="#41AD1C"># {'三国演义', '匆匆那年', '三体', '西游记', '水浒传'}</font></div></div><div><br></div></div><ul><li><div>spop(name)</div></li></ul><div><br></div><ul><ul><li><div>删除集合中的最后一个成员，并将其返回</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>del_data = r.<font color="#FA7A00">spop</font>('books')</div><div><br></div><div>print(del_data)  <font color="#41AD1C"># 西游记</font></div></div><div><br></div><ul><li><div>srandmember(name, numbers)</div></li></ul><div><br></div><ul><ul><li><div>从 name 对应的集合中随机获取 numbers 个元素</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>numbers: 获取集合的成员个数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.sadd('books', '三国演义', '红楼梦', '水浒传', '西游记')</div><div><br></div><div>random_book = r.<font color="#FA7A00">srandmember</font>(name='books', number=3)</div><div><br></div><div>print(random_book)  <font color="#41AD1C"># ['红楼梦', '水浒传', '三国演义']</font></div></div><div><br></div><ul><li><div><span style="font-size:12pt;">srem(name, values)</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><ul><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">移除集合中的一个或多个成员元素，不存在的成员元素会被忽略</span></span></div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div><span style="font-size:12pt;">values</span>: 要移除的元素，可以接收多个值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">srem</font>('books', '红楼梦', '水浒传')</div><div><br></div><div>print(r.smembers('books'))  <font color="#41AD1C"># 原本的值: {'三国演义', '红楼梦', '水浒传', '西游记'}，删除后的值: {'三国演义', '西游记'}</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>books = ['红楼梦', '水浒传']</div><div>r.<font color="#FA7A00">srem</font>('books', *books)</div><div><br></div><div>print(r.smembers('books'))  <font color="#41AD1C"># 原本的值: {'三国演义', '红楼梦', '水浒传', '西游记'}，删除后的值: {'三国演义', '西游记'}</font></div></div><div><br></div><ul><li><div>sscan(name, cursor, match, count)</div></li></ul><div><br></div><ul><ul><li><div>增量式迭代获取，对于数据大的数据非常有用，sscan可以实现分片的获取数据，并非一次性将数据全部获取完，从而防止内存被撑爆</div></li></ul></ul><div><br></div><ul><ul><li><div>当集合中的成员数量过少的时候，sscan 是无效的</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>cursor: 游标（基于游标分批取获取数据）</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>返回值:</div></li><ul><li><div>返回值有两个</div></li><li><div>第一个: 游标 -&gt; 当游标为0的时候表示数据以及获取完</div></li><li><div>第二个: 获取到的值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>说明 sscan 的用法的写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.sadd('set_list', '数据%s' % i)</font></div><div><br></div><div>cursor1, data1 = r.<font color="#FA7A00">sscan</font>('set_list', cursor=0, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 896 ['数据235', '数据1002', '数据148', '数据719', '数据418', '数据754', '数据385', '数据715', '数据849', '数据1001']</font></div><div>cursor2, data2 = r.<font color="#FA7A00">sscan</font>('set_list', cursor=cursor1, match=None, count=None)</div><div>print(cursor2, data2)  <font color="#41AD1C"># 928 ['数据161', '数据976', '数据554', '数据126', '数据258', '数据328', '数据112', '数据707', '数据533', '数据115']</font></div><div>cursor1, data1 = r.<font color="#FA7A00">sscan</font>('set_list', cursor=cursor2, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 272 ['数据947', '数据721', '数据335', '数据127', '数据965', '数据79', '数据870', '数据455', '数据681', '数据307', '数据933']</font></div></div><div><br></div><ul><ul><li><div>实际应用写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.sadd('set_list', '数据%s' % i)</font></div><div><br></div><div>cursor = 1</div><div><br></div><div>while cursor:</div><div>    cursor, data = r.<font color="#FA7A00">sscan</font>('set_list', cursor=cursor, match=None, count=None)</div><div>    print(cursor, data)</div></div><div><br></div><ul><li><div>sscan_iter(name, match, count)</div></li></ul><div><br></div><ul><ul><li><div>sscan_iter利用yield封装sscan创建的生成器，实现分批去redis中获取数据</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.sadd('set_list', '数据%s' % i)</font></div><div><br></div><div>for i in r.<font color="#FA7A00">sscan_iter</font>('set_list'):</div><div>    print(i)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span> <span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">Sorted Set</span></span><span style="font-size:14pt;font-weight:bold;">（有序集合）类型的操作</span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="2542_0.png" src="/kevin-blog/Python/Redis 缓存_files/2542_0.png" type="image/png"></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>有序集合: </div></li><ul><li><div>在集合的基础上，为每元素排序；</div></li><li><div><span style="color:rgb(227, 0, 0);">元素的排序需要根据另外一个值来进行比较，所以，对于有序集合，每一个元素有两个值，即：值和分数，</span><span style="color:rgb(227, 0, 0);font-weight:bold;">分数专门用来做排序</span></div></li></ul></ul><div><br></div><ul><li><div>zadd(name, mapping, nx, xx, ch, incr)</div></li></ul><div><br></div><ul><ul><li><div>在name对应的有序集合中添加元素</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>mapping: 字典，如 {'值': 分数} -&gt; {'value': 1}</div></li><li><div>nx: 如果值为 True，当 name 不存在的时候，当前set操作才会执行</div></li><li><div>xx: 如果值为 True，当 name 存在的时候，当前set操作才会执行</div></li><li><div>ch: 如果值为 True，那么返回值就是添加或修改了多少个元素的个数</div></li><li><div>incr: 自增（+1），如果值为True，那么就会对某一个元素的分数自加1，且返回值是该元素的分数自加1的结果，并且 mapping 参数只能有一个键值对</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>一般的使用</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">zadd</font>(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3}) <font color="#FF0000"> # 根据分数进行排序，且 value 就是分数，key就是有序集合的值</font></div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True))  <font style="color:rgb(65, 173, 28);"># [('n1', 1.0), ('n2', 2.0), ('n3', 3.0)]</font></div></div><div><br></div><ul><ul><li><div>ch=True</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>add_num = r.<font color="#FA7A00">zadd</font>(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3, 'n4': 4, 'n5': 5}, <font color="#FA7A00">ch</font>=True)</div><div><br></div><div>print(add_num)  <font color="#41AD1C"># 2</font></div></div><div><br></div><ul><ul><li><div>incr=True</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>add_num = r.<font color="#FA7A00">zadd</font>(name='s_set', mapping={'n1': 1}, <font color="#FA7A00">incr</font>=True)</div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True))  <font color="#41AD1C"># 原本的值: [('n1', 1.0), ('n2', 2.0), ('n3', 3.0)]，当 incr=True 并且执行2次后: [('n2', 2.0), ('n1', 3.0), ('n3', 3.0)]</font></div></div><div><br></div><ul><li><div>zcard(name)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应的有序集合元素的数量</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>s_set_len = r.<font color="#FA7A00">zcard</font>('s_set')</div><div><br></div><div>print(s_set_len)  <font color="#41AD1C"># 值: [('n1', 1.0), ('n2', 2.0), ('n3', 3.0)]，长度: 3</font></div></div><div><br></div><ul><li><div>zcount(name, min, max)</div></li></ul><div><br></div><ul><ul><li><div>获取在 min-max 范围分数的个数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>min: 分数最小值</div></li><li><div>max: 分数最大值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>fraction_len = r.<font color="#FA7A00">zcount</font>(name='s_set', min=2, max=4)</div><div><br></div><div>print(fraction_len)  <font color="#41AD1C"># 值: [('n1', 1.0), ('n2', 2.0), ('n3', 3.0), ('n4', 4.0), ('n5', 5.0)]，长度: 3</font></div></div><div><br></div><ul><li><div>zincrby(name, value, amount)</div></li></ul><div><br></div></div><ul><ul><li><div>自增name对应的有序集合的 value 对应的分数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要自增分数的value</div></li><li><div>amount: 每次自增的数量（即: 每次添加的数量），必须是整数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">zincrby</font>(name='s_set', value='n1', amount=2) <font color="#41AD1C"> # 当前 n1 的分数为 1，自增后 n1 的分数为 3</font></div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True))  <font color="#41AD1C"># 没有自增前的值: [('n1', 1.0), ('n2', 2.0), ('n3', 3.0)]，自增后的值: [('n2', 2.0), ('n1', 3.0), ('n3', 3.0)]</font></div></div><div><br></div><ul><li><div>r.zrange(name, start, end, desc, withscores, score_cast_func)</div></li></ul><div><br></div><ul><ul><li><div>切片 + 排序 + 分数的显示</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>start: 有序集合索引起始位置（非分数）</div></li><li><div>end: 有序集合索引结束位置（非分数）</div></li><li><div>desc: 如果值True，那么就按照分数的降序排序，否则按照分数升序排序</div></li><li><div>withscores: 是否获取元素的分数，默认只获取元素的值</div></li><li><div>score_cast_func: 对分数进行数据转换的函数，默认使用的函数是 float，可以修改为 int</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>基本使用</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3, 'n4': 4, 'n5': 5})</div><div><br></div><div>s_set = r.<font color="#FA7A00">zrange</font>(name='s_set', start=1, end=3, desc=True, withscores=True, score_cast_func=int)</div><div><br></div><div>print(s_set)  <font color="#41AD1C"># [('n4', 4), ('n3', 3), ('n2', 2)]</font></div></div><div><br></div><ul><ul><li><div>获取有序集合的所有数据</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3, 'n4': 4, 'n5': 5})</div><div><br></div><div>s_set = r.<font color="#FA7A00">zrange</font>(name='s_set', start=0, end=-1, withscores=True, score_cast_func=int)</div><div><br></div><div>print(s_set)  <font color="#41AD1C"># [('n1', 1), ('n2', 2), ('n3', 3), ('n4', 4), ('n5', 5)]</font></div></div><div><br></div><ul><li><div>zrank(name, value)</div></li></ul><div><br></div><ul><ul><li><div>获取某个值在name对应的有序集合中的排行（先进行从小到大的排序，然后在进行获取） -&gt; 从 0 开始算起</div></li></ul></ul><div><br></div><ul><ul><li><div>参数</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要获取排行的值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>rank = r.<font color="#FA7A00">zrank</font>(name='s_set', value='n2')</div><div><br></div><div>print(rank)  <font color="#41AD1C"># 有序集合的值: [('n1', 1), ('n2', 2), ('n3', 3), ('n4', 4), ('n5', 5)]，n2 的排行: 1</font></div></div><div><br></div><ul><li><div>zrevrank(name, value)</div></li></ul><div><br></div><ul><ul><li><div>获取某个值在name对应的有序集合中的排行（先进行从大到小的排序，然后在进行获取） -&gt; 从 0 开始算起</div></li></ul></ul><div><br></div><ul><ul><li><div>参数</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 需要获取排行的值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>rank = r.<font color="#FA7A00">zrevrank</font>(name='s_set', value='n2')</div><div><br></div><div>print(rank)  <font color="#41AD1C"># 有序集合的值: [('n1', 1), ('n2', 2), ('n3', 3), ('n4', 4), ('n5', 5)]，n2 的排行: 3</font></div></div><div><br></div><ul><li><div>zrangebylex(name, min, max, start, num)</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 当有序集合的所有成员都具有相同的分值时，有序集合的元素会根据成员的 值 （lexicographical ordering）来进行排序，而这个命令则可以返回给定的有序集合键 key 中， 元素的值介于 min 和 max 之间的成员</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 对集合中的每个成员进行逐个字节的对比（byte-by-byte compare）， 并按照从低到高的顺序， 返回排序后的集合成员。 如果两个字符串有一部分内容是相同的话， 那么命令会认为较长的字符串比较短的字符串要大</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 参数：</font></div><div><font color="#41AD1C">    # name，redis的name</font></div><div><font color="#41AD1C">    # min，左区间（值）。 + 表示正无限； - 表示负无限； ( 表示开区间； [ 则表示闭区间</font></div><div><font color="#41AD1C">    # min，右区间（值）</font></div><div><font color="#41AD1C">    # start，对结果进行分片处理，索引位置</font></div><div><font color="#41AD1C">    # num，对结果进行分片处理，索引后面的num个元素</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 如：</font></div><div><font color="#41AD1C">    # ZADD myzset 0 aa 0 ba 0 ca 0 da 0 ea 0 fa 0 ga</font></div><div><font color="#41AD1C">    # r.zrangebylex('myzset', &quot;-&quot;, &quot;[ca&quot;) 结果为：['aa', 'ba', 'ca']</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 更多：</font></div><div><font color="#41AD1C">    # 从大到小排序</font></div><div><font color="#41AD1C">    # zrevrangebylex(name, max, min, start=None, num=None)</font></div></div><div><br></div><ul><li><div>zrem(name, values)</div></li></ul><div><br></div><ul><ul><li><div>移除有序集中的一个或多个成员，不存在的成员将被忽略</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div><span style="font-size:12pt;">values</span>: 要移除的元素，可以接收多个值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>写法一</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">zrem</font>('s_set', 'n2', 'n3', 'n4')</div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True, score_cast_func=int))  <font color="#41AD1C"># 未移除任何元素前的值: [('n1', 1), ('n2', 2), ('n3', 3), ('n4', 4), ('n5', 5)]，移除某些元素后的值: [('n1', 1), ('n5', 5)]</font></div></div><div><br></div><ul><ul><li><div>写法二</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r_s_set = ['n2', 'n3', 'n4']</div><div>r.<font color="#FA7A00">zrem</font>('s_set', *r_s_set)</div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True, score_cast_func=int))  <font color="#41AD1C"># 未移除任何元素前的值: [('n1', 1), ('n2', 2), ('n3', 3), ('n4', 4), ('n5', 5)]，移除某些元素后的值: [('n1', 1), ('n5', 5)]</font></div></div><div><br></div><ul><li><div>zremrangebyrank(name, min, max)</div></li></ul><div><br></div><ul><ul><li><div>删除在 min-max 范围排行内的成员 -&gt; （从大到小的排序，从0开始算起）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>min: 最小排行数</div></li><li><div>max: 最大排行树</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3, 'n4': 4, 'n5': 5})</div><div><br></div><div>r.<font color="#FA7A00">zremrangebyrank</font>(name='s_set', min=1, max=3)</div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True, score_cast_func=int)) <font color="#41AD1C"> # [('n1', 1), ('n5', 5)]</font></div></div><div><br></div><ul><li><div>zremrangebyscore(name, min, max)</div></li></ul><div><br></div><ul><ul><li><div>删除在 min-max 范围分数内的成员 -&gt; （从大到小的排序，从1开始算起）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>min: 最小分数</div></li><li><div>max: 最大分树</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='s_set', mapping={'n1': 1, 'n2': 2, 'n3': 3, 'n4': 4, 'n5': 5})</div><div><br></div><div>r.<font color="#FA7A00">zremrangebyscore</font>(name='s_set', min=1, max=3)</div><div><br></div><div>print(r.zrange('s_set', 0, -1, withscores=True, score_cast_func=int))  <font color="#41AD1C"># [('n4', 4), ('n5', 5)]</font></div></div><div><br></div><ul><li><div>zremrangebylex(name, min, max)</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 根据值返回删除</font></div></div><div><br></div><ul><li><div>zscore(name, value)</div></li></ul><div><br></div><ul><ul><li><div>获取name对应有序集合中 value 对应的分数</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>value: 要获取分数的value值</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>fraction = r.<font color="#FA7A00">zscore</font>(name='s_set', value='n3')</div><div><br></div><div>print(fraction)  <font color="#41AD1C"># 3.0</font></div></div><div><br></div><ul><li><div>zinterstore(dest, keys, aggregate)</div></li></ul><div><br></div><ul><ul><li><div>将有序集合之间的交集存储在指定的有序集合中，如果指定的有序集合已存在，则会将其覆盖，如果遇到相同值不同分数，则按照aggregate进行操作</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>dest: 指定的有序集合</div></li><li><div>keys: <span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">，如: ['k1', 'k2', 'k3']</span></div></li><li><div>aggregate: SUM  MIN  MAX</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='library1', mapping={'book1_1': 1, 'book': 2, 'book1_3': 3})</div><div>r.zadd(name='library2', mapping={'book2_1': 1, 'book': 2, 'book2_3': 3})</div><div><br></div><div>r.<font color="#FA7A00">zinterstore</font>(dest='l_boos', keys=['library1', 'library2'])</div><div><br></div><div>print(r.zrange('l_boos', 0, -1, withscores=True, score_cast_func=int))  <font color="#41AD1C"># [('book', 4)]</font></div></div><div><br></div><ul><li><div>zunionstore(dest, keys, aggregate)</div></li></ul><div><br></div><ul><ul><li><div>将有序集合之间的并集存储在指定的有序集合中，如果指定的有序集合已存在，则会将其覆盖，如果遇到相同值不同分数，则按照aggregate进行操作</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>dest: 指定的有序集合</div></li><li><div>keys: <span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">缓存名的集合</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">，如: ['k1', 'k2', 'k3']</span></div></li><li><div>aggregate: SUM  MIN  MAX</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.zadd(name='library1', mapping={'book1_1': 1, 'book': 2, 'book1_3': 3})</div><div>r.zadd(name='library2', mapping={'book2_1': 1, 'book': 2, 'book2_3': 3})</div><div><br></div><div>r.<font color="#FA7A00">zunionstore</font>(dest='l_boos', keys=['library1', 'library2'])</div><div><br></div><div>print(r.zrange('l_boos', 0, -1, withscores=True, score_cast_func=int))  <font color="#41AD1C"># [('book1_1', 1), ('book2_1', 1), ('book1_3', 3), ('book2_3', 3), ('book', 4)]</font></div></div><div><br></div><ul><li><div>zscan(name, cursor, match, count, score_cast_func)</div></li></ul><div><br></div><ul><ul><li><div>增量式迭代获取，对于数据大的数据非常有用，zscan可以实现分片的获取数据，并非一次性将数据全部获取完，从而防止内存被撑爆</div></li></ul></ul><div><br></div><ul><ul><li><div>当有序集合中的成员数量过少的时候，zscan 是无效的</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>cursor: 游标（基于游标分批取获取数据）</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li><li><div>score_cast_func: 对分数进行数据转换的函数，默认使用的函数是 float，可以修改为 int</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>返回值:</div></li><ul><li><div>返回值有两个</div></li><li><div>第一个: 游标 -&gt; 当游标为0的时候表示数据以及获取完</div></li><li><div>第二个: 获取到的值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>说明 zscan 的用法的写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.zadd('library', {</font></div><div><font color="#41AD1C">#         'book_%s' % i: i</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>cursor1, data1 = r.<font color="#FA7A00">zscan</font>('library', cursor=0, match=None, count=None, score_cast_func=int)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 64 [('book_1012', 1012), ('book_554', 554), ('book_532', 532), ('book_415', 415), ('book_335', 335), ('book_313', 313), ('book_162', 162), ('book_42', 42), ('book_41', 41), ('book_111', 111), ('book_121', 121)]</font></div><div>cursor2, data2 = r.<font color="#FA7A00">zscan</font>('library', cursor=cursor1, match=None, count=None, score_cast_func=int)</div><div>print(cursor2, data2)  <font color="#41AD1C"># 160 [('book_323', 323), ('book_236', 236), ('book_876', 876), ('book_675', 675), ('book_625', 625), ('book_549', 549), ('book_359', 359), ('book_285', 285), ('book_143', 143), ('book_814', 814), ('book_345', 345), ('book_130', 130)]</font></div><div>cursor1, data1 = r.<font color="#FA7A00">zscan</font>('library', cursor=cursor2, match=None, count=None, score_cast_func=int)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 224 [('book_976', 976), ('book_905', 905), ('book_553', 553), ('book_284', 284), ('book_138', 138), ('book_6', 6), ('book_737', 737), ('book_445', 445), ('book_411', 411), ('book_139', 139)]</font></div></div><div><br></div><ul><ul><li><div>实际应用写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.zadd('library', {</font></div><div><font color="#41AD1C">#         'book_%s' % i: i</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>cursor = 1</div><div><br></div><div>while cursor:</div><div>    cursor, data = r.<font color="#FA7A00">zscan</font>('library', cursor=cursor, match=None, count=None, score_cast_func=int)</div><div>    print(cursor, data)</div></div><div><br></div><ul><li><div>zscan_iter(name, match, count, score_cast_func)</div></li></ul><div><br></div><ul><ul><li><div>zscan_iter利用yield封装zscan创建的生成器，实现分批去redis中获取数据</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li><li><div>score_cast_func: 对分数进行数据转换的函数，默认使用的函数是 float，可以修改为 int</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.zadd('library', {</font></div><div><font color="#41AD1C">#         'book_%s' % i: i</font></div><div><font color="#41AD1C">#     })</font></div><div><br></div><div>for i in r.<font color="#FA7A00">zscan_iter</font>('library'):</div><div>    print(i)</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">6.</span> <span style="font-size:14pt;font-weight:bold;">其他常用方法</span></div><div><br></div><ul><li><div>delete(*names)</div></li></ul><div><br></div><ul><ul><li><div>删除一个或多个已存在的任意数据类型缓存，不存在则会被忽略</div></li></ul></ul><div><br></div><ul><ul><li><div>删除一个任意数据类型缓存</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">delete</font>('info')</div></div><div><br></div></div><ul><ul><li><div>删除多个数据类型缓存</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>写法一</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">delete</font>('info', 'str_data')</div></div><div><br></div><ul><ul><ul><li><div>写法二</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>names = ['info', 'str_data']</div><div>r.<font color="#FA7A00">delete</font>(*names)</div></div><div><br></div><ul><ul><li><div>删除全部的数据类型缓存</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">delete</font>(*r.keys())</div></div><div><br></div><ul><li><div>flushall()</div></li></ul><div><br></div><ul><ul><li><div>清空所有缓存</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.<font color="#FA7A00">flushall</font>()</div></div><div><br></div><ul><li><div>exists(name)</div></li></ul><div><br></div><ul><ul><li><div>检测缓存名是否存在</div></li></ul></ul><div><br></div><ul><ul><li><div>返回值: </div></li><ul><li><div>0 -&gt; 不存在</div></li><li><div>1 -&gt; 存在</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>isHas = r.<font color="#FA7A00">exists</font>('info')</div><div><br></div><div>print(isHas)  <font color="#41AD1C"># 1</font></div></div><div><br></div><ul><li><div>keys(pattern)</div></li></ul><div><br></div><ul><ul><li><div>根据 pattern 参数获取缓存名（即: 缓存key），如果 pattern 不传值，默认获取所有缓存名（即: 缓存key）</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>pattern: 相当于一个简单的正则</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># * -&gt; 获取所有缓存名</font></div><div><font color="#41AD1C">#</font> r.<font color="#FA7A00">keys</font>(pattern='*')</div><div><font color="#41AD1C"># 等价于</font></div><div>print(r.<font color="#FA7A00">keys</font>())  <font color="#41AD1C"># ['hxllo', 'hbbbllo', 's_key3', 'hallo', 'hdddllo', 's_key2', 's_key1', 'hello']</font></div><div><br></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><br></div><div><font color="#41AD1C"># xxx?xxx -&gt; ? 0个或1个</font></div><div>print(r.<font color="#FA7A00">keys</font>(pattern='h?llo'))  <font color="#41AD1C"># ['hxllo', 'hallo', 'hello']</font></div><div>print(r.<font color="#FA7A00">keys</font>(pattern='s_key?'))  <font color="#41AD1C"># ['s_key3', 's_key2', 's_key1']</font></div><div><font color="#FA7A00"><br></font></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># xxx*xxx -&gt; * 多个</font></div><div>print(r.<font color="#FA7A00">keys</font>(pattern='h*llo'))  <font color="#41AD1C"># ['hxllo', 'hbbbllo', 'hallo', 'hdddllo', 'hello']</font></div><div><br></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><br></div><div><font color="#41AD1C"># xxx[]xxx -&gt; 区域匹配</font></div><div>print(r.<font color="#FA7A00">keys</font>(pattern='h[ae]llo'))  <font color="#41AD1C"># ['hallo', 'hello']</font></div></div><div><br></div><ul><li><div>expire(name, time)</div></li></ul><div><br></div><ul><ul><li><div>给某一个缓存设置或修改超时时间 -&gt; list, hash, set, sorted set 可以通过该方法设置超时时间</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>name: 缓存名</div></li><li><div>time: 超时时间（单位: 秒）</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.hmset('info', {'username': 'Kevin', 'age': 18})</div><div><br></div><div>r.<font color="#FA7A00">expire</font>(name='info', time=10)</div></div><div><br></div><ul><li><div>rename(src, dst)</div></li></ul><div><br></div><ul><ul><li><div>重命名缓存名</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>src: 需要重命名的缓存名</div></li><li><div>dst: 新的缓存名</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r.hmset('info', {'username': 'Kevin', 'age': 18})</div><div><br></div><div>r.<font color="#FA7A00">rename</font>(src='info', dst='user_info')</div><div><br></div><div>print(r.hgetall('info'))  <font color="#41AD1C"># {}</font></div><div>print(r.hgetall('user_info'))  <font color="#41AD1C"># {'age': '18', 'username': 'Kevin'}</font></div></div><div><br></div><ul><li><div>move(name, db)</div></li></ul><div><br></div><ul><ul><li><div>将redis的某个值移动到指定的db下</div></li></ul></ul><div><br></div><ul><ul><li><div>将当前数据库的 key 移动到给定的数据库 db 当中,select可以设定当前的数据库，如有需要请看select命令因为我们默认使用的数据库是db0，我们可以使用下面的命令键 2 移动到数据库 1 中去</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>r.move(2,1)</div></div><div><br></div><ul><li><div>randomkey()</div></li></ul><div><br></div><ul><ul><li><div>随机获取一个缓存名</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>redis_name = r.<font color="#FA7A00">randomkey</font>()</div><div><br></div><div>print(redis_name)  <font color="#41AD1C"># user_info</font></div></div><div><br></div><ul><li><div>type(name)</div></li></ul><div><br></div><ul><ul><li><div>获取指定缓存名所对应值的类型</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div>r_type = r.<font color="#FA7A00">type</font>('user_info')</div><div><br></div><div>print(r_type)  <font color="#41AD1C"># hash</font></div></div><div><br></div><ul><li><div>scan(cursor, match, count)</div></li></ul><div><br></div><ul><ul><li><div>增量式迭代获取缓存名，对于数据大的数据非常有用，scan可以实现分片的获取数据，并非一次性将数据全部获取完，从而防止内存被撑爆</div></li></ul></ul><div><br></div><ul><ul><li><div>当缓存中的缓存名数量过少的时候，scan 是无效的</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>cursor: 游标（基于游标分批取获取数据）</div></li><li><div>match: 匹配指定key，默认None 表示所有的key</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>返回值:</div></li><ul><li><div>返回值有两个</div></li><li><div>第一个: 游标 -&gt; 当游标为0的时候表示数据以及获取完</div></li><li><div>第二个: 获取到的值</div></li></ul></ul></ul><div><br></div><ul><ul><li><div>说明 scan 的用法的写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.set('book_name%s' % i, 'book_%s' % i)</font></div><div><br></div><div>cursor1, data1 = r.<font color="#FA7A00">scan</font>(cursor=0, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 640 ['book_name633', 'book_name239', 'book_name180', 'book_name177', 'book_name464', 'book_name798', 'book_name193', 'book_name110', 'book_name972', 'book_name597']</font></div><div>cursor2, data2 = r.<font color="#FA7A00">scan</font>(cursor=cursor1, match=None, count=None)</div><div>print(cursor2, data2)  <font color="#41AD1C"># 192 ['book_name694', 'book_name623', 'book_name305', 'book_name1014', 'book_name885', 'book_name808', 'book_name434', 'book_name10', 'book_name461', 'book_name454']</font></div><div>cursor1, data1 = r.<font color="#FA7A00">scan</font>(cursor=cursor2, match=None, count=None)</div><div>print(cursor1, data1)  <font color="#41AD1C"># 672 ['book_name296', 'book_name322', 'book_name774', 'book_name721', 'book_name440', 'book_name674', 'book_name256', 'book_name204', 'book_name493', 'book_name18']</font></div></div><div><br></div><ul><ul><li><div>实际应用写法</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.set('book_name%s' % i, 'book_%s' % i)</font></div><div><br></div><div>cursor = 1</div><div><br></div><div>while cursor:</div><div>    cursor, data = r.<font color="#FA7A00">scan</font>(cursor=cursor, match=None, count=None)</div><div>    print(cursor, data)</div></div><div><br></div><ul><li><div>scan_iter(match=None, count=None)</div></li></ul><div><br></div><ul><ul><li><div>scan_iter利用yield封装scan创建的生成器，实现分批去redis中获取数据</div></li></ul></ul><div><br></div><ul><ul><li><div>decode_responses 参数的问题和 get(name) 方法一样（这里就不做演示了）</div></li></ul></ul><div><br></div><ul><ul><li><div>参数:</div></li><ul><li><div>match: 匹配指定key，默认None 表示所有的key，可以和keys方法一样支持模糊查询</div></li><li><div>count: 每次分片最少获取个数，默认None表示采用redis的默认分片个数</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import redis</div><div><br></div><div>pool = redis.ConnectionPool(decode_responses=True)</div><div>r = redis.Redis(connection_pool=pool)</div><div><br></div><div><font color="#41AD1C"># 写入 1024 条数据</font></div><div><font color="#41AD1C"># for i in range(1024):</font></div><div><font color="#41AD1C">#     r.set('book_name%s' % i, 'book_%s' % i)</font></div><div><br></div><div><font color="#41AD1C"># 获取所有缓存名</font></div><div>for i in r.<font color="#FA7A00">scan_iter</font>():</div><div>    print(i)</div><div><br></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><br></div><div><font color="#41AD1C"># xxx?xxx -&gt; ? 0个或1个</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">#</font> for i in r.<font color="#FA7A00">scan_iter</font>(match='h?llo'):</div><div><font color="#41AD1C"># 等同于</font></div><div>for i in r.<font color="#FA7A00">scan_iter</font>('h?llo'):</div><div>    print(i)  <font color="#41AD1C"># 'hxllo', 'hallo', 'hello'</font></div><div><br></div><div><font color="#41AD1C">#</font> for i in r.<font color="#FA7A00">scan_iter</font>(match='s_key?'):</div><div><font color="#41AD1C"># 等同于</font></div><div>for i in r.<font color="#FA7A00">scan_iter</font>('s_key?'):</div><div>    print(i)  <font color="#41AD1C"># 's_key3', 's_key2', 's_key1'</font></div><div><br></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><br></div><div><font color="#41AD1C"># xxx*xxx -&gt; * 多个</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">#</font> for i in r.<font color="#FA7A00">scan_iter</font>(match='h*llo'):</div><div><font color="#41AD1C"># 等同于</font></div><div>for i in r.<font color="#FA7A00">scan_iter</font>('h*llo'):</div><div>    print(i)  <font color="#41AD1C"># 'hxllo', 'hbbbllo', 'hallo', 'hdddllo', 'hello'</font></div><div><br></div><div><font color="#FA7A00"># -----------------------------------------------</font></div><div><br></div><div><font color="#41AD1C"># xxx[]xxx -&gt; 区域匹配</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">#</font> for i in r.<font color="#FA7A00">scan_iter</font>(match='h[ae]llo'):</div><div><font color="#41AD1C"># 等同于</font></div><div>for i in r.<font color="#FA7A00">scan_iter</font>('h[ae]llo'):</div><div>    print(i)  <font color="#41AD1C"># 'hallo', 'hello'</font></div></div><div><br></div></div><div><br></div></span></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kevin-blog/Python/Python2 和 Python3 的区别.html" class="prev">
        Python2 和 Python3 的区别
      </a></span> <span class="next"><a href="/kevin-blog/Python/SQLAchemy 模块.html">
        SQLAchemy 模块
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/kevin-blog/assets/js/app.dd46475d.js" defer></script><script src="/kevin-blog/assets/js/2.97d04891.js" defer></script><script src="/kevin-blog/assets/js/201.767e166e.js" defer></script>
  </body>
</html>
