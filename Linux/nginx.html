<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>nginx | Kevin-Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/kevin-blog/logo.png">
    <meta name="description" content="">
    <link rel="preload" href="/kevin-blog/assets/css/0.styles.267bc68b.css" as="style"><link rel="preload" href="/kevin-blog/assets/js/app.dd46475d.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/2.97d04891.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/144.d05092f0.js" as="script"><link rel="prefetch" href="/kevin-blog/assets/js/10.2b686438.js"><link rel="prefetch" href="/kevin-blog/assets/js/100.cfc5acd5.js"><link rel="prefetch" href="/kevin-blog/assets/js/101.628bd39e.js"><link rel="prefetch" href="/kevin-blog/assets/js/102.41585307.js"><link rel="prefetch" href="/kevin-blog/assets/js/103.5d18350a.js"><link rel="prefetch" href="/kevin-blog/assets/js/104.85cd65cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/105.9d303bac.js"><link rel="prefetch" href="/kevin-blog/assets/js/106.73f6a263.js"><link rel="prefetch" href="/kevin-blog/assets/js/107.9dfe114c.js"><link rel="prefetch" href="/kevin-blog/assets/js/108.315e8c63.js"><link rel="prefetch" href="/kevin-blog/assets/js/109.ef21ffa0.js"><link rel="prefetch" href="/kevin-blog/assets/js/11.2b0f6358.js"><link rel="prefetch" href="/kevin-blog/assets/js/110.dfe062a3.js"><link rel="prefetch" href="/kevin-blog/assets/js/111.08f0c3e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/112.0e180f10.js"><link rel="prefetch" href="/kevin-blog/assets/js/113.295f1fca.js"><link rel="prefetch" href="/kevin-blog/assets/js/114.5645d09d.js"><link rel="prefetch" href="/kevin-blog/assets/js/115.ebe19212.js"><link rel="prefetch" href="/kevin-blog/assets/js/116.b3eb5cab.js"><link rel="prefetch" href="/kevin-blog/assets/js/117.076c6372.js"><link rel="prefetch" href="/kevin-blog/assets/js/118.226fb513.js"><link rel="prefetch" href="/kevin-blog/assets/js/119.298c0302.js"><link rel="prefetch" href="/kevin-blog/assets/js/12.01390043.js"><link rel="prefetch" href="/kevin-blog/assets/js/120.943d0d71.js"><link rel="prefetch" href="/kevin-blog/assets/js/121.2d1bd8ef.js"><link rel="prefetch" href="/kevin-blog/assets/js/122.84b9dff1.js"><link rel="prefetch" href="/kevin-blog/assets/js/123.85d93d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/124.4913aefd.js"><link rel="prefetch" href="/kevin-blog/assets/js/125.cf667169.js"><link rel="prefetch" href="/kevin-blog/assets/js/126.eefd3250.js"><link rel="prefetch" href="/kevin-blog/assets/js/127.f9697daf.js"><link rel="prefetch" href="/kevin-blog/assets/js/128.aff6033d.js"><link rel="prefetch" href="/kevin-blog/assets/js/129.fa7ec9a8.js"><link rel="prefetch" href="/kevin-blog/assets/js/13.e55a4126.js"><link rel="prefetch" href="/kevin-blog/assets/js/130.9d50b78d.js"><link rel="prefetch" href="/kevin-blog/assets/js/131.f384aa34.js"><link rel="prefetch" href="/kevin-blog/assets/js/132.e60091dc.js"><link rel="prefetch" href="/kevin-blog/assets/js/133.09a9de16.js"><link rel="prefetch" href="/kevin-blog/assets/js/134.a7739a99.js"><link rel="prefetch" href="/kevin-blog/assets/js/135.bea491db.js"><link rel="prefetch" href="/kevin-blog/assets/js/136.92af3a82.js"><link rel="prefetch" href="/kevin-blog/assets/js/137.dbda7b02.js"><link rel="prefetch" href="/kevin-blog/assets/js/138.9fea4ca4.js"><link rel="prefetch" href="/kevin-blog/assets/js/139.0a81aff9.js"><link rel="prefetch" href="/kevin-blog/assets/js/14.efd69f3b.js"><link rel="prefetch" href="/kevin-blog/assets/js/140.3f048218.js"><link rel="prefetch" href="/kevin-blog/assets/js/141.002d7568.js"><link rel="prefetch" href="/kevin-blog/assets/js/142.aec10062.js"><link rel="prefetch" href="/kevin-blog/assets/js/143.2e682c5b.js"><link rel="prefetch" href="/kevin-blog/assets/js/145.358437b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/146.af219f24.js"><link rel="prefetch" href="/kevin-blog/assets/js/147.061cb5fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/148.422d1f87.js"><link rel="prefetch" href="/kevin-blog/assets/js/149.c97f27f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/15.271f58eb.js"><link rel="prefetch" href="/kevin-blog/assets/js/150.177533a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/151.d70f314c.js"><link rel="prefetch" href="/kevin-blog/assets/js/152.ca40e6fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/153.a2bca317.js"><link rel="prefetch" href="/kevin-blog/assets/js/154.22edbf9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/155.e59b2d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/156.d5a38de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/157.cbe5199a.js"><link rel="prefetch" href="/kevin-blog/assets/js/158.31c5b8b2.js"><link rel="prefetch" href="/kevin-blog/assets/js/159.0763ed0c.js"><link rel="prefetch" href="/kevin-blog/assets/js/16.e92cdd55.js"><link rel="prefetch" href="/kevin-blog/assets/js/160.a05ced02.js"><link rel="prefetch" href="/kevin-blog/assets/js/161.7e52ed13.js"><link rel="prefetch" href="/kevin-blog/assets/js/162.f5df7208.js"><link rel="prefetch" href="/kevin-blog/assets/js/163.78a78de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/164.54fd347c.js"><link rel="prefetch" href="/kevin-blog/assets/js/165.a0347ed3.js"><link rel="prefetch" href="/kevin-blog/assets/js/166.0702e96e.js"><link rel="prefetch" href="/kevin-blog/assets/js/167.69136cd0.js"><link rel="prefetch" href="/kevin-blog/assets/js/168.d0aa7e0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/169.6229f0ca.js"><link rel="prefetch" href="/kevin-blog/assets/js/17.9a006e5d.js"><link rel="prefetch" href="/kevin-blog/assets/js/170.b6571721.js"><link rel="prefetch" href="/kevin-blog/assets/js/171.600f9683.js"><link rel="prefetch" href="/kevin-blog/assets/js/172.6e1792a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/173.cef126b3.js"><link rel="prefetch" href="/kevin-blog/assets/js/174.97b3e897.js"><link rel="prefetch" href="/kevin-blog/assets/js/175.fcefca30.js"><link rel="prefetch" href="/kevin-blog/assets/js/176.31862a66.js"><link rel="prefetch" href="/kevin-blog/assets/js/177.089b09c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/178.a5dcd25c.js"><link rel="prefetch" href="/kevin-blog/assets/js/179.a9d685f2.js"><link rel="prefetch" href="/kevin-blog/assets/js/18.a1c24192.js"><link rel="prefetch" href="/kevin-blog/assets/js/180.4ad69266.js"><link rel="prefetch" href="/kevin-blog/assets/js/181.691d48a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/182.e77aa679.js"><link rel="prefetch" href="/kevin-blog/assets/js/183.2b4341f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/184.b3610e8b.js"><link rel="prefetch" href="/kevin-blog/assets/js/185.08107897.js"><link rel="prefetch" href="/kevin-blog/assets/js/186.9f5a3f65.js"><link rel="prefetch" href="/kevin-blog/assets/js/187.ac2fe2c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/188.09023a78.js"><link rel="prefetch" href="/kevin-blog/assets/js/189.409b4ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/19.c733cdfe.js"><link rel="prefetch" href="/kevin-blog/assets/js/190.ca5d775c.js"><link rel="prefetch" href="/kevin-blog/assets/js/191.8052fe42.js"><link rel="prefetch" href="/kevin-blog/assets/js/192.31ebe059.js"><link rel="prefetch" href="/kevin-blog/assets/js/193.9bf32e11.js"><link rel="prefetch" href="/kevin-blog/assets/js/194.0667554a.js"><link rel="prefetch" href="/kevin-blog/assets/js/195.ea249ba4.js"><link rel="prefetch" href="/kevin-blog/assets/js/196.6278ec5a.js"><link rel="prefetch" href="/kevin-blog/assets/js/197.90f6af7b.js"><link rel="prefetch" href="/kevin-blog/assets/js/198.2e358b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/199.a0bd0085.js"><link rel="prefetch" href="/kevin-blog/assets/js/20.890583ea.js"><link rel="prefetch" href="/kevin-blog/assets/js/200.bc1e237a.js"><link rel="prefetch" href="/kevin-blog/assets/js/201.767e166e.js"><link rel="prefetch" href="/kevin-blog/assets/js/202.a52f0e94.js"><link rel="prefetch" href="/kevin-blog/assets/js/203.06f0ebab.js"><link rel="prefetch" href="/kevin-blog/assets/js/204.7ae45191.js"><link rel="prefetch" href="/kevin-blog/assets/js/205.b8412fbc.js"><link rel="prefetch" href="/kevin-blog/assets/js/206.682f9a3e.js"><link rel="prefetch" href="/kevin-blog/assets/js/207.8978346c.js"><link rel="prefetch" href="/kevin-blog/assets/js/208.35db8c05.js"><link rel="prefetch" href="/kevin-blog/assets/js/209.1eebeab0.js"><link rel="prefetch" href="/kevin-blog/assets/js/21.48328b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/210.b56db64f.js"><link rel="prefetch" href="/kevin-blog/assets/js/211.31da36f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/212.2f2d2d1f.js"><link rel="prefetch" href="/kevin-blog/assets/js/213.be55b8cc.js"><link rel="prefetch" href="/kevin-blog/assets/js/214.aeffc247.js"><link rel="prefetch" href="/kevin-blog/assets/js/215.137bae15.js"><link rel="prefetch" href="/kevin-blog/assets/js/216.2692c636.js"><link rel="prefetch" href="/kevin-blog/assets/js/217.a6a9cf62.js"><link rel="prefetch" href="/kevin-blog/assets/js/218.7353ed7a.js"><link rel="prefetch" href="/kevin-blog/assets/js/219.f1fdfe8e.js"><link rel="prefetch" href="/kevin-blog/assets/js/22.5fd865e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/220.e20ab2b5.js"><link rel="prefetch" href="/kevin-blog/assets/js/221.0d06c8b0.js"><link rel="prefetch" href="/kevin-blog/assets/js/222.e39491a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/223.ae98df72.js"><link rel="prefetch" href="/kevin-blog/assets/js/224.4ba5d334.js"><link rel="prefetch" href="/kevin-blog/assets/js/225.913ee059.js"><link rel="prefetch" href="/kevin-blog/assets/js/226.b8d730bd.js"><link rel="prefetch" href="/kevin-blog/assets/js/227.69ee92e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/228.1cf17cff.js"><link rel="prefetch" href="/kevin-blog/assets/js/229.6ce44fac.js"><link rel="prefetch" href="/kevin-blog/assets/js/23.9ef4ab20.js"><link rel="prefetch" href="/kevin-blog/assets/js/230.30c28e05.js"><link rel="prefetch" href="/kevin-blog/assets/js/231.ef327150.js"><link rel="prefetch" href="/kevin-blog/assets/js/232.6cb791d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/233.473fa94b.js"><link rel="prefetch" href="/kevin-blog/assets/js/234.848de787.js"><link rel="prefetch" href="/kevin-blog/assets/js/235.f5db4ed9.js"><link rel="prefetch" href="/kevin-blog/assets/js/236.5da3f87c.js"><link rel="prefetch" href="/kevin-blog/assets/js/237.018a543d.js"><link rel="prefetch" href="/kevin-blog/assets/js/238.74d22845.js"><link rel="prefetch" href="/kevin-blog/assets/js/239.fca187a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/24.3dff5faa.js"><link rel="prefetch" href="/kevin-blog/assets/js/240.0dbbfe84.js"><link rel="prefetch" href="/kevin-blog/assets/js/241.8b1ccf29.js"><link rel="prefetch" href="/kevin-blog/assets/js/242.f5216a9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/243.8e5c5e34.js"><link rel="prefetch" href="/kevin-blog/assets/js/244.8f78ae9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/245.e0b2e7b9.js"><link rel="prefetch" href="/kevin-blog/assets/js/246.7700207e.js"><link rel="prefetch" href="/kevin-blog/assets/js/247.c1e13b57.js"><link rel="prefetch" href="/kevin-blog/assets/js/248.63d6adf8.js"><link rel="prefetch" href="/kevin-blog/assets/js/249.500fdd00.js"><link rel="prefetch" href="/kevin-blog/assets/js/25.0ebddc27.js"><link rel="prefetch" href="/kevin-blog/assets/js/250.ebbb5c92.js"><link rel="prefetch" href="/kevin-blog/assets/js/251.4e51605e.js"><link rel="prefetch" href="/kevin-blog/assets/js/252.2534bb33.js"><link rel="prefetch" href="/kevin-blog/assets/js/253.330d0073.js"><link rel="prefetch" href="/kevin-blog/assets/js/254.da99904b.js"><link rel="prefetch" href="/kevin-blog/assets/js/255.f9a1774e.js"><link rel="prefetch" href="/kevin-blog/assets/js/256.7ee8ac66.js"><link rel="prefetch" href="/kevin-blog/assets/js/257.41594669.js"><link rel="prefetch" href="/kevin-blog/assets/js/258.9d8beffc.js"><link rel="prefetch" href="/kevin-blog/assets/js/259.1539043a.js"><link rel="prefetch" href="/kevin-blog/assets/js/26.7e91ac9d.js"><link rel="prefetch" href="/kevin-blog/assets/js/260.034695f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/261.953910a0.js"><link rel="prefetch" href="/kevin-blog/assets/js/262.e2b0764f.js"><link rel="prefetch" href="/kevin-blog/assets/js/263.fe9b0b70.js"><link rel="prefetch" href="/kevin-blog/assets/js/264.489e20f7.js"><link rel="prefetch" href="/kevin-blog/assets/js/265.43596b34.js"><link rel="prefetch" href="/kevin-blog/assets/js/266.07bb7008.js"><link rel="prefetch" href="/kevin-blog/assets/js/267.5caf5b93.js"><link rel="prefetch" href="/kevin-blog/assets/js/268.fc6e09e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/269.764500c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/27.55c7093f.js"><link rel="prefetch" href="/kevin-blog/assets/js/270.9760648a.js"><link rel="prefetch" href="/kevin-blog/assets/js/271.019b1f9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/272.bce07ec6.js"><link rel="prefetch" href="/kevin-blog/assets/js/273.038ff1e3.js"><link rel="prefetch" href="/kevin-blog/assets/js/274.2cb7fd59.js"><link rel="prefetch" href="/kevin-blog/assets/js/275.3c831af6.js"><link rel="prefetch" href="/kevin-blog/assets/js/276.8d0732f8.js"><link rel="prefetch" href="/kevin-blog/assets/js/277.5aa0c664.js"><link rel="prefetch" href="/kevin-blog/assets/js/278.a3cdd3b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/279.d049a479.js"><link rel="prefetch" href="/kevin-blog/assets/js/28.da28db4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/280.6b7f68c4.js"><link rel="prefetch" href="/kevin-blog/assets/js/281.eff251cb.js"><link rel="prefetch" href="/kevin-blog/assets/js/282.f0dc7866.js"><link rel="prefetch" href="/kevin-blog/assets/js/283.36ca2fb9.js"><link rel="prefetch" href="/kevin-blog/assets/js/284.470e6db4.js"><link rel="prefetch" href="/kevin-blog/assets/js/285.a9c60b36.js"><link rel="prefetch" href="/kevin-blog/assets/js/286.3eff6f51.js"><link rel="prefetch" href="/kevin-blog/assets/js/287.f406cf63.js"><link rel="prefetch" href="/kevin-blog/assets/js/288.d6bb5731.js"><link rel="prefetch" href="/kevin-blog/assets/js/289.518409f3.js"><link rel="prefetch" href="/kevin-blog/assets/js/29.37ea8137.js"><link rel="prefetch" href="/kevin-blog/assets/js/290.e4795980.js"><link rel="prefetch" href="/kevin-blog/assets/js/291.6ca97e3d.js"><link rel="prefetch" href="/kevin-blog/assets/js/292.f434852f.js"><link rel="prefetch" href="/kevin-blog/assets/js/293.256f39e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/294.0e051edc.js"><link rel="prefetch" href="/kevin-blog/assets/js/295.d6a1cfbb.js"><link rel="prefetch" href="/kevin-blog/assets/js/296.9a3f4bb2.js"><link rel="prefetch" href="/kevin-blog/assets/js/297.374bbc2d.js"><link rel="prefetch" href="/kevin-blog/assets/js/298.c37b0145.js"><link rel="prefetch" href="/kevin-blog/assets/js/299.008098d2.js"><link rel="prefetch" href="/kevin-blog/assets/js/3.0c6053de.js"><link rel="prefetch" href="/kevin-blog/assets/js/30.24e20f30.js"><link rel="prefetch" href="/kevin-blog/assets/js/300.ab07139a.js"><link rel="prefetch" href="/kevin-blog/assets/js/301.69ee5ffa.js"><link rel="prefetch" href="/kevin-blog/assets/js/302.05af46d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/303.cec1cf65.js"><link rel="prefetch" href="/kevin-blog/assets/js/304.7c82ba6c.js"><link rel="prefetch" href="/kevin-blog/assets/js/305.7ac25f4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/306.82149841.js"><link rel="prefetch" href="/kevin-blog/assets/js/307.f56afc9c.js"><link rel="prefetch" href="/kevin-blog/assets/js/308.7c084ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/309.feb89623.js"><link rel="prefetch" href="/kevin-blog/assets/js/31.19d1e3af.js"><link rel="prefetch" href="/kevin-blog/assets/js/310.1e33889a.js"><link rel="prefetch" href="/kevin-blog/assets/js/311.416e7d20.js"><link rel="prefetch" href="/kevin-blog/assets/js/312.ee11dbec.js"><link rel="prefetch" href="/kevin-blog/assets/js/313.f58bb112.js"><link rel="prefetch" href="/kevin-blog/assets/js/314.543b2b1c.js"><link rel="prefetch" href="/kevin-blog/assets/js/315.18b9a70e.js"><link rel="prefetch" href="/kevin-blog/assets/js/316.6dfba854.js"><link rel="prefetch" href="/kevin-blog/assets/js/317.19590777.js"><link rel="prefetch" href="/kevin-blog/assets/js/318.a3ec0c19.js"><link rel="prefetch" href="/kevin-blog/assets/js/319.f990a61a.js"><link rel="prefetch" href="/kevin-blog/assets/js/32.07887ecb.js"><link rel="prefetch" href="/kevin-blog/assets/js/320.a3c5cbbf.js"><link rel="prefetch" href="/kevin-blog/assets/js/321.1f58e49c.js"><link rel="prefetch" href="/kevin-blog/assets/js/322.032ff5a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/323.cdd3ba68.js"><link rel="prefetch" href="/kevin-blog/assets/js/324.5238a4e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/325.df06c071.js"><link rel="prefetch" href="/kevin-blog/assets/js/33.9539a78e.js"><link rel="prefetch" href="/kevin-blog/assets/js/34.fa08dd12.js"><link rel="prefetch" href="/kevin-blog/assets/js/35.d6823664.js"><link rel="prefetch" href="/kevin-blog/assets/js/36.5e074071.js"><link rel="prefetch" href="/kevin-blog/assets/js/37.f4a65a95.js"><link rel="prefetch" href="/kevin-blog/assets/js/38.4f127420.js"><link rel="prefetch" href="/kevin-blog/assets/js/39.a5427f94.js"><link rel="prefetch" href="/kevin-blog/assets/js/4.a60d4c06.js"><link rel="prefetch" href="/kevin-blog/assets/js/40.859a530c.js"><link rel="prefetch" href="/kevin-blog/assets/js/41.b61d8247.js"><link rel="prefetch" href="/kevin-blog/assets/js/42.cd204014.js"><link rel="prefetch" href="/kevin-blog/assets/js/43.8076c8fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/44.8a85cf72.js"><link rel="prefetch" href="/kevin-blog/assets/js/45.f46f354b.js"><link rel="prefetch" href="/kevin-blog/assets/js/46.5990e5be.js"><link rel="prefetch" href="/kevin-blog/assets/js/47.9381b746.js"><link rel="prefetch" href="/kevin-blog/assets/js/48.77d95473.js"><link rel="prefetch" href="/kevin-blog/assets/js/49.fc6dff0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/5.6b8c7ebc.js"><link rel="prefetch" href="/kevin-blog/assets/js/50.297dac6d.js"><link rel="prefetch" href="/kevin-blog/assets/js/51.c6ed15a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/52.8bb5ec6f.js"><link rel="prefetch" href="/kevin-blog/assets/js/53.32ab5818.js"><link rel="prefetch" href="/kevin-blog/assets/js/54.1fe541f9.js"><link rel="prefetch" href="/kevin-blog/assets/js/55.6084b23b.js"><link rel="prefetch" href="/kevin-blog/assets/js/56.242cd75a.js"><link rel="prefetch" href="/kevin-blog/assets/js/57.a3aa61b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/58.5dc813ec.js"><link rel="prefetch" href="/kevin-blog/assets/js/59.0649b9f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/6.8f60ce79.js"><link rel="prefetch" href="/kevin-blog/assets/js/60.e912e60f.js"><link rel="prefetch" href="/kevin-blog/assets/js/61.2348484b.js"><link rel="prefetch" href="/kevin-blog/assets/js/62.43b03d30.js"><link rel="prefetch" href="/kevin-blog/assets/js/63.6e56096d.js"><link rel="prefetch" href="/kevin-blog/assets/js/64.c45908b4.js"><link rel="prefetch" href="/kevin-blog/assets/js/65.aab0a20e.js"><link rel="prefetch" href="/kevin-blog/assets/js/66.2555ebea.js"><link rel="prefetch" href="/kevin-blog/assets/js/67.80828b1b.js"><link rel="prefetch" href="/kevin-blog/assets/js/68.5b1b38ff.js"><link rel="prefetch" href="/kevin-blog/assets/js/69.d735686b.js"><link rel="prefetch" href="/kevin-blog/assets/js/7.8fc0c0e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/70.fd567fdf.js"><link rel="prefetch" href="/kevin-blog/assets/js/71.3dc39cbd.js"><link rel="prefetch" href="/kevin-blog/assets/js/72.6fe3454c.js"><link rel="prefetch" href="/kevin-blog/assets/js/73.80c96fab.js"><link rel="prefetch" href="/kevin-blog/assets/js/74.7b652913.js"><link rel="prefetch" href="/kevin-blog/assets/js/75.a9cc5506.js"><link rel="prefetch" href="/kevin-blog/assets/js/76.81bca567.js"><link rel="prefetch" href="/kevin-blog/assets/js/77.1851c464.js"><link rel="prefetch" href="/kevin-blog/assets/js/78.06a9be2e.js"><link rel="prefetch" href="/kevin-blog/assets/js/79.89ac9186.js"><link rel="prefetch" href="/kevin-blog/assets/js/8.d7f3575e.js"><link rel="prefetch" href="/kevin-blog/assets/js/80.76b8cfc2.js"><link rel="prefetch" href="/kevin-blog/assets/js/81.7c87b7a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/82.1995f469.js"><link rel="prefetch" href="/kevin-blog/assets/js/83.dd77915d.js"><link rel="prefetch" href="/kevin-blog/assets/js/84.d167dd7d.js"><link rel="prefetch" href="/kevin-blog/assets/js/85.b858e7d4.js"><link rel="prefetch" href="/kevin-blog/assets/js/86.c4508e18.js"><link rel="prefetch" href="/kevin-blog/assets/js/87.e5015ac2.js"><link rel="prefetch" href="/kevin-blog/assets/js/88.03ea7184.js"><link rel="prefetch" href="/kevin-blog/assets/js/89.6c4aecd6.js"><link rel="prefetch" href="/kevin-blog/assets/js/9.541bf307.js"><link rel="prefetch" href="/kevin-blog/assets/js/90.e64c083e.js"><link rel="prefetch" href="/kevin-blog/assets/js/91.208ff0cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/92.0247f769.js"><link rel="prefetch" href="/kevin-blog/assets/js/93.1d51e9e8.js"><link rel="prefetch" href="/kevin-blog/assets/js/94.52fd5e59.js"><link rel="prefetch" href="/kevin-blog/assets/js/95.3641a4fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/96.a96da06a.js"><link rel="prefetch" href="/kevin-blog/assets/js/97.877152bf.js"><link rel="prefetch" href="/kevin-blog/assets/js/98.4fe249c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/99.400d0dc4.js">
    <link rel="stylesheet" href="/kevin-blog/assets/css/0.styles.267bc68b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kevin-blog/" class="home-link router-link-active"><!----> <span class="site-name">Kevin-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="sidebar-link">CentOS 下载和安装</a></li><li><a href="/kevin-blog/Linux/Linux 介绍.html" class="sidebar-link">Linux 介绍</a></li><li><a href="/kevin-blog/Linux/Linux 注意事项.html" class="sidebar-link">Linux 注意事项</a></li><li><a href="/kevin-blog/Linux/Linux 的快捷键.html" class="sidebar-link">Linux 的快捷键</a></li><li><a href="/kevin-blog/Linux/Linux 的目录和路径.html" class="sidebar-link">Linux 的目录和路径</a></li><li><a href="/kevin-blog/Linux/Linux的命令结构.html" class="sidebar-link">Linux的命令结构</a></li><li><a href="/kevin-blog/Linux/Linux的基本命令.html" class="sidebar-link">Linux的基本命令</a></li><li><a href="/kevin-blog/Linux/Linux系统基础优化及常用命令.html" class="sidebar-link">Linux系统基础优化及常用命令</a></li><li><a href="/kevin-blog/Linux/MySQL(MariaDB)数据库.html" class="sidebar-link">MySQL(MariaDB)数据库</a></li><li><a href="/kevin-blog/Linux/PATH 环境变量.html" class="sidebar-link">PATH 环境变量</a></li><li><a href="/kevin-blog/Linux/Python3 的安装.html" class="sidebar-link">Python3 的安装</a></li><li><a href="/kevin-blog/Linux/VMware 安装和使用.html" class="sidebar-link">VMware 安装和使用</a></li><li><a href="/kevin-blog/Linux/XShell 的使用.html" class="sidebar-link">XShell 的使用</a></li><li><a href="/kevin-blog/Linux/ipython 与 jupyter 的安装.html" class="sidebar-link">ipython 与 jupyter 的安装</a></li><li><a href="/kevin-blog/Linux/ip地址和端口得到说明.html" class="sidebar-link">ip地址和端口得到说明</a></li><li><a href="/kevin-blog/Linux/nginx.html" aria-current="page" class="active sidebar-link">nginx</a></li><li><a href="/kevin-blog/Linux/nginx 负载均衡.html" class="sidebar-link">nginx 负载均衡</a></li><li><a href="/kevin-blog/Linux/redis.html" class="sidebar-link">redis</a></li><li><a href="/kevin-blog/Linux/redis 主从复制.html" class="sidebar-link">redis 主从复制</a></li><li><a href="/kevin-blog/Linux/redis 发布订阅.html" class="sidebar-link">redis 发布订阅</a></li><li><a href="/kevin-blog/Linux/redis 安全配置.html" class="sidebar-link">redis 安全配置</a></li><li><a href="/kevin-blog/Linux/redis 持久化存储.html" class="sidebar-link">redis 持久化存储</a></li><li><a href="/kevin-blog/Linux/redis-cluster 集群.html" class="sidebar-link">redis-cluster 集群</a></li><li><a href="/kevin-blog/Linux/redis-sentinel 哨兵模式.html" class="sidebar-link">redis-sentinel 哨兵模式</a></li><li><a href="/kevin-blog/Linux/supervisor 进程管理工具.html" class="sidebar-link">supervisor 进程管理工具</a></li><li><a href="/kevin-blog/Linux/uWSGI.html" class="sidebar-link">uWSGI</a></li><li><a href="/kevin-blog/Linux/vi  vim 编辑器.html" class="sidebar-link">vi  vim 编辑器</a></li><li><a href="/kevin-blog/Linux/virtualenv 与 virtualenvwrapper 虚拟环境的讲解.html" class="sidebar-link">virtualenv 与 virtualenvwrapper 虚拟环境的讲解</a></li><li><a href="/kevin-blog/Linux/web server 基础知识.html" class="sidebar-link">web server 基础知识</a></li><li><a href="/kevin-blog/Linux/关闭防火墙.html" class="sidebar-link">关闭防火墙</a></li><li><a href="/kevin-blog/Linux/必须掌握的 etc 下的 Linux 目录知识.html" class="sidebar-link">必须掌握的 etc 下的 Linux 目录知识</a></li><li><a href="/kevin-blog/Linux/文件、文件夹的相关命令.html" class="sidebar-link">文件、文件夹的相关命令</a></li><li><a href="/kevin-blog/Linux/管理网络的命令.html" class="sidebar-link">管理网络的命令</a></li><li><a href="/kevin-blog/Linux/网址.html" class="sidebar-link">网址</a></li><li><a href="/kevin-blog/Linux/计划任务 crond 服务.html" class="sidebar-link">计划任务 crond 服务</a></li><li><a href="/kevin-blog/Linux/软件的下载及安装.html" class="sidebar-link">软件的下载及安装</a></li><li><a href="/kevin-blog/Linux/远程连接Linux.html" class="sidebar-link">远程连接Linux</a></li><li><a href="/kevin-blog/Linux/重定向符号.html" class="sidebar-link">重定向符号</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><span><div><div><div><div><div><div><div><div><div><div><div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">网站服务</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">网站服务的介绍</span></div><div><br></div><ul><li><div>想必我们大多数人都是通过访问网站而开始接触互联网的吧。我们平时访问的网站服务 就是 Web 网络服务，一般是指允许用户通过浏览器访问到互联网中各种资源的服务</div></li></ul><div><br></div><ul><li><div>Web 网络服务是一种被动访问的服务程序，即只有接收到互联网中其他主机发出的 请求后才会响应，最终用于提供服务程序的 Web 服务器会通过 HTTP(超文本传输协议)或 HTTPS(安全超文本传输协议)把请求的内容传送给用户</div></li></ul><div><br></div><ul><li><div>目前能够提供 Web 网络服务的程序有 IIS、Nginx 和 Apache 等。其中，IIS(Internet Information Services，互联网信息服务)是 Windows 系统中默认的 Web 服务程序</div></li></ul><div><br></div><ul><li><div>2004 年 10 月 4 日，为俄罗斯知名门户站点而开发的 Web 服务程序 Nginx 横空出世。 Nginx 程序作为一款轻量级的网站服务软件，因其稳定性和丰富的功能而快速占领服务器市 场，但 Nginx 最被认可的还当是系统资源消耗低且并发能力强，因此得到了国内诸如新浪、 网易、腾讯等门户站的青睐</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">示意图一</span></div><div><br></div><ul><li><div>发送静态请求(<a href="http://www.pythonav.cn/xiaocang.jpg">http://www.pythonav.cn/xiaocang.jpg</a>)</div></li></ul><div><br></div><ul><ul><li><div>① 浏览器向服务器发送一个静态请求获取一些静态资源（如: 文件、图片、视频）</div></li></ul></ul><div><br></div><ul><ul><li><div>② web server（即 web 服务器: nginx）接收并处理发送过来的静态请求</div></li></ul></ul><div><br></div><ul><ul><li><div>③ web server（即 web 服务器: nginx）查看所要请求的静态资源（如: 文件、图片、视频）</div></li></ul></ul><div><br></div><ul><ul><li><div>④ web server（即 web 服务器: nginx）将查找的结果返回给浏览器，如果没有找到对应的静态资源就会返回一个 404 的页面给浏览器</div></li></ul></ul><div><br></div><ul><li><div>发送动态请求(<a href="http://www.pythonav.cn/login">http://www.pythonav.cn/login</a>)</div></li></ul><div><br></div><ul><ul><li><div>浏览器向服务器发送一个动态请求获取一个页面</div></li></ul></ul><div><br></div><ul><ul><li><div>web server（即 web 服务器: nginx）接收发送过来的动态请求，然后 web server（即: nginx）将该动态请求交给 Application （即 web 应用: python、Django、Flask）进行处理</div></li></ul></ul><div><br></div><ul><ul><li><div>Application （即 web 应用: python、Django、Flask）将动态请求的处理结果返回给 web server（即 web 服务器: nginx）</div></li></ul></ul><div><br></div><ul><ul><li><div> web server（即 web 服务器: nginx）将动态请求的处理结果返回给浏览器，此时浏览器就会的到一个对应的网页</div></li></ul></ul><div><br></div><div><img data-filename="2019082215424546.png" src="/kevin-blog/Linux/nginx_files/2019082215424546.png" type="image/png" width="981"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">示意图二</span></div><div><br></div><div><img data-filename="1132884-20181014124743540-1325157612.png" src="/kevin-blog/Linux/nginx_files/1132884-20181014124743540-1325157612.png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">web 服务器 和 web 框架的关系</span></h2><div><br></div><ul><li><div>web服务器（nginx）: 接收HTTP请求（例如 <a href="http://www.pythonav.cn/xiaocang.jpg">www.pythonav.cn/xiaocang.jpg</a> ）并返回数据</div></li></ul><div><br></div><ul><li><div>web框架（django，flask）: 开发web应用程序，处理接收到的数据</div></li></ul><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 的介绍</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">nginx 是什么？</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">nginx是一个开源的，支持高性能，高并发的www服务和代理服务软件。它是一个俄罗斯人lgor sysoev开发的，作者将源代码开源出来供全球使用</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">nginx比它大哥apache性能改进许多，nginx占用的系统资源更少，支持更高的并发连接，有更高的访问效率</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">nginx不但是一个优秀的web服务软件，还可以作为反向代理，负载均衡，以及缓存服务使用</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">为什么要使用 nginx ？ -&gt; 面试题</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">支持高并发，能支持几万并发连接</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">资源消耗少，在3万并发连接下开启10个nginx线程消耗的内存不到200M</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">可以做http反向代理和负载均衡</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">支持异步网络i/o事件模型epoll</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;color:rgb(227, 0, 0);font-weight:bold;">3.</span><span style="color:rgb(227, 0, 0);"></span><span style="font-size:14pt;color:rgb(227, 0, 0);font-weight:bold;">nginx 的作用</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="color:rgb(227, 0, 0);">处理浏览器发送过来的请求，返回对应的结果给浏览器</span></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">静态</span><span style="font-size:14pt;font-weight:bold;">请求</span><span style="font-size:14pt;font-weight:bold;">与动态</span><span style="font-size:14pt;font-weight:bold;">请求</span></div><div><br></div><ul><li><div>静态请求（即: 请求静态资源，如: 文件、图片、视频）</div></li></ul><div><br></div><ul><ul><li><div>nginx 可以接受并处理静态请求，然后找到服务器下对应的静态资源返回给浏览器</div></li></ul></ul><div><br></div><ul><li><div>动态请求（即: 请求网页）</div></li></ul><div><br></div><ul><ul><li><div>① nginx 可以接受动态请求，但是不会处理动态请求，nginx 会将该动态请求交给 web 框架（如: python、Django、Flask）进行处理</div></li><li><div>② web 框架（如: python、Django、Flask）会将动态请求的处理结果返回给 nginx</div></li><li><div>③ nginx 将 web 框架的动态请求处理结果（即: 网页）返回给浏览器</div></li></ul></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span> <span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">Tengine 和 nginx 的关系</span></span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="1132884-20180813155012063-443835808.png" src="/kevin-blog/Linux/nginx_files/1132884-20180813155012063-443835808.png" type="image/png" width="261"></div><div><br></div><ul><li><div>Tengine是由淘宝网发起的Web服务器项目。它在Nginx的基础上，针对大访问量网站的需求，添加了很多高级功能和特性</div></li></ul><div><br></div><ul><li><div>Tengine的性能和稳定性已经在大型的网站如淘宝网，天猫商城等得到了很好的检验。它的最终目标是打造一个高效、稳定、安全、易用的Web平台</div></li></ul><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">yum 安装 nginx</span></h2><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yum install nginx -y</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">源码编译安装 nginx</span></h2><div><br></div><div><span style="white-space:pre-wrap;font-size:14pt;font-weight:bold;">1.</span><span style="font-size:14pt;"></span><span style="font-size:14pt;font-weight:bold;">第一步 -&gt; </span><span style="font-size:14pt;font-weight:bold;">安装 nginx 所需要的库环境</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>gcc 库的介绍: 安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境</div></li></ul><div><br></div><ul><li><div>pcre 库的介绍: PCRE 是一个Perl库，包括 perl 兼容的正则表达式库。nginx 的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，pcre-devel 是使用 pcre 开发的一个二次开发库</div></li></ul><div><br></div><ul><li><div>zlib 库的介绍: zlib 库提供了很多种压缩和解压缩的方式， nginx 使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库</div></li></ul><div><br></div><ul><li><div>openssl 库的介绍 : 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及 SSL 协议，并提供丰富的应用程序供测试或其它目的使用</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yum install gcc patch libffi-devel python-devel zlib zlib-devel bzip2-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel openssl openssl-devel pcre pcre-devel -y</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="white-space:pre-wrap;font-size:14pt;font-weight:bold;">2.</span><span style="font-size:14pt;"></span><span style="font-size:14pt;font-weight:bold;">第二步 -&gt; </span><span style="font-size:14pt;font-weight:bold;">下载并解压</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">软件压缩包</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">下载 </span>nginx-1.12.0.tar.gz <span style="font-size:12pt;">压缩包到 /opt 目录下</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size:9pt;">wget -c https://nginx.org/download/nginx-1.12.0.tar.gz</font></div></div><div><br></div></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image.png" type="image/png"></div><div><br></div><ul><li><div>解压 nginx-1.12.0.tar.gz 到 /opt 目录下</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>tar -zxvf nginx-1.12.0.tar.gz</div></div><div><br></div></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [1].png" type="image/png"></div><div><br></div><div><span style="white-space:pre-wrap;font-size:14pt;font-weight:bold;">3.</span><span style="font-size:14pt;"></span><span style="font-size:14pt;font-weight:bold;">第三步 -&gt; </span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">为开始编译做准备</span></div><div><br></div><ul><li><div>执行 nginx 源码包路径下的 configure 脚本文件，为开始编译做准备（即: 为安装软件做准备）</div></li></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">configure 脚本文件一般用来生成 Makefile 文件，为下一步的编译做准备</span></div></li></ul></ul><div><br></div><div><span style="color:rgb(227, 0, 0);font-weight:bold;"><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [2].png" type="image/png"></span></div><div><br></div><ul><li><div>命令: <span style="color:rgb(186, 0, 255);">./configure --prefix=路径 --with-http_ssl_module --with-http_stub_status_module </span></div></li></ul><div><br></div><ul><ul><li><div>--prefix=路径 -&gt; 指定将 nginx 安装到指定目录下</div></li></ul></ul><div><br></div><ul><ul><li><div>--with-http_ssl_module -&gt; 让 http 支持 ssl_module 模块</div></li></ul></ul><div><br></div><ul><ul><li><div>--with-http_stub_status_module -&gt; 开启nginx状态监测功能（即: 监测有多少人进入过我的网站）</div></li></ul></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">注意: 该条命令必须在 </span><span style="color:rgb(227, 0, 0);font-weight:bold;">nginx-1.12.0</span> <span style="color:rgb(227, 0, 0);font-weight:bold;">目录下运行，否则会找不到需要执行 </span><span style="color:rgb(227, 0, 0);font-weight:bold;">configure 脚本文件</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./configure --prefix=/opt/nginx-1-12/ --with-http_ssl_module --with-http_stub_status_module</div></div><div><br></div><ul><li><div>检查是否生成了 Makefile 文件</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [3].png" type="image/png"></div><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">4.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">第四步 -&gt; 开始编译</span></div><div><br></div><ul><li><div><span style="font-size:12pt;">make 命令的介绍</span></div></li></ul><div><br></div><ul><ul><li><div>大多数的源代码包都是通过make命令进行编译的（当然有些perl或python编写的软件需要调用perl或python来进行编译）。</div></li></ul></ul><div><br></div><ul><ul><li><div>如果在 make 过程中出现 error ，你就要记下错误代码（注意不仅仅是最后一行），然后你可以向开发者提交 bugreport（一般在 INSTALL 里有提交地址），或者你的系统少了一些依赖库等，这些需要自己仔细研究错误代码。</div></li></ul></ul><div><br></div><ul><ul><li><div>make 的作用是开始进行源代码编译，以及一些功能的提供，这些功能由他的 Makefile 设置文件提供相关的功能，比如 make install 一般表示进行安装，make uninstall 是卸载，不加参数就是默认的进行源代码编译。</div></li></ul></ul><div><br></div><ul><ul><li><div>make 是 Linux 开发套件里面自动化编译的一个控制程序，他通过借助 Makefile 里面编写的编译规范进行自动化的调用 gcc 、ld 以及运行某些需要的程序进行编译的程序。一般情况下，他所使用的 Makefile 控制代码，由 configure 这个设置脚本根据给定的参数和系统环境生成</div></li></ul></ul><div><br></div><ul><li><div>命令: <span style="color:rgb(186, 0, 255);">make</span> -&gt; 开始编译</div></li></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);">注意:</span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">make 命令必须在 </span><span style="color:rgb(227, 0, 0);font-weight:bold;">nginx-1.12.0</span> <span style="color:rgb(227, 0, 0);font-weight:bold;">目录下运行</span></div></li><li><div>此步骤不会生成 /opt/nginx-1-12/ 软件目录</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>make</div></div></div><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">5.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">第五步 -&gt; 安装软件</span></div><div><br></div><ul><li><div><span style="font-size:12pt;">在进行安装软件之前，有些软件需要先运行 make check 或 make test来进行一些测试</span></div></li></ul><div><br></div><ul><li><div>命令: <span style="color:rgb(186, 0, 255);">make install</span> -&gt; 安装软件</div></li></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);">注意:</span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">make install 命令必须在 </span><span style="color:rgb(227, 0, 0);font-weight:bold;">nginx-1.12.0</span> <span style="color:rgb(227, 0, 0);font-weight:bold;">目录下运行</span></div></li><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">make install 需要使用 root 身份运行</span></div></li><li><div>此步骤才会生成 /opt/nginx-1-12/ 软件目录</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>make install</div></div><div><br></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:medium;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:14pt;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:pre-wrap;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-weight:bold;">6.</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:medium;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:14pt;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-weight:bold;">第四、五</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:14pt;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-weight:bold;">步可以同时执行</span></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:medium;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:1px solid transparent;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:medium;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><li style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;border:1px solid transparent;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:12pt;">执行完编译步骤后，紧接着执行软件的安装</span></div></li></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:medium;font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);font-variant-ligatures:normal;font-variant-caps:normal;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;">make &amp;&amp; make install</span></div></div><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">7.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">第六步 -&gt; 检测 nginx 是否安装成功</span></div><div><br></div><ul><li><div>检查 /opt/nginx-1-12 目录是否存在</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [4].png" type="image/png"></div><div><br></div><ul><li><div>检查 /opt/nginx-1-12 目录下是否存在以下四个或更多文件夹</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [5].png" type="image/png"></div><div><br></div><ul><li><div>检查 /opt/nginx-1-12/sbin 是否存在 nginx 启动命令</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [6].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [7].png" type="image/png"></div><div><br></div><ul><li><div>启动 nginx</div></li></ul><div><br></div><ul><ul><li><div>使用相对路径启动 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx</div></div><div><br></div><ul><ul><li><div>使用绝对路径启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>启动成功后会在 /opt/nginx-1-12/ 目录下生成其他文件夹</div></li></ul></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [8].png" type="image/png"></div><div><br></div><ul><li><div>检查 nginx 是否启动</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>ps -ef | grep nginx</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [9].png" type="image/png"></div><div><br></div><ul><li><div>在浏览器上访问当前服务器的 ip</div></li></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);">注意: </span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div>显示以下其中一个都代表 nginx 安装并启动成功</div></li><li><div>如果访问不了，请查看防火墙是否已经关闭</div></li></ul></ul></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [10].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [11].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 的目录结构</span></h2><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@kevin_linux ~ 06:22:36]# <font color="#FA7A00">ll /opt/nginx-1-12/</font></div><div>total 0</div><div>drwx------ 2 nobody root   6 Jan  3 06:02 client_body_temp</div><div>drwxr-xr-x 2 root   root 333 Jan  3 06:01 <font color="#FA7A00">conf</font></div><div>drwx------ 2 nobody root   6 Jan  3 06:02 fastcgi_temp</div><div>drwxr-xr-x 2 root   root  40 Jan  3 06:01 <font color="#FA7A00">html</font></div><div>drwxr-xr-x 2 root   root  41 Jan  3 06:13 <font color="#FA7A00">logs</font></div><div>drwx------ 2 nobody root   6 Jan  3 06:02 proxy_temp</div><div>drwxr-xr-x 2 root   root  19 Jan  3 06:01 <font color="#FA7A00">sbin</font></div><div>drwx------ 2 nobody root   6 Jan  3 06:02 scgi_temp</div><div>drwx------ 2 nobody root   6 Jan  3 06:02 uwsgi_temp</div></div><div><br></div><ul><li><div>conf -&gt; 存放 nginx 配置文件的文件夹</div></li><li><div>html -&gt; 存放项目网页的文件夹</div></li><li><div>logs -&gt; 存放 nginx 日志的文件夹</div></li><li><div>sbin -&gt; 存放 nginx 启动脚本的文件夹</div></li></ul><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 的相关命令</span></h2><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">1.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">启动 nginx</span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用相对路径启动 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</span></div></li></ul><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">使用绝对路径启动 nginx</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">2.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">关闭 nginx</span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;color:rgb(227, 0, 0);">注意: 如果nginx没有启动，且执行了关闭 nginx 的命令，那么就会报错，因为在nginx启动的时候会在nginx的日志文件夹下生成一个 </span><span style="color:rgb(227, 0, 0);">nginx.pid 文件，在正常执行 nginx 关闭命令的时候就会把该文件删掉，如果 nginx 没有启动也就代表没有生成该文件，那么在执行关闭 nginx 命令的时候就无法找到该文件进行删除，所以就会报错，错误提示如下</span></div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [12].png" type="image/png"></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div><ul><li><div><span style="font-size:12pt;">使用相对路径关闭 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx -s stop</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">使用绝对路径关闭 nginx</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s stop</div></div></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div><font style="font-size:14pt;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">3.</span><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"> 平滑</span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">重启 nginx</span></font></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">平滑重启: 修改了 nginx 配置文件后不重启服务就加载配置且会立即生效</span></div></li></ul><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><div><ul><li><div><span style="font-size:12pt;">使用相对路径平滑重启 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx -s reload</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">使用绝对路径平滑重启 nginx</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div></div><div><br></div><div><span style="font-size:14pt;box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">4.</span><span style="font-size:14pt;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"> 检查 nginx 的配置文件是否有语法错误</span></div><div><span style="font-size:14pt;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用相对路径检查 nginx 的配置文件是否有语法错误，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx -t</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [13].png" type="image/png"></div><div><br></div><ul><li><div><span style="font-size:12pt;">使用绝对路径</span><span style="font-size:12pt;">检查 nginx 的配置文件是否有语法错误</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [14].png" type="image/png"></div><div><br></div><div><span style="font-size:14pt;box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">5.</span><span style="font-size:14pt;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"> 查看 nginx 的信息</span></div><div><span style="font-size:14pt;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br></span></div><ul><li><div><span style="font-size:12pt;">使用相对路径查看 nginx 的信息，且在执行前必须在 /opt/nginx-1-12/sbin 目录下</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>./nginx -V</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">使用绝对路径</span><span style="font-size:12pt;">查看 nginx 的信息</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -V</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 的主配置文件</span></h2><div><br></div><ul><li><div>Nginx 主配置文件 /opt/nginx-1-12/conf/nginx.conf 是一个纯文本类型的文件，整个配置文件是以区块的形式组织的。一般，每个区块以一对大括号 {} 来表示开始与结束</div></li></ul><div><br></div></div><ul><li><div>nginx.conf 主配置文件的详解</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C">###### Nginx 配置文件 nginx.conf 中文详解 #####</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 定义Nginx运行的用户和用户组</font></div><div>user www www;</div><div><br></div><div><font color="#41AD1C"># nginx进程数，建议设置为等于CPU总核心数。</font></div><div>worker_processes 8;</div><div><br></div><div><font color="#41AD1C"># 全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</font></div><div>error_log /usr/local/nginx/logs/error.log info;</div><div><br></div><div><font color="#41AD1C"># 进程pid文件</font></div><div>pid /usr/local/nginx/logs/nginx.pid;</div><div><br></div><div><font color="#41AD1C"># 指定进程可以打开的最大描述符：数目</font></div><div><font color="#41AD1C"># 工作模式与连接数上限</font></div><div><font color="#41AD1C"># 这个指令是指当一个nginx进程打开的最多文件描述符数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -n 的值保持一致。</font></div><div><font color="#41AD1C"># 现在在linux 2.6内核下开启文件打开数为65535，worker_rlimit_nofile就相应应该填写65535。</font></div><div><font color="#41AD1C"># 这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。</font></div><div>worker_rlimit_nofile 65535;</div><div><br></div><div>events</div><div>{</div><div><font color="#41AD1C"># 参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型</font></div><div><font color="#41AD1C">    # 是Linux 2.6以上版本内核中的高性能网络I/O模型，linux建议epoll，如果跑在FreeBSD上面，就用kqueue模型。</font></div><div><font color="#41AD1C">    # 补充说明：</font></div><div><font color="#41AD1C">    # 与apache相类，nginx针对不同的操作系统，有不同的事件模型</font></div><div><font color="#41AD1C">    # A）标准事件模型</font></div><div><font color="#41AD1C">    # Select、poll属于标准事件模型，如果当前系统不存在更有效的方法，nginx会选择select或poll</font></div><div><font color="#41AD1C">    # B）高效事件模型</font></div><div><font color="#41AD1C">    # Kqueue：使用于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使用双处理器的MacOS X系统使用kqueue可能会造成内核崩溃。</font></div><div><font color="#41AD1C">    # Epoll：使用于Linux内核2.6版本及以后的系统。</font></div><div><font color="#41AD1C">    # /dev/poll：使用于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。</font></div><div><font color="#41AD1C">    # Eventport：使用于Solaris 10。 为了防止出现内核崩溃的问题， 有必要安装安全补丁。</font></div><div>    use epoll;</div><div><br></div><div><font color="#41AD1C"># 单个进程最大连接数（最大连接数=连接数*进程数）</font></div><div><font color="#41AD1C">    # 根据硬件调整，和前面工作进程配合起来用，尽量大，但是别把cpu跑到100%就行。每个进程允许的最多连接数，理论上每台nginx服务器的最大连接数为。</font></div><div>    worker_connections 65535;</div><div><br></div><div><font color="#41AD1C"> # keepalive超时时间。</font></div><div>    keepalive_timeout 60;</div><div><br></div><div><font color="#41AD1C"># 客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求头的大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。</font></div><div><font color="#41AD1C">    # 分页大小可以用命令getconf PAGESIZE 取得。</font></div><div><font color="#41AD1C">    # [root@web001 ~]# getconf PAGESIZE</font></div><div><font color="#41AD1C">    # 4096</font></div><div><font color="#41AD1C">    # 但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页大小”的整倍数。</font></div><div>    client_header_buffer_size 4k;</div><div><br></div><div><font color="#41AD1C"># 这个将为打开文件指定缓存，默认是没有启用的，max指定缓存数量，建议和打开文件数一致，inactive是指经过多长时间文件没被请求后删除缓存。</font></div><div>    open_file_cache max=65535 inactive=60s;</div><div><br></div><div><font color="#41AD1C"># 这个是指多长时间检查一次缓存的有效信息。</font></div><div><font color="#41AD1C">    # 语法:open_file_cache_valid time 默认值:open_file_cache_valid 60 使用字段:http, server, location 这个指令指定了何时需要检查open_file_cache中缓存项目的有效信息.</font></div><div>    open_file_cache_valid 80s;</div><div><br></div><div><font color="#41AD1C"># open_file_cache指令中的inactive参数时间内文件的最少使用次数，如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个文件在inactive时间内一次没被使用，它将被移除。</font></div><div><font color="#41AD1C">    # 语法:open_file_cache_min_uses number 默认值:open_file_cache_min_uses 1 使用字段:http, server, location  这个指令指定了在open_file_cache指令无效的参数中一定的时间范围内可以使用的最小文件数,如果使用更大的值,文件描述符在cache中总是打开状态.</font></div><div>    open_file_cache_min_uses 1;</div><div><br></div><div><font color="#41AD1C"># 语法:open_file_cache_errors on | off 默认值:open_file_cache_errors off 使用字段:http, server, location 这个指令指定是否在搜索一个文件是记录cache错误.</font></div><div>    open_file_cache_errors on;</div><div>}</div><div><br></div><div><br></div><div><br></div><div><font color="#41AD1C"># 设定http服务器，利用它的反向代理功能提供负载均衡支持</font></div><div>http</div><div>{</div><div><font color="#41AD1C"># 文件扩展名与文件类型映射表</font></div><div>    include mime.types;</div><div><br></div><div><font color="#41AD1C"># 默认文件类型</font></div><div>    default_type application/octet-stream;</div><div><br></div><div><font color="#41AD1C"># 默认编码</font></div><div><font color="#41AD1C">    # charset utf-8;</font></div><div><br></div><div><font color="#41AD1C"># 服务器名字的hash表大小</font></div><div><font color="#41AD1C">    # 保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表的大小，并且是一路处理器缓存大小的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找hash表键值成为可能。如果hash bucket size等于一路处理器缓存的大小，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第一次是确定存储单元的地址，第二次是在存储单元中查找键 值。因此，如果Nginx给出需要增大hash max size 或 hash bucket size的提示，那么首要的是增大前一个参数的大小.</font></div><div>    server_names_hash_bucket_size 128;</div><div><br></div><div><font color="#41AD1C"># 客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求的头部大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。分页大小可以用命令getconf PAGESIZE取得。</font></div><div>    client_header_buffer_size 32k;</div><div><br></div><div><font color="#41AD1C"># 客户请求头缓冲大小。nginx默认会用client_header_buffer_size这个buffer来读取header值，如果header过大，它会使用large_client_header_buffers来读取。</font></div><div>    large_client_header_buffers 4 64k;</div><div><br></div><div><font color="#41AD1C"># 设定通过nginx上传文件的大小</font></div><div>    client_max_body_size 8m;</div><div><br></div><div><font color="#41AD1C"># 开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</font></div><div><font color="#41AD1C">    # sendfile指令指定 nginx 是否调用sendfile 函数（zero copy 方式）来输出文件，对于普通应用，必须设为on。如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络IO处理速度，降低系统uptime。</font></div><div>    sendfile on;</div><div><br></div><div><font color="#41AD1C"> # 开启目录列表访问，合适下载服务器，默认关闭。</font></div><div>    autoindex on;</div><div><br></div><div><font color="#41AD1C"># 此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用</font></div><div>    tcp_nopush on;</div><div><br></div><div>    tcp_nodelay on;</div><div><br></div><div><font color="#41AD1C"># 长连接超时时间，单位是秒</font></div><div>    keepalive_timeout 120;</div><div><br></div><div><font color="#41AD1C"># FastCGI相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。</font></div><div>    fastcgi_connect_timeout 300;</div><div>    fastcgi_send_timeout 300;</div><div>    fastcgi_read_timeout 300;</div><div>    fastcgi_buffer_size 64k;</div><div>    fastcgi_buffers 4 64k;</div><div>    fastcgi_busy_buffers_size 128k;</div><div>    fastcgi_temp_file_write_size 128k;</div><div><br></div><div><font color="#41AD1C"> # gzip模块设置，对返回的静态资源（如，图片，视频）进行压缩传输，节省带宽</font></div><div><font color="#41AD1C"></font><font color="#41AD1C"># 开启gzip压缩输出</font></div><div>    gzip on;  </div><div><font color="#41AD1C"># 最小压缩文件大小</font></div><div>    gzip_min_length 1k;  </div><div><font color="#41AD1C"></font><font color="#41AD1C"># 压缩缓冲区</font></div><div>    gzip_buffers 4 16k; </div><div><font><font color="#41AD1C"></font></font><font color="#41AD1C"># 压缩版本（默认1.1，前端如果是squid2.5请使用1.0）</font><font style="color:rgb(65, 173, 28);"></font></div><div>    gzip_http_version 1.0;  </div><div><font color="#41AD1C"># 压缩等级</font></div><div>    gzip_comp_level 2;  </div><div><font color="#41AD1C"># 压缩类型，默认就已经包含textml，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。</font></div><div>    gzip_types text/plain application/x-javascript text/css application/xml; <font style="color:rgb(65, 173, 28);"></font></div><div>    gzip_vary on;</div><div><br></div><div><font color="#41AD1C"># 开启限制IP连接数的时候需要使用</font></div><div><font color="#41AD1C">    # limit_zone crawler $binary_remote_addr 10m;</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">    # 负载均衡配置</font></div><div>    upstream jh.w3cschool.cn {</div><div><br></div><div><font color="#41AD1C"># upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。</font></div><div>        server 192.168.80.121:80 weight=3;</div><div>        server 192.168.80.122:80 weight=2;</div><div>        server 192.168.80.123:80 weight=3;</div><div><br></div><div><font color="#41AD1C"># nginx的upstream目前支持4种方式的分配</font></div><div><font color="#41AD1C">        # 1、轮询（默认）</font></div><div><font color="#41AD1C">        # 每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。</font></div><div><font color="#41AD1C">        # 2、weight</font></div><div><font color="#41AD1C">        # 指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。</font></div><div><font color="#41AD1C">        # 例如：</font></div><div><font color="#41AD1C">        # upstream bakend {</font></div><div><font color="#41AD1C">        #     server 192.168.0.14 weight=10;</font></div><div><font color="#41AD1C">        #     server 192.168.0.15 weight=10;</font></div><div><font color="#41AD1C">        # }</font></div><div><font color="#41AD1C">        # 2、ip_hash</font></div><div><font color="#41AD1C">        # 每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</font></div><div><font color="#41AD1C">        # 例如：</font></div><div><font color="#41AD1C">        # upstream bakend {</font></div><div><font color="#41AD1C">        #     ip_hash;</font></div><div><font color="#41AD1C">        #     server 192.168.0.14:88;</font></div><div><font color="#41AD1C">        #     server 192.168.0.15:80;</font></div><div><font color="#41AD1C">        # }</font></div><div><font color="#41AD1C">        # 3、fair（第三方）</font></div><div><font color="#41AD1C">        # 按后端服务器的响应时间来分配请求，响应时间短的优先分配。</font></div><div><font color="#41AD1C">        # upstream backend {</font></div><div><font color="#41AD1C">        #     server server1;</font></div><div><font color="#41AD1C">        #     server server2;</font></div><div><font color="#41AD1C">        #     fair;</font></div><div><font color="#41AD1C">        # }</font></div><div><font color="#41AD1C">        # 4、url_hash（第三方）</font></div><div><font color="#41AD1C">        # 按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。</font></div><div><font color="#41AD1C">        # 例：在upstream中加入hash语句，server语句中不能写入weight等其他的参数，hash_method是使用的hash算法</font></div><div><font color="#41AD1C">        # upstream backend {</font></div><div><font color="#41AD1C">        #     server squid1:3128;</font></div><div><font color="#41AD1C">        #     server squid2:3128;</font></div><div><font color="#41AD1C">        #     hash $request_uri;</font></div><div><font color="#41AD1C">        #     hash_method crc32;</font></div><div><font color="#41AD1C">        # }</font></div><div><br></div><div><font color="#41AD1C"># tips:</font></div><div><font color="#41AD1C">        # upstream bakend{#定义负载均衡设备的Ip及设备状态}{</font></div><div><font color="#41AD1C">        #     ip_hash;</font></div><div><font color="#41AD1C">        #     server 127.0.0.1:9090 down;</font></div><div><font color="#41AD1C">        #     server 127.0.0.1:8080 weight=2;</font></div><div><font color="#41AD1C">        #     server 127.0.0.1:6060;</font></div><div><font color="#41AD1C">        #     server 127.0.0.1:7070 backup;</font></div><div><font color="#41AD1C">        # }</font></div><div><font color="#41AD1C">        # 在需要使用负载均衡的server中增加 proxy_pass http://bakend/;</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">        # 每个设备的状态设置为:</font></div><div><font color="#41AD1C">        # 1.down表示单前的server暂时不参与负载</font></div><div><font color="#41AD1C">        # 2.weight为weight越大，负载的权重就越大。</font></div><div><font color="#41AD1C">        # 3.max_fails：允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream模块定义的错误</font></div><div><font color="#41AD1C">        # 4.fail_timeout:max_fails次失败后，暂停的时间。</font></div><div><font color="#41AD1C">        # 5.backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C">        # nginx支持同时设置多组的负载均衡，用来给不用的server来使用。</font></div><div><font color="#41AD1C">        # client_body_in_file_only设置为On 可以讲client post过来的数据记录到文件中用来做debug</font></div><div><font color="#41AD1C">        # client_body_temp_path设置记录文件的目录 可以设置最多3层目录</font></div><div><font color="#41AD1C">        # location对URL进行匹配.可以进行重定向或者进行新的代理 负载均衡</font></div><div>    }</div><div><br></div><div><br></div><div><font color="#41AD1C"># 虚拟主机的配置</font></div><div>    server</div><div>    {</div><div><font color="#41AD1C"># 监听端口</font></div><div>        listen 80;</div><div><br></div><div><font color="#41AD1C"> # 域名可以有多个，用空格隔开</font></div><div>        server_name www.w3cschool.cn w3cschool.cn;</div><div>        index index.html index.htm index.php;</div><div>        root /data/www/w3cschool;</div><div><br></div><div><font color="#41AD1C"># 对******进行负载均衡</font></div><div>        location ~ .*.(php|php5)?$</div><div>        {</div><div>            fastcgi_pass 127.0.0.1:9000;</div><div>            fastcgi_index index.php;</div><div>            include fastcgi.conf;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 图片缓存时间设置</font></div><div>        location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$</div><div>        {</div><div>            expires 10d;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># JS和CSS缓存时间设置</font></div><div>        location ~ .*.(js|css)?$</div><div>        {</div><div>            expires 1h;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 日志格式设定</font></div><div><font color="#41AD1C">        # $remote_addr与$http_x_forwarded_for用以记录客户端的ip地址；</font></div><div><font color="#41AD1C">        # $remote_user：用来记录客户端用户名称；</font></div><div><font color="#41AD1C">        # $time_local： 用来记录访问时间与时区；</font></div><div><font color="#41AD1C">        # $request： 用来记录请求的url与http协议；</font></div><div><font color="#41AD1C">        # $status： 用来记录请求状态；成功是200，</font></div><div><font color="#41AD1C">        # $body_bytes_sent ：记录发送给客户端文件主体内容大小；</font></div><div><font color="#41AD1C">        # $http_referer：用来记录从那个页面链接访问过来的；</font></div><div><font color="#41AD1C">        # $http_user_agent：记录客户浏览器的相关信息；</font></div><div><font color="#41AD1C">        # 通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址。</font></div><div>        log_format access '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</div><div>        '$status $body_bytes_sent &quot;$http_referer&quot; '</div><div>        '&quot;$http_user_agent&quot; $http_x_forwarded_for';</div><div><br></div><div><font color="#41AD1C"> # 定义本虚拟主机的访问日志</font></div><div>        access_log  /usr/local/nginx/logs/host.access.log  main;</div><div>        access_log  /usr/local/nginx/logs/host.access.404.log  log404;</div><div><br></div><div><font color="#41AD1C"># 对 &quot;/&quot; 启用反向代理</font></div><div>        location / {</div><div>            proxy_pass http://127.0.0.1:88;</div><div>            proxy_redirect off;</div><div>            proxy_set_header X-Real-IP $remote_addr;</div><div><br></div><div><font color="#41AD1C"># 后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</font></div><div>            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div><div><br></div><div><font color="#41AD1C"># 以下是一些反向代理的配置，可选。</font></div><div>            proxy_set_header Host $host;</div><div><br></div><div><font color="#41AD1C"># 允许客户端请求的最大单文件字节数</font></div><div>            client_max_body_size 10m;</div><div><br></div><div><font color="#41AD1C"># 缓冲区代理缓冲用户端请求的最大字节数，</font></div><div><font color="#41AD1C">            # 如果把它设置为比较大的数值，例如256k，那么，无论使用firefox还是IE浏览器，来提交任意小于256k的图片，都很正常。如果注释该指令，使用默认的client_body_buffer_size设置，也就是操作系统页面大小的两倍，8k或者16k，问题就出现了。</font></div><div><font color="#41AD1C">            # 无论使用firefox4.0还是IE8.0，提交一个比较大，200k左右的图片，都返回500 Internal Server Error错误</font></div><div>            client_body_buffer_size 128k;</div><div><br></div><div><font color="#41AD1C"># 表示使nginx阻止HTTP应答代码为400或者更高的应答。</font></div><div>            proxy_intercept_errors on;</div><div><br></div><div><font color="#41AD1C"># 后端服务器连接的超时时间_发起握手等候响应超时时间</font></div><div><font color="#41AD1C">            # nginx跟后端服务器连接超时时间(代理连接超时)</font></div><div>            proxy_connect_timeout 90;</div><div><br></div><div><font color="#41AD1C"># 后端服务器数据回传时间(代理发送超时)</font></div><div><font color="#41AD1C">            # 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据</font></div><div>            proxy_send_timeout 90;</div><div><br></div><div><font color="#41AD1C"> # 连接成功后，后端服务器响应时间(代理接收超时)</font></div><div><font color="#41AD1C">            # 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）</font></div><div>            proxy_read_timeout 90;</div><div><br></div><div><font color="#41AD1C"># 设置代理服务器（nginx）保存用户头信息的缓冲区大小</font></div><div><font color="#41AD1C">            # 设置从被代理服务器读取的第一部分应答的缓冲区大小，通常情况下这部分应答中包含一个小的应答头，默认情况下这个值的大小为指令proxy_buffers中指定的一个缓冲区的大小，不过可以将其设置为更小</font></div><div>            proxy_buffer_size 4k;</div><div><br></div><div><font color="#41AD1C"># proxy_buffers缓冲区，网页平均在32k以下的设置</font></div><div><font color="#41AD1C">            # 设置用于读取应答（来自被代理服务器）的缓冲区数目和大小，默认情况也为分页大小，根据操作系统的不同可能是4k或者8k</font></div><div>            proxy_buffers 4 32k;</div><div><br></div><div><font color="#41AD1C"># 高负荷下缓冲大小（proxy_buffers*2）</font></div><div>            proxy_busy_buffers_size 64k;</div><div><br></div><div><font color="#41AD1C"># 设置在写入proxy_temp_path时数据的大小，预防一个工作进程在传递文件时阻塞太长</font></div><div><font color="#41AD1C">            # 设定缓存文件夹大小，大于这个值，将从upstream服务器传</font></div><div>            proxy_temp_file_write_size 64k;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 设定查看Nginx状态的地址</font></div><div>        location /NginxStatus {</div><div>            stub_status on;</div><div>            access_log on;</div><div>            auth_basic &quot;NginxStatus&quot;;</div><div>            auth_basic_user_file confpasswd;</div><div><font color="#41AD1C"># htpasswd文件的内容可以用apache提供的htpasswd工具来产生。</font></div><div>        }</div><div><br></div><div><font color="#41AD1C"> # 本地动静分离反向代理配置</font></div><div><font color="#41AD1C">        # 所有jsp的页面均交由tomcat或resin处理</font></div><div>        location ~ .(jsp|jspx|do)?$ {</div><div>            proxy_set_header Host $host;</div><div>            proxy_set_header X-Real-IP $remote_addr;</div><div>            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div><div>            proxy_pass http://127.0.0.1:8080;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 所有静态文件由nginx直接读取不经过tomcat或resin</font></div><div>        location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|</div><div>        pdf|xls|mp3|wma)$</div><div>        {</div><div>            expires 15d;</div><div>        }</div><div><br></div><div>        location ~ .*.(js|css)?$</div><div>        {</div><div>            expires 1h;</div><div>        }</div><div>    }</div><div>}</div></div><div><br></div><ul><li><div>CoreModule 核心模块配置</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"><span style="font-size:9pt;font-family:Monaco;"># n</span>ginx进程所使用的用户</font></div><div>user www;</div><div><br></div><div><font color="#41AD1C"># nginx运行的 work 进程数量 (建议与CPU数量一致或auto)</font></div><div>worker_processes 4;</div><div><br></div><div><font color="#41AD1C"># nginx错误日志存放路径</font></div><div>error_log /opt/nginx-1-12/logs/error.log;</div><div><br></div><div><font color="#41AD1C"># nginx服务运行后产生的pid进程号</font></div><div>pid /opt/nginx-1-12/logs/nginx.pid</div></div><div><br></div><ul><li><div>events 事件模块配置</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>events {</div><div><br></div><div><font color="#41AD1C"># </font><font color="#41AD1C">每个worker进程支持的最大连接数</font><font color="#41AD1C">，不要低于默认值 1024，数值尽可能大，根据实际情况进行配置</font></div><div>    worker_connections 65535;</div><div><br></div><div><font color="#41AD1C"># </font><font color="#41AD1C">事件驱动模型, 默认为 epoll</font></div><div>    use epoll;</div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>}</div></div><div><br></div></div><ul><li><div>http</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div></div><div><font color="#41AD1C"># 使用Server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</font></div><div>    server {</div><div><font color="#41AD1C"></font><font color="#41AD1C"># 监听端口, 默认80</font></div><div>        listen 80;</div><div><font color="#41AD1C"># </font><font color="#41AD1C">提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</font></div><div>        server_name 10.0.0.3;</div><div><font color="#41AD1C"># </font><font color="#41AD1C">访问日志</font></div><div>        access_log host.access.log</div><div><font color="#41AD1C"># 控制网站访问路径</font></div><div>        location / {</div><div><font color="#41AD1C"># 存放网站代码路径</font></div><div>            root /opt/nginx-1-12/html/;</div><div><font color="#41AD1C"># 服务器返回的默认页面文件</font><font color="#41AD1C">, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面</font></div><div>            index  index.html index.htm;  </div><div>        }</div><div><font color="#41AD1C"># 指定错误代码所显示的对应页面，即: 当出现 500、502、503、504 错误的时候就会返回 /opt/nginx-1-12/html/ 下的 50x.html 页面</font></div><div>        error_page   500 502 503 504  /50x.html;</div><div>    }</div><div></div><div><font color="#41AD1C"># 第二个虚拟主机配置</font></div><div>    server {</div><div><font color="#41AD1C">...</font></div><div>    }</div><div></div><div><font color="#41AD1C"># 包含/etc/nginx/conf.d/目录下所有以.conf结尾的文件</font></div><div>    include /etc/nginx/conf.d/*.conf; </div><div><br></div><div>}</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;color:rgb(255, 0, 0);font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 上线部署时必须修改的参数</span></span></h2><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># nginx运行的 work 进程数量 (建议与CPU数量一致或auto)</font></div><div>worker_processes 4;</div><div><br></div><div>events {</div><div><font style="color:rgb(65, 173, 28);"># 每个worker进程支持的最大连接数，不要低于默认值 1024，数值尽可能大，根据实际情况进行配置</font></div><div>    worker_connections 65535;</div><div>}</div><div><br></div><div>http {</div><div><font color="#41AD1C">...</font></div><div>}</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 虚拟主机</span></h2><div><br></div><div><img data-filename="nginx_xnzj.jpg" src="/kevin-blog/Linux/nginx_files/nginx_xnzj.jpg" type="image/jpeg"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">虚拟主机的介绍</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">如果每台linux服务器只运行了一个小网站，那么人气低，流量小的草根站长需要承担高额的服务器租赁费，也造成了硬件资源浪费</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">虚拟主机就是将一台服务器分割成多个“虚拟服务器”，每个站点使用各自的硬盘空间，由于省资源，省钱，众多网站都使用虚拟主机来部署网站</span></div></li></ul><div><br></div><ul><li><div>虚拟主机的概念就是在web服务里的一个独立的网站站点，这个站点对应独立的域名（IP），具有独立的程序和资源目录，可以独立的对外提供服务</div></li></ul><div><br></div><ul><ul><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">这个独立的站点配置是在nginx.conf中使用server{}代码块标签来表示一个虚拟主机</span></span></div></li></ul></ul><div><br></div><ul><ul><li><div>Nginx支持多个server{}标签，即支持多个虚拟主机站点</div></li></ul></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">虚拟主机的类型</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">基于域名的虚拟主机 : 通过不同的域名区分不同的虚拟主机，是企业应用最广的虚拟主机。</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">基于端口的虚拟主机 : 通过不同的端口来区分不同的虚拟主机，一般用作企业内部网站，不对外直接提供服务的后台，例如 </span><a href="http://www.pythonav.cn:9000/" style="font-size:12pt;">www.pythonav.cn:9000</a></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">基于IP的虚拟主机 : 通过不同的IP区分不同的虚拟主机，此类比较少见，一般业务需要多IP的常见都会在负载均衡中绑定 VIP</span></div></li></ul><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">基于服务器ip地址配置虚拟主机</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">使用虚拟主机部署网站</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">将开发好的网站代码放到 nginx 软件目录下的 html 文件夹中</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@kevin_linux ~ 14:19:59]# <font style="color:rgb(250, 122, 0);">ls /opt/nginx-1-12/html/project_1</font></div><div>50x.html  dog.gif  index.html</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><font color="#41AD1C">  ...</font><font color="#41AD1C"></font></div><div><br></div><div><font color="#41AD1C"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</font></div><div>    server {</div><div><font color="#41AD1C"># 监听端口, 默认80</font></div><div>        listen 80;</div><div><font color="#41AD1C"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</font></div><div>        server_name 10.0.0.3;</div><div><font color="#41AD1C"># 控制网站访问路径</font></div><div>        location / {</div><div><font color="#41AD1C"># 存放网站代码路径</font></div><div>            root /opt/nginx-1-12/html/project_1;</div><div><font style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 </font></div><div>            index  index.html index.htm;  </div><div>        }</div><div>    }</div><div><br></div><div><font color="#41AD1C">...</font></div><div>}</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><br></div><ul><li><div>通过浏览器访问网站</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [15].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [16].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">基于域名配置多个虚拟主机</span></h2><div><br></div><ul><li><div><span style="font-size:12pt;">将开发好的网站代码放到 nginx 软件目录下的 html 文件夹中</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@kevin_linux ~ 16:04:21]# <font color="#FA7A00">tree /opt/nginx-1-12/html/</font></div><div>/opt/nginx-1-12/html/</div><div>├── <font color="#E30000">test_jd</font></div><div>│   ├── dog.gif</div><div>│   └── index.html</div><div>└── <font color="#E30000">test_taobao</font></div><div>    ├── index.html</div><div>    └── taobao.jpg</div></div><div><br></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div><font color="#E30000">server_name www.testtaobao.com;</font></div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><span style="color:rgb(65, 173, 28);"># 存放网站代码路径</span></div><div><font color="#E30000">root /opt/nginx-1-12/html/test_taobao;</font></div><div><span style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问</span><font color="#41AD1C"> www.testtaobao.com 的时候就会返回一个 index.html 页面 </font></div><div>            index  index.html index.htm;  </div><div>        }</div><div>    }</div><div><br></div><div><font color="#41AD1C"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</font></div><div>    server {</div><div><font color="#41AD1C"># 监听端口, 默认80</font></div><div>        listen 80;</div><div><font color="#41AD1C"># 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</font></div><div><font color="#E30000">server_name www.testjd.com;</font></div><div><font color="#41AD1C"># 控制网站访问路径</font></div><div>        location / {</div><div><font color="#41AD1C"># 存放网站代码路径</font></div><div><font color="#E30000">root /opt/nginx-1-12/html/test_jd;</font></div><div><font color="#41AD1C"># 服务器返回的默认页面文件, 即: 当浏览器访问 www.testjd.com 的时候就会返回一个 index.html 页面</font></div><div>            index  index.html index.htm;  </div><div>        }</div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:1px solid transparent;"><li style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;border:1px solid transparent;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">检查nginx配置文件是否有语法错误</span></div></li></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:8px;font-size:12px;border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:12px;color:rgb(51, 51, 51);font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-variant-caps:normal;font-variant-ligatures:normal;">/opt/nginx-1-12/sbin/nginx -t</span></div></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:1px solid transparent;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><li style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;border:1px solid transparent;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">启动nginx 或 平滑重启 nginx</span></div></li></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:1px solid transparent;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:0px;"><li style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;border:1px solid transparent;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">如果没有启动 nginx，那么就启动 nginx</span></div></li></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:8px;font-size:12px;border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:12px;color:rgb(51, 51, 51);font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-variant-caps:normal;font-variant-ligatures:normal;">/opt/nginx-1-12/sbin/nginx</span></div></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:1px solid transparent;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><ul style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px 0px 0px 40px;border:0px;"><li style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;border:1px solid transparent;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:medium;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</span></div></li></ul></ul><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;font-size:medium;letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><br style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;"></div><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:8px;font-size:12px;border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);letter-spacing:normal;orphans:2;text-align:start;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><div style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;margin:0px;padding:0px;"><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-size:12px;color:rgb(51, 51, 51);font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-variant-caps:normal;font-variant-ligatures:normal;">/opt/nginx-1-12/sbin/nginx -s reload</span></div></div><div><br></div><ul><li><div>将域名写到本地的DNS解析文件里</div></li></ul><div><br></div><ul><ul><li><div>由于我们是通过windows中的浏览器进行访问的，且这两个域名是自定义的在公网上根本找不到，所以要在windows的hosts文件中添加记录</div></li></ul></ul><div><br></div><ul><ul><li><div>hosts 文件就是一个本地DNS强制解析的文件（即: 在DNS解析域名的时候优先会执行解析hosts文件里的域名）</div></li></ul></ul><div><br></div><ul><ul><li><div>windows hosts 文件路径</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>C:\Windows\System32\drivers\etc</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [17].png" type="image/png"></div><div><br></div><ul><ul><li><div>修改 hosts 文件</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>在 hosts 文件底部添加以下配置</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>10.0.0.3    www.testtaobao.com</div><div>10.0.0.3    www.testjd.com</div></div><div><br></div><ul><li><div>通过浏览器访问网站</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [18].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [19].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [20].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [21].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 状态信息（status）的配置</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">nginx状态信息（status）配置及信息详解</span></span></div><div><br></div><ul><li><div>nginx与php-fpm一样内建了一个状态页，对于想了解nginx的状态以及监控nginx非常有帮助。为了后续的zabbix监控，我们需要先了解一下nginx的状态页</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">n</span><span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">ginx状态信息（status）介绍</span></span></div><div><br></div><ul><li><div>nginx软件在编译时又一个with-http_stub_status_module模块，<span style="color:rgb(227, 0, 0);font-weight:bold;">这个模块功能是记录Nginx的基本访问状态信息，让使用者了解Nginx的工作状态</span></div></li></ul><div><br></div><ul><li><div>要想使用状态模块，在编译时必须增加--with-http_stub_status_module参数</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">查看 nginx 是否安装了 status 模块</span></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -V</div></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [22].png" type="image/png"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">启动 status 模块</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div>        server_name 10.0.0.3;</div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><span style="color:rgb(65, 173, 28);"># 存放网站代码路径</span></div><div>            root /opt/nginx-1-12/html/project_1;</div><div><span style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 </span></div><div>            index  index.html index.htm;  </div><div>        }</div><div></div><div><font color="#41AD1C"># 当</font><font color="#41AD1C">访问10.0.0.3/status的时候，进入状态功能</font></div><div><font color="#E30000">location /status {</font></div><div><font color="#41AD1C"># </font><font color="#41AD1C">开启nginx状态功能</font></div><div><font color="#E30000"></font><font color="#E30000">stub_status on;</font></div><div><font color="#E30000">        }</font></div><div><br></div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>访问 status 页面</div></li></ul><div><br></div><ul><ul><li><div>10.0.0.3/status</div></li></ul></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [23].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 访问日志（access_log）的配置</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">访问日志（access_log）的介绍</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">日志功能对每个用户访问网站的日志信息记录到指定的日志文件里，开发运维人员可以分析用户的浏览器行为，此功能由ngx_http_log_module模块负责，官网地址是: </span><a href="http://nginx.org/en/docs/http/ngx_http_log_module.html" style="font-size:12pt;">http://nginx.org/en/docs/http/ngx_http_log_module.html</a></div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">访问日志（access_log）的配置</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div></div><div><font color="#41AD1C"># 日志的显示格式</font></div><div>    log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</div><div>                      '$status $body_bytes_sent &quot;$http_referer&quot; '</div><div>                      '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';</div><div><br></div><div><font style="color:rgb(65, 173, 28);"># 开启访问日志功能，且 access.log 日志会放到 nginx 软件文件夹下的 logs 文件夹里（即: /opt/nginx-1-12/logs/，</font><font color="#41AD1C"><font>且</font> logs/access.log 等同于 /opt/nginx-1-12/logs/）</font></div><div>    access_log  logs/access.log  main;</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><ul><li><div>日志显示格式的参数说明</div></li></ul><div><br></div><ul><ul><li><div>$remote_addr : 记录客户端ip</div></li><li><div>$remote_user : 远程用户，没有就是 “-”</div></li><li><div>$time_local : 对应[14/Aug/2018:18:46:52 +0800]</div></li><li><div>$request : 对应请求信息&quot;GET /favicon.ico HTTP/1.1&quot;</div></li><li><div>$status : 状态码</div></li><li><div>$body_bytes_sent : 571字节 请求体的大小</div></li><li><div>$http_referer : 对应 “-” ，由于是直接输入浏览器就是 -</div></li><li><div>$http_user_agent : 客户端身份信息</div></li><li><div>$http_x_forwarded_for : 记录客户端的来源真实ip 97.64.34.118</div></li></ul></ul><div><br></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><br></div><ul><li><div>实时监视日志文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>tail -f /opt/nginx-1-12/logs/access.log</div></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;"><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [24].png" type="image/png"></span></div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 限制某个ip访问该网站</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">nginx 限制ip的应用场景</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">如果哪天发现你的 nginx 很慢，或者检查 access.log 时候，有一个傻逼疯狂请求你的 nginx server ，那么可以禁止这个IP访问</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">nginx 限制ip的配置</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><ul><ul><li><div>deny ip -&gt; deny 10.0.0.2 -&gt; 限制某个ip访问该网站</div></li></ul></ul><div><br></div><ul><ul><li><div>deny ip/子网掩码地址 -&gt; deny 10.0.0.0/24 -&gt; 限制整个网段访问该网站</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div>        server_name 10.0.0.3;</div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><font color="#41AD1C"># 限制某个ip访问该网站</font></div><div><font color="#E30000">deny 10.0.0.2</font></div><div><span style="color:rgb(65, 173, 28);"># 存放网站代码路径</span></div><div>            root /opt/nginx-1-12/html/project_1;</div><div><span style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 </span></div><div>            index  index.html index.htm;  </div><div>        }</div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>实时监视日志文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>tail -f /opt/nginx-1-12/logs/access.log</div></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [25].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 错误页面的优化</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">引言</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">在网站运行过程中，可能因为页面不存在等原因，导致网站无法正常响应请求，此时web服务会返回系统的错误码，但是默认的错误页面很不友好</span></div></li></ul><div><br></div><div><img data-filename="1132884-20180827175121359-563259509.png" src="/kevin-blog/Linux/nginx_files/1132884-20180827175121359-563259509.png" type="image/png"></div><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">2.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">错误页面优化的配置</span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div>40x.html 的存放位置</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>[root@kevin_linux ~ 04:30:02]# <font color="#DE5700">tree /opt/nginx-1-12/html</font></div><div><font color="#E30000">/opt/nginx-1-12/html</font></div><div>└── <font color="#E30000">project_1</font></div><div>    ├── <font color="#E30000">40x.html</font></div><div>    └── index.html</div></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div>        server_name 10.0.0.3;</div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><span style="color:rgb(65, 173, 28);"># 存放网站代码路径</span></div><div>            root /opt/nginx-1-12/html/project_1;</div><div><span style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 </span></div><div>            index  index.html index.htm;  </div><div>        }</div><div><br></div><div><font color="#41AD1C"># 指定错误代码所显示的对应页面，即: 当出现 400、402、403、404 错误的时候就会返回 /opt/nginx-1-12/html/project_1 下的 40x.html 页面</font></div><div><font color="#41AD1C">        # 注意: /40x.html 不是根目录下 40x.html 页面，而是 root 配置项所指定的网站路径下的 40x.html</font></div><div><font color="#E30000">error_page 400 403 404 405 /40x.html;</font></div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><ul><li><div>40x.html</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;img style='width:100%;height:100%;' src=https://pic1.zhimg.com/80/v2-77a9281a2bebc7a2ea5e02577af266a8_hd.png&gt;</div></div><div><br></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><br></div><ul><li><div>通过浏览器访问一个不存在的网页</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [26].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">location 语法详解</span></h2></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">location 语法优先级排列</span></div><div><div><br></div><table style="border-collapse:collapse;min-width:100%;"><colgroup><col style="width:130px;"><col style="width:319px;"><col style="width:316px;"></colgroup><tbody><tr><td style="text-align:center;vertical-align:middle;background-color:rgb(234, 234, 234);border:1px solid rgb(187, 187, 187);width:130px;padding:8px;"><span style="font-size:12pt;">匹配符</span></td><td style="vertical-align:middle;background-color:rgb(234, 234, 234);border:1px solid rgb(187, 187, 187);width:319px;padding:8px;"><div style="text-align:center;"><span style="font-size:12pt;">匹配规则</span></div></td><td style="vertical-align:middle;background-color:rgb(234, 234, 234);border:1px solid rgb(187, 187, 187);width:316px;padding:8px;"><div style="text-align:center;"><span style="font-size:12pt;">优先级</span></div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">=</span></div></td><td style="text-align:center;vertical-align:middle;width:319px;padding:8px;border:1px solid;">精确匹配</td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">1</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">^~</span></div></td><td style="text-align:center;vertical-align:middle;width:319px;padding:8px;border:1px solid;">匹配以某个字符串开头</td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">2</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">~</span></div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">区分大小写的正则匹配</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">3</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">~*</span></div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">不区分大小写的正则匹配</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">4</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">!~</span></div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">区分大小写不匹配的正则</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">5</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">!~*</span></div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">不区分大小写不匹配的正则</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">6</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;">/字符串</div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">匹配常规字符串</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">7</div></td></tr><tr><td style="vertical-align:middle;width:130px;padding:8px;border:1px solid;"><div style="text-align:center;"><span style="font-size:12pt;">/</span></div></td><td style="vertical-align:middle;width:319px;padding:8px;border:1px solid;"><div style="text-align:center;">通用匹配，任何请求都会匹配到</div></td><td style="vertical-align:middle;width:316px;padding:8px;border:1px solid;"><div style="text-align:center;">8</div></td></tr></tbody></table><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">location 的实例 </span></div></div><div><br></div><ul><li><div>进入 nginx 的配置文件</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>vim /opt/nginx-1-12/conf/nginx.conf</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">注意: 匹配项的结尾处加 “/” 和 不加 “/” 匹配的时候是有区别的</span></div></li></ul></ul><div><br></div><ul><ul><ul><li><div>^~ /av/ 那么咋匹配的时候就不是 http://10.0.0.3/available 而是 http://10.0.0.3/av/</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div>    server {</div><div>        listen 80;</div><div>        server_name 10.0.0.3;</div><div><br></div><div><font color="#41AD1C"># </font><font style="color:rgb(65, 173, 28);">优先级1，精确匹配，/login -&gt; http://10.0.0.3/login</font></div><div><font color="#41AD1C"></font>location = /login {</div><div>            return 400;</div><div>        }</div><div><br></div><div><font style="color:rgb(65, 173, 28);"># 优先级2，以某个字符串开头,以av开头的，优先匹配这里，区分大小写 -&gt; http://10.0.0.3/available</font></div><div>        location ^~ /av {</div><div>            return 401;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 优先级3，区分大小写的正则匹配 -&gt; http://10.0.0.3/media</font></div><div>        location ~ /media {</div><div>            return 402;</div><div>        }</div><div><br></div><div><font color="#41AD1C"></font><font style="color:rgb(65, 173, 28);"># 优先级4，不区分大小写的正则匹配，所有的 xxx.jpg|gif|png 都走这里 -&gt; http://10.0.0.3/man.jpg</font></div><div>        location ~* .*\.(jpg|gif|png|js|css)$ {</div><div>            return 403;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 优先级7，匹配常规字符串 -&gt; http://10.0.0.3/home</font></div><div>        location /home {</div><div>            return 404;</div><div>        }</div><div><br></div><div><font color="#41AD1C"># 优先级8，通用匹配，任何请求都会匹配到</font></div><div>        location / {</div><div>            return 405;</div><div>        }</div><div><br></div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div></div><ul><li><div>检查nginx配置文件是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><br></div><ul><li><div>访问指定的页面</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [27].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [28].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [29].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [30].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [31].png" type="image/png"></div><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [32].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">root 和 alias 的区别</span></h2><div><br></div><div><a href="https://www.cnblogs.com/pyyu/p/10085444.html">https://www.cnblogs.com/pyyu/p/10085444.html</a></div><div><br></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">1.</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"></span><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">root 和 alias 的区别</span></div><div><span style="box-sizing:border-box;-webkit-tap-highlight-color:transparent;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">root: 指明路径对应的 location 地址 -&gt; 一般用于指明项目路径</span></div></li></ul><div><br></div><ul><li><div>alias: 表示路径映射 -&gt; 一般用于指明静态资源路径</div></li></ul><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">root</span></div><div><br></div><ul><li><div>语法: root 路径;</div></li></ul><div><br></div><ul><li><div>默认值: root html;</div></li></ul><div><br></div><ul><li><div>配置块（即: root 可以在这里配置块中使用）: http{} server{} location{}</div></li></ul><div><br></div><ul><li><div>nginx 查找静态文件的过程: 当 nginx 接收到静态请求后，会截取 域名 或 ip 地址后面的部分（即: /img/0.jpg）作为路径，在 root 参数所指定的路径下查找该静态资源</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">location / {</font></div><div><font style="font-family:Monaco;">    root /opt/static_img</font></div><div><font face="Monaco">}</font></div><div><font face="Monaco"><br></font></div><div><font face="Monaco"><font color="#41AD1C"># 访问 </font><font color="#BA00FF">http://www.test.com/</font><font color="#FA7A00">img/0.jpg</font><font color="#41AD1C"> 相当于文件系统路径 </font></font><font color="#BA00FF">/opt/static_img/</font><font color="#FA7A00">img/0.jpg</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>location /img {</div><div>    root /opt/static_img</div><div>}</div><div><br></div><div><font style="color:rgb(65, 173, 28);"># 访问</font> <font color="#BA00FF">http://www.test.com/</font><font color="#FA7A00">img/0.jpg</font> <font style="color:rgb(65, 173, 28);">相当于文件系统路径</font> <font color="#BA00FF">/opt/static_img/</font><font color="#FA7A00">img/0.jpg</font></div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">alias</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>语法: alias 路径</div></li></ul><div><br></div><ul><li><div>配置块（即: root 可以在这里配置块中使用）: location{}</div></li></ul><div><br></div><ul><li><div>alias 是一个目录的别名</div></li></ul><div><br></div><ul><li><div>一般都会使用 alias 参数配置静态资源路径</div></li></ul><div><br></div><ul><li><div><span style="color:rgb(227, 0, 0);font-weight:bold;">注意: alias 所指定的路径结尾处必须加上 “/”</span></div></li></ul><div><br></div><ul><li><div>nginx 查看静态文件的过程: 当 nginx 接收到静态请求后，会截取【(域名 或 ip地址) +  location 匹配项】 后面的部分（即: /picture/0.jpg）作为路径，在 alias 参数所指定的路径下查找静态资源</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>location <font color="#BA00FF">/</font> {</div><div>    alias /opt/picture_static<font color="#E30000"><b>/</b></font>;</div><div>}</div><div><br></div><div><font color="#41AD1C"># 访问</font> <font color="#BA00FF">http://www.test.com/</font><font color="#FA7A00">dog.gif</font> <font color="#41AD1C">相当于文件系统路径 </font><font color="#BA00FF">/opt/picture_static/</font><font color="#FA7A00">dog.gif</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 访问</font> <font color="#BA00FF">http://www.test.com/</font><font color="#FA7A00">picture/0.jpg</font> <font color="#41AD1C">相当于文件系统路径</font> <font color="#BA00FF">/opt/picture_static/</font><font color="#FA7A00">picture/0.jpg</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>location <font color="#BA00FF">/img</font> {</div><div>    alias /opt/picture_static<font color="#E30000"><b>/</b></font>;</div><div>}</div><div><br></div><div><font color="#41AD1C"># 访问</font> <font color="#BA00FF">http://www.test.com/img/</font><font color="#FA7A00">dog.gif</font> <font color="#41AD1C">相当于文件系统路径</font> <font color="#BA00FF">/opt/picture_static/</font><font color="#FA7A00">dog.gif</font></div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 访问</font> <font color="#BA00FF">http://www.test.com/img/</font><font color="#FA7A00">picture/0.jpg</font> <font color="#41AD1C">相当于文件系统路径</font> <font color="#BA00FF">/opt/picture_static/</font><font color="#FA7A00">picture/0.jpg</font></div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 代理</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">生活中的代理示意图</span></div><div><span style="font-size:14pt;"><br></span></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [33].png" type="image/png"></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">代理示意图</span></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;"><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [34].png" type="image/png"></span></span></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">正向代理示意图</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div>正向代理的对象是客户端</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [35].png" type="image/png"></div><div><span style="font-size:14pt;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">反向代理示意图</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">反向代理的对象是服务端</span></div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [36].png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 正向代理</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">正向代理的介绍</span></div><div><br></div><ul><li><div>正向代理，也就是传说中的代理,他的工作原理就像一个跳板（即: vpn），简单的说：</div></li></ul><div><br></div><ul><ul><li><div>我是一个用户，我访问不了某网站，但是我能访问一个代理服务器，这个代理服务器呢，他能访问那个我不能访问的网站，于是我先连上代理服务器，告诉他我需要那个无法访问网站的内容，代理服务器去取回来，然后返回给我</div></li></ul></ul><div><br></div><ul><li><div>正向代理的对象是客户端</div></li></ul><div><br></div><div><img data-filename="未命名文件 (7).jpg" src="/kevin-blog/Linux/nginx_files/未命名文件 (7).jpg" type="image/jpeg"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">nginx 反向代理</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">反向代理的介绍</span></div><div><br></div><ul><li><div>对于客户端而言，代理服务器就像是原始服务器</div></li></ul><div><br></div><ul><li><div>在反向代理中，代理服务器可以保护和隐藏原始资源服务器</div></li></ul><div><br></div><ul><li><div>nginx 代理 django 服务器就是一个反向代理，我们用户请求 nginx，实际上就是请求 django</div></li></ul><div><br></div><ul><li><div>通俗理解: 浏览器发送请求，nginx 代理服务器接收到请求后，将该请求转交给原始服务器（如：django 服务器）进行处理，然后将结果返回给 nginx 代理服务器，nginx 代理服务器再将结果返回给浏览器</div></li></ul><div><br></div><ul><li><div>为什么不直接请求 django 服务器</div></li></ul><div><br></div><ul><ul><li><div>出于安全考虑，公司是不允许用户直接访问原始服务器（即: django 服务器）</div></li></ul></ul><div><br></div><ul><ul><li><div>直接请求django服务器的话，由于django默认用的是 wsgigiref 单机模块，性能很低，因此用户不会直接请求 django，而是通过使用 uwsgi 支持高并发的一个软件，启动多个进程来处理用户的请求，且 uwsgi 不解析 django 的静态文件语法，因此我们得通过 nginx 处理 django 项目的静态文件</div></li></ul></ul><div><br></div><div><img data-filename="fxdl.jpg" src="/kevin-blog/Linux/nginx_files/fxdl.jpg" type="image/jpeg"></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">实现一个简单的反向代理</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">功能说明: 访问 服务器A 实际上就是访问 服务器B</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">准备两台服务器，且都安装了 nginx</span></div></li></ul><div><br></div><ul><ul><li><div>服务器A -&gt; 10.0.0.3</div></li></ul></ul><div><br></div><ul><ul><li><div>服务器B -&gt; 10.0.0.5</div></li></ul></ul><div><br></div></div><ul><li><div>服务器A 的 <span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div>        server_name 10.0.0.5;</div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><font color="#41AD1C"># 将接收到的请求转交给 10.0.0.5 进行处理</font></div><div><font style="color:rgb(227, 0, 0);">proxy_pass http://10.0.0.5;</font></div><div>        }</div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><ul><li><div>服务器B 的 <span style="font-size:12pt;">nginx 的 nginx.conf 的配置文件设置</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>http {</div><div><br></div><div><span style="color:rgb(65, 173, 28);">  ...</span><span style="color:rgb(65, 173, 28);"></span></div><div><br></div><div><span style="color:rgb(65, 173, 28);"># 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)</span></div><div>    server {</div><div><span style="color:rgb(65, 173, 28);"># 监听端口, 默认80</span></div><div>        listen 80;</div><div><span style="color:rgb(65, 173, 28);"> # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站</span></div><div>        server_name 10.0.0.5;</div><div><span style="color:rgb(65, 173, 28);"># 控制网站访问路径</span></div><div>        location / {</div><div><span style="color:rgb(65, 173, 28);"># 存放网站代码路径</span></div><div>            root /opt/nginx-1-12/html/project_1;</div><div><span style="color:rgb(65, 173, 28);"># 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.5 的时候就会返回一个 index.html 页面 </span></div><div>            index  index.html index.htm;  </div><div>        }</div><div>    }</div><div><br></div><div><span style="color:rgb(65, 173, 28);">...</span></div><div>}</div></div><div><br></div><ul><li><div>检查 服务器A 和 服务器B 的 nginx 配置文件 是否有语法错误</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -t</div></div><div><br></div><ul><li><div>启动 服务器A 和 服务器B 的 nginx 或 平滑重启 nginx</div></li></ul><div><br></div><ul><ul><li><div>如果没有启动 nginx，那么就启动 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx</div></div><div><br></div><ul><ul><li><div>如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>/opt/nginx-1-12/sbin/nginx -s reload</div></div><div><br></div><ul><li><div>对服务器A发起请求，查看服务器是否将请求交给服务器B进行处理</div></li></ul><div><br></div><div><img data-filename="Image.png" src="/kevin-blog/Linux/nginx_files/Image [37].png" type="image/png"></div><div><br></div><div><br></div><div><br></div><div><br></div></div><div><br></div></span></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kevin-blog/Linux/ip地址和端口得到说明.html" class="prev">
        ip地址和端口得到说明
      </a></span> <span class="next"><a href="/kevin-blog/Linux/nginx 负载均衡.html">
        nginx 负载均衡
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/kevin-blog/assets/js/app.dd46475d.js" defer></script><script src="/kevin-blog/assets/js/2.97d04891.js" defer></script><script src="/kevin-blog/assets/js/144.d05092f0.js" defer></script>
  </body>
</html>
