(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{427:function(t,e,r){"use strict";r.r(e);var o=r(25),i=Object(o.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"16pt",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("基本的视图函数")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("基本格式")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import HttpResponse, render, redirect")]),r("div",[r("br")]),r("div",[t._v("def "),r("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("视图函数名称")]),t._v("(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("# 所有跟请求相关的数据，Django都帮你封装到 request 里面了")])]),r("div",[t._v("    return render(request, '"),r("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("html路径")]),t._v("')")],1)]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import HttpResponse, render, redirect")]),r("div",[r("br")]),r("div",[t._v("def view_fn(request):")]),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("# 所有跟请求相关的数据，Django都帮你封装到 request 里面了")])],1),r("div",[t._v("    return render(request, 'index.html')")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("CBV 和 FBV")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("CBV ")]),r("span",{staticStyle:{"font-size":"14pt"}},[t._v("-> class base views")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("CBV的本质还是FBV")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("基于类编写的视图")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# CBV版的添加班级")])],1),r("div",[r("br")]),r("div",[t._v("from django.views import View")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("class AddClass(View):")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# get的请求所执行的代码")])],1),r("div",[t._v("    def get(self, request):")]),r("div",[t._v('        return render(request, "add_class.html")')]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# post的请求所执行的代码，在post的请求中也是可以获取get请求参数 -> request.GET.get('xxx')")])],1),r("div",[t._v("    def post(self, request):")]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("CBV接收url的参数")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[r("font",{attrs:{color:"#41AD1C"}},[t._v("# urls.py")])],1)]),r("div",[r("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[r("br")])]),r("div",[t._v("from django.conf.urls import url")]),r("div",[t._v("from django.contrib import admin")]),r("div",[t._v("from app01 import views")]),r("div",[r("br")]),r("div",[t._v("urlpatterns = [")]),r("div",[t._v("    url(r'^index/(\\d+)/', views.AddClass.as_view())")]),r("div",[t._v("]")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("class AddClass(View):")]),r("div",[r("br")]),r("div",[t._v("    def get(self, request, id):")]),r("div",[t._v("        print(id)")]),r("div",[t._v("        return HttpResponse('get')")]),r("div",[r("br")]),r("div",[t._v("    def post(self, request, id):")]),r("div",[t._v("        print(id)")]),r("div",[t._v("        return HttpResponse('post')")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("dispatch方法")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("dispatch方法其实是CBV源码中用于根据不同的请求方式调用不同的方法（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("在执行CBV中处理请求的方法（即: 你所创建的CBV中的处理get/post请求的方法）之前都会先执行一次 dispatch 方法，因为dispatch方法的作用就是根据不同的请求方式调用不同的方法（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意: 如果在CBV中使用dispatch方法，那么一定要返回调用父类View中的dispatch方法的返回值")]),t._v("，除非自己实现请求方法的分发功能（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("使用场景:")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("ul",[r("li",[r("div",[t._v("CBV处理请求的方法（即: 你所创建的CBV中的处理get/post请求的方法）中出现相同的操作时，可以将该相同的操作放到 dispatch 方法中执行")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.views import View")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("class AddClass(View):")]),r("div",[t._v("    def dispatch(self, request, *args, **kwargs):")]),r("div",[t._v("        print('执行 get方法 和 post方法 都有的操作')")]),r("div",[t._v("        return super(AddClass, self).dispatch(request, *args, **kwargs)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 调用父类View的dispatch方法，根据不同的请求方式调用不同方法（即: 如果是GET请求，那么就会执行下方get方法）")])],1),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("font",{attrs:{color:"#41AD1C"}}),r("font",{attrs:{color:"#E30000"}},[t._v("# 一定要返回调用父类View中的dispatch方法的返回值")])],1),r("div",[r("br")]),r("div",[t._v("    def get(self, request):")]),r("div",[t._v("        return HttpResponse('get')")]),r("div",[r("br")]),r("div",[t._v("    def post(self, request):")]),r("div",[t._v("        return HttpResponse('post')")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("ul",[r("ul",[r("li",[r("div",[t._v("自己实现请求方法的分发功能（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法），类似于中间件的功能")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.views import View")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("class AddClass(View):")]),r("div",[t._v("    def dispatch(self, request, *args, **kwargs):")]),r("div",[t._v("        if request.method == 'GET':")]),r("div",[t._v("            return self.get(request)")]),r("div",[t._v("        else:")]),r("div",[t._v("            return self.post(request)")]),r("div",[r("br")]),r("div",[t._v("    def get(self, request):")]),r("div",[t._v("        return HttpResponse('get')")]),r("div",[r("br")]),r("div",[t._v("    def post(self, request):")]),r("div",[t._v("        return HttpResponse('post')")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意:")]),t._v(" 使用CBV时，需要对urls.py做出相应的修改")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# urls.py")])],1),r("div",[r("br")]),r("div",[t._v("url(r'^add_class/$', AddClass.as_view())")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[t._v("2.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("FBV")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt"}},[t._v("-> function base views")])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("基于函数编写的视图")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# FBV版的添加班级")])],1),r("div",[r("br")]),r("div",[t._v("def add_class(request):")]),r("div",[t._v('    if request.method == "POST":')]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')]),r("div",[t._v('    return render(request, "add_class.html")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"16pt",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("给视图添加装饰器")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("1.")]),r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("使用装饰器装饰FBV")])])],1),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("FBV本身就是一个函数，所以和给普通的函数加装饰器无差")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 计算执行时间的装饰器")])],1),r("div",[t._v("def wrapper(func):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        start_time = time.time()")]),r("div",[t._v("        ret = func(*args, **kwargs)")]),r("div",[t._v("        end_time = time.time()")]),r("div",[t._v('        print("used:", end_time-start_time)')]),r("div",[t._v("        return ret")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# FBV版添加班级@wrapper")])],1),r("div",[t._v("def add_class(request):")]),r("div",[t._v('    if request.method == "POST":')]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')]),r("div",[t._v('    return render(request, "add_class.html")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("2.")]),r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("使用装饰器装饰CBV")])])],1),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("类中的方法与独立函数不完全相同，因此不能直接将函数装饰器应用于类中的方法 ，我们需要先将其转换为方法装饰器")])]),r("li",[r("div",[t._v("Django中提供了"),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("method_decorator")]),t._v("装饰器用于将函数装饰器转换为方法装饰器")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("使用装饰器装饰类中的方法")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# CBV版添加班级")])],1),r("div",[t._v("from django.views import View")]),r("div",[t._v("from django.utils.decorators import method_decorator")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[r("br")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 计算执行时间的装饰器")])],1),r("div",[t._v("def wrapper(func):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        start_time = time.time()")]),r("div",[t._v("        ret = func(*args, **kwargs)")]),r("div",[t._v("        end_time = time.time()")]),r("div",[t._v('        print("used:", end_time-start_time)')]),r("div",[t._v("        return ret")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[t._v("class AddClass(View):")]),r("div",[r("br")]),r("div",[t._v("    @method_decorator(wrapper)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用method_decorator装饰器用于将函数装饰器转换为方法装饰器")])],1),r("div",[t._v("    def get(self, request):")]),r("div",[t._v('        return render(request, "add_class.html")')]),r("div",[r("br")]),r("div",[t._v("    def post(self, request):")]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("使用装饰器直接装饰类")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("通过name指定要装饰的方法，且name参数必传")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# CBV版添加班级")])],1),r("div",[t._v("from django.views import View")]),r("div",[t._v("from django.utils.decorators import method_decorator")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 计算执行时间的装饰器")])],1),r("div",[t._v("def wrapper(func):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        start_time = time.time()")]),r("div",[t._v("        ret = func(*args, **kwargs)")]),r("div",[t._v("        end_time = time.time()")]),r("div",[t._v('        print("used:", end_time - start_time)')]),r("div",[t._v("        return ret")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用装饰器直接装饰类")]),r("font",{attrs:{color:"#41AD1C"}},[t._v("，且name参数必传")])],1),r("div",[t._v("@method_decorator(wrapper, name='get')  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# name 是指定装饰get请求方法，还是post请求方法")])],1),r("div",[t._v("@method_decorator(wrapper, name='post')  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 同时装饰get和post方法")])],1),r("div",[t._v("class AddClass(View):")]),r("div",[r("br")]),r("div",[t._v("    def get(self, request):")]),r("div",[t._v('        return render(request, "add_class.html")')]),r("div",[r("br")]),r("div",[t._v("    def post(self, request):")]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("在dispatch方法添加装饰器")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("在执行get方法和post方法之前先会执行"),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("dispatch方法，因为")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("dispatch方法是分配执行get方法还是post方法，所以在")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("dispatch方法上添加了装饰器等同于同时给get方法和post方法都添加上了装饰器")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# CBV版添加班级")])],1),r("div",[t._v("from django.views import View")]),r("div",[t._v("from django.utils.decorators import method_decorator")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 计算执行时间的装饰器")])],1),r("div",[t._v("def wrapper(func):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        start_time = time.time()")]),r("div",[t._v("        ret = func(*args, **kwargs)")]),r("div",[t._v("        end_time = time.time()")]),r("div",[t._v('        print("used:", end_time - start_time)')]),r("div",[t._v("        return ret")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("class AddClass(View):")]),r("div",[r("br")]),r("div",[t._v("    @method_decorator(wrapper)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 在dispatch方法上添加装饰器")])],1),r("div",[t._v("    def dispatch(self, request, *args, **kwargs):")]),r("div",[t._v("        return super(AddClass, self).dispatch(request, *args, **kwargs)")]),r("div",[r("br")]),r("div",[t._v("    def get(self, request):")]),r("div",[t._v('        return render(request, "add_class.html")')]),r("div",[r("br")]),r("div",[t._v("    def post(self, request):")]),r("div",[t._v('        class_name = request.POST.get("class_name")')]),r("div",[t._v("        models.Classes.objects.create(name=class_name)")]),r("div",[t._v('        return redirect("/class_list/")')])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("Response对象")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("render、"),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("HttpResponse、")]),t._v("redirect、"),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("JsonResponse")]),t._v(" 方法都会返回一个Response对象")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("Response对象中的属性")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".content:")]),t._v(" "),r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("响应内容")]),r("span",{staticStyle:{"font-size":"12pt"}})])]),r("li",[r("div",[r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v(".charset: 响应内容的编码")])])])]),r("li",[r("div",[r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v(".status_code: 响应的状态码")])])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    res_obj = render(request, 'test.html')")]),r("div",[r("br")]),r("div",[t._v("    print(res_obj.content)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 响应的内容 -> bytes类型的html代码")])],1),r("div",[t._v("    print(res_obj.charset)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 响应内容的编码 -> utf-8")])],1),r("div",[t._v("    print(res_obj.status_code)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 响应的状态码 -> 200")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[r("br")])],1),r("div",[t._v("    return res_obj")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("JsonResponse对象")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("JsonResponse 和 ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("HttpResponse 的区别: ")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("响应头的区别，通过 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("JsonResponse 将数据")]),t._v("发送给浏览器，就算Ajax不设置 date_type='json'，接收到的也会是一个对象，因为响应头向浏览器说明了这是一个json数据，所以ajax会自动将他转换为对象")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("JsonResponse 默认只能接受字典类型，如果想接受列表类型的参数，那么就要修改safe关键字参数，下面有提到")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("JsonResponse 的作用生成一个Json格式的字符串，而不需要使用 json 模块去生成Json格式的字符串，直接使用 JsonResponse 就可以了")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.http import JsonResponse")]),r("div",[r("br")]),r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    dic = {'name': 'Kevin', 'age': 18}")]),r("div",[t._v("    res_obj = JsonResponse(dic)")]),r("div",[t._v("    print(res_obj.content)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v('# b\'{"name": "Kevin", "age": 18}\'')])],1),r("div",[t._v("    return res_obj")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("如果要生成一个Json格式的列表，就需要修改safe关键字参数（且safe关键字参数默认等于 True），因为JsonResponse默认只能传递字典类型")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.http import JsonResponse")]),r("div",[r("br")]),r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    dic = [1, 2, 3, 4]")]),r("div",[t._v("    res_obj = JsonResponse(dic, safe=False)")]),r("div",[t._v("    print(res_obj.content)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# b'[1, 2, 3, 4]'")])],1),r("div",[t._v("    return res_obj")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("font",{staticStyle:{"font-size":"16pt"}},[r("span",{staticStyle:{"font-size":"16pt",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("视图函数基础三件套")])])],1),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("所有跟请求相关的数据，Django都帮你封装到 request 里面了")])])])]),r("div",[r("br")]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("1.")]),r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("HttpResponse")])])],1),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("传入一个字符串参数，将该字符串发送给浏览器")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import HttpResponse")]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 所有跟请求相关的数据，Django都帮你封装到 request 里面了")])]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 业务逻辑代码")])]),r("div",[t._v("    return HttpResponse('文字')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("使用 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("HttpResponse 实现简单的 ")]),t._v("render 的功能")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    print(sys.path)")]),r("div",[t._v("    with open('templates/login.html', 'r', encoding='utf-8') as f:")]),r("div",[t._v("        data = f.read()")]),r("div",[t._v("    return HttpResponse(data)")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("django.http 中的 HttpResponse 和 django.shortcuts 中的 HttpResponse 是一样的")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.http import HttpResponse")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 等同于")])],1)]),r("div",[r("br")]),r("div",[t._v("from django.shortcuts import HttpResponse")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("status 参数")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("默认情况下数据返回成功后状态码为200，可以通过 status 参数修改数据返回成功后的状态码")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import HttpResponse")]),r("div",[t._v("import json")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def index(request):")]),r("div",[t._v("    return HttpResponse(json.dumps({'msg': 'hello'}), "),r("font",{attrs:{color:"#FA7A00"}},[t._v("status")]),t._v("=400)")],1)]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("2.")]),r("span",{staticStyle:{"font-size":"14pt","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}}),r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("render")])])],1),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("将指定的HTML文件内容发送给浏览器")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("render 是在 django.http 中的 HttpResponse 基础上封装的")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("render方法所接收的参数（常用的就只有前三个）:")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"867021-20180329215116152-275073384.png",src:"/kevin-blog/Django/视图系统_files/867021-20180329215116152-275073384.png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("requset")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(": ")]),r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("用于生成响应的请求对象")])])]),r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(255, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("template_name")])]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(": 待渲染的HTML模板文件名称")])])]),r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(255, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("context")])]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(": 保存具体数据的字典，用于将字典中的数据填充到HTML模板文件中（类似于我们自己写的Web框架中所用到的 jinja2）")])])]),r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("content_type:")]),t._v(" "),r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("生成的文档要使用的MIME类型。默认为 DEFAULT_CONTENT_TYPE 设置的值。默认为'text/html'")])])]),r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("status:")]),t._v(" "),r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("响应的状态码。默认为200")])])]),r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("useing:")]),t._v(" "),r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("用于加载模板的模板引擎的名称")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import render")]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 所有跟请求相关的数据，Django都帮你封装到 request 里面了")])]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 业务逻辑代码")])]),r("div",[t._v('    return render(request, "index.html", {"name": "Alex", "hobby_list": ["烫头", "泡吧"]})')])]),r("div",[r("br")]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("3.")]),r("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("redirect")])])],1),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("网页重定向")])]),r("li",[r("div",[t._v("接收一个 URL 参数, 表示让浏览器跳转到指定的 URL（网址）")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from django.shortcuts import redirect")]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 所有跟请求相关的数据，Django都帮你封装到 request 里面了")])]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 业务逻辑代码")])]),r("div",[t._v('    return redirect("/login")')]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v('# return redirect("'),r("a",{attrs:{href:"http://www.baidu.com/"}},[t._v("http://www.baidu.com")]),t._v('")')])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("网址重定向的本质: 我要重定向到百度，首先浏览器访问了127.0.0.1:8080/login网址，然后网页服务器接收到消息进行处理后发送消息告诉浏览器叫浏览器请求百度的服务器，然后浏览器再发送消息给百度的服务器请求百度的页面")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"867021-20180614134305941-1759258226.png",src:"/kevin-blog/Django/视图系统_files/867021-20180614134305941-1759258226.png",type:"image/png"}})]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("获取请求的数据")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.path_info -> 获取用户")])]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("访问的url，不包括域名和参数")])],1),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.path_info")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    print(request.path_info)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# /view_fn")])],1),r("div",[t._v("    return HttpResponse('view_fn页面')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.get_full_path() -> 获")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("取用户访问的url，不包括域名，但是包括参数")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.get_full_path()")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    print(request.get_full_path())  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# /view_fn?a=123")])],1),r("div",[t._v("    return HttpResponse('view_fn页面')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.method -> 获取使用了什么请求方式")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.method")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("注意：所有的请求方式都必须大写")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("获取使用了什么请求方式 -> 一般用于判断是使用了 GET请求 还是使用了 POST请求")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    print(request.method)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# GET / POST")])]),r("div",[t._v("    return HttpResponse('文字')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意: 如果要判断使用什么方式进行请求，首先判断 POST 请求")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        return HttpResponse('文字')")]),r("div",[t._v("    else:")]),r("div",[t._v("        return render(request, 'login.html')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.is_ajax() -> 判断是否")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("是ajax请求")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.is_ajax()")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("无论是GET或POST的ajax请求，返回的都是 True，只要是ajax请求返回的都是 True")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    if request.is_ajax():")]),r("div",[t._v("        return HttpResponse('文字')")]),r("div",[t._v("    else:")]),r("div",[t._v("        return render(request, 'login.html')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("5.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.META -> 获取请求头中的信息")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    print(request.META)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取请求头的所有信息")])],1),r("div",[t._v("    print(request.META.get('CONTENT_TYPE'))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取请求类型 -> content_type: application/x-www-form-urlencoded")])],1),r("div",[t._v("    print(request.META.get('REMOTE_ADDR'))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取当前的网址 -> 127.0.0.1")])],1),r("div",[t._v("    print(request.META.get('HTTP_HOST'))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取请求的网址+端口号 -> 127.0.0.1:8000")])],1),r("div",[t._v("    print(request.META.get('SERVER_PORT'))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取请求的端口号 -> 8000")])],1),r("div",[t._v("    print(request.META.get('HTTP_USER_AGENT'))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取请求当前网址的设备信息 -> 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) ……'")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("                                                                            # 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) ……'")])],1),r("div",[t._v("    return HttpResponse('获取请求头的参数')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("6.")]),t._v(" "),r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.body -> 获取请求")])]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("的元数据")])],1),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("元")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("数据: 前端发送过来的数据，且没有被wsgi进行解析")])])])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[t._v("一般我们都会使用 request.body 获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，因为 wsgi 只能解析 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/x-www-form-urlencoded 发送过来的数据，然后放到 request.POST 中，所以 request.POST 无法获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，只能通过 request.body 获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，然后自行解析这些数据")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("request.body -> 只作用于有请求体的请求，因为request.body是从请求体中获取元数据的，且GET请求中没有请求体，所以在GET请求中request.body是获取不到任何元数据的")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v("request.body -> 返回值: bytes类型的元数据")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        body_data = request.body  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 前端发送过来的数据，且没有被wsgi进行解析")])],1),r("div",[t._v("        print(body_data)  "),r("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# b'username=Kevin&age=23' -> 当 contentType 为 application/x-www-form-urlencoded 所接受到的数据结构")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v('                          # b\'{"username":"Kevin", "age":18}\' -> 当 contentType 为 application/json 所接受到的数据结构')])],1),r("div",[t._v("    return render(request, 'login.html')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，并且对数据进行解析")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),r("div",[r("br")]),r("div",[t._v("import json")]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[r("br")]),r("div",[t._v("        bytes_data = request.body  "),r("font",{attrs:{color:"#41AD1C"}},[t._v('# b\'{"username":"Kevin","age":18}\'')])],1),r("div",[r("br")]),r("div",[t._v("        json_data = bytes_data.decode('utf-8') "),r("font",{attrs:{color:"#41AD1C"}},[t._v(' # {"username":"Kevin","age":18}')])],1),r("div",[r("br")]),r("div",[t._v("        data = json.loads(json_data)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# {'age': 18, 'username': 'Kevin'}")])],1),r("div",[r("br")]),r("div",[t._v("    return render(request, 'login.html')")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# login.html")])],1),r("div",[r("br")]),r("div",[t._v("$.ajax({")]),r("div",[t._v("    url: '/views_fn/',")]),r("div",[t._v("    type: 'POST',")]),r("div",[t._v("    contentType: '"),r("font",{attrs:{color:"#FA7A00"}},[t._v("application/json")]),t._v("',")],1),r("div",[t._v("    data: JSON.stringify({username: 'Kevin', age: 18}),")]),r("div",[t._v("    success:function (res) {")]),r("div",[t._v("        console.log(res)")]),r("div",[t._v("    }")]),r("div",[t._v("})")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("7.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.GET -> 获取 GE")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("T 请求的数据")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("注意：")]),r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("所有的请求方式都必须大写")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("通常我们访问一个网址就是使用了 GET 请求")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("获取 GET 请求的数据 -> request.GET")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("request.GET -> 返回值: <QueryDict: {'sid': ['15']}>，如果没有值会返回一个空字典：<QueryDict: {}> -> 类似于一个字典")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("注意: 从 request.GET 中获取到的值都是字符串类型的")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 获取所有 GET 请求的数据")])]),r("div",[t._v("    get_all_data = request.GET")]),r("div",[t._v("    print(get_all_data)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# <QueryDict: {'sid': ['15']}>，如果没有值会返回一个空字典：<QueryDict: {}>")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}}),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("# ")]),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("使用 .get() 方法获取 GET 请求中指定的数据，防止没有该值而报错，因为 request.GET 的返回值是字典，所以可以使用 .get() 方法，如果不懂可以看会字典中的 .get() 方法")])]),r("div",[t._v("    get_data = request.GET.get('sid')")]),r("div",[t._v("    print(get_data)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 15")])]),r("div",[r("br")]),r("div",[t._v("    return render(request, 'login.html')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("8.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.POST -> 获取")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v(" POST 请求的数据")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("注意：")]),r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("所有的请求方式都必须大写")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("获取 POST 请求的数据 -> request.POST")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("request.POST 只能获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/x-www-form-urlencoded 发送过来的数据，不能获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，因为 wsgi 只能解析 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/x-www-form-urlencoded 发送过来的数据，然后放到 request.POST 中，所以 request.POST 无法获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，只能通过 request.body 获取 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("contentType=")]),t._v("application/json 发送过来的数据，然后自行解析这些数据")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("request.POST 什么时候有值:")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("以 application/x-www-form-urlencoded 编码格式发送过来的数据，那么 request.POST 中是有值的")])]),r("li",[r("div",[t._v("以 application/json 编码格式发送过来的数据，那么 request.POST 中是没有值的，只能在 request.body 中获取发送过来的数据自行解析")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("reques")]),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("t.POST -")]),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("> 返回值: ")]),t._v("<QueryDict: {'username': ['Kevin'], 'password': ['123']}>，如果没有值会返回一个空字典：<QueryDict: {}>"),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v(" -> 类似于一个字典")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("注意: 从 request.POST 中获取到的值都是字符串类型的")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 获取所有 POST 请求的数据")])]),r("div",[t._v("    post_all_data = request.POST")]),r("div",[t._v("    print(post_all_data)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# <QueryDict: {'username': ['Kevin'], 'password': ['123']}>，如果没有值会返回一个空字典：<QueryDict: {}>")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("# 使用 .get() 方法获取 POST 请求中指定的数据，防止没有该值而报错，因为 request.POST 的返回值是字典，所以可以使用 .get() 方法，如果不懂可以看会字典中的 .get() 方法")])]),r("div",[t._v("    username = request.POST.get('username')")]),r("div",[t._v("    password = request.POST.get('password')")]),r("div",[t._v("    print(username, password)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# Kevin 123")])]),r("div",[r("br")]),r("div",[t._v("    return render(request, 'login2.html')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("9.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("获取 GET/POST 中实际数据的三种方法")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("request.POST['xxx'] -> "),r("span",{staticStyle:{color:"rgb(198, 197, 0)"}},[t._v("不推荐使用")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("和获取字典中的值是一样的 ")])]),r("li",[r("div",[t._v("如果没有该值就会报错")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# GET/POST 用法都是一样的，这里就使用 POST 举例")])]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    post_all_data = request.POST")]),r("div",[t._v("    print(post_all_data)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# <QueryDict: {'username': ['Kevin'], 'password': ['123']}>，如果没有值会返回一个空字典：<QueryDict: {}>")])]),r("div",[r("br")]),r("div",[t._v("    username = request.POST['username']  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# Kevin")])]),r("div",[t._v("    password = request.POST['password']  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 123")])]),r("div",[r("br")]),r("div",[t._v("    return render(request, 'login2.html')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v(".get('xxx')")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("获取key名为xxx，value为列表中最后一个值（因为value值都是以列表的形式存放的）")])]),r("li",[r("div",[t._v("如果没有该值不会报错，则会返回一个 None")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# GET/POST 用法都是一样的，这里就使用 POST 举例")])]),r("div",[r("br")]),r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    post_all_data = request.POST")]),r("div",[t._v("    print(post_all_data) "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # <QueryDict: {'username': ['Kevin'], 'password': ['123']}>，如果没有值会返回一个空字典：<QueryDict: {}>")])]),r("div",[r("br")]),r("div",[t._v("    username = request.POST.get('username')  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# Kevin")])]),r("div",[t._v("    password = request.POST.get('password')  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 123")])]),r("div",[t._v("    xxx = request.POST.get('xxx')  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None")])]),r("div",[r("br")]),r("div",[t._v("    return render(request, 'login2.html')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".getlist('xxx')")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("获取key名为xxx的值，返回值: 列表（因为value值都是以列表的形式存放的）")])]),r("li",[r("div",[t._v("如果没有该值不会报错，则会返回一个 [] 空列表")])]),r("li",[r("div",[t._v("用处: 有的时候我们要获取POST过来多选框的值（值会有多个），如果使用 .get() 方法获取，只能获取到列表中最后一个值，所有只能使用 .getlist() 方法获取POST过来多选框所有的值")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def views_fn(request):")]),r("div",[t._v("    post_all_data = request.POST")]),r("div",[t._v("    print(post_all_data) "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # <QueryDict: {'teacher_id': ['2'], 'teacher_name': ['Eva_J'], 'class_name': ['1', '2', '4']}>，如果没有值会返回一个空字典：<QueryDict: {}>")])]),r("div",[r("br")]),r("div",[t._v("    teacher_id = request.POST.get('teacher_id')  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 2")])]),r("div",[t._v("    teacher_name = request.POST.get('teacher_name')  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# Eva_J")])]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),t._v("class_name = request.POST.get('class_name')  "),r("span",{staticStyle:{color:"rgb(198, 197, 0)"}},[t._v("# 4")])]),r("div",[t._v("    class_name = request.POST.getlist('class_name') "),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v(" # ['1', '2', '4']")])]),r("div",[r("br")]),r("div",[t._v("    return render(request, 'teacher.html')")])])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("10.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.FILES.get('file_name') -> 获取上传的文件")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("详细请查看 Django 文件上传 的章节")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.FILES.get('file_name')")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def upload_file(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        file_obj = request.FILES.get('img_file') "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 获取上传文件")])]),r("div",[t._v("    return render(request, 'upload_file.html')")])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("其他")])]),r("div",[r("br")]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[t._v("1.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v(" mark_safe -> 不对html标签进行转义")])])],1),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("mark_safe")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[r("br")])],1),r("div",[t._v("from django.utils.safestring import mark_safe  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 不对html标签进行转义")])],1),r("div",[r("br")]),r("div",[t._v("def index(request):")]),r("div",[t._v("    a = mark_safe('<a href=\"https://www.baidu.com\">百度</a>')")]),r("div",[t._v("    return render(request, 'index.html', {'a': a})")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# index.html")])],1),r("div",[r("br")]),r("div",[t._v(t._s("{{ a }}"))])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("request.GET.urlencode() -> ")])]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("将 request.GET （即: 字典）转化成 encode 编码格式的字符串")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("request.GET.urlencode()")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("只作用于GET的请求参数")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("和Python中的 urllib 库中 urlencode 功能是一样的")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问的网址")])],1),r("div",[r("br")]),r("div",[t._v("http://127.0.0.1:8000/index/"),r("font",{attrs:{color:"#FA7A00"}},[t._v("?a=1&b=2&c=3")])],1)]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def index(request):")]),r("div",[r("br")]),r("div",[t._v("    encode_str = request.GET"),r("font",{attrs:{color:"#FA7A00"}},[t._v(".urlencode()")])],1),r("div",[r("br")]),r("div",[t._v("    print(encode_str)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# c=3&b=2&a=1")])],1),r("div",[r("br")]),r("div",[t._v("    print(request.GET)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# <QueryDict: {'c': ['3'], 'b': ['2'], 'a': ['1']}>")])],1),r("div",[r("br")]),r("div",[t._v("    return render(request, 'index.html')")])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("例子")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("5.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("登录例子")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("将视图函数直接写在了 urls.py 文件里")])])]),r("div",[r("br")]),r("div",[r("a",{attrs:{href:"/kevin-blog/Django/视图系统_files/mysite_no_views.rar"}},[r("img",{attrs:{alt:"mysite_no_views.rar",src:"/kevin-blog/Django/视图系统_files/3e7975ed2b12b04f5f2c10a06adea313.png"}})])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# urls.py")])]),r("div",[r("br")]),r("div",[t._v("from django.conf.urls import url")]),r("div",[t._v("from django.contrib import admin")]),r("div",[t._v("from django.shortcuts import HttpResponse, render, redirect")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def login(request):")]),r("div",[t._v("    error_msg = ''")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        email = request.POST.get('email')")]),r("div",[t._v("        password = request.POST.get('password')")]),r("div",[t._v("        if email == '"),r("a",{attrs:{href:"mailto:123@qq.com"}},[t._v("123@qq.com")]),t._v("' and password == '123':")]),r("div",[t._v("            return redirect('"),r("a",{attrs:{href:"http://www.baidu.com/"}},[t._v("http://www.baidu.com")]),t._v("')")]),r("div",[t._v("        else:")]),r("div",[t._v("            error_msg = '登录失败'")]),r("div",[t._v("    return render(request, 'login.html', {'error_msg': error_msg})")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def login2(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        username = request.POST.get('username')")]),r("div",[t._v("        password = request.POST.get('password')")]),r("div",[t._v("        if username == 'Kevin' and password == '123':")]),r("div",[t._v("            ret = '登录成功'")]),r("div",[t._v("        else:")]),r("div",[t._v("            ret = '登录失败'")]),r("div",[t._v("        return HttpResponse(ret)")]),r("div",[t._v("    return render(request, 'login2.html')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("urlpatterns = [")]),r("div",[t._v("    url(r'^admin/', admin.site.urls),")]),r("div",[t._v("    url(r'^login/', login),")]),r("div",[t._v("    url(r'^login2/', login2)")]),r("div",[t._v("]")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("将视图函数写在了单独的 views.py 文件里，然后通过相对导入，导入到 urls.py 文件里")])])]),r("div",[r("br")]),r("div",[r("a",{attrs:{href:"/kevin-blog/Django/视图系统_files/mysite_views.rar"}},[r("img",{attrs:{alt:"mysite_views.rar",src:"/kevin-blog/Django/视图系统_files/ad791923abd11edb7747cc5e9e4d1a12.png"}})])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# views.py")])]),r("div",[r("br")]),r("div",[t._v("from django.shortcuts import HttpResponse, render, redirect")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def login(request):")]),r("div",[t._v("    error_msg = ''")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        email = request.POST.get('email')")]),r("div",[t._v("        password = request.POST.get('password')")]),r("div",[t._v("        if email == '"),r("a",{attrs:{href:"mailto:123@qq.com"}},[t._v("123@qq.com")]),t._v("' and password == '123':")]),r("div",[t._v("            return redirect('"),r("a",{attrs:{href:"http://www.baidu.com/"}},[t._v("http://www.baidu.com")]),t._v("')")]),r("div",[t._v("        else:")]),r("div",[t._v("            error_msg = '登录失败'")]),r("div",[t._v("    return render(request, 'login.html', {'error_msg': error_msg})")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def login2(request):")]),r("div",[t._v("    if request.method == 'POST':")]),r("div",[t._v("        username = request.POST.get('username')")]),r("div",[t._v("        password = request.POST.get('password')")]),r("div",[t._v("        if username == 'Kevin' and password == '123':")]),r("div",[t._v("            ret = '登录成功'")]),r("div",[t._v("        else:")]),r("div",[t._v("            ret = '登录失败'")]),r("div",[t._v("        return HttpResponse(ret)")]),r("div",[t._v("    return render(request, 'login2.html')")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# urls.py")])]),r("div",[r("br")]),r("div",[t._v("from django.conf.urls import url")]),r("div",[t._v("from django.contrib import admin")]),r("div",[t._v("from .views import *")]),r("div",[r("br")]),r("div",[t._v("urlpatterns = [")]),r("div",[t._v("    url(r'^admin/', admin.site.urls),")]),r("div",[t._v("    url(r'^login/', login),")]),r("div",[t._v("    url(r'^login2/', login2)")]),r("div",[t._v("]")])]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);e.default=i.exports}}]);