(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{511:function(t,i,o){"use strict";o.r(i);var r=o(25),n=Object(r.a)({},(function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("div",[o("span",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("div",[o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("网站服务")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("网站服务的介绍")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("想必我们大多数人都是通过访问网站而开始接触互联网的吧。我们平时访问的网站服务 就是 Web 网络服务，一般是指允许用户通过浏览器访问到互联网中各种资源的服务")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("Web 网络服务是一种被动访问的服务程序，即只有接收到互联网中其他主机发出的 请求后才会响应，最终用于提供服务程序的 Web 服务器会通过 HTTP(超文本传输协议)或 HTTPS(安全超文本传输协议)把请求的内容传送给用户")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("目前能够提供 Web 网络服务的程序有 IIS、Nginx 和 Apache 等。其中，IIS(Internet Information Services，互联网信息服务)是 Windows 系统中默认的 Web 服务程序")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("2004 年 10 月 4 日，为俄罗斯知名门户站点而开发的 Web 服务程序 Nginx 横空出世。 Nginx 程序作为一款轻量级的网站服务软件，因其稳定性和丰富的功能而快速占领服务器市 场，但 Nginx 最被认可的还当是系统资源消耗低且并发能力强，因此得到了国内诸如新浪、 网易、腾讯等门户站的青睐")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("示意图一")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("发送静态请求("),o("a",{attrs:{href:"http://www.pythonav.cn/xiaocang.jpg"}},[t._v("http://www.pythonav.cn/xiaocang.jpg")]),t._v(")")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("① 浏览器向服务器发送一个静态请求获取一些静态资源（如: 文件、图片、视频）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("② web server（即 web 服务器: nginx）接收并处理发送过来的静态请求")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("③ web server（即 web 服务器: nginx）查看所要请求的静态资源（如: 文件、图片、视频）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("④ web server（即 web 服务器: nginx）将查找的结果返回给浏览器，如果没有找到对应的静态资源就会返回一个 404 的页面给浏览器")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("发送动态请求("),o("a",{attrs:{href:"http://www.pythonav.cn/login"}},[t._v("http://www.pythonav.cn/login")]),t._v(")")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("浏览器向服务器发送一个动态请求获取一个页面")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("web server（即 web 服务器: nginx）接收发送过来的动态请求，然后 web server（即: nginx）将该动态请求交给 Application （即 web 应用: python、Django、Flask）进行处理")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("Application （即 web 应用: python、Django、Flask）将动态请求的处理结果返回给 web server（即 web 服务器: nginx）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v(" web server（即 web 服务器: nginx）将动态请求的处理结果返回给浏览器，此时浏览器就会的到一个对应的网页")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"2019082215424546.png",src:"/kevin-blog/Linux/nginx_files/2019082215424546.png",type:"image/png",width:"981"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("示意图二")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"1132884-20181014124743540-1325157612.png",src:"/kevin-blog/Linux/nginx_files/1132884-20181014124743540-1325157612.png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("web 服务器 和 web 框架的关系")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("web服务器（nginx）: 接收HTTP请求（例如 "),o("a",{attrs:{href:"http://www.pythonav.cn/xiaocang.jpg"}},[t._v("www.pythonav.cn/xiaocang.jpg")]),t._v(" ）并返回数据")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("web框架（django，flask）: 开发web应用程序，处理接收到的数据")])])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 的介绍")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("nginx 是什么？")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx是一个开源的，支持高性能，高并发的www服务和代理服务软件。它是一个俄罗斯人lgor sysoev开发的，作者将源代码开源出来供全球使用")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx比它大哥apache性能改进许多，nginx占用的系统资源更少，支持更高的并发连接，有更高的访问效率")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx不但是一个优秀的web服务软件，还可以作为反向代理，负载均衡，以及缓存服务使用")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("为什么要使用 nginx ？ -> 面试题")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("支持高并发，能支持几万并发连接")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("资源消耗少，在3万并发连接下开启10个nginx线程消耗的内存不到200M")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("可以做http反向代理和负载均衡")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("支持异步网络i/o事件模型epoll")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("3.")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)"}}),o("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("nginx 的作用")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("处理浏览器发送过来的请求，返回对应的结果给浏览器")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("静态")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("请求")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("与动态")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("请求")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("静态请求（即: 请求静态资源，如: 文件、图片、视频）")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("nginx 可以接受并处理静态请求，然后找到服务器下对应的静态资源返回给浏览器")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("动态请求（即: 请求网页）")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("① nginx 可以接受动态请求，但是不会处理动态请求，nginx 会将该动态请求交给 web 框架（如: python、Django、Flask）进行处理")])]),o("li",[o("div",[t._v("② web 框架（如: python、Django、Flask）会将动态请求的处理结果返回给 nginx")])]),o("li",[o("div",[t._v("③ nginx 将 web 框架的动态请求处理结果（即: 网页）返回给浏览器")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("5.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("Tengine 和 nginx 的关系")])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("img",{attrs:{"data-filename":"1132884-20180813155012063-443835808.png",src:"/kevin-blog/Linux/nginx_files/1132884-20180813155012063-443835808.png",type:"image/png",width:"261"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("Tengine是由淘宝网发起的Web服务器项目。它在Nginx的基础上，针对大访问量网站的需求，添加了很多高级功能和特性")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("Tengine的性能和稳定性已经在大型的网站如淘宝网，天猫商城等得到了很好的检验。它的最终目标是打造一个高效、稳定、安全、易用的Web平台")])])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("yum 安装 nginx")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("yum install nginx -y")])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("源码编译安装 nginx")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[t._v("1.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("第一步 -> ")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("安装 nginx 所需要的库环境")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("gcc 库的介绍: 安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("pcre 库的介绍: PCRE 是一个Perl库，包括 perl 兼容的正则表达式库。nginx 的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，pcre-devel 是使用 pcre 开发的一个二次开发库")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("zlib 库的介绍: zlib 库提供了很多种压缩和解压缩的方式， nginx 使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("openssl 库的介绍 : 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及 SSL 协议，并提供丰富的应用程序供测试或其它目的使用")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("yum install gcc patch libffi-devel python-devel zlib zlib-devel bzip2-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel openssl openssl-devel pcre pcre-devel -y")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[t._v("2.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("第二步 -> ")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("下载并解压")]),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("软件压缩包")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("下载 ")]),t._v("nginx-1.12.0.tar.gz "),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("压缩包到 /opt 目录下")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("wget -c https://nginx.org/download/nginx-1.12.0.tar.gz")])],1)]),o("div",[o("br")])]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image.png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("解压 nginx-1.12.0.tar.gz 到 /opt 目录下")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("tar -zxvf nginx-1.12.0.tar.gz")])]),o("div",[o("br")])]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [1].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[t._v("3.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("第三步 -> ")]),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("为开始编译做准备")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("执行 nginx 源码包路径下的 configure 脚本文件，为开始编译做准备（即: 为安装软件做准备）")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("configure 脚本文件一般用来生成 Makefile 文件，为下一步的编译做准备")])])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [2].png",type:"image/png"}})])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("命令: "),o("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[t._v("./configure --prefix=路径 --with-http_ssl_module --with-http_stub_status_module ")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("--prefix=路径 -> 指定将 nginx 安装到指定目录下")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("--with-http_ssl_module -> 让 http 支持 ssl_module 模块")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("--with-http_stub_status_module -> 开启nginx状态监测功能（即: 监测有多少人进入过我的网站）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("注意: 该条命令必须在 ")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("nginx-1.12.0")]),t._v(" "),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("目录下运行，否则会找不到需要执行 ")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("configure 脚本文件")])])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./configure --prefix=/opt/nginx-1-12/ --with-http_ssl_module --with-http_stub_status_module")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查是否生成了 Makefile 文件")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [3].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("4.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("第四步 -> 开始编译")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("make 命令的介绍")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("大多数的源代码包都是通过make命令进行编译的（当然有些perl或python编写的软件需要调用perl或python来进行编译）。")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果在 make 过程中出现 error ，你就要记下错误代码（注意不仅仅是最后一行），然后你可以向开发者提交 bugreport（一般在 INSTALL 里有提交地址），或者你的系统少了一些依赖库等，这些需要自己仔细研究错误代码。")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("make 的作用是开始进行源代码编译，以及一些功能的提供，这些功能由他的 Makefile 设置文件提供相关的功能，比如 make install 一般表示进行安装，make uninstall 是卸载，不加参数就是默认的进行源代码编译。")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("make 是 Linux 开发套件里面自动化编译的一个控制程序，他通过借助 Makefile 里面编写的编译规范进行自动化的调用 gcc 、ld 以及运行某些需要的程序进行编译的程序。一般情况下，他所使用的 Makefile 控制代码，由 configure 这个设置脚本根据给定的参数和系统环境生成")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("命令: "),o("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[t._v("make")]),t._v(" -> 开始编译")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意:")])])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("make 命令必须在 ")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("nginx-1.12.0")]),t._v(" "),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("目录下运行")])])]),o("li",[o("div",[t._v("此步骤不会生成 /opt/nginx-1-12/ 软件目录")])])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("make")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("5.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("第五步 -> 安装软件")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("在进行安装软件之前，有些软件需要先运行 make check 或 make test来进行一些测试")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("命令: "),o("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[t._v("make install")]),t._v(" -> 安装软件")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意:")])])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("make install 命令必须在 ")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("nginx-1.12.0")]),t._v(" "),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("目录下运行")])])]),o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("make install 需要使用 root 身份运行")])])]),o("li",[o("div",[t._v("此步骤才会生成 /opt/nginx-1-12/ 软件目录")])])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("make install")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"medium","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"14pt","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"pre-wrap",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-weight":"bold"}},[t._v("6.")]),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"medium","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"14pt","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-weight":"bold"}},[t._v("第四、五")]),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"14pt","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-weight":"bold"}},[t._v("步可以同时执行")])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"medium","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"medium","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"12pt"}},[t._v("执行完编译步骤后，紧接着执行软件的安装")])])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-size":"medium","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}},[t._v("make && make install")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("7.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("第六步 -> 检测 nginx 是否安装成功")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查 /opt/nginx-1-12 目录是否存在")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [4].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查 /opt/nginx-1-12 目录下是否存在以下四个或更多文件夹")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [5].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查 /opt/nginx-1-12/sbin 是否存在 nginx 启动命令")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [6].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [7].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("使用相对路径启动 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("使用绝对路径启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("启动成功后会在 /opt/nginx-1-12/ 目录下生成其他文件夹")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [8].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查 nginx 是否启动")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("ps -ef | grep nginx")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [9].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("在浏览器上访问当前服务器的 ip")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意: ")])])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("ul",[o("li",[o("div",[t._v("显示以下其中一个都代表 nginx 安装并启动成功")])]),o("li",[o("div",[t._v("如果访问不了，请查看防火墙是否已经关闭")])])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [10].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [11].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 的目录结构")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("[root@kevin_linux ~ 06:22:36]# "),o("font",{attrs:{color:"#FA7A00"}},[t._v("ll /opt/nginx-1-12/")])],1),o("div",[t._v("total 0")]),o("div",[t._v("drwx------ 2 nobody root   6 Jan  3 06:02 client_body_temp")]),o("div",[t._v("drwxr-xr-x 2 root   root 333 Jan  3 06:01 "),o("font",{attrs:{color:"#FA7A00"}},[t._v("conf")])],1),o("div",[t._v("drwx------ 2 nobody root   6 Jan  3 06:02 fastcgi_temp")]),o("div",[t._v("drwxr-xr-x 2 root   root  40 Jan  3 06:01 "),o("font",{attrs:{color:"#FA7A00"}},[t._v("html")])],1),o("div",[t._v("drwxr-xr-x 2 root   root  41 Jan  3 06:13 "),o("font",{attrs:{color:"#FA7A00"}},[t._v("logs")])],1),o("div",[t._v("drwx------ 2 nobody root   6 Jan  3 06:02 proxy_temp")]),o("div",[t._v("drwxr-xr-x 2 root   root  19 Jan  3 06:01 "),o("font",{attrs:{color:"#FA7A00"}},[t._v("sbin")])],1),o("div",[t._v("drwx------ 2 nobody root   6 Jan  3 06:02 scgi_temp")]),o("div",[t._v("drwx------ 2 nobody root   6 Jan  3 06:02 uwsgi_temp")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("conf -> 存放 nginx 配置文件的文件夹")])]),o("li",[o("div",[t._v("html -> 存放项目网页的文件夹")])]),o("li",[o("div",[t._v("logs -> 存放 nginx 日志的文件夹")])]),o("li",[o("div",[t._v("sbin -> 存放 nginx 启动脚本的文件夹")])])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 的相关命令")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("1.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("启动 nginx")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用相对路径启动 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用绝对路径启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("2.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("关闭 nginx")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("注意: 如果nginx没有启动，且执行了关闭 nginx 的命令，那么就会报错，因为在nginx启动的时候会在nginx的日志文件夹下生成一个 ")]),o("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("nginx.pid 文件，在正常执行 nginx 关闭命令的时候就会把该文件删掉，如果 nginx 没有启动也就代表没有生成该文件，那么在执行关闭 nginx 命令的时候就无法找到该文件进行删除，所以就会报错，错误提示如下")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [12].png",type:"image/png"}})]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("div",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用相对路径关闭 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx -s stop")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用绝对路径关闭 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s stop")])])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("div",[o("font",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("3.")]),o("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v(" 平滑")]),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("重启 nginx")])])],1),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("平滑重启: 修改了 nginx 配置文件后不重启服务就加载配置且会立即生效")])])])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("div",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用相对路径平滑重启 nginx，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用绝对路径平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("4.")]),o("span",{staticStyle:{"font-size":"14pt","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v(" 检查 nginx 的配置文件是否有语法错误")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用相对路径检查 nginx 的配置文件是否有语法错误，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx -t")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [13].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用绝对路径")]),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("检查 nginx 的配置文件是否有语法错误")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [14].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("5.")]),o("span",{staticStyle:{"font-size":"14pt","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v(" 查看 nginx 的信息")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用相对路径查看 nginx 的信息，且在执行前必须在 /opt/nginx-1-12/sbin 目录下")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("./nginx -V")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用绝对路径")]),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("查看 nginx 的信息")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -V")])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 的主配置文件")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("Nginx 主配置文件 /opt/nginx-1-12/conf/nginx.conf 是一个纯文本类型的文件，整个配置文件是以区块的形式组织的。一般，每个区块以一对大括号 {} 来表示开始与结束")])])]),o("div",[o("br")])]),o("ul",[o("li",[o("div",[t._v("nginx.conf 主配置文件的详解")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("###### Nginx 配置文件 nginx.conf 中文详解 #####")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 定义Nginx运行的用户和用户组")])],1),o("div",[t._v("user www www;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx进程数，建议设置为等于CPU总核心数。")])],1),o("div",[t._v("worker_processes 8;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]")])],1),o("div",[t._v("error_log /usr/local/nginx/logs/error.log info;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 进程pid文件")])],1),o("div",[t._v("pid /usr/local/nginx/logs/nginx.pid;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 指定进程可以打开的最大描述符：数目")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 工作模式与连接数上限")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 这个指令是指当一个nginx进程打开的最多文件描述符数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -n 的值保持一致。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 现在在linux 2.6内核下开启文件打开数为65535，worker_rlimit_nofile就相应应该填写65535。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。")])],1),o("div",[t._v("worker_rlimit_nofile 65535;")]),o("div",[o("br")]),o("div",[t._v("events")]),o("div",[t._v("{")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 是Linux 2.6以上版本内核中的高性能网络I/O模型，linux建议epoll，如果跑在FreeBSD上面，就用kqueue模型。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 补充说明：")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 与apache相类，nginx针对不同的操作系统，有不同的事件模型")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # A）标准事件模型")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # Select、poll属于标准事件模型，如果当前系统不存在更有效的方法，nginx会选择select或poll")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # B）高效事件模型")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # Kqueue：使用于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使用双处理器的MacOS X系统使用kqueue可能会造成内核崩溃。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # Epoll：使用于Linux内核2.6版本及以后的系统。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # /dev/poll：使用于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # Eventport：使用于Solaris 10。 为了防止出现内核崩溃的问题， 有必要安装安全补丁。")])],1),o("div",[t._v("    use epoll;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 单个进程最大连接数（最大连接数=连接数*进程数）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 根据硬件调整，和前面工作进程配合起来用，尽量大，但是别把cpu跑到100%就行。每个进程允许的最多连接数，理论上每台nginx服务器的最大连接数为。")])],1),o("div",[t._v("    worker_connections 65535;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # keepalive超时时间。")])],1),o("div",[t._v("    keepalive_timeout 60;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求头的大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 分页大小可以用命令getconf PAGESIZE 取得。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # [root@web001 ~]# getconf PAGESIZE")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 4096")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页大小”的整倍数。")])],1),o("div",[t._v("    client_header_buffer_size 4k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 这个将为打开文件指定缓存，默认是没有启用的，max指定缓存数量，建议和打开文件数一致，inactive是指经过多长时间文件没被请求后删除缓存。")])],1),o("div",[t._v("    open_file_cache max=65535 inactive=60s;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 这个是指多长时间检查一次缓存的有效信息。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 语法:open_file_cache_valid time 默认值:open_file_cache_valid 60 使用字段:http, server, location 这个指令指定了何时需要检查open_file_cache中缓存项目的有效信息.")])],1),o("div",[t._v("    open_file_cache_valid 80s;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# open_file_cache指令中的inactive参数时间内文件的最少使用次数，如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个文件在inactive时间内一次没被使用，它将被移除。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 语法:open_file_cache_min_uses number 默认值:open_file_cache_min_uses 1 使用字段:http, server, location  这个指令指定了在open_file_cache指令无效的参数中一定的时间范围内可以使用的最小文件数,如果使用更大的值,文件描述符在cache中总是打开状态.")])],1),o("div",[t._v("    open_file_cache_min_uses 1;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 语法:open_file_cache_errors on | off 默认值:open_file_cache_errors off 使用字段:http, server, location 这个指令指定是否在搜索一个文件是记录cache错误.")])],1),o("div",[t._v("    open_file_cache_errors on;")]),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设定http服务器，利用它的反向代理功能提供负载均衡支持")])],1),o("div",[t._v("http")]),o("div",[t._v("{")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 文件扩展名与文件类型映射表")])],1),o("div",[t._v("    include mime.types;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 默认文件类型")])],1),o("div",[t._v("    default_type application/octet-stream;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 默认编码")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # charset utf-8;")])],1),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 服务器名字的hash表大小")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表的大小，并且是一路处理器缓存大小的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找hash表键值成为可能。如果hash bucket size等于一路处理器缓存的大小，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第一次是确定存储单元的地址，第二次是在存储单元中查找键 值。因此，如果Nginx给出需要增大hash max size 或 hash bucket size的提示，那么首要的是增大前一个参数的大小.")])],1),o("div",[t._v("    server_names_hash_bucket_size 128;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求的头部大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。分页大小可以用命令getconf PAGESIZE取得。")])],1),o("div",[t._v("    client_header_buffer_size 32k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 客户请求头缓冲大小。nginx默认会用client_header_buffer_size这个buffer来读取header值，如果header过大，它会使用large_client_header_buffers来读取。")])],1),o("div",[t._v("    large_client_header_buffers 4 64k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设定通过nginx上传文件的大小")])],1),o("div",[t._v("    client_max_body_size 8m;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # sendfile指令指定 nginx 是否调用sendfile 函数（zero copy 方式）来输出文件，对于普通应用，必须设为on。如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络IO处理速度，降低系统uptime。")])],1),o("div",[t._v("    sendfile on;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 开启目录列表访问，合适下载服务器，默认关闭。")])],1),o("div",[t._v("    autoindex on;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用")])],1),o("div",[t._v("    tcp_nopush on;")]),o("div",[o("br")]),o("div",[t._v("    tcp_nodelay on;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 长连接超时时间，单位是秒")])],1),o("div",[t._v("    keepalive_timeout 120;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# FastCGI相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。")])],1),o("div",[t._v("    fastcgi_connect_timeout 300;")]),o("div",[t._v("    fastcgi_send_timeout 300;")]),o("div",[t._v("    fastcgi_read_timeout 300;")]),o("div",[t._v("    fastcgi_buffer_size 64k;")]),o("div",[t._v("    fastcgi_buffers 4 64k;")]),o("div",[t._v("    fastcgi_busy_buffers_size 128k;")]),o("div",[t._v("    fastcgi_temp_file_write_size 128k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # gzip模块设置，对返回的静态资源（如，图片，视频）进行压缩传输，节省带宽")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}}),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 开启gzip压缩输出")])],1),o("div",[t._v("    gzip on;  ")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 最小压缩文件大小")])],1),o("div",[t._v("    gzip_min_length 1k;  ")]),o("div",[o("font",{attrs:{color:"#41AD1C"}}),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 压缩缓冲区")])],1),o("div",[t._v("    gzip_buffers 4 16k; ")]),o("div",[o("font",[o("font",{attrs:{color:"#41AD1C"}})],1),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 压缩版本（默认1.1，前端如果是squid2.5请使用1.0）")]),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}})],1),o("div",[t._v("    gzip_http_version 1.0;  ")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 压缩等级")])],1),o("div",[t._v("    gzip_comp_level 2;  ")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 压缩类型，默认就已经包含textml，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。")])],1),o("div",[t._v("    gzip_types text/plain application/x-javascript text/css application/xml; "),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}})],1),o("div",[t._v("    gzip_vary on;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 开启限制IP连接数的时候需要使用")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # limit_zone crawler $binary_remote_addr 10m;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 负载均衡配置")])],1),o("div",[t._v("    upstream jh.w3cschool.cn {")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。")])],1),o("div",[t._v("        server 192.168.80.121:80 weight=3;")]),o("div",[t._v("        server 192.168.80.122:80 weight=2;")]),o("div",[t._v("        server 192.168.80.123:80 weight=3;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx的upstream目前支持4种方式的分配")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 1、轮询（默认）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 2、weight")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 例如：")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # upstream bakend {")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 192.168.0.14 weight=10;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 192.168.0.15 weight=10;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # }")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 2、ip_hash")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 例如：")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # upstream bakend {")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     ip_hash;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 192.168.0.14:88;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 192.168.0.15:80;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # }")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 3、fair（第三方）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 按后端服务器的响应时间来分配请求，响应时间短的优先分配。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # upstream backend {")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server server1;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server server2;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     fair;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # }")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 4、url_hash（第三方）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 例：在upstream中加入hash语句，server语句中不能写入weight等其他的参数，hash_method是使用的hash算法")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # upstream backend {")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server squid1:3128;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server squid2:3128;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     hash $request_uri;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     hash_method crc32;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # }")])],1),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# tips:")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # upstream bakend{#定义负载均衡设备的Ip及设备状态}{")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     ip_hash;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 127.0.0.1:9090 down;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 127.0.0.1:8080 weight=2;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 127.0.0.1:6060;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        #     server 127.0.0.1:7070 backup;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # }")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 在需要使用负载均衡的server中增加 proxy_pass http://bakend/;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 每个设备的状态设置为:")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 1.down表示单前的server暂时不参与负载")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 2.weight为weight越大，负载的权重就越大。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 3.max_fails：允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream模块定义的错误")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 4.fail_timeout:max_fails次失败后，暂停的时间。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 5.backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # nginx支持同时设置多组的负载均衡，用来给不用的server来使用。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # client_body_in_file_only设置为On 可以讲client post过来的数据记录到文件中用来做debug")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # client_body_temp_path设置记录文件的目录 可以设置最多3层目录")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # location对URL进行匹配.可以进行重定向或者进行新的代理 负载均衡")])],1),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 虚拟主机的配置")])],1),o("div",[t._v("    server")]),o("div",[t._v("    {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 监听端口")])],1),o("div",[t._v("        listen 80;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 域名可以有多个，用空格隔开")])],1),o("div",[t._v("        server_name www.w3cschool.cn w3cschool.cn;")]),o("div",[t._v("        index index.html index.htm index.php;")]),o("div",[t._v("        root /data/www/w3cschool;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 对******进行负载均衡")])],1),o("div",[t._v("        location ~ .*.(php|php5)?$")]),o("div",[t._v("        {")]),o("div",[t._v("            fastcgi_pass 127.0.0.1:9000;")]),o("div",[t._v("            fastcgi_index index.php;")]),o("div",[t._v("            include fastcgi.conf;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 图片缓存时间设置")])],1),o("div",[t._v("        location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$")]),o("div",[t._v("        {")]),o("div",[t._v("            expires 10d;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# JS和CSS缓存时间设置")])],1),o("div",[t._v("        location ~ .*.(js|css)?$")]),o("div",[t._v("        {")]),o("div",[t._v("            expires 1h;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 日志格式设定")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $remote_addr与$http_x_forwarded_for用以记录客户端的ip地址；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $remote_user：用来记录客户端用户名称；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $time_local： 用来记录访问时间与时区；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $request： 用来记录请求的url与http协议；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $status： 用来记录请求状态；成功是200，")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $body_bytes_sent ：记录发送给客户端文件主体内容大小；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $http_referer：用来记录从那个页面链接访问过来的；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # $http_user_agent：记录客户浏览器的相关信息；")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址。")])],1),o("div",[t._v("        log_format access '$remote_addr - $remote_user [$time_local] \"$request\" '")]),o("div",[t._v("        '$status $body_bytes_sent \"$http_referer\" '")]),o("div",[t._v("        '\"$http_user_agent\" $http_x_forwarded_for';")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 定义本虚拟主机的访问日志")])],1),o("div",[t._v("        access_log  /usr/local/nginx/logs/host.access.log  main;")]),o("div",[t._v("        access_log  /usr/local/nginx/logs/host.access.404.log  log404;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v('# 对 "/" 启用反向代理')])],1),o("div",[t._v("        location / {")]),o("div",[t._v("            proxy_pass http://127.0.0.1:88;")]),o("div",[t._v("            proxy_redirect off;")]),o("div",[t._v("            proxy_set_header X-Real-IP $remote_addr;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 后端的Web服务器可以通过X-Forwarded-For获取用户真实IP")])],1),o("div",[t._v("            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 以下是一些反向代理的配置，可选。")])],1),o("div",[t._v("            proxy_set_header Host $host;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 允许客户端请求的最大单文件字节数")])],1),o("div",[t._v("            client_max_body_size 10m;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 缓冲区代理缓冲用户端请求的最大字节数，")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 如果把它设置为比较大的数值，例如256k，那么，无论使用firefox还是IE浏览器，来提交任意小于256k的图片，都很正常。如果注释该指令，使用默认的client_body_buffer_size设置，也就是操作系统页面大小的两倍，8k或者16k，问题就出现了。")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 无论使用firefox4.0还是IE8.0，提交一个比较大，200k左右的图片，都返回500 Internal Server Error错误")])],1),o("div",[t._v("            client_body_buffer_size 128k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 表示使nginx阻止HTTP应答代码为400或者更高的应答。")])],1),o("div",[t._v("            proxy_intercept_errors on;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 后端服务器连接的超时时间_发起握手等候响应超时时间")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # nginx跟后端服务器连接超时时间(代理连接超时)")])],1),o("div",[t._v("            proxy_connect_timeout 90;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 后端服务器数据回传时间(代理发送超时)")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据")])],1),o("div",[t._v("            proxy_send_timeout 90;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 连接成功后，后端服务器响应时间(代理接收超时)")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）")])],1),o("div",[t._v("            proxy_read_timeout 90;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置代理服务器（nginx）保存用户头信息的缓冲区大小")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 设置从被代理服务器读取的第一部分应答的缓冲区大小，通常情况下这部分应答中包含一个小的应答头，默认情况下这个值的大小为指令proxy_buffers中指定的一个缓冲区的大小，不过可以将其设置为更小")])],1),o("div",[t._v("            proxy_buffer_size 4k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# proxy_buffers缓冲区，网页平均在32k以下的设置")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 设置用于读取应答（来自被代理服务器）的缓冲区数目和大小，默认情况也为分页大小，根据操作系统的不同可能是4k或者8k")])],1),o("div",[t._v("            proxy_buffers 4 32k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 高负荷下缓冲大小（proxy_buffers*2）")])],1),o("div",[t._v("            proxy_busy_buffers_size 64k;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置在写入proxy_temp_path时数据的大小，预防一个工作进程在传递文件时阻塞太长")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("            # 设定缓存文件夹大小，大于这个值，将从upstream服务器传")])],1),o("div",[t._v("            proxy_temp_file_write_size 64k;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设定查看Nginx状态的地址")])],1),o("div",[t._v("        location /NginxStatus {")]),o("div",[t._v("            stub_status on;")]),o("div",[t._v("            access_log on;")]),o("div",[t._v('            auth_basic "NginxStatus";')]),o("div",[t._v("            auth_basic_user_file confpasswd;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# htpasswd文件的内容可以用apache提供的htpasswd工具来产生。")])],1),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 本地动静分离反向代理配置")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 所有jsp的页面均交由tomcat或resin处理")])],1),o("div",[t._v("        location ~ .(jsp|jspx|do)?$ {")]),o("div",[t._v("            proxy_set_header Host $host;")]),o("div",[t._v("            proxy_set_header X-Real-IP $remote_addr;")]),o("div",[t._v("            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;")]),o("div",[t._v("            proxy_pass http://127.0.0.1:8080;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 所有静态文件由nginx直接读取不经过tomcat或resin")])],1),o("div",[t._v("        location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|")]),o("div",[t._v("        pdf|xls|mp3|wma)$")]),o("div",[t._v("        {")]),o("div",[t._v("            expires 15d;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[t._v("        location ~ .*.(js|css)?$")]),o("div",[t._v("        {")]),o("div",[t._v("            expires 1h;")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("CoreModule 核心模块配置")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[t._v("# n")]),t._v("ginx进程所使用的用户")])],1),o("div",[t._v("user www;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx运行的 work 进程数量 (建议与CPU数量一致或auto)")])],1),o("div",[t._v("worker_processes 4;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx错误日志存放路径")])],1),o("div",[t._v("error_log /opt/nginx-1-12/logs/error.log;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx服务运行后产生的pid进程号")])],1),o("div",[t._v("pid /opt/nginx-1-12/logs/nginx.pid")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("events 事件模块配置")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("events {")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("每个worker进程支持的最大连接数")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("，不要低于默认值 1024，数值尽可能大，根据实际情况进行配置")])],1),o("div",[t._v("    worker_connections 65535;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("事件驱动模型, 默认为 epoll")])],1),o("div",[t._v("    use epoll;")]),o("div",[o("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[o("br")])]),o("div",[t._v("}")])]),o("div",[o("br")])]),o("ul",[o("li",[o("div",[t._v("http")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div"),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用Server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])],1),o("div",[t._v("    server {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}}),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 监听端口, 默认80")])],1),o("div",[t._v("        listen 80;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])],1),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("访问日志")])],1),o("div",[t._v("        access_log host.access.log")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 控制网站访问路径")])],1),o("div",[t._v("        location / {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 存放网站代码路径")])],1),o("div",[t._v("            root /opt/nginx-1-12/html/;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 服务器返回的默认页面文件")]),o("font",{attrs:{color:"#41AD1C"}},[t._v(", 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面")])],1),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 指定错误代码所显示的对应页面，即: 当出现 500、502、503、504 错误的时候就会返回 /opt/nginx-1-12/html/ 下的 50x.html 页面")])],1),o("div",[t._v("        error_page   500 502 503 504  /50x.html;")]),o("div",[t._v("    }")]),o("div"),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 第二个虚拟主机配置")])],1),o("div",[t._v("    server {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("...")])],1),o("div",[t._v("    }")]),o("div"),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 包含/etc/nginx/conf.d/目录下所有以.conf结尾的文件")])],1),o("div",[t._v("    include /etc/nginx/conf.d/*.conf; ")]),o("div",[o("br")]),o("div",[t._v("}")])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c",color:"rgb(255, 0, 0)","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 上线部署时必须修改的参数")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# nginx运行的 work 进程数量 (建议与CPU数量一致或auto)")])],1),o("div",[t._v("worker_processes 4;")]),o("div",[o("br")]),o("div",[t._v("events {")]),o("div",[o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 每个worker进程支持的最大连接数，不要低于默认值 1024，数值尽可能大，根据实际情况进行配置")])],1),o("div",[t._v("    worker_connections 65535;")]),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[t._v("http {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("...")])],1),o("div",[t._v("}")])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 虚拟主机")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"nginx_xnzj.jpg",src:"/kevin-blog/Linux/nginx_files/nginx_xnzj.jpg",type:"image/jpeg"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("虚拟主机的介绍")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("如果每台linux服务器只运行了一个小网站，那么人气低，流量小的草根站长需要承担高额的服务器租赁费，也造成了硬件资源浪费")])])])]),o("div",[o("font",{staticStyle:{"font-size":"12pt"}},[o("br")])],1),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("虚拟主机就是将一台服务器分割成多个“虚拟服务器”，每个站点使用各自的硬盘空间，由于省资源，省钱，众多网站都使用虚拟主机来部署网站")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("虚拟主机的概念就是在web服务里的一个独立的网站站点，这个站点对应独立的域名（IP），具有独立的程序和资源目录，可以独立的对外提供服务")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("这个独立的站点配置是在nginx.conf中使用server{}代码块标签来表示一个虚拟主机")])])])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("Nginx支持多个server{}标签，即支持多个虚拟主机站点")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("虚拟主机的类型")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("基于域名的虚拟主机 : 通过不同的域名区分不同的虚拟主机，是企业应用最广的虚拟主机。")])])])]),o("div",[o("font",{staticStyle:{"font-size":"12pt"}},[o("br")])],1),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("基于端口的虚拟主机 : 通过不同的端口来区分不同的虚拟主机，一般用作企业内部网站，不对外直接提供服务的后台，例如 ")]),o("a",{staticStyle:{"font-size":"12pt"},attrs:{href:"http://www.pythonav.cn:9000/"}},[t._v("www.pythonav.cn:9000")])])])]),o("div",[o("font",{staticStyle:{"font-size":"12pt"}},[o("br")])],1),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("基于IP的虚拟主机 : 通过不同的IP区分不同的虚拟主机，此类比较少见，一般业务需要多IP的常见都会在负载均衡中绑定 VIP")])])])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("基于服务器ip地址配置虚拟主机")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("使用虚拟主机部署网站")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("将开发好的网站代码放到 nginx 软件目录下的 html 文件夹中")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("[root@kevin_linux ~ 14:19:59]# "),o("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("ls /opt/nginx-1-12/html/project_1")])],1),o("div",[t._v("50x.html  dog.gif  index.html")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("  ...")]),o("font",{attrs:{color:"#41AD1C"}})],1),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])],1),o("div",[t._v("    server {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 监听端口, 默认80")])],1),o("div",[t._v("        listen 80;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])],1),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 控制网站访问路径")])],1),o("div",[t._v("        location / {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 存放网站代码路径")])],1),o("div",[t._v("            root /opt/nginx-1-12/html/project_1;")]),o("div",[o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 ")])],1),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("...")])],1),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("通过浏览器访问网站")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [15].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [16].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("基于域名配置多个虚拟主机")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("将开发好的网站代码放到 nginx 软件目录下的 html 文件夹中")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("[root@kevin_linux ~ 16:04:21]# "),o("font",{attrs:{color:"#FA7A00"}},[t._v("tree /opt/nginx-1-12/html/")])],1),o("div",[t._v("/opt/nginx-1-12/html/")]),o("div",[t._v("├── "),o("font",{attrs:{color:"#E30000"}},[t._v("test_jd")])],1),o("div",[t._v("│   ├── dog.gif")]),o("div",[t._v("│   └── index.html")]),o("div",[t._v("└── "),o("font",{attrs:{color:"#E30000"}},[t._v("test_taobao")])],1),o("div",[t._v("    ├── index.html")]),o("div",[t._v("    └── taobao.jpg")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("server_name www.testtaobao.com;")])],1),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 存放网站代码路径")])]),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("root /opt/nginx-1-12/html/test_taobao;")])],1),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问")]),o("font",{attrs:{color:"#41AD1C"}},[t._v(" www.testtaobao.com 的时候就会返回一个 index.html 页面 ")])],1),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])],1),o("div",[t._v("    server {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 监听端口, 默认80")])],1),o("div",[t._v("        listen 80;")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("server_name www.testjd.com;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 控制网站访问路径")])],1),o("div",[t._v("        location / {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 存放网站代码路径")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("root /opt/nginx-1-12/html/test_jd;")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 www.testjd.com 的时候就会返回一个 index.html 页面")])],1),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent"}},[o("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("检查nginx配置文件是否有语法错误")])])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"8px","font-size":"12px","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"12px",color:"rgb(51, 51, 51)","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("/opt/nginx-1-12/sbin/nginx -t")])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("启动nginx 或 平滑重启 nginx")])])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"0px"}},[o("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("如果没有启动 nginx，那么就启动 nginx")])])])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"8px","font-size":"12px","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"12px",color:"rgb(51, 51, 51)","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("/opt/nginx-1-12/sbin/nginx")])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"0px"}},[o("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])])]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("br",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent"}})]),o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"8px","font-size":"12px","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"12px",color:"rgb(51, 51, 51)","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("将域名写到本地的DNS解析文件里")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("由于我们是通过windows中的浏览器进行访问的，且这两个域名是自定义的在公网上根本找不到，所以要在windows的hosts文件中添加记录")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("hosts 文件就是一个本地DNS强制解析的文件（即: 在DNS解析域名的时候优先会执行解析hosts文件里的域名）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("windows hosts 文件路径")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("C:\\Windows\\System32\\drivers\\etc")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [17].png",type:"image/png"}})]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("修改 hosts 文件")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("ul",[o("li",[o("div",[t._v("在 hosts 文件底部添加以下配置")])])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("10.0.0.3    www.testtaobao.com")]),o("div",[t._v("10.0.0.3    www.testjd.com")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("通过浏览器访问网站")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [18].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [19].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [20].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [21].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 状态信息（status）的配置")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("nginx状态信息（status）配置及信息详解")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("nginx与php-fpm一样内建了一个状态页，对于想了解nginx的状态以及监控nginx非常有帮助。为了后续的zabbix监控，我们需要先了解一下nginx的状态页")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("n")]),o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("ginx状态信息（status）介绍")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("nginx软件在编译时又一个with-http_stub_status_module模块，"),o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("这个模块功能是记录Nginx的基本访问状态信息，让使用者了解Nginx的工作状态")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("要想使用状态模块，在编译时必须增加--with-http_stub_status_module参数")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("查看 nginx 是否安装了 status 模块")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -V")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [22].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("启动 status 模块")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 存放网站代码路径")])]),o("div",[t._v("            root /opt/nginx-1-12/html/project_1;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 ")])]),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div"),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 当")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("访问10.0.0.3/status的时候，进入状态功能")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("location /status {")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("开启nginx状态功能")])],1),o("div",[o("font",{attrs:{color:"#E30000"}}),o("font",{attrs:{color:"#E30000"}},[t._v("stub_status on;")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("        }")])],1),o("div",[o("br")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("访问 status 页面")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("10.0.0.3/status")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [23].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 访问日志（access_log）的配置")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("访问日志（access_log）的介绍")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("日志功能对每个用户访问网站的日志信息记录到指定的日志文件里，开发运维人员可以分析用户的浏览器行为，此功能由ngx_http_log_module模块负责，官网地址是: ")]),o("a",{staticStyle:{"font-size":"12pt"},attrs:{href:"http://nginx.org/en/docs/http/ngx_http_log_module.html"}},[t._v("http://nginx.org/en/docs/http/ngx_http_log_module.html")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("访问日志（access_log）的配置")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div"),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 日志的显示格式")])],1),o("div",[t._v("    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '")]),o("div",[t._v("                      '$status $body_bytes_sent \"$http_referer\" '")]),o("div",[t._v('                      \'"$http_user_agent" "$http_x_forwarded_for"\';')]),o("div",[o("br")]),o("div",[o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 开启访问日志功能，且 access.log 日志会放到 nginx 软件文件夹下的 logs 文件夹里（即: /opt/nginx-1-12/logs/，")]),o("font",{attrs:{color:"#41AD1C"}},[o("font",[t._v("且")]),t._v(" logs/access.log 等同于 /opt/nginx-1-12/logs/）")],1)],1),o("div",[t._v("    access_log  logs/access.log  main;")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("日志显示格式的参数说明")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("$remote_addr : 记录客户端ip")])]),o("li",[o("div",[t._v("$remote_user : 远程用户，没有就是 “-”")])]),o("li",[o("div",[t._v("$time_local : 对应[14/Aug/2018:18:46:52 +0800]")])]),o("li",[o("div",[t._v('$request : 对应请求信息"GET /favicon.ico HTTP/1.1"')])]),o("li",[o("div",[t._v("$status : 状态码")])]),o("li",[o("div",[t._v("$body_bytes_sent : 571字节 请求体的大小")])]),o("li",[o("div",[t._v("$http_referer : 对应 “-” ，由于是直接输入浏览器就是 -")])]),o("li",[o("div",[t._v("$http_user_agent : 客户端身份信息")])]),o("li",[o("div",[t._v("$http_x_forwarded_for : 记录客户端的来源真实ip 97.64.34.118")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("实时监视日志文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("tail -f /opt/nginx-1-12/logs/access.log")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [24].png",type:"image/png"}})])])]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 限制某个ip访问该网站")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("nginx 限制ip的应用场景")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("如果哪天发现你的 nginx 很慢，或者检查 access.log 时候，有一个傻逼疯狂请求你的 nginx server ，那么可以禁止这个IP访问")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("nginx 限制ip的配置")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("deny ip -> deny 10.0.0.2 -> 限制某个ip访问该网站")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("deny ip/子网掩码地址 -> deny 10.0.0.0/24 -> 限制整个网段访问该网站")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 限制某个ip访问该网站")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("deny 10.0.0.2")])],1),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 存放网站代码路径")])]),o("div",[t._v("            root /opt/nginx-1-12/html/project_1;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 ")])]),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("实时监视日志文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("tail -f /opt/nginx-1-12/logs/access.log")])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [25].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 错误页面的优化")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("引言")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("在网站运行过程中，可能因为页面不存在等原因，导致网站无法正常响应请求，此时web服务会返回系统的错误码，但是默认的错误页面很不友好")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"1132884-20180827175121359-563259509.png",src:"/kevin-blog/Linux/nginx_files/1132884-20180827175121359-563259509.png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("2.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("错误页面优化的配置")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("40x.html 的存放位置")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("[root@kevin_linux ~ 04:30:02]# "),o("font",{attrs:{color:"#DE5700"}},[t._v("tree /opt/nginx-1-12/html")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("/opt/nginx-1-12/html")])],1),o("div",[t._v("└── "),o("font",{attrs:{color:"#E30000"}},[t._v("project_1")])],1),o("div",[t._v("    ├── "),o("font",{attrs:{color:"#E30000"}},[t._v("40x.html")])],1),o("div",[t._v("    └── index.html")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 存放网站代码路径")])]),o("div",[t._v("            root /opt/nginx-1-12/html/project_1;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.3 的时候就会返回一个 index.html 页面 ")])]),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 指定错误代码所显示的对应页面，即: 当出现 400、402、403、404 错误的时候就会返回 /opt/nginx-1-12/html/project_1 下的 40x.html 页面")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("        # 注意: /40x.html 不是根目录下 40x.html 页面，而是 root 配置项所指定的网站路径下的 40x.html")])],1),o("div",[o("font",{attrs:{color:"#E30000"}},[t._v("error_page 400 403 404 405 /40x.html;")])],1),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("40x.html")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("<img style='width:100%;height:100%;' src=https://pic1.zhimg.com/80/v2-77a9281a2bebc7a2ea5e02577af266a8_hd.png>")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("通过浏览器访问一个不存在的网页")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [26].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("location 语法详解")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("location 语法优先级排列")])]),o("div",[o("div",[o("br")]),o("table",{staticStyle:{"border-collapse":"collapse","min-width":"100%"}},[o("colgroup",[o("col",{staticStyle:{width:"130px"}}),o("col",{staticStyle:{width:"319px"}}),o("col",{staticStyle:{width:"316px"}})]),o("tbody",[o("tr",[o("td",{staticStyle:{"text-align":"center","vertical-align":"middle","background-color":"rgb(234, 234, 234)",border:"1px solid rgb(187, 187, 187)",width:"130px",padding:"8px"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("匹配符")])]),o("td",{staticStyle:{"vertical-align":"middle","background-color":"rgb(234, 234, 234)",border:"1px solid rgb(187, 187, 187)",width:"319px",padding:"8px"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("匹配规则")])])]),o("td",{staticStyle:{"vertical-align":"middle","background-color":"rgb(234, 234, 234)",border:"1px solid rgb(187, 187, 187)",width:"316px",padding:"8px"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("优先级")])])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("=")])])]),o("td",{staticStyle:{"text-align":"center","vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[t._v("精确匹配")]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("1")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("^~")])])]),o("td",{staticStyle:{"text-align":"center","vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[t._v("匹配以某个字符串开头")]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("2")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("~")])])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("区分大小写的正则匹配")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("3")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("~*")])])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("不区分大小写的正则匹配")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("4")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("!~")])])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("区分大小写不匹配的正则")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("5")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("!~*")])])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("不区分大小写不匹配的正则")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("6")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("/字符串")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("匹配常规字符串")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("7")])])]),o("tr",[o("td",{staticStyle:{"vertical-align":"middle",width:"130px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("/")])])]),o("td",{staticStyle:{"vertical-align":"middle",width:"319px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("通用匹配，任何请求都会匹配到")])]),o("td",{staticStyle:{"vertical-align":"middle",width:"316px",padding:"8px",border:"1px solid"}},[o("div",{staticStyle:{"text-align":"center"}},[t._v("8")])])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("location 的实例 ")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("进入 nginx 的配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("vim /opt/nginx-1-12/conf/nginx.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("注意: 匹配项的结尾处加 “/” 和 不加 “/” 匹配的时候是有区别的")])])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("ul",[o("li",[o("div",[t._v("^~ /av/ 那么咋匹配的时候就不是 http://10.0.0.3/available 而是 http://10.0.0.3/av/")])])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[t._v("    server {")]),o("div",[t._v("        listen 80;")]),o("div",[t._v("        server_name 10.0.0.3;")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# ")]),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("优先级1，精确匹配，/login -> http://10.0.0.3/login")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}}),t._v("location = /login {")],1),o("div",[t._v("            return 400;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 优先级2，以某个字符串开头,以av开头的，优先匹配这里，区分大小写 -> http://10.0.0.3/available")])],1),o("div",[t._v("        location ^~ /av {")]),o("div",[t._v("            return 401;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 优先级3，区分大小写的正则匹配 -> http://10.0.0.3/media")])],1),o("div",[t._v("        location ~ /media {")]),o("div",[t._v("            return 402;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}}),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 优先级4，不区分大小写的正则匹配，所有的 xxx.jpg|gif|png 都走这里 -> http://10.0.0.3/man.jpg")])],1),o("div",[t._v("        location ~* .*\\.(jpg|gif|png|js|css)$ {")]),o("div",[t._v("            return 403;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 优先级7，匹配常规字符串 -> http://10.0.0.3/home")])],1),o("div",[t._v("        location /home {")]),o("div",[t._v("            return 404;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 优先级8，通用匹配，任何请求都会匹配到")])],1),o("div",[t._v("        location / {")]),o("div",[t._v("            return 405;")]),o("div",[t._v("        }")]),o("div",[o("br")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")])]),o("ul",[o("li",[o("div",[t._v("检查nginx配置文件是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("访问指定的页面")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [27].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [28].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [29].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [30].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [31].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [32].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("root 和 alias 的区别")])]),o("div",[o("br")]),o("div",[o("a",{attrs:{href:"https://www.cnblogs.com/pyyu/p/10085444.html"}},[t._v("https://www.cnblogs.com/pyyu/p/10085444.html")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("1.")]),o("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("root 和 alias 的区别")])]),o("div",[o("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("root: 指明路径对应的 location 地址 -> 一般用于指明项目路径")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("alias: 表示路径映射 -> 一般用于指明静态资源路径")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("root")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("语法: root 路径;")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("默认值: root html;")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("配置块（即: root 可以在这里配置块中使用）: http{} server{} location{}")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("nginx 查找静态文件的过程: 当 nginx 接收到静态请求后，会截取 域名 或 ip 地址后面的部分（即: /img/0.jpg）作为路径，在 root 参数所指定的路径下查找该静态资源")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{face:"Monaco"}},[t._v("location / {")])],1),o("div",[o("font",{staticStyle:{"font-family":"Monaco"}},[t._v("    root /opt/static_img")])],1),o("div",[o("font",{attrs:{face:"Monaco"}},[t._v("}")])],1),o("div",[o("font",{attrs:{face:"Monaco"}},[o("br")])],1),o("div",[o("font",{attrs:{face:"Monaco"}},[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问 ")]),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("img/0.jpg")]),o("font",{attrs:{color:"#41AD1C"}},[t._v(" 相当于文件系统路径 ")])],1),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/static_img/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("img/0.jpg")])],1)]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("location /img {")]),o("div",[t._v("    root /opt/static_img")]),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 访问")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("img/0.jpg")]),t._v(" "),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("相当于文件系统路径")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/static_img/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("img/0.jpg")])],1)]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("alias")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("语法: alias 路径")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("配置块（即: root 可以在这里配置块中使用）: location{}")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("alias 是一个目录的别名")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("一般都会使用 alias 参数配置静态资源路径")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("注意: alias 所指定的路径结尾处必须加上 “/”")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("nginx 查看静态文件的过程: 当 nginx 接收到静态请求后，会截取【(域名 或 ip地址) +  location 匹配项】 后面的部分（即: /picture/0.jpg）作为路径，在 alias 参数所指定的路径下查找静态资源")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("location "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/")]),t._v(" {")],1),o("div",[t._v("    alias /opt/picture_static"),o("font",{attrs:{color:"#E30000"}},[o("b",[t._v("/")])]),t._v(";")],1),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("dog.gif")]),t._v(" "),o("font",{attrs:{color:"#41AD1C"}},[t._v("相当于文件系统路径 ")]),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/picture_static/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("dog.gif")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("picture/0.jpg")]),t._v(" "),o("font",{attrs:{color:"#41AD1C"}},[t._v("相当于文件系统路径")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/picture_static/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("picture/0.jpg")])],1)]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("location "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/img")]),t._v(" {")],1),o("div",[t._v("    alias /opt/picture_static"),o("font",{attrs:{color:"#E30000"}},[o("b",[t._v("/")])]),t._v(";")],1),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/img/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("dog.gif")]),t._v(" "),o("font",{attrs:{color:"#41AD1C"}},[t._v("相当于文件系统路径")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/picture_static/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("dog.gif")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 访问")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("http://www.test.com/img/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("picture/0.jpg")]),t._v(" "),o("font",{attrs:{color:"#41AD1C"}},[t._v("相当于文件系统路径")]),t._v(" "),o("font",{attrs:{color:"#BA00FF"}},[t._v("/opt/picture_static/")]),o("font",{attrs:{color:"#FA7A00"}},[t._v("picture/0.jpg")])],1)]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 代理")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("生活中的代理示意图")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [33].png",type:"image/png"}})]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("代理示意图")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [34].png",type:"image/png"}})])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("正向代理示意图")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("正向代理的对象是客户端")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [35].png",type:"image/png"}})]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("反向代理示意图")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("反向代理的对象是服务端")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [36].png",type:"image/png"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 正向代理")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("正向代理的介绍")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("正向代理，也就是传说中的代理,他的工作原理就像一个跳板（即: vpn），简单的说：")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("我是一个用户，我访问不了某网站，但是我能访问一个代理服务器，这个代理服务器呢，他能访问那个我不能访问的网站，于是我先连上代理服务器，告诉他我需要那个无法访问网站的内容，代理服务器去取回来，然后返回给我")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("正向代理的对象是客户端")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"未命名文件 (7).jpg",src:"/kevin-blog/Linux/nginx_files/未命名文件 (7).jpg",type:"image/jpeg"}})]),o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("nginx 反向代理")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("反向代理的介绍")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("对于客户端而言，代理服务器就像是原始服务器")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("在反向代理中，代理服务器可以保护和隐藏原始资源服务器")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("nginx 代理 django 服务器就是一个反向代理，我们用户请求 nginx，实际上就是请求 django")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("通俗理解: 浏览器发送请求，nginx 代理服务器接收到请求后，将该请求转交给原始服务器（如：django 服务器）进行处理，然后将结果返回给 nginx 代理服务器，nginx 代理服务器再将结果返回给浏览器")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("为什么不直接请求 django 服务器")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("出于安全考虑，公司是不允许用户直接访问原始服务器（即: django 服务器）")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("直接请求django服务器的话，由于django默认用的是 wsgigiref 单机模块，性能很低，因此用户不会直接请求 django，而是通过使用 uwsgi 支持高并发的一个软件，启动多个进程来处理用户的请求，且 uwsgi 不解析 django 的静态文件语法，因此我们得通过 nginx 处理 django 项目的静态文件")])])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"fxdl.jpg",src:"/kevin-blog/Linux/nginx_files/fxdl.jpg",type:"image/jpeg"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("实现一个简单的反向代理")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("功能说明: 访问 服务器A 实际上就是访问 服务器B")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("准备两台服务器，且都安装了 nginx")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("服务器A -> 10.0.0.3")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("服务器B -> 10.0.0.5")])])])]),o("div",[o("br")])]),o("ul",[o("li",[o("div",[t._v("服务器A 的 "),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[t._v("        server_name 10.0.0.5;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 将接收到的请求转交给 10.0.0.5 进行处理")])],1),o("div",[o("font",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("proxy_pass http://10.0.0.5;")])],1),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("服务器B 的 "),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("nginx 的 nginx.conf 的配置文件设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("http {")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("  ...")]),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),o("div",[t._v("    server {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 监听端口, 默认80")])]),o("div",[t._v("        listen 80;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),o("div",[t._v("        server_name 10.0.0.5;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 控制网站访问路径")])]),o("div",[t._v("        location / {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 存放网站代码路径")])]),o("div",[t._v("            root /opt/nginx-1-12/html/project_1;")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 服务器返回的默认页面文件, 即: 当浏览器访问 10.0.0.5 的时候就会返回一个 index.html 页面 ")])]),o("div",[t._v("            index  index.html index.htm;  ")]),o("div",[t._v("        }")]),o("div",[t._v("    }")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("...")])]),o("div",[t._v("}")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("检查 服务器A 和 服务器B 的 nginx 配置文件 是否有语法错误")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -t")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("启动 服务器A 和 服务器B 的 nginx 或 平滑重启 nginx")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果没有启动 nginx，那么就启动 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx")])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果已经启动了nginx，那么在修改配置文件后，就平滑重启 nginx")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("/opt/nginx-1-12/sbin/nginx -s reload")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("对服务器A发起请求，查看服务器是否将请求交给服务器B进行处理")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/nginx_files/Image [37].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[o("br")])]),o("div",[o("br")])])])])}),[],!1,null,null,null);i.default=n.exports}}]);