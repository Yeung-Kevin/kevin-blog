(window.webpackJsonp=window.webpackJsonp||[]).push([[308],{659:function(t,i,o){"use strict";o.r(i);var r=o(25),e=Object(r.a)({},(function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("div",[o("span",[o("div",[o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),o("font",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("单例模式的介绍")])])],1),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("一个类始终只有一个实例")])]),o("li",[o("div",[t._v("当你第一次实例化这个类的时候 就创建一个实例化的对象，当你之后再来实例化的时候 就用之前创建的对象")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("单例模式的作用")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o("br")])]),o("ul",[o("li",[o("div",[o("font",{staticStyle:{"font-size":"12pt"}},[t._v("实现数据的统一")])],1)]),o("li",[o("div",[t._v("单例模式的使用场景: 把Django中的配置文件想象成一个类，此时所有的.py文件使用的都是该类实例化出来的同一个对象")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("单例模式的写法")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("写法一 -> 通过 __new__ 方式实现")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("class Person:")]),o("div",[t._v("    __instance = False")]),o("div",[o("br")]),o("div",[t._v("    def __init__(self, name, age):")]),o("div",[t._v("        self.name = name")]),o("div",[t._v("        self.age = age")]),o("div",[o("br")]),o("div",[t._v("    def __new__(cls, *args, **kwargs):")]),o("div",[t._v("        if cls.__instance: "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 如果创建过对象始终返回上一个创建的对象")])]),o("div",[t._v("            return cls.__instance")]),o("div",[t._v("        cls.__instance = object.__new__(cls) "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 创建第一个对象")])]),o("div",[t._v("        return cls.__instance")]),o("div",[o("br")]),o("div",[t._v("k = Person('Kevin', 22)")]),o("div",[t._v("y = Person('Yeung', 18)")]),o("div",[o("br")]),o("div",[t._v("print(k.name)  "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# Yeung")])]),o("div",[t._v("print(y.name) "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # Yeung")])]),o("div",[t._v("print(k)  "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# <__main__.Person object at 0x0000028763FC1FD0>")])]),o("div",[t._v("print(y) "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # <__main__.Person object at 0x0000028763FC1FD0>")])]),o("div",[t._v("print(k == y)  "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# True")])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("写法二 -> 通过模块的方式实现 -> Django 常用的写法")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("通过Python中模块加载只加载一次的特性实现单例模式")])]),o("li",[o("div",[t._v("导入的时候必须导入一个对象，而不是一个类，不然就无法实现单例模式，导入一个对象是因为由始至终都是使用该类实例化出来的同一个对象")])])])]),o("div",[o("br")]),o("div",[o("a",{attrs:{href:"/kevin-blog/Python/面向对象-单例模式_files/singleton_mode.rar"}},[o("img",{attrs:{alt:"singleton_mode.rar",src:"/kevin-blog/Python/面向对象-单例模式_files/bcd997e5b2c14f3f23ce6009474f7765.png"}})])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[t._v("# ")]),t._v("single.py")])],1),o("div",[o("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)","font-family":"Monaco"}},[o("br")])]),o("div",[t._v("class Single(object):")]),o("div",[t._v("    def __init__(self):")]),o("div",[t._v("        self.list = []")]),o("div",[o("br")]),o("div",[t._v("    def add_data(self, data):")]),o("div",[t._v("        self.list.append(data)")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("site = Single()")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# a1.py")])],1),o("div",[o("br")]),o("div",[t._v("from single import site  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 必须导入类所实例化出来的对象")])],1),o("div",[o("br")]),o("div",[t._v("site.add_data(1)")]),o("div",[o("br")]),o("div",[t._v("print(site.list)  "),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# [1]")])],1)])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# a2.py")])],1),o("div",[o("br")]),o("div",[t._v("from single import site  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 必须导入类所实例化出来的对象")])],1),o("div",[o("br")]),o("div",[t._v("site.add_data(2)")]),o("div",[o("br")]),o("div",[t._v("print(site.list)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# [1, 2]")])],1)]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# main.py")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[t._v("from app01 import a1  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 第一次加载 site 对象")])],1),o("div",[t._v("from app02 import a2  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 因为 a1 已经加载了 site 对象，所以 site 对象不会重新加载，而是使用同一个 site 对象，因为 Python 中模块加载只加载一次")])],1),o("div",[o("br")]),o("div",[t._v("from single import site  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 这里只是为了查看数据所以才导入 site 对象")])],1),o("div",[o("br")]),o("div",[t._v("print(site.list)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# [1, 2]")])],1)]),o("div",[o("br")]),o("div",[o("br")])])])])}),[],!1,null,null,null);i.default=e.exports}}]);