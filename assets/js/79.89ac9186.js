(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{437:function(e,v,i){"use strict";i.r(v);var t=i(25),o=Object(t.a)({},(function(){var e=this,v=e.$createElement,i=e._self._c||v;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("div",[i("span",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[e._v("Ajax 嵌套 Ajax（即: Ajax2 要通过 Ajax1 的返回值才能请求）")])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("1.")]),e._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("原始写法")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("$.ajax({")]),i("div",[e._v("    url: 'xxx',")]),i("div",[e._v("    dataType: 'json',")]),i("div",[e._v("    success(res) {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url: 'xxx' + res,")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            success(data) {")]),i("div",[e._v("                console.log(data);")]),i("div",[e._v("            }")]),i("div",[e._v("        })")]),i("div",[e._v("    }")]),i("div",[e._v("});")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("2.")]),e._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("Promise 写法")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("let jqAjax1 = () => {")]),i("div",[e._v("    return new Promise((resolve, reject) => {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url: 'xxx1',")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            success: res => resolve(res),")]),i("div",[e._v("            error: res => reject(res)")]),i("div",[e._v("        });")]),i("div",[e._v("    })")]),i("div",[e._v("};")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[e._v("let jqAjax2 = (data) => {")]),i("div",[e._v("    return new Promise((resolve, reject) => {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url: 'xxx2' + data,")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            success: res => resolve(res),")]),i("div",[e._v("            error: res => reject(res)")]),i("div",[e._v("        });")]),i("div",[e._v("    })")]),i("div",[e._v("};")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[e._v("jqAjax1().then((data) => {")]),i("div",[e._v("    return jqAjax2(data);")]),i("div",[e._v("}).then((data2) => {")]),i("div",[e._v("    console.log(data2);")]),i("div",[e._v("});")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("3.")]),e._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("Promise + async + await 写法")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("let jqAjax1 = () => {")]),i("div",[e._v("    return new Promise((resolve, reject) => {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url: 'xxx1',")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            success: res => resolve(res),")]),i("div",[e._v("            error: res => reject(res)")]),i("div",[e._v("        });")]),i("div",[e._v("    })")]),i("div",[e._v("};")]),i("div",[i("br")]),i("div",[e._v("let jqAjax2 = (data) => {")]),i("div",[e._v("    return new Promise((resolve, reject) => {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url: 'xxx2' + data,")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            success: res => resolve(res),")]),i("div",[e._v("            error: res => reject(res)")]),i("div",[e._v("        });")]),i("div",[e._v("    })")]),i("div",[e._v("};")]),i("div",[i("br")]),i("div",[e._v("async function simplifyPromise() {")]),i("div",[e._v("    let data = await jqAjax1();")]),i("div",[e._v("    let data2 = await jqAjax2(data);")]),i("div",[e._v("}")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("4.")]),e._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("A")]),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("jax 嵌套封装 Promise 写法")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("let ajax = (url, data = {}) => {")]),i("div",[e._v("    return new Promise((resolve, reject) => {")]),i("div",[e._v("        $.ajax({")]),i("div",[e._v("            url,")]),i("div",[e._v("            dataType: 'json',")]),i("div",[e._v("            data,")]),i("div",[e._v("            success: res => resolve(res),")]),i("div",[e._v("            error: errorMsg => resolve(errorMsg)")]),i("div",[e._v("        })")]),i("div",[e._v("    })")]),i("div",[e._v("};")]),i("div",[i("br")]),i("div",[e._v("async function ajaxData() {")]),i("div",[e._v("    let data = await ajax('xxx');")]),i("div",[e._v("    let data2Url = `xxx${data}`;")]),i("div",[e._v("    let data2 = await ajax(data2Url);")]),i("div",[e._v("    console.log(data2);")]),i("div",[e._v("}")])]),i("div",[i("br")])])])])}),[],!1,null,null,null);v.default=o.exports}}]);