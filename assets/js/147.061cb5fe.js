(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{497:function(i,t,o){"use strict";o.r(t);var e=o(25),r=Object(e.a)({},(function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":i.$parent.slotKey}},[o("div",[o("span",[o("div",[o("div",[o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("1.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v("本章节的背景")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[i._v("由于在日常使用云服务器时，安装的redis3.0+版本都会默认关闭 protected-mode （安全模式），因而都遭遇了挖矿病毒的攻击，使得服务器99%的占用率！！")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-weight":"bold",color:"rgb(227, 0, 0)"}},[i._v("因此我们在使用redis时候，最好更改默认端口，并且使用redis密码登录")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[i._v("redis 没有用户概念，redis 只有密码")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[i._v("redis 默认在工作在保护模式下。不允许远程任何用户登录的（protected-mode）")])])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("2.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v("设置 redis 密码，并且开启安全模式")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("font",{staticStyle:{color:"rgb(227, 0, 0)"}},[o("b",[i._v("需重启 redis，密码才会生效")])])],1)])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[i._v("进入 redis 配置文件")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[i._v("vim /opt/redis-4.0.10/redis.conf")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[i._v("设置密码")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[i._v("# 是否开启安全模式，如果开启，那么redis必须设置密码才能进行连接")])],1),o("div",[o("font",{attrs:{color:"#FA7A00"}},[i._v("protected-mode yes")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 设置 redis 登陆密码")])]),o("div",[o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[i._v("requirepass 321")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/redis 安全配置_files/Image.png",type:"image/png"}})]),o("div",[o("br")])]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("3.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v("连接带密码的 redis")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[i._v("方式一 -> 使用 -a 参数 -> 不推荐")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[i._v("不推荐使用，因为在输入的时候是明文输入的容易保留密码")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[i._v("redis-cli -h 10.0.0.3 -p 6380 -a 321")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[i._v("方式二 -> 进入 redis 后再做密码验证 -> 推荐")])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[i._v("redis-cli -h 10.0.0.3 -p 6380")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[i._v("10.0.0.3:6380> "),o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[i._v("auth 321")])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o("br")])]),o("div",[o("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("4.")]),o("span",{staticStyle:{"font-size":"14pt"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v("查看 redis 的密码")])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[i._v("注意:")]),o("span",{staticStyle:{"font-size":"12pt"}},[i._v(" 需要进入redis并且登陆成功后才能进行查看")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[i._v("127.0.0.1:6380> "),o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[i._v("config get requirepass")])])]),o("div",[o("br")]),o("div",[o("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/redis 安全配置_files/Image [1].png",type:"image/png"}})]),o("div",[o("br")]),o("div",[o("b",[o("font",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"white-space":"pre-wrap"}},[i._v("5.")]),i._v(" 假如你发现你的机器中毒，有一个矿机病毒 进程名字 叫做 kdst.sh，并且一直在运行中，吃了你99%的资源的杀毒思路")])],1)]),o("div",[o("br")]),o("ol",[o("li",[o("div",[i._v("ps -ef | grep kdst.sh 找到 kdst.sh 的进程id"),o("br")])])]),o("ol",{attrs:{start:"2"}},[o("li",[o("div",[i._v("kill -9 pid 杀掉 kdst.sh 的进程"),o("br")])])]),o("ol",{attrs:{start:"3"}},[o("li",[o("div",[i._v("此时你会发现这个进程根本杀不死，又启动了，因为设置了定时任务"),o("br")])])]),o("ol",{attrs:{start:"4"}},[o("li",[o("div",[i._v("crontab -l -> 查看定时计划  "),o("br")])])]),o("ol",{attrs:{start:"6"}},[o("li",[o("div",[i._v("* * * * * /tmp/kdst.sh -> 删掉kdst的计划任务"),o("br")])]),o("li",[o("div",[i._v("找到病毒文件 find / -name kdst*"),o("br")])]),o("li",[o("div",[i._v("删掉病毒文件 rm -rf 路径"),o("br")])])]),o("div",[o("br")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);