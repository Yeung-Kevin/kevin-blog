(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{489:function(o,i,r){"use strict";r.r(i);var t=r(25),e=Object(t.a)({},(function(){var o=this,i=o.$createElement,r=o._self._c||i;return r("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("div",[r("div",[r("div",[r("div",[r("div",[r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("MariaDB 的介绍")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源（即: 收费）的潜在风险，因此社区采用分支的方式来避开这个风险")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("MariaDB 和 Mysql 的命令和使用方式都是完全一样的")])])])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("MariaDB 的安装与启动")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("配置 M")]),r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("ariaDB 的 yum 源")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("为什么不直接使用 epel.repo 的 yum 源进行安装？")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("虽然 ")]),r("span",{staticStyle:{"font-size":"12pt"}},[o._v("epel.repo 是存放着很多第三方软件的安装包，但是这些软件安装包有可能不是最新的")])])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("① 在 yum 源存放目录下创建一个 mariadb.repo 源文件")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("touch /etc/yum.repos.d/MariaDB.repo")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("② 配置 mariadb.repo 源")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("vim /etc/yum.repos.d/MariaDB.repo")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("[mariadb]")]),r("div",[o._v("name = MariaDB")]),r("div",[o._v("baseurl = http://yum.mariadb.org/10.1/centos7-amd64")]),r("div",[o._v("gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB")]),r("div",[o._v("gpgcheck=1")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("M")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("ariaDB 的安装")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("① 安装 MariaDB")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("yum install MariaDB-server MariaDB-client -y")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("② 启动 MariaDB")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("systemctl start mariadb")])]),r("div"),r("ul",[r("li",[r("div",[o._v("管理 MariaDB 的相关命令")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("systemctl start mariadb  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 启动 MariaDB")])],1),r("div",[r("br")]),r("div",[o._v("systemctl stop mariadb  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 停止 MariaDB")])],1),r("div",[r("br")]),r("div",[o._v("systemctl restart mariadb  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 重启 MariaDB")])],1),r("div",[r("br")]),r("div",[o._v("systemctl enable mariadb  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 设置开机启动")])],1)]),r("div",[r("br")])]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("初始化 MySQL(MariaDB")]),r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v(")")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("在确认 MySQL(MariaDB) 数据库软件程序安装完毕并成功启动后请不要立即使用。为了确保数据 库的安全性和正常运转，需要先对数据库程序进行初始化操作。这个初始化操作涉及下面 5 个 步骤")])])]),r("div",[r("br")]),r("ol",[r("ol",[r("li",[r("div",[o._v("输入 root 管理员在数据库中的密码(注意，该密码并非 root 管理员在系统中的密码，这里的密码值默认应该为空，可直接按回车键)")])]),r("li",[r("div",[o._v("设置 root 管理员在数据库中的新密码")])]),r("li",[r("div",[o._v("随后删除匿名账户，并使用 root 管理员从远程登录数据库，以确保数据库上运行的业务的安全性")])]),r("li",[r("div",[o._v("删除默认的测试数据库，取消测试数据库的一系列访问权限")])]),r("li",[r("div",[o._v("刷新授权列表，让初始化的设定立即生效")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("执行初始化命令")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mysql_secure_installation")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"TIM截图201912281507282.jpg",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/TIM截图201912281507282.jpg",type:"image/jpeg"}})]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("MySQL(MariaDB) 中文配置")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("使 MySQL(MariaDB) 数据库兼容中文，且只有在服务端与客户端为统一编码的时候才不会出现乱码情况")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("查看 MySQL(MariaDB) 的编码")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("\\s")])],1)]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image.png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入 MySQL(MariaDB) 的配置文件")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("vim /etc/my.cnf")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("添加配置项")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("[mysqld]")]),r("div",[o._v("character-set-server=utf8")]),r("div",[o._v("collation-server=utf8_general_ci")]),r("div",[o._v("log-error=/var/log/mysqld.log")]),r("div",[r("br")]),r("div",[o._v("[client]")]),r("div",[o._v("default-character-set=utf8")]),r("div",[r("br")]),r("div",[o._v("[mysql]")]),r("div",[o._v("default-character-set=utf8")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [1].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("重启 MariaDB ")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("systemctl restart mariadb")])]),r("div",[r("br")])]),r("ul",[r("li",[r("div",[o._v("查看 MySQL(MariaDB) 的编码")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("\\s")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [2].png",type:"image/png"}})]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("MySQL(MariaDB) 的基本使用")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入 MySQL(MariaDB) 数据库")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mysql -u root -p")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("查看所创建的数据库")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("show databases;")])],1)]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [3].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("其他相关命令请查看MySQL笔记")])])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("MySQL(MariaDB)  主从复制")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从复制的介绍")])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("MySQL数据库的主从复制方案，是其自带的功能，并且主从复制并不是复制磁盘上的数据库文件，而是通过binlog日志复制到需要同步的从服务器上")])])])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("MySQL数据库支持单向、双向、链式级联，等不同业务场景的复制。在复制的过程中，一台服务器充当主服务器（Master），接收来自用户的内容更新，而一个或多个其他的服务器充当从服务器（slave），接收来自Master上binlog文件的日志内容，解析出SQL，重新更新到Slave，使得主从服务器数据达到一致")])])])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("在生产环境中，MySQL主从复制都是异步的复制方式，即不是严格的实时复制，但是给用户的体验都是实时的")])])])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("MySQL主从复制集群功能使得MySQL数据库支持大规模高并发读写成为可能，且有效的保护了服务器宕机的数据备份")])])])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从复制的使用场景")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("利用复制功能当主服务器出现问题时，我们可以人工的切换到从服务器继续提供服务，此时服务器的数据和宕机时的数据几乎完全一致")])])])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("复制功能也可用作数据备份，但是如果人为的执行drop,delete等语句删除，那么从库的备份功能也就失效了")])])])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从端的介绍")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[o._v("主端可以理解为是一个服务器 或 数据库，一般用于读和写数据")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("从端可以理解为是一个服务器 或 数据库，一般用于读取数据")])])]),r("div",[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("4.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从复制的逻辑架构")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("一主一从，单向主从同步模式，只能在主 (Master) 端写入数据")])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"ms1.jpg",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/ms1.jpg",type:"image/jpeg"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("一主多从，单向主从同步模式，只能在主 (Master) 端写入数据")])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"ms2.jpg",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/ms2.jpg",type:"image/jpeg"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("双主主复制逻辑架构，此架构可以在 主端1(Master1)或 主端2(Master2) 进行数据写入，或者两端同事写入（需要特殊设置）")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"ms3.jpg",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/ms3.jpg",type:"image/jpeg"}})]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("5.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从复制的工作原理")])]),r("div",[r("br")]),r("ol",[r("ol",[r("li",[r("div",[o._v("用户往“主服务器”读写数据")])]),r("li",[r("div",[o._v("将变动的数据，写入 binary.log 日志中，记录数据库的 sql 变化")])]),r("li",[r("div",[o._v("“从服务器” 与 “主服务器” 进行同步，然后“从服务器”开启一个线程，去读取“主服务器”的 binary.log 日志中的 sql 变动记录")])]),r("li",[r("div",[o._v("“从服务器” 将那些sql变动写入到自己的 relay.log 日志中")])]),r("li",[r("div",[o._v("读取 relay.log 日志中的 sql ，然后在“从服务器”上执行一次")])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"msyl.jpg",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/msyl.jpg",type:"image/jpeg"}})]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("主从复制的配置")])]),r("div",[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("引言")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("本栏目的主从复制的配置架构选择的是 ")]),r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("一主一从")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("配置 一主一从 的架构需要两台服务器（即: 两台数据库）")])])])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主端的配置")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("进入主端 MySQL(MariaDB) 的配置文件")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("vim /etc/my.cnf")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("添加配置项")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("ul",[r("li",[r("div",[o._v("server-id 服务的唯一标识 -> 用于区分谁是主端谁是从端")])]),r("li",[r("div",[o._v("log-bin 启动二进制日志的名称为 xxx")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("[mysqld]")]),r("div",[o._v("server-id=1")]),r("div",[o._v("log-bin=Binary")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [4].png",type:"image/png"}})])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[o._v("重启 MariaDB")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("systemctl restart mariadb")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主端添加从端账号")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",[r("ul",[r("li",[r("div",[o._v("进入主端数据库，创建一个用户用于主从同步，允许登录的从端是'10.0.0.5'")])])]),r("div",[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("create user 'Yeung'@'10.0.0.5' identified by '123';")])],1)]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("在较新的版本中创建用户的密码不能太简单，如果还是想设置简单密码代码如下")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("set global validate_password_policy=0;")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，给从端账号授权，说明给 yeung 从端数据库复制的权限")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("grant replication slave on *.* to 'Yeung'@'10.0.0.5';")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，刷新授权表，使得权限立即生效")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("flush privileges;")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，检查在主端创建的从端账号")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("select user,host from mysql.user;")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，检查授权账号的权限")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("show grants for Yeung@'10.0.0.5';")])],1)]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("4.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("主从同步")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，锁表 -> 防止在进行主从同步的时候有数据写入，导致数据混乱")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("flush table with read lock;")])],1)]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，查看主端的状态")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("show master status;")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("File : 二进制日志文件名")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("Position : 日志开始的位置")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("后面从端会用到 后面从端会用到 后面从端会用到！！！！！！")])])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [5].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("退出主端数据库，导出数据库的所有数据")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("创建 data 文件夹")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mkdir /data")])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("导出数据库的所有数据")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mysqldump -u root -p --all-databases > /data/all.sql")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("将导出的数据库数据远程传输到从端里")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("scp /data/all.sql root@10.0.0.5:/tmp/")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端将接收到的数据库数据导入到从端数据库中")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mysql -u root -p < /tmp/all.sql")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("检查主端和从端的数据库是否一致")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [6].png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("5.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("从端的配置")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("进入从端 MySQL(MariaDB) 的配置文件")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("vim /etc/my.cnf")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("添加配置项")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("server-id 服务的唯一标识 -> 用于区分谁是主端谁是从端")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("[mysqld]")]),r("div",[o._v("server-id=3")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [7].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("重启 MariaDB")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("systemctl restart mariadb")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端数据库，检查从端的各项参数")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("检查日志文件是否开启")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("show variables like 'log_bin';")])],1)]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("检查服务的唯一标识")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("show variables like 'server_id';")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端数据库，开启主从同步技术")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("change master to master_host='10.0.0.3',")])],1),r("div",[r("font",{attrs:{color:"#FA7A00"}},[o._v("master_user='Yeung',")])],1),r("div",[r("font",{attrs:{color:"#FA7A00"}},[o._v("master_password='123',")])],1),r("div",[r("font",{attrs:{color:"#FA7A00"}},[o._v("master_log_file='Binary.000002',")])],1),r("div",[r("font",{attrs:{color:"#FA7A00"}},[o._v("master_log_pos=762;")])],1)]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("change master to master_host='"),r("font",{attrs:{color:"#FA7A00"}},[o._v("主端ip")]),o._v("',")],1),r("div",[o._v("master_user='"),r("font",{attrs:{color:"#FA7A00"}},[o._v("主端给从端创建的用户名")]),o._v("',")],1),r("div",[o._v("master_password='"),r("font",{attrs:{color:"#FA7A00"}},[o._v("主端给从端创建的用户名密码")]),o._v("',")],1),r("div",[o._v("master_log_file='"),r("font",{attrs:{color:"#FA7A00"}},[o._v("日志文件名（即: 在主端数据库中输入 show master status; 命令所显示的日志文件名）")]),o._v("',")],1),r("div",[o._v("master_log_pos="),r("font",{attrs:{color:"#FA7A00"}},[o._v("日志开始的位置（即: 在主端数据库中输入 show master status; 命令所显示的日志开始的位置")]),o._v(";")],1)]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [8].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端数据库，启动从端数据库的同步开关，测试主从复制的情况")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("start slave;")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端数据库，查看同步状态")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("show slave status\\G;")])],1)]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("检查 Slave_IO_Running 和 Slave_SQL_Running 是否为 yes，如果都为 yes 那么代表主从复制配置成功")])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [9].png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("6.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("收尾工作")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，关闭锁表")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("unlock tables;")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("测试主从复制功能")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [10].png",type:"image/png"}})]),r("div",[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("7.")]),o._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("读写分离的配置")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("此时主从复制已经配置完成，已经可以在主端写入数据，从端实时写入了，但是从端的权限太大，不仅能读取主端的数据，还能给从端数据库写入数据，所以需要配置读写分离")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("修改从端的 "),r("span",{staticStyle:{"font-size":"12pt"}},[o._v("MySQL(MariaDB) 的配置文件")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("vim /etc/my.cnf")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("[mysqld]")]),r("div",[o._v("read-only=true")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [11].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，创建一个普通用户，然后在从端上进行登录，查看是否只能读取数据")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("create user 'Eric'@'%' identified by '123';")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，给刚创建的普通用户配置只读权限")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("font",{attrs:{color:"#FA7A00"}},[o._v("grant select on *.* to 'Eric'@'%';")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入主端数据库，刷新授权表，使得权限立即生效")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("MariaDB [(none)]> "),r("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("flush privileges;")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("进入从端，使用刚创建的普通用户进行登陆进入数据库")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[o._v("10.0.0.3 是当前章节中的主端 ip")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("mysql -h 10.0.0.3 -u Eric -p")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[o._v("进入从端数据库，查看是否只有读取数据的功能，并且检查主从复制的功能是否正常运行")])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/MySQL(MariaDB)数据库_files/Image [12].png",type:"image/png"}})]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);i.default=e.exports}}]);