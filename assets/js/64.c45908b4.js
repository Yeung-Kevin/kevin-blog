(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{415:function(t,e,r){"use strict";r.r(e);var o=r(25),i=Object(o.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)"}},[t._v("注意:")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt"}},[t._v("csrf_token验证只作用于POST的请求，GET等其他请求Django都会不进行验证")]),r("span",{staticStyle:{"font-size":"14pt"}},[t._v("，所以POST请求除外的都无需设置csrf_token")])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("模板相关")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("csrf_token的作用: 跨站请求伪造保护，且一般用于form表单的POST请求中")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("csrf_token的通俗理解: 例如，有一个名为A的网址，如果没有设置csrf_token，那么任何网站都可以往这个A网址进行表单提交，如果设置了csrf_token 那么他就会只允许A网址的本站进行表单提交，其他网站对A网址进行表单提交都会无效")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("csrf_token的原理: 它会通过{% csrf_token %}生成一个input，且input的value就是本次form表单的唯一标识（每次刷新页面都会不一样），在进行表单提交的时候一并将该标识提交给后台，然后Django会自动验证该标识是否正确")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Django/csrf token_files/Image.png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意:")]),t._v(" 在刚开始我们所注释配置文件 settings.py 中的 csrf 配置项就是在表单提交的时候不进行 csrf 验证，但是在正常开发中不能把它注释掉，且在form表单中一定要加上 {% csrf_token %} 不然就会报错")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v('<form action="/view_fn/" method="post">')]),r("div",[t._v("    {% csrf_token %}")]),r("div",[t._v('    <input type="text" name="uname">')]),r("div",[t._v('    <input type="submit" value="提交">')]),r("div",[t._v("</form>")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("不加 {% csrf_token %} 的报错")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Django/csrf token_files/Image [1].png",type:"image/png"}})]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("视图相关")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("csrf_exempt 装饰器 -> 不验证当前视图函数的 csrf_token")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco",color:"rgb(65, 173, 28)"}},[t._v("# views.py")])]),r("div",[r("br")]),r("div",[t._v("from django.views.decorators.csrf import csrf_exempt, csrf_protect")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@csrf_exempt")]),r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    return render(request, 'view_fn.html')")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("csrf_protect 装饰器 -> 验证当前视图的 csrf_token，前提是当 settings.py 中的 csrf 配置被注释掉")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# views.py")])]),r("div",[r("br")]),r("div",[t._v("from django.views.decorators.csrf import csrf_exempt, csrf_protect")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@csrf_protect")]),r("div",[t._v("def view_fn(request):")]),r("div",[t._v("    return render(request, 'view_fn.html')")])]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);e.default=i.exports}}]);