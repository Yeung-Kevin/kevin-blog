(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{504:function(o,t,i){"use strict";i.r(t);var e=i(25),r=Object(e.a)({},(function(){var o=this,t=o.$createElement,i=o._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[i("div",[i("span",[i("div",[i("div",[i("div",[i("div",[i("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)"}},[o._v("注意: 本章节是在虚拟环境下运行的")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("WSGI 的介绍")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("uWSGI 的介绍")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("WSGI 是Web服务器网关接口。它是一个协议，WSGI 描述了Web服务器如何与Web应用程序通信，以及Web应用程序如何链接在一起以处理一个请求，（接收请求，处理请求，响应请求）")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("基于 WSGI 运行的框架有 bottle, DJango, Flask, 用于解析动态HTTP请求")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("支持 WSGI 的服务器")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("wsgiref")])]),i("ul",[i("li",[i("div",[o._v("python自带的web服务器 -> 性能很低")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("Gunicorn")])]),i("ul",[i("li",[i("div",[o._v("用于linux的 python wsgi Http服务器，常用于各种django，flask结合部署服务器")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("mode_wsgi")])]),i("ul",[i("li",[i("div",[o._v("实现了Apache与wsgi应用程序的结合")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("uWSGI")])]),i("ul",[i("li",[i("div",[o._v("C语言开发，快速，自我修复，开发人员友好的WSGI服务器，用于Python Web应用程序的专业部署和开发")])])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("在部署 python 程序 web 应用程序时，可以根据性能的需求，选择合适的 wsgi server，不同的 wsgi server 区别在于并发支持上，有单线程，多进程，多线程，协程的区别，其功能还是近似，无非是请求路由，执行对应的函数，返回处理结果")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("uWSGI 注意事项")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("uWSGI 不会处理 static 静态文件的配置")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("建议在虚拟环境中使用 uWSGI")])])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("uWSGI 的安装")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("pip3 install uwsgi -i https://pypi.douban.com/simple ")]),o._v(" "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用豆瓣的镜像")])],1)]),i("div",[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("使用 uWSGI 启动一个 py 文件")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-weight":"bold","font-size":"14pt"}},[o._v("在 /opt/test_py 目录下创建一个 test.py 文件")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("mkdir /opt/test_py")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("touch /opt/test_py/test.py")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("vim /opt/test_py/test.py")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# test.py")])],1),i("div",[i("br")]),i("div",[o._v("def application(env, start_response):")]),i("div",[o._v("    start_response('200 OK', [('Content-Type','text/html')])")]),i("div",[o._v('    return [b"Hello World"] # python3')])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("使用 uWSGI 启动 py 文件")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("命令: "),i("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[o._v("uwsgi --http :端口号 --wsgi-file 路径/文件名.py")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("--http :端口号 -> 使用http协议，启动到xxx端口号")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("--wsgi-file 路径/文件名.py -> 启动指定的文件")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("uwsgi --http :8000 --wsgi-file /opt/test_py/test.py")])],1)]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("访问指定地址")])])]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image.png",type:"image/png"}})]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("使用 uWSGI 热加载启动 Django 项目")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("热加载: 修改文件后，无需重启 uwsgi，直接刷新浏览器查看修改后的效果（即: 实时更新）")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("注意: ")]),i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("uWSGI 不会处理 static 静态文件的配置")])])])]),i("div",[i("br")]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 在 /opt/django_project 目录下创建一个 django 项目")])])],1),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("mkdir /opt/django_project")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("cd /opt/django_project")])],1)]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux /opt/django_project 23:51:36]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("django-admin startproject test_django")])],1)]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("修改 django 配置文件")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("vim /opt/django_project/test_django/test_django/settings.py")])],1)]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# settings.py")])],1),i("div",[i("br")]),i("div",[o._v("ALLOWED_HOSTS = ['*']  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 允许所有ip地址访问该项目，上线时所使用")])],1)]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-weight":"bold","font-size":"14pt"}},[o._v("uWSGI 热加载启动 Django 项目")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("uWSGI 启动 Django 项目要依赖Django项目中的 wsgi.py 文件")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[o._v("命令: "),i("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[o._v("uwsgi --http :端口号 --module django项目名.wsgi --py-autoreload=1")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("--http :端口号 -> 使用http协议，启动到xxx端口号")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("--module django项目名.wsgi -> 指定 uWSGI 所需要的 wsgi.py 文件")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[o._v("django项目名.wsgi 等同于 django项目名/wsgi.py")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[o._v("django项目名.wsgi -> 会自动找到 django项目名文件夹 下的 wsgi.py 文件")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("--py-autoreload=1 -> 使用热加载")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("注意: 该命令必须在 django 项目的目录下执行")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("cd /opt/django_project/test_django/")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("uwsgi --http :8000 --module test_django.wsgi --py-autoreload=1")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("4.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-weight":"bold","font-size":"14pt"}},[o._v("访问指定地址")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [1].png",type:"image/png"}})]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("使用 uWSGI 配置文件启动 Django 项目")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[o._v("注意:")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[o._v("uWSGI 配置文件一般都会创建到项目的目录下，因为根据项目的不同 uWSGI 配置文件也会不同")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("uWSGI 不会处理 static 静态文件的配置")])])])])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 在 /opt/django_project 目录下创建一个 django 项目")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("mkdir /opt/django_project")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("cd /opt/django_project")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux /opt/django_project 23:51:36]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("django-admin startproject test_django")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("修改 django 配置文件")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("vim /opt/django_project/test_django/test_django/settings.py")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# settings.py")])]),i("div",[i("br")]),i("div",[o._v("ALLOWED_HOSTS = ['*']  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 允许所有ip地址访问该项目，上线时所使用")])])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("在项目的目录下创建一个 uWSGI 配置文件")])])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# touch /opt/django_project/test_django/"),i("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("uwsgi_settings.ini")])],1)]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[o._v("4.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 配置文件的内容")])])],1),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("进入 uWSGI 配置文件")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{staticStyle:{"font-size":"9pt"},attrs:{color:"#FA7A00"}},[o._v("vim /opt/django_project/test_django/uwsgi_settings.ini")])],1)]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("查看虚拟环境的绝对路径")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:46:51]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("cdvirtualenv")])],1)]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~/Envs/env1 00:47:14]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("pwd")])],1),i("div",[o._v("/root/Envs/env1")])]),i("div",[i("font",{staticStyle:{"font-size":"12pt"}},[i("br")])],1),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("添加 uWSGI 配置文件内容")])])])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("[uwsgi]")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定项目的第一层绝对路径（即: 是第一个项目文件夹名，而不是第二个项目文件夹名）")])],1),i("div",[o._v("chdir = /opt/django_project/test_django")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定项目的 wsgi.py 文件 -> 写入相对路径即可，因为 module 参数是以 chdir 参数的值作为相对路径 -> test_django.wsgi 等同于 test_django/wsgi.py")])],1),i("div",[o._v("module = test_django.wsgi")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定虚拟环境的绝对路径")])],1),i("div",[o._v("home = /root/Envs/env1")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 是否为主进程")])],1),i("div",[o._v("master = true")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定uwsgi启动的进程个数，根据当前服务器的配置进行设置")])],1),i("div",[o._v("processes = 5")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 nginx + uwsgi 启动项目的时候就使用 socket 参数进行启动")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("#")]),o._v(" socket = 0.0.0.0:8000")],1),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 uwsgi 启动项目的时候使用 html 参数进行启动")])],1),i("div",[i("font",{attrs:{color:"#E30000"}},[o._v("http = 0.0.0.0:8000")])],1),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 热加载")])],1),i("div",[o._v("py-autoreload=1")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 退出 uwsgi 环境后，清空环境变量")])],1),i("div",[o._v("vacuum = true")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 在后台运行 uWSGI")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# ")]),o._v("daemonize = yes")],1)]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [2].png",type:"image/png"}})])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("5.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("使用 uWSGI 启动 Django 项目")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[o._v("命令: "),i("span",{staticStyle:{color:"rgb(186, 0, 255)"}},[o._v("uwsgi --ini 路径/uwsgi配置文件名.ini")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("uwsgi --ini /opt/django_project/test_django/uwsgi_settings.ini")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"white-space":"pre-wrap","font-weight":"bold","font-size":"14pt"}},[o._v("6.")]),i("span",{staticStyle:{"font-weight":"bold","font-size":"14pt"}},[o._v(" 访问指定地址")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [3].png",type:"image/png"}})])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-size":"21px","font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("使用 nginx + uWSGI 配置文件启动 Django 项目")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[o._v("注意:")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[o._v("uWSGI 配置文件一般都会创建到项目的目录下，因为根据项目的不同 uWSGI 配置文件也会不同")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[o._v("uWSGI 不会处理 static 静态文件的配置")])])])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 在 /opt/django_project 目录下创建一个 django 项目")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("mkdir /opt/django_project")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("cd /opt/django_project")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux /opt/django_project 23:51:36]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("django-admin startproject test_django")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("修改 django 配置文件")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("vim /opt/django_project/test_django/test_django/settings.py")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# settings.py")])]),i("div",[i("br")]),i("div",[o._v("ALLOWED_HOSTS = ['*']  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 允许所有ip地址访问该项目，上线时所使用")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("在项目的目录下创建一个 uWSGI 配置文件")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# touch /opt/django_project/test_django/"),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("uwsgi_settings.ini")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"white-space":"pre-wrap","font-weight":"bold","font-size":"14pt"}},[o._v("4.")]),i("span",{staticStyle:{"font-weight":"bold","font-size":"14pt"}},[o._v(" 配置文件的内容")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("进入 uWSGI 配置文件")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 23:49:53]# "),i("span",{staticStyle:{"font-size":"9pt"}},[i("font",{attrs:{color:"#FA7A00"}},[o._v("vim /opt/django_project/test_django/uwsgi_settings.ini")])],1)])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("查看虚拟环境的绝对路径")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:46:51]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("cdvirtualenv")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~/Envs/env1 00:47:14]# "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("pwd")])]),i("div",[o._v("/root/Envs/env1")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("添加 uWSGI 配置文件内容")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("[uwsgi]")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 指定项目的第一层绝对路径（即: 是第一个项目文件夹名，而不是第二个项目文件夹名）")])]),i("div",[o._v("chdir = /opt/django_project/test_django")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 指定项目的 wsgi.py 文件 -> 写入相对路径即可，因为 module 参数是以 chdir 参数的值作为相对路径 -> test_django.wsgi 等同于 test_django/wsgi.py")])]),i("div",[o._v("module = test_django.wsgi")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 指定虚拟环境的绝对路径")])]),i("div",[o._v("home = /root/Envs/env1")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 是否为主进程")])]),i("div",[o._v("master = true")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 指定uwsgi启动的进程个数，根据当前服务器的配置进行设置")])]),i("div",[o._v("processes = 5")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 使用 nginx + uwsgi 启动项目的时候就使用 socket 参数进行启动")])]),i("div",[i("font",{attrs:{color:"#E30000"}},[o._v("socket = 0.0.0.0:8000")])],1),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 使用 uwsgi 启动项目的时候使用 html 参数进行启动")])]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("#")]),o._v(" http = 0.0.0.0:8000")],1),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 热加载")])]),i("div",[o._v("py-autoreload=1")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 退出 uwsgi 环境后，清空环境变量")])]),i("div",[o._v("vacuum = true")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 在后台运行 uWSGI")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# ")]),o._v("daemonize = yes")])]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [4].png",type:"image/png"}})]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("5.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("Django 的静态文件 与 nginx 配置")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("收集当前项目的静态文件，放到指定的路径下，方便 nginx 进行调用")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("修改 django 的配置文件")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:20:02]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("vim /opt/django_project/test_django/test_django/settings.py")])],1)]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# settings.py")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("STATIC_ROOT='/opt/nginx-1-12/static/test_django_static'")]),o._v(" "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 指定收集后的静态文件存放路径")])]),i("div",[o._v("STATIC_URL = '/static/'")]),i("div",[o._v("STATICFILES_DIRS=[")]),i("div",[o._v('    os.path.join(BASE_DIR,"static"),')]),i("div",[o._v("]")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("执行指定命令")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:28:26]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("python /opt/django_project/test_django/manage.py collectstatic")])],1)]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [5].png",type:"image/png"}})]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("6.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("nginx 的配置")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("配置 nginx，配置一个网站入口，当前用户访问 10.0.0.3:80 这个web应用是，自动将请求转发给 uwsgi 进行处理，uwsgi 处理后返回给 nginx，然后 nginx 再将结果返回给用户")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("进入 nginx 的配置文件")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:39:26]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("vim /opt/nginx-1-12/conf/nginx.conf")])],1)]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("nginx 的 nginx.conf 的配置文件设置")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# nginx运行的 work 进程数量 (建议与CPU数量一致或auto)")])]),i("div",[o._v("worker_processes 4;")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("...")])]),i("div",[i("br")]),i("div",[o._v("events {")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 每个worker进程支持的最大连接数")])]),i("div",[o._v("    worker_connections 65535;")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("...")])]),i("div",[o._v("}")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("...")])]),i("div",[i("br")]),i("div",[o._v("http {")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("  ...")]),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}})]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}}),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 定义一个名为 test_django 的负载均衡池")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("upstream test_django {")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 池子中存放着处理请求减轻负载的服务器，默认轮询方式调用服务器")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v(" server 10.0.0.3:8000;")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("    }")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 使用server配置网站, 每个 server{} 代表一个网站 (简称虚拟主机)")])]),i("div",[o._v("    server {")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 监听端口, 默认80")])]),i("div",[o._v("        listen 80;")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v(" # 提供服务的域名或主机名，即: 通过该域名或ip来访问当前配置的网站")])]),i("div",[o._v("        server_name 10.0.0.3;")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 控制网站访问路径")])]),i("div",[o._v("        location / {")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 使用负载均衡")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("uwsgi_pass")]),o._v(" "),i("font",{attrs:{color:"#E30000"}},[o._v("test_django;")])],1),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco",color:"rgb(51, 51, 51)"}}),i("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco",color:"rgb(51, 51, 51)"}}),i("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}}),o._v(" "),i("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco",color:"rgb(65, 173, 28)"}},[o._v("# 不使用负载均衡")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("#")]),o._v(" "),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("uwsgi_pass 10.0.0.3:8000;")])]),i("div",[i("span",{staticStyle:{color:"rgb(70, 70, 70)"}})]),i("div",[i("span",{staticStyle:{color:"rgb(70, 70, 70)"}}),i("span",{staticStyle:{color:"rgb(70, 70, 70)"}}),i("span",{staticStyle:{color:"rgb(70, 70, 70)"}}),o._v(" "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 将 uwsgi_params 配置文件添加到当前虚拟主机上")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("            # include 参数的作用: 减少主配置文件 nginx.conf 的内容，将某部分的配置项单独写在一个配置文件中然后使用 include 参数进行导入，其效果和直接写在 nginx.conf 主配置文件下是一样的")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("            # include 参数如果不使用绝对路径，那么默认会在 /opt/nginx-1-12/conf/ 下寻找你所定义的配置文件")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("include /opt/nginx-1-12/conf/uwsgi_params;")])]),i("div",[o._v("        }")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 配置静态文件的访问路径")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("location /static {")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}}),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}}),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}}),o._v(" "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v('# 使用 alias 所指定的路径结尾处不需使用 "/"')])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("            alias /opt/nginx-1-12/static/test_django_static/;")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("        }")])]),i("div",[o._v("    }")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("...")])]),i("div",[o._v("}")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("7.")]),o._v(" "),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("启动 nginx 和 uWSGI 测试项目是否能正常运行")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("启动 nginx 服务")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:55:26]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("/opt/nginx-1-12/sbin/nginx")])],1)]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("通过 uWSGI 启动项目")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("(env1) [root@kevin_linux ~ 00:55:26]# "),i("font",{attrs:{color:"#FA7A00"}},[o._v("uwsgi --ini /opt/django_project/test_django/uwsgi_settings.ini")])],1)]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[o._v("8.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 访问指定地址")])]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Linux/uWSGI_files/Image [6].png",type:"image/png"}})]),i("div",[i("br")]),i("div",[i("br")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);