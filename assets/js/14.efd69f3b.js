(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{370:function(e,t,i){"use strict";i.r(t);var o=i(25),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("div",[i("span",[i("div",[i("div",[i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[e._v("创建多对多设计模式")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("在这里所说的主表就是定义了ManyToManyField的类就是主表")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),e._v(" "),i("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[e._v("使用 ")]),i("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[e._v("ManyToManyField ")]),i("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[e._v("创建多对多设计模式")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("models.ManyToManyField(to='表的类名', related_name='反向操作使用的属性名')")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("ManyToManyField 的参数解释:")])])]),i("div",[i("br")]),i("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"1px solid transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"0px"}},[i("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[i("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("to -> 设置需要关联表的类名")])])]),i("ul",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px 0px 0px 40px",border:"0px"}},[i("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[i("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("to='Classes' -> 加上引号是为了在当前models.py文件中通过反射去查询表的类")])])]),i("li",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px",border:"1px solid transparent"}},[i("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px"}},[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("to=Classes -> 不加引号，直接使用表的类，如果Classes类定义在to的表类下面那么就会报错，因为Classes未定义就引用了")])])])])])]),i("div",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent",margin:"0px",padding:"0px","font-size":"medium","letter-spacing":"normal",orphans:"2","text-align":"start","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("    -> ")]),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("不加引号的使用场景: 使用导入的表类时无需加引号（不会出现上面的报错情况，因为表类在文件一开始就已经导入了）")])]),i("ul",[i("ul",[i("li",[i("div",[e._v("related_name -> 反向操作时，使用的属性名，用于代替原反向查询时的 '表名_set' 的写法 -> (通俗理解: 给主表起的别名，用于反向操作)")])]),i("li",[i("div",[e._v("related_query_name -> 反向查询操作时，使用的连接前缀，用于替换表名")])]),i("li",[i("div",[e._v("symmetrical -> 仅用于多对多自关联时，指定内部是否创建反向操作的字段，默认为True")])]),i("li",[i("div",[e._v("through -> 在使用ManyToManyField字段时，Django将自动生成一张表来管理多对多的关联关系, 但我们也可以手动创建第三张表来管理多对多关系，此时就需要通过through来指定第三张表的表名")])]),i("li",[i("div",[e._v('through_fields -> 设置关联的字段，默认使用两张表的id进行关联，through_fields=("author", "book")')])]),i("li",[i("div",[e._v("db_table -> 设置第三张表的表名")])])])]),i("div",[i("br")]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[e._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("创建多对多的方式一")])])],1),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("通过 ManyToManyField 自动创建第三张表")])]),i("li",[i("div",[e._v("正常情况下多对多的设计模式需要第三张表，如果使用了 ManyToManyField 去创建多对多设计模式，ManyToManyField 会自动帮你创建第三张表")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# models.ForeignKey(to='表的类名', to_field='字段名', related_name='反向操作使用的属性名')")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 班级表")])]),i("div",[e._v("class Classes(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 学生表")])]),i("div",[e._v("class Student(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    age = models.IntegerField()")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes', related_name='fkclass')")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 教师表")])]),i("div",[e._v("class Teacher(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ManyToManyField(to='Classes')  "),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("# 通过 ManyToManyField 建立多对多关系")])])]),i("div",[i("br")]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[e._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("创建多对多的方式二")])])],1),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])])],1),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("方式二又被称之为: 中介模型")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("设置ManyTomanyField并指定自行创建的第三张表")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("使用该方式建立多对多关系的时候，最好将第三张表中的两个关联字段设置为联合唯一索引，因为在正常情况下多对多关系表中的两个关联字段都不可能重复")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("该创建立方式的使用场景:")])]),i("ul",[i("li",[i("div",[e._v("当第三张表需要额外字段的时候")])]),i("li",[i("div",[e._v("例如: 第三张表是相亲表记录表，字段有: 男生id 女生id 相亲时间，这时就需要使用第二种方式创建")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 学生表")])]),i("div",[e._v("class Student(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    age = models.IntegerField()")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes', related_name='fkclass')")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 班级表")])]),i("div",[e._v("class Classes(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 教师表")])]),i("div",[e._v("class Teacher(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ManyToManyField(to='Classes', through='TeacherToClasses', through_fields=('teacher', 'classes'))")]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("'''")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("        through: 指定第三张表的类名")])]),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("        through_fields: 第一个参数的字段名一定是第三张表中与主表(")]),i("font",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("定义了ManyToManyField的类就是主表")]),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v(")相关的字段名，否则会报错")])],1),i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("    '''")])]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 教师和班级的多对多关联表")])]),i("div",[e._v("class TeacherToClasses(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    teacher = models.ForeignKey(to='Teacher')")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes')")]),i("div",[i("br")]),i("div",[e._v("    class Meta:")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 建立联合唯一索引")])]),i("div",[e._v('        unique_together = ("teacher", "classes")')])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("注意: ")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("使用该方式所建立的多对多关系，ManyToManyField 中的所有方法都会失效（如: add()/create()/set()/clear()/remove()），所以只能直接对第三张表进行数据的增删改操作")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("使用该方式所建立的多对多关系，正向查询 和 反向查询 可以正常使用")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 因为 set() 等方法都无效，只能直接对第三张表进行数据的增删改操作")])]),i("div",[i("br")]),i("div",[e._v("TeacherToClasses.objects.create(classes_id=1, teacher_id=1)")])]),i("div",[i("br")]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[e._v("4.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("创建多对多的方式三: ")])])],1),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("自行创建第三张表 -> 不推荐使用")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("使用该方式所建立的多对多关系，ManyToManyField 中的所有方法都会失效（如: add()/create()/set()/clear()/remove()），所以只能直接对第三张表进行数据的增删改操作")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("使用该方式所建立的多对多关系，正向查询 和 反向查询 都无法使用")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("使用该方式建立多对多关系的时候，最好将第三张表中的两个关联字段设置为联合唯一索引，因为在正常情况下多对多关系表中的两个关联字段都不可能重复")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("注意:")]),e._v(" 如果使用了自行创建第三张表的方式，那么在ORM层面作者和书就没有多对多的关系了，就无法直接通过作者找到与他有关的书了")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 学生表")])]),i("div",[e._v("class Student(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    age = models.IntegerField()")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes', related_name='fkclass')")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 班级表")])]),i("div",[e._v("class Classes(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 教师表")])]),i("div",[e._v("class Teacher(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 教师和班级的多对多关联表")])]),i("div",[e._v("class TeacherToClasses(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    teacher = models.ForeignKey(to='Teacher')")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes')")]),i("div",[i("br")]),i("div",[e._v("    class Meta:")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 建立联合唯一索引")])]),i("div",[e._v('        unique_together = ("teacher", "classes")')])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("例子: 一个老师可以带多个班级，一个班级可以有多个老师")])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[e._v("ManyToManyField字段相关")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[e._v("ManyToManyField字段相关的和外键字段相关的是一样的（不懂的看回外键章节中的外键字段相关的）")])])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[e._v("相关方法")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .create()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("创建一个新的对象，保存新对象，并将新对象添加到所要关联对象集之中，返回新创建的对象")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[e._v("语法: ")]),e._v("查询到的对象.类的ManyToManyField属性名.create(字段名='xxx')")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 通过老师对象添加一个新的班级，并且与该老师进行关联 -> 通俗理解: 添加一个新的班级，并且把该班级与查询到的老师进行关")]),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("联")])]),i("div",[i("br")]),i("div",[e._v("teacher = Teacher.objects.get(id=1)")]),i("div",[e._v("classes_obj = teacher.classes.create(name='七班')")]),i("div",[e._v("print(classes_obj)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# Classes object")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .add()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("把查询到的对象或id，添加到与之关联的对象集中 -> 通俗理解: 往多对多的表中添加数据的方法")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("添加对象的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.add(对象, 对象, ……)")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 将多个班级与指定的老师建立关联")])]),i("div",[i("br")]),i("div",[e._v("class_lis = Classes.objects.filter(id__lt=3)")]),i("div",[e._v("Teacher.objects.get(id=1).classes.add(*class_lis)")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("添加id的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.add(id, id, ……)")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 将多个班级与指定的老师建立关联")])]),i("div",[i("br")]),i("div",[e._v("Teacher.objects.get(id=1).classes.add(*[1, 2])")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 等同于")])]),i("div",[i("br")]),i("div",[e._v("Teacher.objects.get(id=1).classes.add(1, 2)")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .set()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("修改多对多的表中数据的方法")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("注意: ")])]),i("ul",[i("li",[i("div",[e._v("在使用完 .set() 方法后，一定要执行 .save()")])]),i("li",[i("div",[e._v(".set() 方法自带了 .add() 方法的功能，所以可以把 .set() 当做 .add() 使用，但是所要传递的参数是有区别的")])]),i("li",[i("div",[e._v(".set() 方法会先清除原数据，然后再添加新的数据")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("添加对象的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.set([对象, 对象, ……]) -> 接收一个可迭代对象")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 修改id为1的教师，所带的班级id为 (1, 3, 5) -> 原来带的班级是（6, 7, 8）")])]),i("div",[i("br")]),i("div",[e._v("class_list = Classes.objects.filter(id__in=[1, 3, 5])")]),i("div",[e._v("teacher = Teacher.objects.get(id=1)")]),i("div",[e._v("teacher.classes.set(class_list)")]),i("div",[e._v("teacher.save()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("添加id的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.set([1, 2, 3]) -> 接收一个可迭代对象")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 修改id为1的教师，所带的班级id为 (1, 3, 5) -> 原来带的班级是（6, 7, 8）")])]),i("div",[i("br")]),i("div",[e._v("teacher = Teacher.objects.get(id=1)")]),i("div",[e._v("teacher.classes.set([1, 3, 5])")]),i("div",[e._v("teacher.save()")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("4.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .remove()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("删除多对多的表中数据的方法")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("所传入的参数是对象的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.remove(对象, 对象, ……)")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 删除多对多表中 teacher_id=1 且 classes_id=2 和 classes_id=4 的数据")])]),i("div",[i("br")]),i("div",[e._v("class_list = Classes.objects.filter(id__in=[2, 4])")]),i("div",[e._v("Teacher.objects.get(id=1).classes.remove(*class_list)")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("所传入的参数是id的写法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.remove(1, 2, 3)")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 删除多对多表中 teacher_id=1 且 classes_id=2 和 ")]),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("classes_id=4")]),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v(" 的数据")])]),i("div",[i("br")]),i("div",[e._v("Teacher.objects.get(id=1).classes.remove(2, 4)")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("5.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .clear()")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("清空指定对象在多对多表中的所有数据")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.clear()")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("Teacher.objects.get(id=1).classes.clear()")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("6.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" .remove() 和 ")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(".clear() 的注意事项")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("对于ForeignKey对象，当 ForeignKey 设置为 null=True 时 clear()和remove()方法才能使用")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("当  "),i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("ForeignKey 字段没设置 null=True 时")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# models.py")])]),i("div",[i("br")]),i("div",[e._v("class Student(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes')")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# views.py")])]),i("div",[i("br")]),i("div",[e._v("classes_obj.student_set.clear()")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 报错提示")])]),i("div",[i("br")]),i("div",[e._v("Traceback (most recent call last):")]),i("div",[e._v('  File "C:/Users/Mr. Yeung/Desktop/PyFolder/SMS/test_orm.py", line 12, in <module>')]),i("div",[e._v("    classes_obj.student_set.clear()")]),i("div",[e._v("AttributeError: 'RelatedManager' object has no attribute 'clear'")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("当  ForeignKey 字段设置了 null=True 时")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# models.py")])]),i("div",[i("br")]),i("div",[e._v("class Student(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ForeignKey(to='Classes', null=True)")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# views.py")])]),i("div",[i("br")]),i("div",[e._v("classes_obj.student_set.clear()")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[e._v("查询")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" 正向查询")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("正向查询用字段，反向查询用表名")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("写法一:")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("通过对象查找")])]),i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法:")]),e._v(" 查询到的对象.类的ManyToManyField属性名.all/filter/get() -> 返回值：QuerySet")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("classes_list = Teacher.objects.get(id=1).classes.all()  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [<Classes: Classes object>, <Classes: Classes object>, <Classes: Classes object>]>")])]),i("div",[i("br")]),i("div",[e._v("for classes in classes_list:")]),i("div",[e._v("    print(classes.id, classes.name)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 1 一班")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("写法二:")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("使用 values 或 values_list 通过字段查询")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法")]),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v(":")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[e._v(".values('主表字段名', '主表字段名', '类的ManyToManyField属性名__从表字段名', '类的ManyToManyField属性名__类的ManyToManyField属性名下的ManyToManyField属性名__从表字段名')")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[e._v(".values_list('主表字段名', '主表字段名', '类的ManyToManyField属性名__从表字段名', '类的ManyToManyField属性名__类的ManyToManyField属性名下的ManyToManyField属性名__从表字段名')")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("data1 = Teacher.objects.values('name', 'classes__id', 'classes__name')")]),i("div",[e._v("print(data1)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [{'classes__name': '一班', 'name': '李老师', 'classes__id': 1}, {'classes__name': '二班', 'name': '李老师', 'classes__id': 2}, ……]>")])]),i("div",[i("br")]),i("div",[e._v("data2 = Teacher.objects.values_list('name', 'classes__id', 'classes__name')")]),i("div",[e._v("print(data2)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [('李老师', 1, '一班'), ('李老师', 2, '二班'), ('李老师', 3, '三班'), ('黄老师', 2, '二班'), ('黄老师', 3, '三班'), ('杨老师', 1, '一班')]>")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[e._v("跨多张表进行查询 ->")]),i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),e._v("查找书名是“西游记”的书的作者的年龄和手机号码和作者详情id（是ORM练习中的最后一题）")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("author_list = Book.objects.filter(title='西游记').values('author__name', 'author__detail_id', 'author__detail__addr', 'author__detail__email')")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" 反向查询")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("正向查询用字段，反向查询用表名")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("写法一:")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("通过对象查找")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("语法: 查询到的对象.主表的类名_set.all/get/filter() -> 主表类名首字母无需大写")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 例子: 查询一班的所有学生")])]),i("div",[i("br")]),i("div",[e._v("teacher_list = Classes.objects.get(id=1).teacher_set.all()  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [<Teacher: Teacher object>, <Teacher: Teacher object>]>")])]),i("div",[i("br")]),i("div",[e._v("for teacher in teacher_list:")]),i("div",[e._v("    print(teacher.id, teacher.name)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 1 李老师")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("设置了 "),i("span",{staticStyle:{"font-size":"12pt"}},[e._v("related_name='xxx'")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# models.py")])]),i("div",[i("br")]),i("div",[e._v("class Teacher(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ManyToManyField(to='Classes', "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("related_name='mfclass'")]),e._v(")")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# views.py")])]),i("div",[i("br")]),i("div",[e._v("teacher_list = Classes.objects.get(id=1)."),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("mfclass")]),e._v(".all()  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [<Teacher: Teacher object>, <Teacher: Teacher object>]>")])]),i("div",[i("br")]),i("div",[e._v("for teacher in teacher_list:")]),i("div",[e._v("    print(teacher.id, teacher.name)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 1 李老师")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[e._v("写法二:")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[e._v("使用 values 或 values_list 通过字段查询")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v("语法")]),i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[e._v(":")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[e._v("如果没有设置表类中外键属性的 related_name")])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("ul",[i("li",[i("div",[e._v(".values('从表字段名', '从表字段名', '主表类名__主表字段名', '主表类名__主表字段名') -> 主表类名无需大写")])]),i("li",[i("div",[e._v(".values_list('从表字段名', '从表字段名', '主表类名__主表字段名', '主表类名__主表字段名') -> 主表类名无需大写")])])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[e._v("teacher_list1 = Classes.objects.all().values('name', 'teacher__id', 'teacher__name')")]),i("div",[e._v("print(teacher_list1)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# < QuerySet[{'teacher__name': '李老师', 'teacher__id': 1, 'name': '一班'}, {'teacher__name': '李老师', 'teacher__id': 1, 'name': '二班'}, ……] >")])]),i("div",[i("br")]),i("div",[e._v("teacher_list2 = Classes.objects.all().values_list('name', 'teacher__id', 'teacher__name')")]),i("div",[e._v("print(teacher_list2) "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v(" # < QuerySet[('一班', 1, '李老师'), ('二班', 1, '李老师'), ('三班', 1, '李老师'), ('二班', 2, '黄老师'), ('三班', 2, '黄老师'), ('一班', 3, '杨老师'), ('四班', None, None)] >")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v("如果设置了表类中外键属性的 related_name")])])])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v(".values('从表字段名', '从表字段名', 'related_name所设置的名字__主表字段名', 'related_name所设置的名字__主表字段名')")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[e._v(".values_list('从表字段名', '从表字段名', 'related_name所设置的名字__主表字段名', 'related_name所设置的名字__主表字段名')")])])])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# models.py")])]),i("div",[i("br")]),i("div",[e._v("class Teacher(models.Model):")]),i("div",[e._v("    id = models.AutoField(primary_key=True)")]),i("div",[e._v("    name = models.CharField(max_length=10)")]),i("div",[e._v("    classes = models.ManyToManyField(to='Classes', "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("related_name='mfclass'")]),e._v(")")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# views.py")])]),i("div",[i("br")]),i("div",[e._v("teacher_list1 = Classes.objects.all().values('name', '"),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("mfclass")]),e._v("__id', '"),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("mfclass")]),e._v("__name')")]),i("div",[e._v("print(teacher_list1)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [{'mfclass__name': '李老师', 'mfclass__id': 1, 'name': '一班'}, {'mfclass__name': '李老师', 'mfclass__id': 1, 'name': '二班'}, ……]>")])]),i("div",[i("br")]),i("div",[e._v("teacher_list2 = Classes.objects.all().values_list('name', '"),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("mfclass")]),e._v("__id', '"),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[e._v("mfclass")]),e._v("__name')")]),i("div",[e._v("print(teacher_list2)  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# <QuerySet [('一班', 1, '李老师'), ('二班', 1, '李老师'), ('三班', 1, '李老师'), ('二班', 2, '黄老师'), ('三班', 2, '黄老师'), ('一班', 3, '杨老师'), ('四班', None, None)]>")])])]),i("div",[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[e._v("删除数据的注意事项")])]),i("div",[i("font",{staticStyle:{"font-size":"12pt"},attrs:{color:"#E30000"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"white-space":"pre-wrap","font-size":"12pt",color:"rgb(227, 0, 0)"}},[e._v("1.")]),i("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[e._v(" 如果Teacher表和Classes表创建了多对多关系后生成了第三张表，当Teacher表中有一条数据被删除了，那么多对多关系表中与该条数据相关的所有数据都会被删除")])]),i("div",[i("br")])]),i("div",[i("br")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);