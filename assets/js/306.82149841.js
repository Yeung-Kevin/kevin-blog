(window.webpackJsonp=window.webpackJsonp||[]).push([[306],{660:function(t,i,o){"use strict";o.r(i);var n=o(25),v=Object(n.a)({},(function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("div",[o("span",[o("div",[o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("1. 函数执行完后，函数内的变量会被释放")])])]),o("div",[o("font",{staticStyle:{"font-size":"14pt"}},[o("br")])],1),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("2. 闭包：函数嵌套函数，内部函数调用外部函数的变量")])])]),o("div",[o("font",{staticStyle:{"font-size":"14pt"}},[o("br")])],1),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("3. 闭包的好处：")])])]),o("div",[o("font",{staticStyle:{"font-size":"14pt"}},[o("br")])],1),o("ul",[o("li",[o("div",[t._v("延长变量在内存中存活的时间")])]),o("li",[o("div",[t._v("在全局下可以直接控制函数内部的变量，因为全局调用了内部函数返回的方法，此时函数并没有执行完函数内的变量还没有被释放")])]),o("li",[o("div",[t._v("如果一个函数的方法被调用了100次，里面的变量也会创建和销毁100次，此时使用闭包可以创建节省时间")])])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("4. 闭包的缺点：")])])]),o("div",[o("font",{staticStyle:{"font-size":"14pt"}},[o("br")])],1),o("ul",[o("li",[o("div",[t._v("函数执行完后，函数内部的变量没有被释放，占用内存时间过长")])]),o("li",[o("div",[t._v("容易导致内存泄露")])]),o("li",[o("div",[t._v("解决方法：")])]),o("ul",[o("li",[o("div",[t._v("能不用闭包就不用")])]),o("li",[o("div",[t._v("及时释放 使用 None")])])])]),o("div",[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 在这里暂时使用 nonlocal 声明，因为内部函数不能直接修改外部函数的不可变数据类型，为了实现和 js 一样的效果才使用了 nonlocal")])],1),o("div",[o("br")]),o("div",[t._v("def fn1():")]),o("div",[t._v("    a = 1")]),o("div",[o("br")]),o("div",[t._v("    def fn2():")]),o("div",[t._v("        nonlocal a")]),o("div",[t._v("        a += 1")]),o("div",[t._v("        return a")]),o("div",[o("br")]),o("div",[t._v("    return fn2")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("closure = fn1()")]),o("div",[t._v("num1 = closure()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# a = 2")])],1),o("div",[t._v("num2 = closure()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# a = 3")])],1),o("div",[t._v("closure = None "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 让内部函数成为垃圾对象 -> 回收闭包")])],1)]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("5. ")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v(".__closure__ 判断是否是闭包")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("def fn1():")]),o("div",[t._v("    v = 1")]),o("div",[o("br")]),o("div",[t._v("    def fn2():")]),o("div",[t._v("        print(v)")]),o("div",[o("br")]),o("div",[t._v("    print(fn2.__closure__) "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# (<cell at 0x00000232D56DC0D8: int object at 0x0000000065565320>,)")])],1),o("div",[t._v("    fn2()")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("fn1()")])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[t._v("def fn1():")]),o("div",[t._v("    def fn2():")]),o("div",[t._v("        v = 1")]),o("div",[o("br")]),o("div",[t._v("    print(fn2.__closure__) "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# None")])],1),o("div",[t._v("    fn2()")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("fn1()")])]),o("div",[o("br")])])])])}),[],!1,null,null,null);i.default=v.exports}}]);