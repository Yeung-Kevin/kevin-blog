(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{632:function(t,i,e){"use strict";e.r(i);var o=e(25),s=Object(o.a)({},(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",[e("span",[e("div",[e("div",[e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("事件其实就是阻塞所有线程，")]),e("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("让所有的线程进入等待的状态")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("from threading import Event")]),e("div",[e("br")]),e("div",[t._v("e = Event()")]),e("div",[t._v("e.wait(5)  # 得到一个标识，表示的默认状态就是阻塞，如果传了一个数字进去就代表只阻塞5秒，如果不传一直阻塞着")]),e("div",[t._v("e.set()  # 将标识变成非阻塞状态")]),e("div",[t._v("e.clear()  # 将标识变成阻塞状态")]),e("div",[t._v("e.is_set()  # 判断是否为非阻塞 返回值: True: 非阻塞 False: 阻塞")])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-family":'"Courier New"',"font-weight":"bold","line-height":"1.75"}},[t._v("1.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("红绿灯例子")])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("每隔3秒进行红绿灯的切换")])])]),e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("每次绿灯都会通过一定随机数量的车辆")])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import random")]),e("div",[t._v("import time")]),e("div",[t._v("from threading import Thread")]),e("div",[t._v("from threading import Event")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# 红绿灯切换线程")])],1),e("div",[t._v("def traffic_light(e):")]),e("div",[t._v("    while True:")]),e("div",[t._v("        if e.is_set():  "),e("font",{attrs:{color:"#E30000"}},[t._v("# 判断是否为非阻塞")])],1),e("div",[t._v("            time.sleep(3)")]),e("div",[t._v("            print('红灯亮')")]),e("div",[t._v("            e.clear()  "),e("font",{attrs:{color:"#E30000"}},[t._v("# 将标识设置为阻塞")])],1),e("div",[t._v("        else:")]),e("div",[t._v("            time.sleep(3)")]),e("div",[t._v("            print('绿灯亮')")]),e("div",[t._v("            e.set() "),e("font",{attrs:{color:"#E30000"}},[t._v(" # 将标识设置为非阻塞")])],1),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# 汽车通过线程")])],1),e("div",[t._v("def car(i, e):")]),e("div",[t._v("    e.wait() "),e("font",{attrs:{color:"#E30000"}},[t._v(" # 设置标识状态，根据状态对所有线程进行阻塞")])],1),e("div",[t._v("    print('%s车通过' % i)")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[t._v("e = Event()  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 立了一个红绿灯")])],1),e("div",[t._v("tra = Thread(target=traffic_light, args=(e,))")]),e("div",[t._v("tra.start()  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 执行红绿灯切换线程")])],1),e("div",[e("br")]),e("div",[t._v("for i in range(100):")]),e("div",[t._v("    if i % 6 == 0:")]),e("div",[t._v("        time.sleep(random.randint(1, 3))  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置延时，每次通过随机数量的车辆")])],1),e("div",[t._v("    car_pro = Thread(target=car, args=(i, e))")]),e("div",[t._v("    car_pro.start()  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 汽车通过线程")])],1)]),e("div",[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-family":'"Courier New"',"font-weight":"bold","line-height":"1.75"}},[t._v("2.")]),t._v(" "),e("span",{staticStyle:{"font-size":"18.6667px","font-weight":"bold"}},[t._v("连接数据库例子")])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("连接3次数据库")])])]),e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("每0.5秒连接一次")])])]),e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("如果连接成功，就显示成功，否者就报错")])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("import time")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("import random")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("from threading import Thread")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("from threading import Event")])]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("def conn_mysql():")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("    count = 1")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("    while not e.is_set():  ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 判断标识状态是否为阻塞")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("        if count > 3:  ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 如果超过三次就抛出异常")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("            raise TimeoutError ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v(" # 手动抛出异常")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("        print('尝试连接第%s次' % count)")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("        count += 1")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("        e.wait(0.5)  ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(227, 0, 0)"}},[t._v("# 只阻塞 0.5 秒")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("    print('连接成功')")])]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("def check_conn():")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}}),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v(" # 检测数据库服务器的连接是否正常")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("    time.sleep(random.randint(1, 2))  ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 模拟连接检测的时间")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("    e.set()  ")]),e("span",{staticStyle:{"font-size":"9pt",color:"rgb(227, 0, 0)"}},[t._v("# 将标识状态设置为非阻塞")])]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("e = Event()")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("check = Thread(target=check_conn)")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("check.start()")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn = Thread(target=conn_mysql)")])]),e("div",[e("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn.start()")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])])])])])])}),[],!1,null,null,null);i.default=s.exports}}]);