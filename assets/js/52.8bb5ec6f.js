(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{406:function(o,r,i){"use strict";i.r(r);var t=i(25),e=Object(t.a)({},(function(){var o=this,r=o.$createElement,i=o._self._c||r;return i("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[i("div",[i("span",[i("div",[i("div",[i("div",[i("div",[i("div",[i("div",[i("div",[i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("介绍")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("通过Form类自动生成form表单中所需要的HTML")])]),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("创建Form类时，主要涉及到 【字段】 和 【插件（小部件）】，字段用于对用户请求数据的验证，插件用于自动生成HTML")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"18.6667px"}},[o._v("Form组件的功能:")])]),i("div",[i("span",{staticStyle:{"font-size":"18.6667px"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("通过Form类自动生成form表单中所需要的HTML")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("对提交的数据进行验证，并且返回错误信息")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("保留上次的输入内容")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"18.6667px"}},[i("span",{staticStyle:{"font-size":"18.6667px",color:"rgb(255, 0, 0)"}},[o._v("Form组件的注意事项")]),o._v(":")])]),i("div",[i("span",{staticStyle:{"font-size":"18.6667px"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v("Form组件只能渲染出form表单中所需要的HTML，不能将对")]),i("span",{staticStyle:{"font-size":"14pt"}},[o._v("应的数据自动填充到表单中（即：无法")]),i("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[o._v("实现修改页面的自动填充数据效果")]),i("span",{staticStyle:{"font-size":"14pt"}},[o._v("）")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("ul",[i("li",[i("div",[o._v("解决办法:")])]),i("ul",[i("li",[i("div",[o._v("不使用form组件渲染form表单，自己编写form表单，form组件只用于验证")])]),i("li",[i("div",[o._v("不使用form组件，改为使用 modelForm")])])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"18.6667px"}},[o._v("不要认为用了Form组件就一定要用它的自动渲染form表单功能，Form组件只用于验证，不做form表单渲染也是可以的，因为最后都是从 request.POST 中获取数据进行验证，前提是 form表单中的 name 需要和 form类中的字段名一致")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("创建对应的表单所需的HTML")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("通过 widgets 插件创建表单所需的HTML")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("写法一 -> 常用 -> 三种写法效果都是一样的")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class "),i("font",{attrs:{color:"#FA7A00"}},[o._v("Form的类名")]),o._v("(forms.Form):")],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("'''")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("        字段名 -> 对应着 html 中 name='xxx'")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("        字段类 -> 对应着 html 中  type='xxx'")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    '''")])],1),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v("字段名")]),o._v(" = forms."),i("font",{attrs:{color:"#FA7A00"}},[o._v("字段类名")]),o._v("(")],1),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v("字段的参数")]),o._v("="),i("font",{attrs:{color:"#FA7A00"}},[o._v("xxx")]),o._v(",")],1),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v("字段的参数")]),o._v("="),i("font",{attrs:{color:"#FA7A00"}},[o._v("xxx")]),o._v(",")],1),i("div",[o._v("        widget=widgets."),i("font",{attrs:{color:"#FA7A00"}},[o._v("xxx")]),o._v("()")],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("写法二 -> 三种写法效果都是一样的")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import fields")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 创建表单类")])]),i("div",[o._v("class "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("Form的类名")]),o._v("(forms.Form):")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("'''")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("        字段名 -> 对应着 html 中 name='xxx'")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("        字段类 -> 对应着 html 中  type='xxx'")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("    '''")])]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段名")]),o._v(" = fields."),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段类名")]),o._v("(")]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段的参数")]),o._v("="),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v(",")]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段的参数")]),o._v("="),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v(",")]),i("div",[o._v("        widget=widgets."),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v("()")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("写法三 -> 三种写法效果都是一样的")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 创建表单类")])]),i("div",[o._v("class "),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("Form的类名")]),o._v("(forms.Form):")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("'''")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("        字段名 -> 对应着 html 中 name='xxx'")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("        字段类 -> 对应着 html 中  type='xxx'")])]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("    '''")])]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段名")]),o._v(" = forms.fields."),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段类名")]),o._v("(")]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段的参数")]),o._v("="),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v(",")]),i("div",[i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("字段的参数")]),o._v("="),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v(",")]),i("div",[o._v("        widget=widgets."),i("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[o._v("xxx")]),o._v("()")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("input -> 普通输入框")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("写法一")])])])]),i("div",[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("from django import forms")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("from django.forms import widgets")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[i("br")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[i("br")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"},attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("class RegFrom(forms.Form):")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}}),o._v(" username "),i("font",{staticStyle:{"font-size":"9pt"}},[o._v("= forms.CharField(")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("        max_length=16,")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("        label='用户名',")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    )")])],1)]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("写法二")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        widget=widgets.TextInput()")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("password -> 密码输入框")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        widget=widgets.PasswordInput()  "),i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 使用 widgets 插件生成密码输入框")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("textarea -> 文本域")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[i("br")])],1),i("div",[i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    article = forms.CharField(")]),i("div",[o._v("        widget=widgets.Textarea(attrs={'id': 'article', 'cols': '50', 'rows': '30'})  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 如果 cols 和 rows 不传，默认为 {'cols': '40', 'rows': '10'}")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("file -> 选择文件")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    img = forms.CharField(")]),i("div",[o._v("        widget=widgets.FileInput()")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("radio -> 单选按钮")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("radio的值必须为字符串")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[o._v("        choices=[[1, '东莞'], [2, '广州'], [3, '深圳']],")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=3,  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 默认选中第3个")])],1),i("div",[o._v("        widget=widgets.RadioSelect()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成单选按钮")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("select -> 下拉选框")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[o._v("        choices=[[1, '东莞'], [2, '广州'], [3, '深圳']],")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=3,  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 默认选中第3个")])],1),i("div",[o._v("        widget=widgets.Select()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成下拉选框")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("select -> 多选的下拉选框")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[o._v("        choices=[[1, '东莞'], [2, '广州'], [3, '深圳']],")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=[1, 3],  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 默认选中第1, 3个")])],1),i("div",[o._v("        widget=widgets.SelectMultiple()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成多选下拉选框")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("checkbox -> 单选框")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[o._v("        label='是否记住密码',")]),i("div",[o._v("        initial='checked',  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 默认选中")])],1),i("div",[o._v("        widget=widgets.CheckboxInput()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成单选框")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("checkbox -> 复选框")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[o._v("        choices=[[1, '东莞'], [2, '广州'], [3, '深圳']],")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=[1, 3], "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # 默认选中第1, 3个")])],1),i("div",[o._v("        widget=widgets.CheckboxSelectMultiple()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成复选框")])],1),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("ChoiceField字段的注意事项 -> 选择性标签实时更新问题")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("在使用选择性标签时，需要注意choices的值可以是从数据库中获取到的值，但是由于是静态字段，获取的值无法实时更新，需要重写构造方法从而实现choice实时更新")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法一")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from .models import *")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    city = forms.ChoiceField(")]),i("div",[i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# choices=[[1, '东莞'], [2, '广州'], [3, '深圳']],")])],1),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=3,  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 默认选中第3个")])],1),i("div",[o._v("        widget=widgets.Select()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 使用 widgets 插件生成下拉选框")])],1),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[o._v("    def __init__(self, *args, **kwargs):")]),i("div",[o._v("        super().__init__(*args, **kwargs)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# ")]),i("font",{attrs:{color:"#41AD1C"}},[o._v("self.fields['city'].choices = [[1, '东莞'], [2, '广州'], [3, '深圳'], [4, '茂名']]")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("        # 或")])],1),i("div",[o._v("        self.fields['city'].choices = Employee.objects.all().values_list('id', 'province')  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 从数据库中获取数据，然后更新静态属性中的数据")])],1)]),i("div",[i("br")])]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法二")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from .models import *")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.forms import models as form_models")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 创建表单类")])],1),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# ")]),i("font",{attrs:{color:"#41AD1C"}},[o._v("ChoiceField 方法接收一个列表或元祖")])],1),i("div",[o._v("    city1 = forms.ChoiceField(choices=City.objects.all().values_list('pk', 'name'))  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 下拉选框")])],1)]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法二")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("ul",[i("li",[i("div",[o._v("如果使用 ModelChoiceField 或 ModelMultipleChoiceField 方法最终显示的结果是 City Object，那么是因为 City 表没有配置 __str__ 方法")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from .models import *")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.forms import models as form_models")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 创建表单类")])]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("    # ")]),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("ModelChoiceField 和 ModelMultipleChoiceField 方法接收一个 QuerySet 对象")])]),i("div",[o._v("    city2 = forms.ModelChoiceField(queryset=City.objects.all().values_list('province'))  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 下拉选框")])]),i("div",[o._v("    city3 = forms.ModelMultipleChoiceField(queryset=City.objects.all().values_list('province'))  "),i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 多选下拉选框")])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("常用的字段参数")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("required")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("是否不允许为空")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("默认值: True")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("如果不设置该参数，该字段默认不能为空")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        required=False")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("widget -> 插件")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        widget=widgets.PasswordInput()")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("label -> 用于生成Label标签或显示内容")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("initial -> 初始值")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        initial='初始值'")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("error_messages -> 错误信息")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        required=False,")]),i("div",[o._v("        min_length=5,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '不能为空',")]),i("div",[o._v("            'min_length': '长度不能小于5'")]),i("div",[o._v("        }")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("validators -> 自定义验证规则")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.validators import RegexValidator  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 导入 RegexValidator 验证器")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    phone = forms.CharField(")]),i("div",[o._v("        validators=[RegexValidator(r'^[0-9]+$', '请输入数字'), RegexValidator(r'^159[0-9]+$', '数字必须以159开头')],")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("disabled -> 是否可以编辑")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    name = forms.CharField(")]),i("div",[o._v("        disabled=True")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("所有内置字段参数")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("Field")]),i("div",[o._v("    required=True,                "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否允许为空")])],1),i("div",[o._v("    widget=None,                  "),i("font",{attrs:{color:"#4DCE1D"}},[o._v("HTML插件")])],1),i("div",[o._v("    label=None,                   "),i("font",{attrs:{color:"#41AD1C"}},[o._v("用于生成Label标签或显示内容")])],1),i("div",[o._v("    initial=None,                 "),i("font",{attrs:{color:"#41AD1C"}},[o._v("初始值")])],1),i("div",[o._v("    help_text='',                 "),i("font",{attrs:{color:"#41AD1C"}},[o._v("帮助信息(在标签旁边显示)")])],1),i("div",[o._v("    error_messages=None,          "),i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("错误信息 {'required': '不能为空', 'invalid': '格式错误'}")])],1),i("div",[o._v("    validators=[],                "),i("font",{attrs:{color:"#41AD1C"}},[o._v("自定义验证规则")])],1),i("div",[o._v("    localize=False,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否支持本地化")])],1),i("div",[o._v("    disabled=False,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否可以编辑")])],1),i("div",[o._v("    label_suffix=None             "),i("font",{attrs:{color:"#41AD1C"}},[o._v("Label内容后缀")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("CharField(Field)")]),i("div",[o._v("    max_length=None,              "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最大长度")])],1),i("div",[o._v("    min_length=None,              "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最小长度")])],1),i("div",[o._v("    strip=True                    "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否移除用户输入空白")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("IntegerField(Field)")]),i("div",[o._v("    max_value=None,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最大值")])],1),i("div",[o._v("    min_value=None,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最小值")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("FloatField(IntegerField)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("DecimalField(IntegerField)")]),i("div",[o._v("    max_value=None,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最大值")])],1),i("div",[o._v("    min_value=None,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最小值")])],1),i("div",[o._v("    max_digits=None,              "),i("font",{attrs:{color:"#41AD1C"}},[o._v("总长度")])],1),i("div",[o._v("    decimal_places=None,          "),i("font",{attrs:{color:"#41AD1C"}},[o._v("小数位长度")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("BaseTemporalField(Field)")]),i("div",[o._v("    input_formats=None         "),i("font",{attrs:{color:"#41AD1C"}},[o._v("  时间格式化  ")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("DateField(BaseTemporalField)     "),i("font",{attrs:{color:"#41AD1C"}},[o._v("格式：2015-09-01")])],1),i("div",[o._v("TimeField(BaseTemporalField)     "),i("font",{attrs:{color:"#41AD1C"}},[o._v("格式：11:12")])],1),i("div",[o._v("DateTimeField(BaseTemporalField) "),i("font",{attrs:{color:"#41AD1C"}},[o._v("格式：2015-09-01 11:12")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("DurationField(Field)           "),i("font",{attrs:{color:"#41AD1C"}},[o._v("  时间间隔：%d %H:%M:%S.%f")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("RegexField(CharField)")]),i("div",[o._v("    regex,                       "),i("font",{attrs:{color:"#41AD1C"}},[o._v("自定制正则表达式")])],1),i("div",[o._v("    max_length=None,             "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最大长度")])],1),i("div",[o._v("    min_length=None,             "),i("font",{attrs:{color:"#41AD1C"}},[o._v("最小长度")])],1),i("div",[o._v("    error_message=None,          "),i("font",{attrs:{color:"#41AD1C"}},[o._v("忽略，错误信息使用 error_messages={'invalid': '...'}")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("EmailField(CharField)      ")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("FileField(Field)")]),i("div",[o._v("    allow_empty_file=False      "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否允许空文件")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("ImageField(FileField)      ")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    注：需要PIL模块，pip3 install Pillow")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    以上两个字典使用时，需要注意两点：")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v('        - form表单中 enctype="multipart/form-data"')])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("        - view函数中 obj = MyForm(request.POST, request.FILES)")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("URLField(Field)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("BooleanField(Field)  ")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v(" ...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("NullBooleanField(BooleanField)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v(" ...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("ChoiceField(Field)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v(" ...")])],1),i("div",[o._v("    choices=(),                 "),i("font",{attrs:{color:"#41AD1C"}},[o._v("选项，如：choices = ((0,'上海'),(1,'北京'),)")])],1),i("div",[o._v("    required=True,              "),i("font",{attrs:{color:"#41AD1C"}},[o._v("是否必填")])],1),i("div",[o._v("    widget=None,                "),i("font",{attrs:{color:"#41AD1C"}},[o._v("插件，默认select插件")])],1),i("div",[o._v("    label=None,                 "),i("font",{attrs:{color:"#41AD1C"}},[o._v("Label内容")])],1),i("div",[o._v("    initial=None,               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("初始值")])],1),i("div",[o._v("    help_text='',               "),i("font",{attrs:{color:"#41AD1C"}},[o._v("帮助提示")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("ModelChoiceField(ChoiceField)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    ...                         django.forms.models.ModelChoiceField")])],1),i("div",[o._v("    queryset,                   "),i("font",{attrs:{color:"#41AD1C"}},[o._v("查询数据库中的数据")])],1),i("div",[o._v('    empty_label="---------",    '),i("font",{attrs:{color:"#41AD1C"}},[o._v("默认空显示内容")])],1),i("div",[o._v("    to_field_name=None,         "),i("font",{attrs:{color:"#41AD1C"}},[o._v("HTML中value的值对应的字段")])],1),i("div",[o._v("    limit_choices_to=None     "),i("font",{attrs:{color:"#41AD1C"}},[o._v("  ModelForm中对queryset二次筛选")])],1),i("div",[i("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[i("br")])]),i("div",[i("br")]),i("div",[o._v("ModelMultipleChoiceField(ModelChoiceField)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...                         django.forms.models.ModelMultipleChoiceField")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("TypedChoiceField(ChoiceField)")]),i("div",[o._v("    coerce = lambda val: val    "),i("font",{attrs:{color:"#41AD1C"}},[o._v("对选中的值进行一次转换")])],1),i("div",[o._v("    empty_value= ''             "),i("font",{attrs:{color:"#41AD1C"}},[o._v("空值的默认值")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("MultipleChoiceField(ChoiceField)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("...")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("TypedMultipleChoiceField(MultipleChoiceField)")]),i("div",[o._v("    coerce = lambda val: val    "),i("font",{attrs:{color:"#41AD1C"}},[o._v("对选中的每一个值进行一次转换")])],1),i("div",[o._v("    empty_value= ''             "),i("font",{attrs:{color:"#41AD1C"}},[o._v("空值的默认值")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("ComboField(Field)")]),i("div",[o._v("    fields=()                   "),i("font",{attrs:{color:"#41AD1C"}},[o._v("使用多个验证，如下：即验证最大长度20，又验证邮箱格式")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("                                fields.ComboField(fields=[fields.CharField(max_length=20), fields.EmailField(),])")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("MultiValueField(Field)")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    PS: 抽象类，子类中可以实现聚合多个字典去匹配一个值，要配合MultiWidget使用")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("SplitDateTimeField(MultiValueField)")]),i("div",[o._v("    input_date_formats=None,    "),i("font",{attrs:{color:"#41AD1C"}},[o._v("格式列表：['%Y--%m--%d', '%m%d/%Y', '%m/%d/%y']")])],1),i("div",[o._v("    input_time_formats=None     "),i("font",{attrs:{color:"#41AD1C"}},[o._v("格式列表：['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("FilePathField(ChoiceField)      "),i("font",{attrs:{color:"#41AD1C"}},[o._v("文件选项，目录下文件显示在页面中")])],1),i("div",[o._v("    path,                     "),i("font",{attrs:{color:"#41AD1C"}},[o._v("  文件夹路径")])],1),i("div",[o._v("    match=None,                 "),i("font",{attrs:{color:"#41AD1C"}},[o._v("正则匹配")])],1),i("div",[o._v("    recursive=False,            "),i("font",{attrs:{color:"#41AD1C"}},[o._v("递归下面的文件夹")])],1),i("div",[o._v("    allow_files=True,           "),i("font",{attrs:{color:"#41AD1C"}},[o._v("允许文件")])],1),i("div",[o._v("    allow_folders=False,        "),i("font",{attrs:{color:"#41AD1C"}},[o._v("允许文件夹")])],1),i("div",[o._v("    required=True,")]),i("div",[o._v("    widget=None,")]),i("div",[o._v("    label=None,")]),i("div",[o._v("    initial=None,")]),i("div",[o._v("    help_text=''")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("GenericIPAddressField")]),i("div",[o._v("    protocol='both',            "),i("font",{attrs:{color:"#41AD1C"}},[o._v("both,ipv4,ipv6支持的IP格式")])],1),i("div",[o._v("    unpack_ipv4=False           "),i("font",{attrs:{color:"#41AD1C"}},[o._v("解析ipv4地址，如果是::ffff:192.0.2.1时候，可解析为192.0.2.1， PS：protocol必须为both才能启用")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("SlugField(CharField)            "),i("font",{attrs:{color:"#41AD1C"}},[o._v("数字，字母，下划线，减号（连字符）")])],1),i("div",[o._v("    ...")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("UUIDField(CharField)          "),i("font",{attrs:{color:"#41AD1C"}},[o._v("  uuid类型")])],1)]),i("div",[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("插件的相关参数")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("attrs -> 用于定义相关的id class 或 html 中的自定义属性")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        widget=widgets.TextInput(attrs={'id': 'user', 'class': 'username red'})")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        widget=widgets.PasswordInput(attrs={'id': 'password'})")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("render_value -> 只作用于PasswordInput下，当验证失败时刷新页面后，是否将原本的值填写回去，其他widgets下的方法都会把值自动填写回去")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        widget=widgets.PasswordInput(render_value=True)")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("批量添加样式")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("批量添加样式就是Form类下的所有字段都会拥有该样式")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        widget=widgets.TextInput()")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        widget=widgets.PasswordInput(render_value=True),")]),i("div",[o._v("    )")]),i("div",[o._v("    confirm_password = forms.CharField(")]),i("div",[o._v("        label='确认密码',")]),i("div",[o._v("        widget=widgets.PasswordInput(render_value=True),")]),i("div",[o._v("    )")]),i("div",[o._v("    city = forms.CharField(")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=1,")]),i("div",[o._v("        widget=widgets.Select()")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 通过重写form类的init方法实现批量添加样式")])],1),i("div",[o._v("    def __init__(self, *args, **kwargs):")]),i("div",[o._v("        super().__init__(*args, **kwargs)")]),i("div",[i("br")]),i("div",[o._v("        for field in iter(self.fields):")]),i("div",[o._v("            self.fields[field].widget.attrs.update({")]),i("div",[o._v("                'class': 'form-control'")]),i("div",[o._v("            })")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("自定义校验")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("在字段参数中的 required、max_length、min_length 等，它会在一定层度上可以帮我们完成一些简单的校验，但是如果是一些复杂的验证如:身份证验证/电话号码，那么就需要通过正则来进行验证")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("RegexValidator验证器")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# RegexValidator('正则表达式', '错误信息')")])],1),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.validators import RegexValidator  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 导入 RegexValidator 验证器")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    phone = forms.CharField(")]),i("div",[o._v("        validators=[RegexValidator(r'^[0-9]+$', '请输入数字'), RegexValidator(r'^159[0-9]+$', '数字必须以159开头')],")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[o._v("自定义验证函数")])])],1),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("import re")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 自定义验证规则")])],1),i("div",[o._v("def mobile_validate(value):")]),i("div",[o._v("    mobile_re = re.compile(r'^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$')")]),i("div",[o._v("    if not mobile_re.match(value):")]),i("div",[o._v("        raise ValidationError('手机号码格式错误')  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 一定要使用 raise 抛出异常，且一定要使用 ValidationError 方法指定错误信息")])],1),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    phone = forms.CharField(")]),i("div",[o._v("        validators=[mobile_validate],")]),i("div",[o._v("    )")])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("cleaned_data  和 errors")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v(".cleaned_data 存放着所有验证通过字段数据")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[o._v(".errors 存放着所有")]),i("span",{staticStyle:{"font-size":"14pt"}},[o._v("字段错误信息，有时候打印出来的是一段HTML代码，但是如果将 .errors 发送给前端，那么前端所接受到的是一个form字段错误信息的数组")])])])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("Hook方法（钩子函数）")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("什么是钩子函数: Django源码通过反射找到指定前缀的函数并且执行该函数，即: 该指定前缀的函数就是钩子函数")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("什么时候使用钩子函数: 当Form组件所提供的校验规则无法满足你的校验，那么可以使用钩子函数自定义校验规则")])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("局部钩子函数")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[o._v("使用场景: 对某一个字段进行校验，如: 在注册的时候判断用户名字段是否已经被注册过了")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[o._v("在Form类中定义 clean_字段名() 方法，就能够实现对特定字段进行校验")])])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        min_length=8,")]),i("div",[o._v('        label="用户名",')]),i("div",[o._v('        initial="张三",')]),i("div",[o._v("        error_messages={")]),i("div",[o._v('            "required": "不能为空",')]),i("div",[o._v('            "invalid": "格式错误",')]),i("div",[o._v('            "min_length": "用户名最短8位"')]),i("div",[o._v("        },")]),i("div",[o._v('        widget=forms.widgets.TextInput(attrs={"class": "form-control"})')]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 定义局部钩子（clean_字段名() 方法），用来校验username字段")])],1),i("div",[o._v("    def clean_username(self):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 此时 通过检验的字段的数据都保存在 self.cleaned_data")])],1),i("div",[o._v('        value = self.cleaned_data.get("username")')]),i("div",[o._v('        if "666" in value:')]),i("div",[o._v('            raise ValidationError("光喊666是不行的")')]),i("div",[o._v("        else:")]),i("div",[o._v("            return value")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 全局")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("钩子函数")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("使用场景: 获取所有已经通过验证的字段，然后取某几个字段进行二次判断，如: 校验两次密码是否一致")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("全局钩子的说明: 当全部校验通过后才会执行clean()方法，且在clean()方法中一定可以获取到所有已经通过验证的数据")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("在Form类中定义 clean() 方法，就能够实现对字段进行全局校验")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 密码")])],1),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v('        label="密码",')]),i("div",[o._v("        widget=forms.widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True)")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 确认密码")])],1),i("div",[o._v("    re_password = forms.CharField(")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v('        label="确认密码",')]),i("div",[o._v("        widget=forms.widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True)")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 定义全局的钩子，用来校验密码和确认密码字段是否相同")])],1),i("div",[o._v("    def clean(self):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 此时 通过检验的字段的数据都保存在 self.cleaned_data")])],1),i("div",[o._v("        password_value = self.cleaned_data.get('password')")]),i("div",[o._v("        re_password_value = self.cleaned_data.get('re_password')")]),i("div",[o._v("        if password_value == re_password_value:")]),i("div",[o._v("            return self.cleaned_data")]),i("div",[o._v("        else:")]),i("div",[o._v("            self.add_error('re_password', '两次密码不一致')  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 定义在哪一个字段显示该条错误信息")])],1),i("div",[o._v("            raise ValidationError('两次密码不一致')")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("form对象的常用属性")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("该栏目所用到的表")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        initial='初始值',")]),i("div",[o._v("        widget=widgets.TextInput(),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        widget=widgets.PasswordInput(render_value=True),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '密码不能为空',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("BoundField对象")])]),i("span",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("（form对象）")])])],1),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("BoundField对象的说明:")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("form组件类所实例化出来的对象下的xxx对象（即: RegFrom类所实例化出来的对象下的 username 对象或 password 对象）")])]),i("li",[i("div",[o._v("通俗理解: form组件类所实例化出来的对象存储着一个个的form对象，即: BoundField对象")])]),i("li",[i("div",[o._v("在模板中循环form组件类所实例化出来的对象所得到的就是BoundField对象")])]),i("li",[i("div",[o._v("BoundField对象不要和Field对象（字段对象）还有Form类所实例化出来的对象搞混了")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("获取BoundField对象（form对象）的方法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法一 -> 获取指定的BoundField对象（form对象）")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# form组件类所实例化出来的对象['xxx']")])],1),i("div",[i("br")]),i("div",[o._v("form = RegFrom()")]),i("div",[o._v("boundField_obj = form['username']")]),i("div",[i("br")]),i("div",[o._v("print(boundField_obj)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v('# <input type="text" name="username" value="初始值" maxlength="16" required id="id_username" /> -> 因为 BoundField 类设置了 __str__')])],1),i("div",[o._v("print(type(boundField_obj)) "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # <class 'django.forms.boundfield.BoundField'>")])],1)]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法二 -> 循环form组件类所实例化出来的对象")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("form = RegFrom()")]),i("div",[i("br")]),i("div",[o._v("for form_obj in form:")]),i("div",[o._v("    print(form_obj)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v('# <input type="text" name="username" value="初始值" maxlength="16" required id="id_username" /> -> 因为 BoundField 类设置了 __str__')])],1),i("div",[o._v("    print(type(form_obj)) "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # <class 'django.forms.boundfield.BoundField'>")])],1)]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[o._v("BoundField对象")]),o._v("（form对象）"),i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[o._v("的常用属性和方法")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("form = RegFrom()")]),i("div",[o._v("for boundField_obj in form:")]),i("div",[o._v("    print(boundField_obj)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v('# 直接打印当前form对象（即：boundField对象）会获取到当前对象所对应的表单标签，因为 BoundField 类设置了 __str__ -> <input type="text" name="username" value="初始值" id="id_username" maxlength="16" required />')])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("form")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v('# form表单的html -> <tr><th><label for="id_username">用户名:</label> …… </tr>')])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("field")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 字段对象（即: form组件的字段类所实例化出来的对象） -> <django.forms.fields.CharField object at 0x000001F469D8E358>")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("name")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# form对象（即：boundField对象）所对应的名字 -> username")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("html_name")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# form对象（即：boundField对象）所对应的表单标签中 name 的名字 -> username")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("label")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# label的名字 -> 用户名")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("id_for_label")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 获取label应该设置的对应input的id -> id_username")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("label_tag()")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v('# 获取label的html标签 -> <label for="id_username">用户名:</label>')])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("value()")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 返回当前form对象（即：boundField对象）所对应的表单标签所填写的值，如果没有就返回 initial='xxx' 所设置的初始值，如果没有设置就返回 None -> 初始值")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("data")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 返回当前form对象（即：boundField对象）所对应的表单标签所填写的值，如果没有就返回 None")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("errors")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 验证过后，form对象（即：boundField对象）所对应的错误信息")])],1),i("div",[o._v("    print(boundField_obj."),i("font",{attrs:{color:"#FA7A00"}},[o._v("is_hidden")]),o._v(")  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断当前form对象（即：boundField对象）所对应的表单标签是否是隐藏标签")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[o._v("BoundField对象（form对象）的所有属性与方法")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 在 BoundField 中有form对象的所有属性与方法")])]),i("div",[i("br")]),i("div",[o._v("from django.forms.boundfield import BoundField")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("Field对象 -> 字段对象")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("Field对象（字段对象） -> form组件下的字段类所实例化出来的字段对象")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("获取Field对象（字段对象）的方法")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("方法一: 获取指定的Field对象（字段对象）")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# form组件类所实例化出来的对象.fields['xxx']")])],1),i("div",[i("br")]),i("div",[o._v("form = RegFrom()")]),i("div",[i("br")]),i("div",[o._v("print(form.fields['username'])  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# <django.forms.fields.CharField object at 0x00000241BA6BE320>")])],1),i("div",[o._v("print(form.fields['password']) "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # <django.forms.fields.CharField object at 0x000001CDFA64E358>")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("方法二: ")]),o._v("获取指定的Field对象（字段对象）")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# form组件类所实例化出来的对象['xxx'].field")])],1),i("div",[i("br")]),i("div",[o._v("form = RegFrom()")]),i("div",[i("br")]),i("div",[o._v("print(form['username'].field)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# <django.forms.fields.CharField object at 0x00000241BA6BE320>")])],1),i("div",[o._v("print(form['password'].field)  "),i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# <django.forms.fields.CharField object at 0x000001CDFA64E358>")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("方法三: 循环获取所有的Field对象")]),o._v("（字段对象）")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("form = RegFrom()")]),i("div",[i("br")]),i("div",[o._v("for boundField_obj in form:")]),i("div",[o._v("    print(boundField_obj.field)")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("通过字段对象可以获取该字段所设置的相关参数")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v("form = RegFrom()")]),i("div",[i("br")]),i("div",[o._v("print(form.fields['username'].label)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 用户名")])],1),i("div",[o._v("print(form.fields['username'].max_length) "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # 16")])],1),i("div",[o._v("print(form.fields['username'].initial)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 初始值")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("模板相关")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("1.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 将Form类所生成的HTML发送到模板中")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views.py")])],1),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        min_length=3,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'min_length': '用户名长度不能小于3',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def registered(request):")]),i("div",[o._v("    form_obj = RegFrom()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 实例化一个表单对象")])],1),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        form_obj = RegFrom(request.POST)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将post过来的数据再次传入Form类中，然后对数据进行验证，如果数据有误，所实例化出来的form_obj就会拿到该条数据有误的相关信息（即：错误信息 error_messages）")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}}),o._v("print(form_obj.errors)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 存放着所有form字段错误信息，虽然打印出来的是段HTML代码，但是如果将 .errors 发送给前端，那么前端所接受到的是一个form字段错误信息的数组")])],1),i("div",[o._v("        if form_obj.is_valid():  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断post过来的数据是否有误")])],1),i("div",[o._v("            print(form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# {'username': 'Aimer'} 所有经过验证的字段都保存在 .cleaned_data 里")])],1),i("div",[o._v("            del form_obj.cleaned_data['confirm_password']  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 删除 form_obj.cleaned_data 中数据库表不需要的数据")])],1),i("div",[o._v("            Student.objects.create(**form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将数据保存到数据库中")])],1),i("div",[o._v("            return HttpResponse('注册成功')")]),i("div",[o._v("    return render(request, 'registered.html', {'form_obj': form_obj})")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("2.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" as_p ")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("将Form类生成的表单所需的HTML渲染到p标签中")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('<form action="/registered/" method="post" novalidate>')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    {% csrf_token %}")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    "+o._s("{{ form_obj.as_p }}"))])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('    <input type="submit" value="提交">')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("</form>")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("3.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" as_ul")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("将Form类生成的表单所需的HTML渲染到li标签中")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v('<form action="/registered/" method="post" novalidate>')]),i("div",[o._v("    {% csrf_token %}")]),i("div",[o._v("    <ul>")]),i("div",[o._v("        "+o._s("{{ form_obj.as_ul }}"))]),i("div",[o._v("    </ul>")]),i("div",[o._v('    <input type="submit" value="提交">')]),i("div",[o._v("</form>")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("4.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" as_table")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("将Form类生成的表单所需的HTML渲染到table标签中")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v('<form action="/registered/" method="post" novalidate>')]),i("div",[o._v("    {% csrf_token %}")]),i("div",[o._v("    <table>")]),i("div",[o._v("        "+o._s("{{ form_obj.as_table }}"))]),i("div",[o._v("    </table>")]),i("div",[o._v('    <input type="submit" value="提交">')]),i("div",[o._v("</form>")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("5.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 自定义")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[o._v('<form action="/registered/" method="post" novalidate>')]),i("div",[o._v("    {% csrf_token %}")]),i("div",[o._v('    <div class="form-group">')]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v(" \x3c!-- 获取label的名称，不同的Django版本返回不同的结果，结果一: 返回带label标签的label内容，结果二: 直接返回label内容，不带label标签 --\x3e")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("        \x3c!-- id_for_label 的意思: 将form_obj.username所生成的html中的id放在该label中for标签属性中 --\x3e")])],1),i("div",[o._v('        <lable for="'+o._s("{{ form_obj.username.id_for_label }}")+'">'+o._s("{{ form_obj.username.label }}")+"</lable>")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("\x3c!-- 获取相关的表单标签 --\x3e")])],1),i("div",[o._v("        "+o._s("{{ form_obj.username }}"))]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("\x3c!-- 获取第一条验证过后的错误信息 --\x3e")])],1),i("div",[o._v('        <span class="help-block">'+o._s("{{ form_obj.username.errors.0 }}")+"</span>")]),i("div",[o._v("    </div>")]),i("div",[o._v('    <input type="submit" value="提交">')]),i("div",[o._v("</form>")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[o._v("6.")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v(" 循环")]),i("font",{staticStyle:{"font-size":"14pt"}},[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[o._v("生成生成表单所需的HTML")])])],1),i("div",[i("font",{staticStyle:{"font-size":"14pt"}},[i("br")])],1),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('<form action="/registered/" method="post" novalidate>')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    {% csrf_token %}")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[i("br")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[i("font",{attrs:{color:"#41AD1C"}},[o._v(" \x3c!-- 直接对返回的form对象进行循环 --\x3e")])],1)],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    {% for field in form_obj %}")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('        <div class="form-group {% if field.errors.0 %}has-error{% endif %}">')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('            <lable for="'+o._s("{{ field.id_for_label }}")+'">'+o._s("{{ field.label }}")+"</lable>")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("            "+o._s("{{ field }}"))])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('            <span class="help-block">'+o._s("{{ field.errors.0 }}")+"</span>")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("        </div>")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    {% endfor %}")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}})],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('    <div class="form-group">')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v('        <input type="submit" class="btn btn-default">')])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("    </div>")])],1),i("div",[i("font",{staticStyle:{"font-size":"9pt"}},[o._v("</form>")])],1)]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("只用Form组件进行验证，不做渲染")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[o._v("不要认为用了Form组件就一定要用它的自动渲染form表单功能，Form组件只用于验证，不做form表单渲染也是可以的，因为最后都是从 request.POST 中获取数据进行验证，前提是 form表单中的 name 需要和 form类中的字段名一致")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("只用Form组件进行验证，不做渲染（即: 自己编写form表单） -> 使用 form 表单提交数据")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views.py")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[i("br")])]),i("div",[o._v("from django.shortcuts import render, HttpResponse, redirect")]),i("div",[i("br")]),i("div",[o._v("from .models import *")]),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.fields.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        min_length=3,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'min_length': '用户名长度不能小于3',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        min_length=3,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'min_length': '用户名长度不能小于3',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def registered(request):")]),i("div",[o._v("    form_obj = RegFrom()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 实例化一个表单对象")])],1),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        form_obj = RegFrom(request.POST)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将post过来的数据再次传入Form类中，然后对数据进行验证，如果数据有误，所实例化出来的form_obj就会拿到该条数据有误的相关信息（即：错误信息 error_messages）")])],1),i("div",[i("br")]),i("div",[o._v("        if form_obj.is_valid():  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断post过来的数据是否有误")])],1),i("div",[o._v("            print(form_obj.cleaned_data)  "),i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# {'username': 'Aimer', 'password': '123'} 所有经过验证的字段都保存在 .cleaned_data 里")])],1),i("div",[o._v("            Student.objects.create(**form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将数据保存到数据库中")])],1),i("div",[o._v("            return HttpResponse('注册成功')")]),i("div",[o._v("        else:")]),i("div",[o._v("            return HttpResponse('注册失败')")]),i("div",[o._v("    return render(request, 'registered.html')")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# models.py")])],1),i("div",[i("br")]),i("div",[o._v("class Student(models.Model):")]),i("div",[o._v("    username = models.CharField(max_length=10)")]),i("div",[o._v("    password = models.CharField(max_length=16)")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# xxx.html")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[i("br")])],1),i("div",[o._v('<form action="/registered/" method="post" novalidate>')]),i("div",[o._v("    {% csrf_token %}")]),i("div",[o._v('    <div class="form-group">')]),i("div",[o._v('        <lable for="username">用户名</lable>')]),i("div",[o._v('        <input type="text" id="username" class="form-control" name="username">')]),i("div",[o._v("    </div>")]),i("div",[o._v('    <div class="form-group">')]),i("div",[o._v('        <lable for="password">密码</lable>')]),i("div",[o._v('        <input type="password" id="password" class="form-control" name="password">')]),i("div",[o._v("    </div>")]),i("div",[o._v('    <input type="submit" class="btn btn-default" value="提交">')]),i("div",[o._v("</form>")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("只用Form组件进行验证，不做渲染（即: 自己编写form表单） -> 使用ajax提交数据")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views.py")])],1),i("div",[i("br")]),i("div",[o._v("from django.shortcuts import render, HttpResponse, redirect")]),i("div",[o._v("from django.http import JsonResponse")]),i("div",[i("br")]),i("div",[o._v("from .models import *")]),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.fields.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        min_length=3,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'min_length': '用户名长度不能小于3',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        min_length=3,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'min_length': '用户名长度不能小于3',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def registered(request):")]),i("div",[o._v("    form_obj = RegFrom()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 实例化一个表单对象")])],1),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        form_obj = RegFrom(request.POST)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将post过来的数据再次传入Form类中，然后对数据进行验证，如果数据有误，所实例化出来的form_obj就会拿到该条数据有误的相关信息（即：错误信息 error_messages）")])],1),i("div",[i("br")]),i("div",[o._v("        if form_obj.is_valid():  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断post过来的数据是否有误")])],1),i("div",[o._v("            print(form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# {'username': 'Aimer', 'password': '123'} 所有经过验证的字段都保存在 .cleaned_data 里")])],1),i("div",[o._v("            Student.objects.create(**form_obj.cleaned_data) "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # 将数据保存到数据库中")])],1),i("div",[o._v("            return JsonResponse({")]),i("div",[o._v("                'msg': '注册成功'")]),i("div",[o._v("            })")]),i("div",[o._v("        else:")]),i("div",[o._v("            return JsonResponse({")]),i("div",[o._v("                'msg': '注册失败',")]),i("div",[o._v("                'error_msg': form_obj.errors  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 获取验证后的错误信息")])],1),i("div",[o._v("            })")]),i("div",[o._v("    return render(request, 'registered.html')")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# xxx.html")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[i("br")])],1),i("div",[o._v("<form novalidate>")]),i("div",[o._v("    {% csrf_token %}")]),i("div",[o._v('    <div class="form-group">')]),i("div",[o._v('        <lable for="username">用户名</lable>')]),i("div",[o._v('        <input type="text" id="username" class="form-control" name="username">')]),i("div",[o._v("    </div>")]),i("div",[o._v('    <div class="form-group">')]),i("div",[o._v('        <lable for="password">密码</lable>')]),i("div",[o._v('        <input type="password" id="password" class="form-control" name="password">')]),i("div",[o._v("    </div>")]),i("div",[o._v('    <button type="button" class="btn btn-default" id="btn-submit">提交</button>')]),i("div",[o._v("</form>")]),i("div",[i("br")]),i("div",[o._v("<script>")]),i("div",[o._v("    $(function () {")]),i("div",[o._v("        $('#btn-submit').click(function () {")]),i("div",[o._v("            var username = $('#username').val(),")]),i("div",[o._v("                password = $('#password').val(),")]),i("div",[o._v("                csrf_token = $('[name=\"csrfmiddlewaretoken\"]').val();")]),i("div",[o._v("            $.ajax({")]),i("div",[o._v("                url: '/registered/',")]),i("div",[o._v("                type: 'post',")]),i("div",[o._v("                data: {")]),i("div",[o._v("                    username: username,")]),i("div",[o._v("                    password: password,")]),i("div",[o._v("                    csrfmiddlewaretoken: csrf_token")]),i("div",[o._v("                },")]),i("div",[o._v("                success: function (res) {")]),i("div",[o._v("                    console.log(res)")]),i("div",[o._v("                }")]),i("div",[o._v("            })")]),i("div",[o._v("        })")]),i("div",[o._v("    })")]),i("div",[o._v("<\/script>")])]),i("div",[i("br")]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("注册例子")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("使用表单提交 + 使用form组件渲染form表单")])])]),i("div",[i("br")]),i("div",[i("a",{attrs:{href:"/kevin-blog/Django/Form 组件_files/form_m.rar"}},[i("img",{attrs:{alt:"form_m.rar",src:"/kevin-blog/Django/Form 组件_files/a1aa25bd296791f08f526354ab72b25f.png"}})])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views.py")])],1),i("div",[i("br")]),i("div",[o._v("from django.shortcuts import render, HttpResponse, redirect")]),i("div",[i("br")]),i("div",[o._v("from .models import *")]),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'max_length': '用户名长度不能超过16位',")]),i("div",[o._v("        },")]),i("div",[o._v("        widget=widgets.TextInput(attrs={'class': 'form-control'})")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v("        max_length=10,")]),i("div",[o._v("        widget=widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '密码不能为空',")]),i("div",[o._v("            'min_length': '密码不能小于6位',")]),i("div",[o._v("            'max_length': '密码不能超过10位',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    confirm_password = forms.CharField(")]),i("div",[o._v("        label='确认密码',")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v("        max_length=10,")]),i("div",[o._v("        widget=widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '密码不能为空',")]),i("div",[o._v("            'min_length': '密码不能小于6位',")]),i("div",[o._v("            'max_length': '密码不能超过10位',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    city = forms.CharField(")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=1,")]),i("div",[o._v("        widget=widgets.Select(attrs={'class': 'form-control'})")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 由于是静态字段，获取的值无法实时更新，需要重写构造方法从而实现choice实时更新")])],1),i("div",[o._v("    def __init__(self, *args, **kwargs):")]),i("div",[o._v("        super().__init__(*args, **kwargs)")]),i("div",[o._v('        self.fields["city"].widget.choices = City.objects.all().values_list("id", "name")')]),i("div",[i("br")]),i("div",[o._v("    def clean(self):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 此时 通过检验的字段的数据都保存在 self.cleaned_data")])],1),i("div",[o._v('        pwd = self.cleaned_data.get("password")')]),i("div",[o._v('        re_pwd = self.cleaned_data.get("confirm_password")')]),i("div",[o._v("        if pwd != re_pwd:")]),i("div",[o._v('            self.add_error("confirm_password", ValidationError("两次密码不一致"))')]),i("div",[o._v('            raise ValidationError("两次密码不一致")')]),i("div",[o._v("        return self.cleaned_data")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def registered(request):")]),i("div",[o._v("    form_obj = RegFrom() "),i("font",{attrs:{color:"#41AD1C"}},[o._v(" # 实例化一个表单对象")])],1),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        form_obj = RegFrom(request.POST)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将post过来的数据再次传入Form类中，然后对数据进行验证，如果数据有误，所实例化出来的form_obj就会拿到该条数据有误的相关信息（即：错误信息 error_messages）")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}}),o._v("print(form_obj.errors)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 存放着所有form字段错误信息，虽然打印出来的是段HTML代码，但是如果将 .errors 发送给前端，那么前端所接受到的是一个form字段错误信息的数组")])],1),i("div",[o._v("        if form_obj.is_valid():  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断post过来的数据是否有误")])],1),i("div",[o._v("            print(form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# {'city': '3', 'username': 'Aimer', 'confirm_password': '123456', 'password': '123456'} 所有经过验证的字段都保存在 .cleaned_data 里")])],1),i("div",[o._v("            del form_obj.cleaned_data['confirm_password']  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 删除 form_obj.cleaned_data 中数据库表不需要的数据")])],1),i("div",[o._v("            Student.objects.create(**form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将数据保存到数据库中")])],1),i("div",[o._v("            return HttpResponse('注册成功')")]),i("div",[o._v("    return render(request, 'registered.html', {'form_obj': form_obj})")])]),i("div",[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# models.py")])],1),i("div",[i("br")]),i("div",[o._v("from django.db import models")]),i("div",[i("br")]),i("div",[o._v("class Student(models.Model):")]),i("div",[o._v("    username = models.CharField(max_length=10)")]),i("div",[o._v("    password = models.CharField(max_length=16)")]),i("div",[o._v("    city = models.CharField(max_length=10)")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# registered.html")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[i("br")])],1),i("div",[o._v("<!DOCTYPE html>")]),i("div",[o._v("<html>")]),i("div",[o._v("<head>")]),i("div",[o._v('    <meta charset="utf-8">')]),i("div",[o._v('    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">')]),i("div",[o._v("    <title>Title</title>")]),i("div",[o._v('    <meta name="description" content="">')]),i("div",[o._v('    <meta name="keywords" content="">')]),i("div",[o._v("    {% load static %}")]),i("div",[o._v('    <link rel="stylesheet" href="{% static \'bootstrap/css/bootstrap.min.css\' %}">')]),i("div",[o._v("    <script type=text/javascript src=\"{% static 'jquery-3.3.1.js' %}\"><\/script>")]),i("div",[o._v("</head>")]),i("div",[o._v("<body>")]),i("div",[o._v('<div class="container">')]),i("div",[o._v('    <div class="row">')]),i("div",[o._v('        <div class="col-md-6 col-md-offset-3">')]),i("div",[o._v('            <form action="/registered/" method="post" novalidate>')]),i("div",[o._v("                {% csrf_token %}")]),i("div",[o._v('                <div class="form-group {% if form_obj.username.errors.0 %}has-error{% endif %}">')]),i("div",[o._v("                    "+o._s("{{ form_obj.username.label }}"))]),i("div",[o._v("                    "+o._s("{{ form_obj.username }}"))]),i("div",[o._v('                    <span class="help-block">'+o._s("{{ form_obj.username.errors.0 }}")+"</span>")]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group {% if form_obj.password.errors.0 %}has-error{% endif %}">')]),i("div",[o._v("                    "+o._s("{{ form_obj.password.label }}"))]),i("div",[o._v("                    "+o._s("{{ form_obj.password }}"))]),i("div",[o._v('                    <span class="help-block">'+o._s("{{ form_obj.password.errors.0 }}")+"</span>")]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group {% if form_obj.confirm_password.errors.0 %}has-error{% endif %}">')]),i("div",[o._v("                    "+o._s("{{ form_obj.confirm_password.label }}"))]),i("div",[o._v("                    "+o._s("{{ form_obj.confirm_password }}"))]),i("div",[o._v('                    <span class="help-block">'+o._s("{{ form_obj.confirm_password.errors.0 }}")+"</span>")]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group {% if form_obj.city.errors.0 %}has-error{% endif %}">')]),i("div",[o._v("                    "+o._s("{{ form_obj.city.label }}"))]),i("div",[o._v("                    "+o._s("{{ form_obj.city }}"))]),i("div",[o._v('                    <span class="help-block">'+o._s("{{ form_obj.city.errors.0 }}")+"</span>")]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <input type="submit" class="btn btn-default">')]),i("div",[o._v("                </div>")]),i("div",[o._v("            </form>")]),i("div",[o._v("        </div>")]),i("div",[o._v("    </div>")]),i("div",[o._v("</div>")]),i("div",[o._v("</body>")]),i("div",[o._v("</html>")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("使用 ajax 提交 + 自己编写form表单")])])]),i("div",[i("br")]),i("div",[i("a",{attrs:{href:"/kevin-blog/Django/Form 组件_files/ajax_form_m.rar"}},[i("img",{attrs:{alt:"ajax_form_m.rar",src:"/kevin-blog/Django/Form 组件_files/a4096a511f669a73acfff4ab4cd816ab.png"}})])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views.py")])],1),i("div",[i("br")]),i("div",[o._v("from django.shortcuts import render, HttpResponse, redirect")]),i("div",[o._v("from django.http import JsonResponse")]),i("div",[i("br")]),i("div",[o._v("from .models import *")]),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.forms import widgets")]),i("div",[o._v("from django.core.exceptions import ValidationError")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class RegFrom(forms.Form):")]),i("div",[o._v("    username = forms.CharField(")]),i("div",[o._v("        label='用户名',")]),i("div",[o._v("        max_length=16,")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '用户名不能为空',")]),i("div",[o._v("            'max_length': '用户名长度不能超过16位',")]),i("div",[o._v("        },")]),i("div",[o._v("        widget=widgets.TextInput(attrs={'class': 'form-control'})")]),i("div",[o._v("    )")]),i("div",[o._v("    password = forms.CharField(")]),i("div",[o._v("        label='密码',")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v("        max_length=10,")]),i("div",[o._v("        widget=widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '密码不能为空',")]),i("div",[o._v("            'min_length': '密码不能小于6位',")]),i("div",[o._v("            'max_length': '密码不能超过10位',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    confirm_password = forms.CharField(")]),i("div",[o._v("        label='确认密码',")]),i("div",[o._v("        min_length=6,")]),i("div",[o._v("        max_length=10,")]),i("div",[o._v("        widget=widgets.PasswordInput(attrs={'class': 'form-control'}, render_value=True),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '密码不能为空',")]),i("div",[o._v("            'min_length': '密码不能小于6位',")]),i("div",[o._v("            'max_length': '密码不能超过10位',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[o._v("    city = forms.CharField(")]),i("div",[o._v("        label='城市',")]),i("div",[o._v("        initial=1,")]),i("div",[o._v("        widget=widgets.Select(attrs={'class': 'form-control'}),")]),i("div",[o._v("        error_messages={")]),i("div",[o._v("            'required': '城市不能为空',")]),i("div",[o._v("        }")]),i("div",[o._v("    )")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v(" # 由于是静态字段，获取的值无法实时更新，需要重写构造方法从而实现choice实时更新")])],1),i("div",[o._v("    def __init__(self, *args, **kwargs):")]),i("div",[o._v("        super().__init__(*args, **kwargs)")]),i("div",[o._v('        self.fields["city"].widget.choices = City.objects.all().values_list("id", "name")')]),i("div",[i("br")]),i("div",[o._v("    def clean(self):")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# 此时 通过检验的字段的数据都保存在 self.cleaned_data")])],1),i("div",[o._v('        pwd = self.cleaned_data.get("password")')]),i("div",[o._v('        re_pwd = self.cleaned_data.get("confirm_password")')]),i("div",[o._v("        if pwd != re_pwd:")]),i("div",[o._v('            self.add_error("confirm_password", ValidationError("两次密码不一致"))')]),i("div",[o._v('            raise ValidationError("两次密码不一致")')]),i("div",[o._v("        return self.cleaned_data")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def registered(request):")]),i("div",[o._v("    form_obj = RegFrom()  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 实例化一个表单对象")])],1),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        form_obj = RegFrom(request.POST)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将post过来的数据再次传入Form类中，然后对数据进行验证，如果数据有误，所实例化出来的form_obj就会拿到该条数据有误的相关信息（即：错误信息 error_messages）")])],1),i("div",[o._v("        if form_obj.is_valid():  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 判断post过来的数据是否有误")])],1),i("div",[o._v("            print(form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# {'city': '3', 'username': 'Aimer', 'confirm_password': '123456', 'password': '123456'} 所有经过验证的字段都保存在 form_obj.cleaned_data 里")])],1),i("div",[o._v("            del form_obj.cleaned_data['confirm_password']  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 删除 form_obj.cleaned_data 中数据库表不需要的数据")])],1),i("div",[o._v("            Student.objects.create(**form_obj.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 将数据保存到数据库中")])],1),i("div",[o._v("            return JsonResponse({")]),i("div",[o._v("                'status': 1,")]),i("div",[o._v("                'msg': '注册成功'")]),i("div",[o._v("            })")]),i("div",[o._v("        else:")]),i("div",[o._v("            return JsonResponse({")]),i("div",[o._v("                'status': 0,")]),i("div",[o._v("                'msg': '注册失败',")]),i("div",[o._v("                'error_msg': form_obj.errors  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# 获取验证后的错误信息")])],1),i("div",[o._v("            })")]),i("div",[o._v("    return render(request, 'registered.html', {'form_obj': form_obj})")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# models.py")])],1),i("div",[i("br")]),i("div",[o._v("from django.db import models")]),i("div",[i("br")]),i("div",[o._v("class Student(models.Model):")]),i("div",[o._v("    username = models.CharField(max_length=10)")]),i("div",[o._v("    password = models.CharField(max_length=16)")]),i("div",[o._v("    city = models.CharField(max_length=10)")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# registered.html")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[i("br")])],1),i("div",[o._v("<!DOCTYPE html>")]),i("div",[o._v("<html>")]),i("div",[o._v("<head>")]),i("div",[o._v('    <meta charset="utf-8">')]),i("div",[o._v('    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">')]),i("div",[o._v("    <title>Title</title>")]),i("div",[o._v('    <meta name="description" content="">')]),i("div",[o._v('    <meta name="keywords" content="">')]),i("div",[o._v("    {% load static %}")]),i("div",[o._v('    <link rel="stylesheet" href="{% static \'bootstrap/css/bootstrap.min.css\' %}">')]),i("div",[o._v("    <script type=text/javascript src=\"{% static 'jquery-3.3.1.js' %}\"><\/script>")]),i("div",[o._v("</head>")]),i("div",[o._v("<body>")]),i("div",[o._v('<div class="container">')]),i("div",[o._v('    <div class="row">')]),i("div",[o._v('        <div class="col-md-6 col-md-offset-3">')]),i("div",[o._v("            <form novalidate>")]),i("div",[o._v("                {% csrf_token %}")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <label for="username">用户名</label>')]),i("div",[o._v('                    <input type="text" id="username" class="form-control" name="username">')]),i("div",[o._v('                    <span class="help-block"></span>')]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <label for="username">密码</label>')]),i("div",[o._v('                    <input type="text" id="password" class="form-control" name="password">')]),i("div",[o._v('                    <span class="help-block"></span>')]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <label for="confirm_password">确认密码</label>')]),i("div",[o._v('                    <input type="text" id="confirm_password" class="form-control" name="confirm_password">')]),i("div",[o._v('                    <span class="help-block"></span>')]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <label for="city">城市</label>')]),i("div",[o._v('                    <input type="text" id="city" class="form-control" name="city">')]),i("div",[o._v('                    <span class="help-block"></span>')]),i("div",[o._v("                </div>")]),i("div",[o._v('                <div class="form-group">')]),i("div",[o._v('                    <button type="button" id="btn-submit" class="btn btn-default">提交</button>')]),i("div",[o._v("                </div>")]),i("div",[o._v("            </form>")]),i("div",[o._v("        </div>")]),i("div",[o._v("    </div>")]),i("div",[o._v("</div>")]),i("div",[o._v('<script src="/static/jquery-3.3.1.js"><\/script>')]),i("div",[o._v("<script>")]),i("div",[o._v("    $(function () {")]),i("div",[o._v("        $('#btn-submit').click(function () {")]),i("div",[o._v("            var username = $('#username').val(),")]),i("div",[o._v("                password = $('#password').val(),")]),i("div",[o._v("                confirm_password = $('#confirm_password').val(),")]),i("div",[o._v("                city = $('#city').val(),")]),i("div",[o._v("                csrf_token = $('[name=\"csrfmiddlewaretoken\"]').val();")]),i("div",[o._v("            $('.form-group').removeClass('has-error').find('.help-block').html('');")]),i("div",[o._v("            $.ajax({")]),i("div",[o._v("                url: '/registered/',")]),i("div",[o._v("                type: 'post',")]),i("div",[o._v("                data: {")]),i("div",[o._v("                    username: username,")]),i("div",[o._v("                    password: password,")]),i("div",[o._v("                    confirm_password: confirm_password,")]),i("div",[o._v("                    city: city,")]),i("div",[o._v("                    csrfmiddlewaretoken: csrf_token")]),i("div",[o._v("                },")]),i("div",[o._v("                success: function (res) {")]),i("div",[o._v("                    if (res.status) {")]),i("div",[o._v("                        alert(res.msg);")]),i("div",[o._v("                        $('.form-group input').val('')")]),i("div",[o._v("                    } else {")]),i("div",[o._v("                        $.each(res.error_msg, function (k, v) {")]),i("div",[o._v("                            console.log(k, v);")]),i("div",[o._v("                            $('#' + k).next('.help-block').html(v).parents('.form-group').addClass('has-error')")]),i("div",[o._v("                        })")]),i("div",[o._v("                    }")]),i("div",[o._v("                }")]),i("div",[o._v("            })")]),i("div",[o._v("        })")]),i("div",[o._v("    })")]),i("div",[o._v("<\/script>")]),i("div",[o._v("</body>")]),i("div",[o._v("</html>")])]),i("div",[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","font-weight":"bold","line-height":"1.5","background-color":"#3eaf7c","border-radius":"3px","text-align":"center",color:"white","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","font-weight":"bold","line-height":"1.5","background-color":"#3eaf7c","border-radius":"3px",color:"white","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o._v("formset 批量操作")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("forms.formset_factory(form=form类, extra=显示多少行数据) -> 返回值: 返回一个新的 form 类")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("extra 参数说明")])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[o._v("添加数据: 当 extra=10，那么就会显示 10 行输入框")])]),i("li",[i("div",[o._v("修改数据: 当 extra=0，那么就是根据 initial 参数所传入的初始化数据长度而显示多少行数据")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views/add_data.py")])],1),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.shortcuts import render, HttpResponse")]),i("div",[o._v("from app01.models import *")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class AddUserForm(forms.Form):")]),i("div",[o._v("    username = forms.CharField(label='用户名')")]),i("div",[o._v("    phone = forms.CharField(label='电话号码')")]),i("div",[o._v("    age = forms.CharField(label='年龄')")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def add_data(request):")]),i("div",[o._v("    old_form = AddUserForm()")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v("AddUserFormSet = forms.formset_factory(AddUserForm, extra=10)")])],1),i("div",[o._v("    formset = AddUserFormSet()")]),i("div",[i("br")]),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        formset = AddUserFormSet(request.POST)")]),i("div",[o._v("        if formset.is_valid():")]),i("div",[o._v("            print(formset.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# [{'age': '22', 'username': 'Amy', 'phone': '13038802402'}, {}, ...]")])],1),i("div",[o._v("            for row in formset.cleaned_data:")]),i("div",[o._v("                if row:")]),i("div",[o._v("                    UserInfo.objects.create(**row)")]),i("div",[o._v("            return HttpResponse('验证成功')")]),i("div",[o._v("        else:")]),i("div",[o._v("            print('验证失败')")]),i("div",[i("br")]),i("div",[o._v("    return render(request, 'change.html', {")]),i("div",[o._v("        'old_form': old_form,")]),i("div",[o._v("        'formset': formset")]),i("div",[o._v("    })")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# views/edit_data.py")])],1),i("div",[i("br")]),i("div",[o._v("from django import forms")]),i("div",[o._v("from django.shortcuts import render, HttpResponse")]),i("div",[o._v("from app01.models import *")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("class EditUserForm(forms.Form):")]),i("div",[o._v("    id = forms.CharField(label='id')")]),i("div",[o._v("    username = forms.CharField(label='用户名')")]),i("div",[o._v("    phone = forms.CharField(label='电话号码')")]),i("div",[o._v("    age = forms.CharField(label='年龄')")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[o._v("def edit_data(request):")]),i("div",[o._v("    old_form = EditUserForm()")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v("EditUserFormSet = forms.formset_factory(EditUserForm, extra=0)")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# formset = EditUserFormSet(initial=[")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    #     {'id': 1, 'username': 'Kevin', 'phone': 13022024070, 'age': '12'},")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    #     {'id': 2, 'username': 'Yeung', 'phone': 13022024070, 'age': '22'},")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    #     {'id': 3, 'username': 'Amy', 'phone': 13022024070, 'age': '32'},")])],1),i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("    # ])")])],1),i("div",[o._v("    user_list = UserInfo.objects.all().values()")]),i("div",[o._v("    formset = EditUserFormSet("),i("font",{attrs:{color:"#FA7A00"}},[o._v("initial=user_list")]),o._v(")")],1),i("div",[i("br")]),i("div",[o._v("    if request.method == 'POST':")]),i("div",[o._v("        formset = EditUserFormSet(request.POST)")]),i("div",[o._v("        if formset.is_valid():")]),i("div",[o._v("            print(formset.cleaned_data)  "),i("font",{attrs:{color:"#41AD1C"}},[o._v("# [{'id': '1', 'age': '22', 'username': 'Amy', 'phone': '13038802402'}, {}, ...]")])],1),i("div",[o._v("            for row in formset.cleaned_data:")]),i("div",[o._v("                UserInfo.objects.filter(pk=row['id']).update(**row)")]),i("div",[o._v("            return HttpResponse('验证成功')")]),i("div",[o._v("        else:")]),i("div",[o._v("            print('验证失败')")]),i("div",[i("br")]),i("div",[o._v("    return render(request, 'change.html', {")]),i("div",[o._v("        'old_form': old_form,")]),i("div",[o._v("        'formset': formset")]),i("div",[o._v("    })")])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[i("font",{attrs:{color:"#41AD1C"}},[o._v("# change.html")])],1),i("div",[i("br")]),i("div",[o._v('<form method="post" novalidate>')]),i("div",[o._v("    {% csrf_token %}")]),i("div",[i("font",{attrs:{color:"#FA7A00"}},[o._v(o._s("{{ formset.management_form }}"))])],1),i("div",[o._v('    <table border="1">')]),i("div",[o._v("        <thead>")]),i("div",[o._v("        <tr>")]),i("div",[o._v("            {% for filed in old_form %}")]),i("div",[o._v("                {% if filed.name != 'id' %}")]),i("div",[o._v("                    <th>"+o._s("{{ filed.label }}")+"</th>")]),i("div",[o._v("                {% endif %}")]),i("div",[o._v("            {% endfor %}")]),i("div",[o._v("        </tr>")]),i("div",[o._v("        </thead>")]),i("div",[o._v("        <tbody>")]),i("div",[o._v("        {% for form in formset %}")]),i("div",[o._v("            <tr>")]),i("div",[o._v("                {% for filed in form %}")]),i("div",[o._v("                    {% if filed.name != 'id' %}")]),i("div",[o._v("                        <td>"+o._s("{{ filed }}")+" "+o._s("{{ filed.errors.0 }}")+"</td>")]),i("div",[o._v("                    {% else %}")]),i("div",[o._v('                        <td style="display: none">'+o._s("{{ filed }}")+" "+o._s("{{ filed.errors.0 }}")+"</td>")]),i("div",[o._v("                    {% endif %}")]),i("div",[o._v("                {% endfor %}")]),i("div",[o._v("            </tr>")]),i("div",[o._v("        {% endfor %}")]),i("div",[o._v("        </tbody>")]),i("div",[o._v("    </table>")]),i("div",[o._v('    <input type="submit" value="提交">')]),i("div",[o._v("</form>")])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("添加数据")])])]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Django/Form 组件_files/Image.png",type:"image/png"}})]),i("div",[i("br")]),i("ul",[i("li",[i("div",[o._v("修改数据")])])]),i("div",[i("br")]),i("div",[i("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Django/Form 组件_files/Image [1].png",type:"image/png"}})]),i("div",[i("br")]),i("div",[i("br")])])])])])}),[],!1,null,null,null);r.default=e.exports}}]);