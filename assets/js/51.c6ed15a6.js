(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{403:function(t,i,e){"use strict";e.r(i);var o=e(25),r=Object(o.a)({},(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",[e("span",[e("div",[e("div",[e("div",[e("div",[e("div",[e("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[e("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("时区类型")])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("UTC 的介绍")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[t._v("整个地球分为二十四时区，每个时区都有自己的本地时间。在国际无线电通信场合，为了统一起见，使用一个统一的时间，称为通用协调时(UTC, Universal Time Coordinated)。UTC与格林尼治平均时(GMT, Greenwich Mean Time)一样，都与英国伦敦的本地时相同")])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("UTC时间 比 北京时间 小8个小时")])])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("时区类型")])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("在 django1.4 以后，存在两个概念")])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("ul",[e("li",[e("div",[t._v("(naive time) -> ("),e("span",{staticStyle:{"font-size":"12pt"}},[t._v("offset-naive")]),t._v(") -> 不包含时区")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# 不包含时区的时间格式")])],1),e("div",[e("br")]),e("div",[t._v("2020-03-15 16:23:27.241176")])]),e("div",[e("br")]),e("ul",[e("ul",[e("ul",[e("li",[e("div",[t._v("(active time) -> ("),e("span",{staticStyle:{"font-size":"12pt"}},[t._v("offset-aware")]),t._v(") -> 包含时区")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# 包含时区的时间格式")])],1),e("div",[e("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[e("br")])]),e("div",[t._v("2020-03-15 08:14:03+00:00")])]),e("div",[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("查看日期对象是否包含时区")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("语法: ")]),e("span",{staticStyle:{"font-size":"12pt"}},[e("span",{staticStyle:{"font-size":"12pt",color:"rgb(186, 0, 255)"}},[t._v("日期对象.tzinfo")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import datetime")]),e("div",[t._v("from app01.models import *")]),e("div",[e("br")]),e("div",[t._v("now = datetime.datetime.now()")]),e("div",[t._v("print(now"),e("font",{attrs:{color:"#FA7A00"}},[t._v(".tzinfo")]),t._v(")  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])],1),e("div",[e("br")]),e("div",[t._v("specified_date = datetime.datetime(year=2019, month=3, day=20, hour=10, minute=1, second=32, microsecond=1)")]),e("div",[t._v("print(now"),e("font",{attrs:{color:"#FA7A00"}},[t._v(".tzinfo")]),t._v(")  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])],1),e("div",[e("span",{staticStyle:{"font-size":"9pt",color:"rgb(51, 51, 51)","font-family":"Monaco"}},[e("br")])]),e("div",[t._v("time_obj = TimeTable.objects.filter(id=1).first()")]),e("div",[t._v("print(time_obj.time"),e("font",{attrs:{color:"#FA7A00"}},[t._v(".tzinfo")]),t._v(") "),e("font",{attrs:{color:"#41AD1C"}},[t._v(" # UTC -> offset-aware: 包含时区")])],1)]),e("div",[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("给日期对象添加时区")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import datetime")]),e("div",[t._v("import "),e("font",{attrs:{color:"#FA7A00"}},[t._v("pytz")])],1),e("div",[e("br")]),e("div",[t._v("now = datetime.datetime.now()"),e("font",{attrs:{color:"#FA7A00"}},[t._v(".replace(tzinfo=pytz.timezone('UTC'))")])],1),e("div",[t._v("print(now.tzinfo)  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# UTC -> offset-aware: 包含时区")])],1)]),e("div",[e("br")]),e("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[e("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("Django 的时间配置项")])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt"}},[e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("USE_TZ")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[t._v("True: ")]),t._v("存储到数据库中的时间永远是UTC时间（即: 带时区的UTC时间） -> 将 datetime.datetime.now() 获取到的时间存入数据库时 Django 会把这个时间当成UTC时间存储到数据库中")])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("False: 存储到数据库中的时间永远是本地时间（即: 不带任何时区的当前主机的时间） -> 将 datetime.datetime.now() 获取到的时间存入数据库时 Django 会把这个时间当成本地时间存储到数据库中")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# settings.py")])],1),e("div",[e("br")]),e("div",[t._v("USE_TZ = True")])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt"}},[e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("TIME_ZONE")])])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[t._v("TIME_ZONE 一般和 USE_TZ 搭配使用")])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("当 USE_TZ = False 可以直接忽略 TIME_ZONE 该参数（即: TIME_ZONE 无效）")])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("作用:")]),t._v(" 当 USE_TZ = True 时，此时数据库存储的都是 UTC 时间，当模板或 rest-framework 对时间进行渲染时会根据该参数所指定的时区进行时间的转换（即: 是否加8个小时进行显示）")])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("通俗理解: 当 USE_TZ = True 和 TIME_ZONE = 'Asia/Shanghai' 时，模板或 rest-framework 所渲染出的时间和本地时间没有时差")])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("# settings.py")]),e("div",[e("br")]),e("div",[t._v("TIME_ZONE = 'UTC'  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 默认使用 UTC 时间进行显示")])],1),e("div",[e("br")]),e("div",[t._v("TIME_ZONE = 'Asia/Shanghai'  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用上海时间进行显示")])],1)]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("常见问题")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"12pt"}},[e("span",{staticStyle:{"font-size":"12pt","font-weight":"bold"}},[t._v("三个时间 datetime.datetime.now()、datetime.datetime.utcnow()、django.util.timezone.now() 的区别")])])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("datetime.datetime.now(): 输出的永远是本地时间（naive time）与配置无任任何关系")])]),e("li",[e("div",[t._v("datetime.datetime.utcnow(): 如果setting中配置 USE_TZ=True 则输出的是UTC时间（naive time -> 不包含时区），如果setting中配置 USE_TZ=False，则该输出时间与 datetime.datetime.now() 完全相同")])]),e("li",[e("div",[t._v("django.util.timezone.now(): 如果setting中配置 USE_TZ=True 则输出的是UTC时间（active time -> 包含时区），如果setting中配置 USE_TZ=False，则该输出时间与 datetime.datetime.now() 完全相同")])])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("Django 存储到数据库的时间比本地时间小8个小时")])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("如果配置为 USE_TZ=True 与 TIME_ZONE = 'UTC'，将 datetime.datetime.now() 获取到的时间存入数据库时 Django 会把这个时间当成UTC时间存储到数据库中，当模板或 rest-framework 对时间进行渲染时会按照 UTC 时间进行渲染")])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("如果配置为 USE_TZ=True 与 TIME_ZONE = 'Asia/Shanghai'，用 datetime.datetime.now() 获取的时间由于不带时区，Django会把这个时间当成 Asia/Shanghai 时间（即东八区时间），然后 Django 会把这个时间转成带时区UTC时间存储到数据库中去，"),e("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("当模板或 rest-framework 对时间进行渲染时会按照")]),t._v(" Asia/Shanghai "),e("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("时间（即: 上海时间）进行渲染")])])])])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("模板 或 rest-framework 显示的时间")])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[e("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("当 USE_TZ = True 和 TIME_ZONE = 'Asia/Shanghai' 时，模板或 rest-framework 所渲染出的时间和本地时间没有时差")])])])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[e("font",{staticStyle:{"font-size":"12pt"}},[e("span",{staticStyle:{"font-size":"12pt","font-weight":"bold"}},[t._v("django.util.timezone.now() 输出时间比本地时间小8个小时")])])],1)])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("设置了 USE_TZ = True，django.util.timezone.now() 输出地永远是UTC时间，不管你设置的TIME_ZONE是什么。")])]),e("li",[e("div",[t._v("设置了 USE_TZ=False，django.util.timezone.now() 输出等同于datetime.datetime.now()，也不管TIME_ZONE设置的是什么")])])])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),e("span",{staticStyle:{"font-weight":"bold"}}),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("建议")])]),e("div",[e("br")])]),e("ul",[e("li",[e("div",[t._v("为了统一时间，在django开发时，尽量使用UTC时间，即设置 USE_TZ=True，TIME_ZONE = 'Asia/Shanghai'，并且在获取时间的时候使用 django.util.timezone.now()。因为后台程序使用时间时UTC时间就能满足，也能保证证模板时间的正确显示")])])]),e("div",[e("br")]),e("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[e("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("在 Django 开发中 日期的运算 和 比较 都需要注意时区类型")])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("不同时区的类型的运算和比较错误提醒（即: 一个日期对象有时区，一个日期对象没有时区）")])])]),e("div",[e("br")]),e("div",[e("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/Django/Django的时间问题_files/Image.png",type:"image/png"}})]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("Traceback (most recent call last):")]),e("div",[t._v('  File "C:/Users/Mr. Yeung/Desktop/PyFolder/test_time/app01/tests.py", line 27, in <module>')]),e("div",[t._v("    print(time_obj.time - now)")]),e("div",[t._v("TypeError: can't subtract "),e("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("offset-naive")]),t._v(" and "),e("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("offset-aware")]),t._v(" datetimes")])]),e("div",[e("br")]),e("ul",[e("li",[e("div",[t._v("解决办法 -> 统一时间类型")])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("统一为 "),e("span",{staticStyle:{"font-size":"12pt"}},[t._v("offset-naive: 不含时区")])])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("ul",[e("li",[e("div",[t._v("方法一 -> 将查询到的日期对象变成不包含时区的日期对象")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import datetime")]),e("div",[t._v("from app01.models import *")]),e("div",[e("br")]),e("div",[t._v("time_obj = TimeTable.objects.filter(id=1).first()")]),e("div",[t._v("time_obj_time = time_obj.time.replace(tzinfo=None)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 将查询到的日期对象变成不包含时区的日期对象")])]),e("div",[t._v("print(time_obj_time.tzinfo)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])]),e("div",[e("br")]),e("div",[t._v("now = datetime.datetime.now()")]),e("div",[t._v("print(now.tzinfo)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])]),e("div",[e("br")]),e("div",[t._v("difference_time = now - time_obj_time  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 10:46:45.613783")])]),e("div",[t._v("result = now > time_obj_time  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# True")])])]),e("div",[e("br")]),e("ul",[e("ul",[e("ul",[e("li",[e("div",[t._v("方法二 -> 在 settings.py 中设置 USE_TZ = False，那么直接查询到的是不带时区的日期对象")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# settings.py")])]),e("div",[e("br")]),e("div",[t._v("USE_TZ = False")])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import datetime")]),e("div",[t._v("from app01.models import *")]),e("div",[e("br")]),e("div",[t._v("time_obj = TimeTable.objects.filter(id=1).first()")]),e("div",[t._v("print(time_obj.time.tzinfo)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])]),e("div",[e("br")]),e("div",[t._v("now = datetime.datetime.now()")]),e("div",[t._v("print(now.tzinfo)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# None -> offset-naive: 不含时区")])]),e("div",[e("br")]),e("div",[t._v("difference_time = now - time_obj.time "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 10:51:10.098679")])]),e("div",[t._v("result = now > time_obj.time  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# True")])])]),e("div",[e("br")]),e("ul",[e("ul",[e("li",[e("div",[t._v("统一为 "),e("span",{staticStyle:{"font-size":"12pt"}},[t._v("offset-aware: 包含时区")])])])])]),e("div",[e("br")]),e("ul",[e("ul",[e("ul",[e("li",[e("div",[t._v("前提: settings.py 中的设置 USE_TZ = True")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# settings.py")])]),e("div",[e("br")]),e("div",[t._v("USE_TZ = True")])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import datetime")]),e("div",[t._v("import pytz")]),e("div",[t._v("from app01.models import *")]),e("div",[e("br")]),e("div",[t._v("time_obj = TimeTable.objects.filter(id=1).first()")]),e("div",[t._v("print(time_obj.time.tzinfo)  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# UTC -> offset-aware: 包含时区")])]),e("div",[e("br")]),e("div",[t._v("now = datetime.datetime.now()"),e("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v(".replace(tzinfo=pytz.timezone('UTC'))")])]),e("div",[t._v("print(now.tzinfo) "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # UTC -> offset-aware: 包含时区")])]),e("div",[e("br")]),e("div",[t._v("difference_time = now - time_obj.time  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 10:55:30.414490")])]),e("div",[t._v("result = now > time_obj.time  "),e("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# True")])])]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[e("br")])]),e("div",[e("br")])])])])}),[],!1,null,null,null);i.default=r.exports}}]);