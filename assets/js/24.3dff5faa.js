(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{374:function(e,o,t){"use strict";t.r(o);var i=t(25),r=Object(i.a)({},(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("div",[t("span",[t("div",[t("div",[t("span",{staticStyle:{"font-size":"14pt"}},[e._v("通俗理解: 通过与自身有关联的表数据，查询自身表数据")])]),t("div",[t("font",{staticStyle:{"font-size":"14pt"}},[t("br")])],1),t("div",[t("span",{staticStyle:{"font-size":"14pt"}},[e._v("跨多张表查询自身的数据的前提是，这多张表必须有关联")])]),t("div",[t("font",{staticStyle:{"font-size":"14pt"}},[t("br")])],1),t("div",[t("span",{staticStyle:{"font-size":"18.6667px"}},[e._v("通过 .filter(xxx__xxx='xxx') 实现")])]),t("div",[t("span",{staticStyle:{"font-size":"18.6667px"}},[t("br")])]),t("div",[t("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("1.")]),t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("表的结构")])]),t("div",[t("span",{staticStyle:{"font-size":"18.6667px"}},[t("br")])]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# models.py")])],1),t("div",[t("font",{attrs:{color:"#41AD1C"}},[t("br")])],1),t("div",[e._v("from django.db import models")]),t("div",[t("br")]),t("div",[t("br")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 书")])],1),t("div",[e._v("class Book(models.Model):")]),t("div",[e._v("    title = models.CharField(max_length=32, verbose_name='书名')")]),t("div",[e._v("    publish_date = models.DateField(auto_now_add=True, verbose_name='出版日期')")]),t("div",[e._v("    price = models.DecimalField(max_digits=5, decimal_places=2, verbose_name='价格')")]),t("div",[e._v("    memo = models.TextField(null=True, verbose_name='说明')")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 创建外键，关联publish")])],1),t("div",[e._v("    publisher = models.ForeignKey(to='Publisher', verbose_name='出版社')")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 创建多对多关联author")])],1),t("div",[e._v("    author = models.ManyToManyField(to='Author', verbose_name='作者')")]),t("div",[t("br")]),t("div",[e._v("    def __str__(self):")]),t("div",[e._v("        return self.title")]),t("div",[t("br")]),t("div",[e._v("    class Meta:")]),t("div",[e._v('        verbose_name = "书籍"')]),t("div",[e._v("        verbose_name_plural = verbose_name")]),t("div",[t("br")]),t("div",[t("br")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 出版社")])],1),t("div",[e._v("class Publisher(models.Model):")]),t("div",[e._v("    name = models.CharField(max_length=32, verbose_name='出版社名称')")]),t("div",[e._v("    city = models.CharField(max_length=32, verbose_name='地址')")]),t("div",[t("br")]),t("div",[e._v("    def __str__(self):")]),t("div",[e._v("        return self.name")]),t("div",[t("br")]),t("div",[e._v("    class Meta:")]),t("div",[e._v('        verbose_name = "出版社"')]),t("div",[e._v("        verbose_name_plural = verbose_name")]),t("div",[t("br")]),t("div",[t("br")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 作者")])],1),t("div",[e._v("class Author(models.Model):")]),t("div",[e._v("    name = models.CharField(max_length=32, verbose_name='姓名')")]),t("div",[e._v("    age = models.IntegerField(verbose_name='年龄')")]),t("div",[e._v("    phone = models.CharField(max_length=11, verbose_name='手机号码')")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v(" # 创建一对一关联authorDetail")])],1),t("div",[e._v("    detail = models.OneToOneField(to='AuthorDetail', verbose_name='详情')")]),t("div",[t("br")]),t("div",[e._v("    def __str__(self):")]),t("div",[e._v("        return self.name")]),t("div",[t("br")]),t("div",[e._v("    class Meta:")]),t("div",[e._v('        verbose_name = "作者"')]),t("div",[e._v("        verbose_name_plural = verbose_name")]),t("div",[t("br")]),t("div",[t("br")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 作者详情")])],1),t("div",[e._v("class AuthorDetail(models.Model):")]),t("div",[e._v("    addr = models.CharField(max_length=64, verbose_name='地址')")]),t("div",[e._v("    email = models.EmailField(verbose_name='邮箱')")]),t("div",[t("br")]),t("div",[e._v("    def __str__(self):")]),t("div",[e._v("        return self.addr")]),t("div",[t("br")]),t("div",[e._v("    class Meta:")]),t("div",[e._v('        verbose_name = "作者详情"')]),t("div",[e._v("        verbose_name_plural = verbose_name")])]),t("div",[t("br")]),t("div",[t("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("2.")]),t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),t("span",{staticStyle:{"font-size":"14pt"}},[t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("正向查询")])])]),t("div",[t("br")]),t("ul",[t("li",[t("div",[e._v("语法: .filter(主表类的外键属性名__从表字段名='xxx', ……)")])])]),t("div",[t("br")]),t("ul",[t("ul",[t("li",[t("div",[e._v("查询出书籍的 作者是yeung 的数据")])])])]),t("div",[t("br")]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[e._v("book_list = Book.objects.filter(author__name='yeung')"),t("br")])]),t("div",[t("br")]),t("ul",[t("ul",[t("li",[t("div",[e._v("查询出书籍的 作者是yeung，出版社是东莞出版社 的数据")])])])]),t("div",[t("br")]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[e._v("book_list = Book.objects.filter(author__name='yeung').filter(publisher__name='东莞出版社')"),t("br")]),t("div",[t("br")]),t("div",[t("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[e._v("# 等同于")])]),t("div",[t("br")]),t("div",[e._v("book_list = Book.objects.filter(author__name='yeung', publisher__name='东莞出版社')")])]),t("div",[t("br")]),t("div",[t("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[e._v("3.")]),t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v(" 反")]),t("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e._v("向查询")])]),t("div",[t("br")]),t("ul",[t("li",[t("div",[e._v("语法:")])])]),t("div",[t("br")]),t("ul",[t("ul",[t("li",[t("div",[e._v("如果没有设置表类中外键属性的 related_name")])])])]),t("div",[t("br")]),t("ul",[t("ul",[t("ul",[t("li",[t("div",[e._v(".filter(主表类名__主表字段名='xxx', ……)")])])])])]),t("div",[t("br")]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[t("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 查询出书名为西游记的作者")])],1)]),t("div",[t("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[t("font",{attrs:{color:"#41AD1C"}},[t("br")])],1)]),t("div",[e._v("author = Author.objects.filter(book__title='西游记')")])]),t("div",[t("br")]),t("ul",[t("ul",[t("li",[t("div",[e._v("如果设置了表类中外键属性的 related_name")])])])]),t("div",[t("br")]),t("ul",[t("ul",[t("ul",[t("li",[t("div",[e._v(".filter(related_name所设置的名字__主表字段名='xxx', ……)")])])])])]),t("div",[t("br")]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# models.py")])],1),t("div",[t("br")]),t("div",[e._v("class Book(models.Model):")]),t("div",[e._v("    title = models.CharField(max_length=32, verbose_name='书名')")]),t("div",[e._v("    publish_date = models.DateField(auto_now_add=True, verbose_name='出版日期')")]),t("div",[e._v("    price = models.DecimalField(max_digits=5, decimal_places=2, verbose_name='价格')")]),t("div",[e._v("    memo = models.TextField(null=True, verbose_name='说明')")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v(" # 创建外键，关联publish")])],1),t("div",[e._v("    publisher = models.ForeignKey(to='Publisher', verbose_name='出版社')")]),t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 创建多对多关联author")])],1),t("div",[e._v("    author = models.ManyToManyField(to='Author', verbose_name='作者', "),t("font",{attrs:{color:"#FA7A00"}},[e._v("related_name")]),e._v("='"),t("font",{attrs:{color:"#FA7A00"}},[e._v("mf_book")]),e._v("')")],1),t("div",[t("br")]),t("div",[e._v("    def __str__(self):")]),t("div",[e._v("        return self.title")]),t("div",[t("br")]),t("div",[e._v("    class Meta:")]),t("div",[e._v('        verbose_name = "书籍"')]),t("div",[e._v("        verbose_name_plural = verbose_name")])]),t("div",[t("br")]),t("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[t("div",[t("font",{attrs:{color:"#41AD1C"}},[e._v("# 查询出书名为西游记的作者")])],1),t("div",[t("font",{attrs:{color:"#41AD1C"}},[t("br")])],1),t("div",[e._v("author = Author.objects.filter("),t("font",{attrs:{color:"#FA7A00"}},[e._v("mf_book")]),e._v("__title='西游记')")],1)]),t("div",[t("br")])]),t("div",[t("br")])])])])}),[],!1,null,null,null);o.default=r.exports}}]);