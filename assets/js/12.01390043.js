(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{364:function(t,o,e){"use strict";e.r(o);var i=e(25),s=Object(i.a)({},(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",[e("span",[e("div",[e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt"}},[e("b",[t._v("在模型类中重写 save() 方法的说明")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("b",[e("br")])])]),e("ul",[e("li",[e("div",[e("font",{staticStyle:{"font-size":"12pt"}},[t._v("在 django 的模型类里，如果有些字段的值是需要动态生成的，那么就在模型类里添加上对应的字段，并重写save方法，在 save() 方法中对该字段进行赋值")])],1)])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("b",[e("br")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("什么情况会触发 save() 方法")])]),e("div",[e("font",{staticStyle:{"font-size":"12pt"}},[e("br")])],1),e("ul",[e("li",[e("div",[e("font",{staticStyle:{"font-size":"12pt"}},[t._v("使用添加所修改数据的时候使用 .save() 方法")])],1)]),e("li",[e("div",[t._v("使用在添加数据的时候使用 .create() 方法")])]),e("li",[e("div",[t._v("使用 .update_or_create() 方法")])])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("通过重写 save() 方法动态生成字段的值的写法")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# models.py")])],1),e("div",[e("br")]),e("div",[t._v("class Book(models.Model):")]),e("div",[t._v("    name = models.CharField(max_length=10)")]),e("div",[t._v("    price = models.FloatField()")]),e("div",[e("font",{attrs:{color:"#FA7A00"}},[t._v("author")]),t._v(" = models.CharField(max_length=10)")],1),e("div",[e("font",{attrs:{color:"#FA7A00"}},[t._v("publishing_house")]),t._v(" = models.CharField(max_length=10)")],1),e("div",[e("br")]),e("div",[t._v("    def "),e("font",{attrs:{color:"#FA7A00"}},[t._v("save")]),t._v("(self, *args, **kwargs):")],1),e("div",[t._v("        self."),e("font",{attrs:{color:"#FA7A00"}},[t._v("author")]),t._v(" = 'Kevin'")],1),e("div",[t._v("        self."),e("font",{attrs:{color:"#FA7A00"}},[t._v("publishing_house")]),t._v(" = '东莞出版社'")],1),e("div",[e("font",{attrs:{color:"#FA7A00"}},[t._v("super(self.__class__, self).save(*args, **kwargs)")]),t._v(" "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 调用父类的 save() 方法")])],1)]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[e("font",{attrs:{color:"#41AD1C"}},[t._v("# 会触发 save() 方法的情况")])],1)]),e("div",[e("br")]),e("div",[t._v("Book.objects.create(name='三国演义', price=98.5)")]),e("div",[e("font",{attrs:{color:"#FA7A00"}},[e("br")])],1),e("div",[e("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("# -----------------------------------------------")])],1),e("div",[e("br")]),e("div",[t._v("book = Book.objects.filter(pk=1).first()")]),e("div",[t._v("book.name = '西游记'")]),e("div",[t._v("book.save()")]),e("div",[e("br")]),e("div",[e("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("# -----------------------------------------------")])],1),e("div",[e("br")]),e("div",[t._v("book = Book(name='水浒传', price=100)")]),e("div",[t._v("book.save()")]),e("div",[e("font",{attrs:{color:"#FA7A00"}},[e("br")])],1),e("div",[e("font",{attrs:{color:"#FA7A00"}},[t._v("# -----------------------------------------------")])],1),e("div",[e("font",{attrs:{color:"#FA7A00"}},[e("br")])],1),e("div",[t._v("Book.objects.update_or_create(name='三国演义', defaults={'price': 99.9})")])]),e("div",[e("br")]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("动态生成字段值的例子")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e("br")])]),e("ul",[e("li",[e("div",[t._v("通过用户名生成对应的 uid")])])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[e("font",{attrs:{color:"#41AD1C"}},[t._v("# models.py")])],1),e("div",[e("font",{attrs:{color:"#41AD1C"}},[e("br")])],1),e("div",[t._v("class Student(models.Model):")]),e("div",[t._v("    name = models.CharField(max_length=10)")]),e("div",[t._v("    age = models.IntegerField()")]),e("div",[t._v("    uid = models.CharField(verbose_name='个人唯一ID', max_length=64, unique=True, null=True)  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# unique 唯一索引")])],1),e("div",[e("br")]),e("div",[t._v("    def save(self, *args, **kwargs):")]),e("div",[t._v("        if self.name:")]),e("div",[t._v("            m = hashlib.md5()")]),e("div",[t._v('            m.update(self.name.encode(encoding="utf-8"))')]),e("div",[t._v("            self.uid = m.hexdigest()  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 生成一个 uid 字段的值")])],1),e("div",[t._v("            print(self.uid)  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 17beaf58d14cbb17877dfb328452dc2d")])],1),e("div",[e("br")]),e("div",[t._v("        super(self.__class__, self).save(*args, **kwargs)  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 调用父类的save()方法")])],1)]),e("div",[e("br")])])])])])}),[],!1,null,null,null);o.default=s.exports}}]);