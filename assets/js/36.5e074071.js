(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{389:function(t,i,o){"use strict";o.r(i);var r=o(25),v=Object(r.a)({},(function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("div",[o("span",[o("div",[o("div",[o("br")]),o("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[o("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("分页")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[t._v("只要继承了 APIView 就可以使用分页组件")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),o("span",{staticStyle:{"font-size":"14pt"}},[o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("PageNumberPagination 的分页类使用")])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[t._v("方式一")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("视图四部曲中在混合使用方式中使用分页")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{staticStyle:{"font-size":"9pt"},attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from django.shortcuts import render, HttpResponse")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from rest_framework.views import APIView")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from rest_framework.response import Response")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from .models import *")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from .serializer import *")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("from rest_framework.pagination import PageNumberPagination")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("class MyPageNumberPagination(PageNumberPagination):")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("    page_size = 1  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 每页显示多少条数据")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("    page_query_param = 'page'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?page=1")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("font",{attrs:{color:"#41AD1C"}}),t._v(" "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url 可以通过以下两个参数修改当前页显示多少条数据")]),o("br")],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("    page_size_query_param = 'size'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?page=1&size=2，如果在url加上该参数就代表临时显示2条数据")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("    max_page_size = 5  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置最大的临时显示数，一般和 page_size_query_param 搭配使用，即: size 所设置的数值不能超过 max_page_size 所设置的数值")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("class PublishView(APIView):")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 查看所有出版社")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("    def get(self, request):")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("        publish_list = Publish.objects.all()")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("        pnp = MyPageNumberPagination()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 实例化分页对象")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("        publish_list_page = pnp.paginate_queryset(publish_list, request, self)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用分页对象下的 paginate_queryset 方法处理 queryset 对象（即: 查询到的数据列表）")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[o("br")])],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("        ps = PublishSerializers(publish_list_page, many=True)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 序列化被 paginate_queryset 方法处理后的 queryset 对象（即: 查询到的数据列表）")])],1)],1),o("div",[o("font",{staticStyle:{"font-size":"9pt"}},[t._v("        return Response(ps.data)")])],1)]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 接口说明: 查看出版社（带分页）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 接口: http://127.0.0.1:8000/publish/?page=1")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 请求类型: GET")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页说明: 每页显示1条数据")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 结果:")])],1),o("div",[o("br")]),o("div",[t._v("[")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 1,')]),o("div",[t._v('        "name": "东莞出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    }")]),o("div",[t._v("]")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#FA7A00"}},[t._v("# --------------------------------------------------------------")])],1),o("div",[o("font",{attrs:{color:"#FA7A00"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 接口说明: 查看出版社（带分页）")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 接口: http://127.0.0.1:8000/publish/?page=1&size=3")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 请求类型: GET")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页说明: 每页显示1条数据，临时显示3条数据")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 结果:")])],1),o("div",[o("br")]),o("div",[t._v("[")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 1,')]),o("div",[t._v('        "name": "东莞出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    },")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 2,')]),o("div",[t._v('        "name": "广州出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    },")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 4,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    }")]),o("div",[t._v("]")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("方式二")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("视图四部曲中除了混合使用方式外的其他方式使用分页")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("pagination_class = 分页类")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),o("div",[o("br")]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[t._v("from rest_framework import viewsets")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import PageNumberPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class MyPageNumberPagination(PageNumberPagination):")]),o("div",[t._v("    page_size = 1  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 每页显示多少条数据")])],1),o("div",[t._v("    page_query_param = 'page'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?page=1")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("span")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url 可以通过以下两个参数修改当前页显示多少条数据")])],1),o("div",[t._v("    page_size_query_param = 'size'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?page=1&size=2，如果在url加上该参数就代表临时显示2条数据")])],1),o("div",[t._v("    max_page_size = 5  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置最大的临时显示数，一般和 page_size_query_param 搭配使用，即: size 所设置的数值不能超过 max_page_size 所设置的数值")])],1),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishViewSet(viewsets.ModelViewSet):")]),o("div",[t._v("    queryset = Publish.objects.all()")]),o("div",[t._v("    serializer_class = PublishSerializers")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#FA7A00"}},[t._v("pagination_class")]),t._v(" = MyPageNumberPagination")],1)]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("口: http://127.0.0.1:8000/publish/?page=1")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: 每页显示1条数据")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("{")]),o("div",[t._v('    "count": 11,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 总页数")])],1),o("div",[t._v('    "next": "http://127.0.0.1:8000/publish/?page=2",  '),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 下一页的网址，没有则为 null")])],1),o("div",[t._v('    "previous": null,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 上一页的网址，没有则为 null")])],1),o("div",[t._v('    "results": [')]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 1,')]),o("div",[t._v('            "name": "东莞出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        }")]),o("div",[t._v("    ]")]),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("# --------------------------------------------------------------")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口:")]),o("font",{attrs:{color:"#41AD1C"}},[t._v(" http://127.0.0.1:8000/publish/?page=1&size=3")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: 每页显示1条数据，临时显示3条数据")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("{")]),o("div",[t._v('    "count": 11,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 总页数")])],1),o("div",[t._v('    "next": "http://127.0.0.1:8000/publish/?page=2&size=3",  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 下一页的网址，没有则为 null")])],1),o("div",[t._v('    "previous": null,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 上一页的网址，没有则为 null")])],1),o("div",[t._v('    "results": [')]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 1,')]),o("div",[t._v('            "name": "东莞出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        },")]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 2,')]),o("div",[t._v('            "name": "广州出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        },")]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 4,')]),o("div",[t._v('            "name": "深圳出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        }")]),o("div",[t._v("    ]")]),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("配置全局的分页参数 -> 不建议使用")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果配置了全局的分页参数可以不用创建分页类，直接使用 PageNumberPagination 分页类")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("只有 PAGE_SIZE 这个参数可以进行设置")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# settings.py")])],1),o("div",[o("br")]),o("div",[t._v("REST_FRAMEWORK = {")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v('# "DEFAULT_AUTHENTICATION_CLASSES": ["app01.rf_auth.TokenAuth"],  # 全局认证')])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v('    # "DEFAULT_PERMISSION_CLASSES": ["app01.rf_permission.SVIPPermission"]  # 全局权限')])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("    # 'DEFAULT_PARSER_CLASSES': ['rest_framework.parsers.JSONParser']  # 全局解析器")])],1),o("div",[t._v("    'PAGE_SIZE': 1,  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页 -> 一页显示多少条数据")])],1),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 方式一")])],1),o("div",[o("br")]),o("div",[t._v("from django.shortcuts import render, HttpResponse")]),o("div",[t._v("from rest_framework.views import APIView")]),o("div",[t._v("from rest_framework.response import Response")]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import PageNumberPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishView(APIView):")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 查看所有出版社")])],1),o("div",[t._v("    def get(self, request):")]),o("div",[t._v("        publish_list = Publish.objects.all()")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页")])],1),o("div",[t._v("        pnp = PageNumberPagination()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 实例化分页对象")])],1),o("div",[t._v("        publish_list_page = pnp.paginate_queryset(publish_list, request, self)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用分页对象下的 paginate_queryset 方法处理 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[o("br")]),o("div",[t._v("        ps = PublishSerializers(publish_list_page, many=True)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 序列化被 paginate_queryset 方法处理后的 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[t._v("        return Response(ps.data)")]),o("div",[o("font",{attrs:{color:"#FA7A00"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#FA7A00"}},[t._v("# -----------------------------------------")])],1),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 方式二")])],1),o("div",[o("br")]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[t._v("from rest_framework import viewsets")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import PageNumberPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishViewSet(viewsets.ModelViewSet):")]),o("div",[t._v("    queryset = Publish.objects.all()")]),o("div",[t._v("    serializer_class = PublishSerializers")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#000000"}},[t._v("pagination_class")]),t._v(" = PageNumberPagination")],1)]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}}),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("LimitOffsetPagination")]),o("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v(" 的偏移分页类使用")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("LimitOffsetPagination的使用方式和PageNumberPagination的使用方式是一样，只是")]),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("LimitOffsetPagination分页")]),o("span",{staticStyle:{"font-size":"12pt"}},[t._v("类的参数和功能不一样而已")])])])]),o("div",[o("br")]),o("ul",[o("li",[o("div",[t._v("方式一")])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("视图四部曲中在混合使用方式中使用分页")])])])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),o("div",[o("br")]),o("div",[t._v("from django.shortcuts import render, HttpResponse")]),o("div",[t._v("from rest_framework.views import APIView")]),o("div",[t._v("from rest_framework.response import Response")]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import LimitOffsetPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class MyLimitOffsetPagination(LimitOffsetPagination):")]),o("div",[t._v("    default_limit = 2  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 显示多少条数据")])],1),o("div",[t._v("    limit_query_param = 'limit'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?limit=2")])],1),o("div",[t._v("    offset_query_param = 'offset'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?limit=2&offset=1，如果在url加上该参数就代表从1开始偏移几位")])],1),o("div",[t._v("    max_limit = 5  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 限制最多显示多少条数据")])],1),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishView(APIView):")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 查看所有出版社")])],1),o("div",[t._v("    def get(self, request):")]),o("div",[t._v("        publish_list = Publish.objects.all()")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页")])],1),o("div",[t._v("        lop = MyLimitOffsetPagination()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 实例化分页对象")])],1),o("div",[t._v("        publish_list_page = lop.paginate_queryset(publish_list, request, self)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用分页对象下的 paginate_queryset 方法处理 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[o("br")]),o("div",[t._v("        ps = PublishSerializers(publish_list_page, many=True)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 序列化被 paginate_queryset 方法处理后的 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[t._v("        return Response(ps.data)")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 接口: http://127.0.0.1:8000/publish/?offset=2")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: 显示2条数据，从1开始偏移2条数据")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("[")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 3,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    },")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 4,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    }")]),o("div",[t._v("]")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("# --------------------------------------------------------------")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("口: http://127.0.0.1:8000/publish/?limit=3&offset=2")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: 显示3条数据，从1开始偏移2条数据")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("[")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 3,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    },")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 4,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    },")]),o("div",[t._v("    {")]),o("div",[t._v('        "id": 5,')]),o("div",[t._v('        "name": "深圳出版社",')]),o("div",[t._v('        "email": "123@qq.com"')]),o("div",[t._v("    }")]),o("div",[t._v("]")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("方式二")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("视图四部曲中除了混合使用方式外的其他方式使用分页")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("pagination_class = 分页类")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[o("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1)]),o("div",[o("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1)]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[t._v("from rest_framework import viewsets")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import LimitOffsetPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class MyLimitOffsetPagination(LimitOffsetPagination):")]),o("div",[t._v("    default_limit = 2 "),o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 显示多少条数据")])],1),o("div",[t._v("    limit_query_param = 'limit'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?limit=2")])],1),o("div",[t._v("    offset_query_param = 'offset'  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# url的参数名，即: ?limit=2&offset=1，如果在url加上该参数就代表从1开始偏移几位")])],1),o("div",[t._v("    max_limit = 5  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 限制最多显示多少条数据")])],1),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishViewSet(viewsets.ModelViewSet):")]),o("div",[t._v("    queryset = Publish.objects.all()")]),o("div",[t._v("    serializer_class = PublishSerializers")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#FA7A00"}},[t._v("pagination_class")]),t._v(" = MyLimitOffsetPagination")],1)]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("口: http://127.0.0.1:8000/publish/?offset=1")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: 默认显示2条数据，从1开始偏移1条数据")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("{")]),o("div",[t._v('    "count": 11,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 总页数")])],1),o("div",[t._v('    "next": "http://127.0.0.1:8000/publish/?limit=2&offset=3",  '),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 下一页的网址，没有则显示null")])],1),o("div",[t._v('    "previous": "http://127.0.0.1:8000/publish/?limit=2",  '),o("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 上一页的网址，没有则显示null")])],1),o("div",[t._v('    "results": [')]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 2,')]),o("div",[t._v('            "name": "广州出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        },")]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 4,')]),o("div",[t._v('            "name": "深圳出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        }")]),o("div",[t._v("    ]")]),o("div",[t._v("}")]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("# --------------------------------------------------------------")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接口说明: 查看出版社（带分页）")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 接")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("口: http://127.0.0.1:8000/publish/?limit=3&offset=2")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 请求类型: GET")])]),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页说明: ")]),o("font",{attrs:{color:"#41AD1C"}},[t._v("显示3条数据，从1开始偏移2条数据")])],1),o("div",[o("br")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 结果:")])]),o("div",[o("br")]),o("div",[t._v("{")]),o("div",[t._v('    "count": 11,  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 总页数")])],1),o("div",[t._v('    "next": "http://127.0.0.1:8000/publish/?limit=3&offset=5",  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 下一页的网址，没有则显示null")])],1),o("div",[t._v('    "previous": "http://127.0.0.1:8000/publish/?limit=3",  '),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 上一页的网址，没有则显示null")])],1),o("div",[t._v('    "results": [')]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 4,')]),o("div",[t._v('            "name": "深圳出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        },")]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 5,')]),o("div",[t._v('            "name": "深圳出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        },")]),o("div",[t._v("        {")]),o("div",[t._v('            "id": 6,')]),o("div",[t._v('            "name": "深圳出版社",')]),o("div",[t._v('            "email": "123@qq.com"')]),o("div",[t._v("        }")]),o("div",[t._v("    ]")]),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("ul",[o("li",[o("div",[o("span",{staticStyle:{"font-size":"12pt"}},[t._v("配置全局的分页参数 -> 不建议使用")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("如果配置了全局的分页参数可以不用创建分页类，直接使用 LimitOffsetPagination 分页类")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("只有 PAGE_SIZE 这个参数可以进行设置")])])])]),o("div",[o("br")]),o("ul",[o("ul",[o("li",[o("div",[t._v("这里的 PAGE_SIZE 参数指的是 default_limit 参数")])])])]),o("div",[o("br")]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# settings.py")])]),o("div",[o("br")]),o("div",[t._v("REST_FRAMEWORK = {")]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v('# "DEFAULT_AUTHENTICATION_CLASSES": ["app01.rf_auth.TokenAuth"],  # 全局认证')])]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v('    # "DEFAULT_PERMISSION_CLASSES": ["app01.rf_permission.SVIPPermission"]  # 全局权限')])]),o("div",[o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("    # 'DEFAULT_PARSER_CLASSES': ['rest_framework.parsers.JSONParser']  # 全局解析器")])]),o("div",[t._v("    'PAGE_SIZE': 2,  "),o("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 分页 -> 显示多少条数据")])]),o("div",[t._v("}")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])]),o("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# views.py")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 方式一")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[t._v("from django.shortcuts import render, HttpResponse")]),o("div",[t._v("from rest_framework.views import APIView")]),o("div",[t._v("from rest_framework.response import Response")]),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import LimitOffsetPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishView(APIView):")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v(" # 查看所有出版社")])],1),o("div",[t._v("    def get(self, request):")]),o("div",[t._v("        publish_list = Publish.objects.all()")]),o("div",[o("br")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 分页")])],1),o("div",[t._v("        lop = LimitOffsetPagination()  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 实例化分页对象")])],1),o("div",[t._v("        publish_list_page = lop.paginate_queryset(publish_list, request, self)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用分页对象下的 paginate_queryset 方法处理 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[o("br")]),o("div",[t._v("        ps = PublishSerializers(publish_list_page, many=True)  "),o("font",{attrs:{color:"#41AD1C"}},[t._v("# 序列化被 paginate_queryset 方法处理后的 queryset 对象（即: 查询到的数据列表）")])],1),o("div",[t._v("        return Response(ps.data)")]),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#FA7A00"}},[t._v("# -------------------------------------------")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[t._v("# 方式二")])],1),o("div",[o("font",{attrs:{color:"#41AD1C"}},[o("br")])],1),o("div",[t._v("from .models import *")]),o("div",[t._v("from .serializer import *")]),o("div",[t._v("from rest_framework import viewsets")]),o("div",[o("br")]),o("div",[t._v("from rest_framework.pagination import LimitOffsetPagination")]),o("div",[o("br")]),o("div",[o("br")]),o("div",[t._v("class PublishViewSet(viewsets.ModelViewSet):")]),o("div",[t._v("    queryset = Publish.objects.all()")]),o("div",[t._v("    serializer_class = PublishSerializers")]),o("div",[o("br")]),o("div",[t._v("    pagination_class = LimitOffsetPagination")])]),o("div",[o("span",{staticStyle:{"font-size":"14pt"}},[o("br")])])]),o("div",[o("br")]),o("div",[o("br")])])])])}),[],!1,null,null,null);i.default=v.exports}}]);