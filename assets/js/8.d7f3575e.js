(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{362:function(o,i,r){"use strict";r.r(i);var d=r(25),e=Object(d.a)({},(function(){var o=this,i=o.$createElement,r=o._self._c||i;return r("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("Q查询")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("在 .filter() 等方法中默认都是使用了 'AND'，如果想使用 'OR'，那么就要使用 Q() 方法")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("导入 Q() 方法")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("from django.db.models import  Q")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[o._v("& -> 'and'")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 查询 id >= 3 and id <=5 的数据")])]),r("div",[r("br")]),r("div",[o._v("from app01.models import *")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter(Q(id__gte=3) & Q(id__lte=5))")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 等同于")])]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter(id__gte=3, id__lte=5)")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("| -> 'or'")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 查询 id >= 3 or id <=5 的数据")])]),r("div",[r("br")]),r("div",[o._v("from app01.models import *")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter(Q(id__gte=3) | Q(id__lte=5))")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("~ -> 非（取反）")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 查询 id != 3 的数据")])]),r("div",[r("br")]),r("div",[o._v("from app01.models import *")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter(~Q(id=3))")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 等同于")])]),r("div",[r("br")]),r("div",[o._v("Student.objects.exclude(id=3)")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("混合使用")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[o._v("注意:")]),o._v(" 如果是混合使用 Q() 查询一定要写在前面")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 查询 (id >= 3 or id <=5) and age = 25 的数据")])]),r("div",[r("br")]),r("div",[o._v("from app01.models import *")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter(Q(id__gte=3) | Q(id__lte=5), age=25)")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 等同于")])]),r("div",[r("br")]),r("div",[o._v("Student.objects.filter((Q(id__gte=3) | Q(id__lte=5)) & Q(age=25))")])]),r("div",[r("br")]),r("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"21px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[o._v("传递Q对象，构造查询条件")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("使用场景: ")])]),r("ul",[r("li",[r("div",[o._v("当有多个Q查询的时候就使用该方法构建Q查询")])]),r("li",[r("div",[o._v("当使用Q查询的时候获取到的字段名是字符串类型的时候（xadmin中有多处使用该方法）")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("使用该方法的时候最好查看一下它所生成的SQL语句是否与代码逻辑相符合")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[o._v("传入条件进行查询")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("# 固定写法")])],1),r("div",[r("br")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("q1 = Q()")]),r("div",[o._v("q1.connector = 'OR/AND'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q1.children.append(('字段名', '参数'))")]),r("div",[o._v("q1.children.append(('字段名__条件', '参数'))")]),r("div",[r("span",{staticStyle:{"font-size":"9pt","font-family":"Monaco"}},[r("font",{attrs:{color:"#41AD1C"}},[o._v("……")])],1)]),r("div",[r("br")]),r("div",[o._v("变量名 = 表的类.objects.filter(q1)")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("q1 = Q()")]),r("div",[o._v("q1.connector = 'OR'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q1.children.append(('id', 1))")]),r("div",[o._v("q1.children.append(('id', 2))")]),r("div",[o._v("q1.children.append(('price__gte', 3))")]),r("div",[r("br")]),r("div",[o._v("book = Book.objects.filter(q1)")]),r("div",[r("br")]),r("div",[o._v("print(book.query)  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# SELECT id, title, price, publish_id FROM app01_book WHERE (id = 1 OR id = 2 OR id = 3)")])],1)]),r("div",[r("br")])]),r("ul",[r("li",[r("div",[o._v("合并条件进行查询")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("# 固定写法")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[r("br")])],1),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("con = Q()")]),r("div",[r("br")]),r("div",[o._v("q1 = Q()")]),r("div",[o._v("q1.connector = 'OR/AND'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q1.children.append(('字段名', '参数'))")]),r("div",[o._v("q1.children.append(('字段名__条件', '参数'))")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("……")])],1),r("div",[r("br")]),r("div",[o._v("q2 = Q()")]),r("div",[o._v("q2.connector = 'OR/AND'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q2.children.append(('字段名', '参数'))")]),r("div",[o._v("q2.children.append(('字段名__条件', '参数'))")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("……")])],1),r("div",[r("br")]),r("div",[o._v("con.add(q1, 'OR/AND')")]),r("div",[o._v("con.add(q2, 'OR/AND')")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("……")])],1),r("div",[r("br")]),r("div",[o._v("变量名 = 表的类.objects.filter(con)")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{staticStyle:{color:"rgb(65, 173, 28)"}},[o._v("# 查询 (id=1 并且 title=红楼梦 并且 price>=50) 或者 (price=100 并且 title=三国")]),r("font",{attrs:{color:"#41AD1C"}},[r("font",[o._v("演义")]),o._v(" 并且 price>=50) "),r("font",[o._v("的书籍")])],1)],1),r("div",[r("br")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("con = Q()")]),r("div",[r("br")]),r("div",[o._v("q1 = Q()")]),r("div",[o._v("q1.children.append(('id', 1))")]),r("div",[o._v("q1.children.append(('title', '红楼梦'))")]),r("div",[o._v("q1.children.append(('price__gte', 50))")]),r("div",[r("br")]),r("div",[o._v("q2 = Q()")]),r("div",[o._v("q2.children.append(('price', 100))")]),r("div",[o._v("q2.children.append(('title', '三国演义'))")]),r("div",[o._v("q2.children.append(('price__gte', 50))")]),r("div",[r("br")]),r("div",[o._v("con.add(q1, 'OR')")]),r("div",[o._v("con.add(q2, 'OR')")]),r("div",[r("br")]),r("div",[o._v("book = Book.objects.filter(con)")]),r("div",[r("br")]),r("div",[o._v("print(book.query) "),r("font",{attrs:{color:"#41AD1C"}},[o._v(" # SELECT id, title, price, publish_id FROM app01_book WHERE ((id = 1 AND title = 红楼梦) OR (price = 100 AND title = 三国演义))")])],1)]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[o._v("# 查询 (id=1 或者 title=红楼梦 或者 ")]),r("font",{attrs:{color:"#41AD1C"}},[o._v("price>=50) 并且 (price=100 或者 title=三国演义 或者 price>=50) 的数据")])],1),r("div",[r("br")]),r("div",[o._v("from django.db.models import Q")]),r("div",[r("br")]),r("div",[o._v("con = Q()")]),r("div",[r("br")]),r("div",[o._v("q1 = Q()")]),r("div",[o._v("q1.connector = 'OR'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q1.children.append(('id', 1))")]),r("div",[o._v("q1.children.append(('title', '红楼梦'))")]),r("div",[o._v("q1.children.append(('price__gte', 50))")]),r("div",[r("br")]),r("div",[o._v("q2 = Q()")]),r("div",[o._v("q2.connector = 'OR'  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# 指定使用 OR 还是 AND，如果不指定默认使用 AND")])],1),r("div",[o._v("q2.children.append(('price', 100))")]),r("div",[o._v("q2.children.append(('title', '三国演义'))")]),r("div",[o._v("q2.children.append(('price__gte', 50))")]),r("div",[r("br")]),r("div",[o._v("con.add(q1, 'AND')")]),r("div",[o._v("con.add(q2, 'AND')")]),r("div",[r("br")]),r("div",[o._v("book = Book.objects.filter(con)")]),r("div",[r("br")]),r("div",[o._v("print(book.query)  "),r("font",{attrs:{color:"#41AD1C"}},[o._v("# SELECT id, title, price, publish_id FROM app01_book WHERE ((id = 1 OR title = 红楼梦) AND (price = 100 OR title = 三国演义))")])],1)]),r("div",[r("br")]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);i.default=e.exports}}]);