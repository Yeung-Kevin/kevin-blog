(window.webpackJsonp=window.webpackJsonp||[]).push([[322],{673:function(t,e,i){"use strict";i.r(e);var o=i(25),r=Object(o.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("div",[i("span",[i("div",[i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("requests 模块的介绍")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("requests 模块的介绍")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("爬虫的基本框架是获取HTML页面信息、解析页面信息、保存结果，而 requests 模块式用于第一步获取页面信息")])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[t._v("requests 模块一般用于提交网络请求 和 爬取 HTML 页面")])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("requests 其实是在 urllib 模块上再做了一层封装")])])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("requests")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v(" 和 ")]),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("urllib")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("的对比")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用requests模块：")])])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("自动处理url编码")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("自动处理post请求参数")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("简化cookie和代理操作")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("......")])])])])]),i("div",[i("br")]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("使用urllib：")])])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("手动处理url编码")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("手动处理post请求参数")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("处理cookie和代理操作繁琐")])])]),i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("......")])])])])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("2.")]),i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("requests 模块的模拟上网的流程")])]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[i("br")])]),i("ol",[i("li",[i("div",[t._v("指定url")])]),i("li",[i("div",[t._v("发起请求")])]),i("li",[i("div",[t._v("获取响应对象中的数据")])]),i("li",[i("div",[t._v("持久化存储（即: 保存爬取到的数据）")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 1. 指定url")])],1),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 2. 发起请求")])],1),i("div",[t._v("response = requests.get(url=url)")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 3. 获取响应对象中的数据")])],1),i("div",[t._v("page_text = response.text")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 4. 持久化存储（即: 保存爬取到的数据）")])],1),i("div",[t._v("with open('./sogou.html', 'w', encoding='utf-8') as f:")]),i("div",[t._v("    f.write(page_text)")])]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(255, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("4.")]),i("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(255, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(255, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("使用 ")]),i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(255, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("requests 模块的注意事项")])]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt",color:"rgb(255, 0, 0)"}},[t._v("在使用 requests 模块的时候都要设置 User-Agent 请求头，为了防止反爬机制中的 User-Agent 检测（即: UA检测）")])])])]),i("div",[i("span",{staticStyle:{"box-sizing":"border-box","-webkit-tap-highlight-color":"transparent","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("requests 模块的使用")])]),i("div",[i("br")]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("requests 模块的请求方式")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("requests.get()  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 通过get请求获取页面")])],1),i("div",[t._v("requests.post()  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 通过post请求获取页面")])],1),i("div",[t._v("requests.put()  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 通过put请求获取页面")])],1),i("div",[t._v("requests.patch() "),i("font",{attrs:{color:"#41AD1C"}},[t._v(" # 通过patch请求获取页面")])],1),i("div",[t._v("requests.delete()  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 通过delete请求获取页面")])],1),i("div",[t._v("requests.head()  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取HTML网页头信息")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("requests 模块的参数")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("url -> 对指定的url发起请求")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("response = requests.get("),i("font",{attrs:{color:"#FA7A00"}},[t._v("url")]),t._v("=url)")],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("param -> 指定get请求的参数")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/web'")]),i("div",[t._v("param = {")]),i("div",[t._v("    'query': '电影'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, "),i("font",{attrs:{color:"#FA7A00"}},[t._v("params")]),t._v("=param)")],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("data -> 指定post请求的参数")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://fanyi.baidu.com/sug'")]),i("div",[t._v("data = {")]),i("div",[t._v("    'kw': '狗'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.post(url=url, "),i("font",{attrs:{color:"#FA7A00"}},[t._v("data")]),t._v("=data)")],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[t._v("headers -> 设置请求头参数")])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, "),i("font",{attrs:{color:"#FA7A00"}},[t._v("headers")]),t._v("=headers)")],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("响应对象中的相关属性")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[t._v("获取爬取到的数据")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("ul",[i("li",[i("div",[t._v("响应对象.text -> 获取到的数据类型: 字符串")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, headers=headers)")]),i("div",[t._v("page_text = "),i("font",{attrs:{color:"#FA7A00"}},[t._v("response.text")])],1)]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[t._v("响应对象.content -> 获取到的数据类型: 二进制（即: bytes 类型）")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, headers=headers)")]),i("div",[t._v("page_text = "),i("font",{attrs:{color:"#FA7A00"}},[t._v("response.content")])],1)]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[t._v("响应对象.json() -> 获取到的数据类型: 字典")])])])]),i("div",[i("br")]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://fanyi.baidu.com/sug'")]),i("div",[t._v("headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'}")]),i("div",[t._v("data = {'kw': '狗'}")]),i("div",[t._v("response = requests.post(url=url, data=data, headers=headers)")]),i("div",[t._v("data_dic = "),i("font",{attrs:{color:"#FA7A00"}},[t._v("response.json()")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("ul",[i("li",[i("div",[i("span",{staticStyle:{"font-size":"12pt"}},[t._v("获取状态码")])])])]),i("div",[i("br")]),i("ul",[i("ul",[i("li",[i("div",[t._v("响应对象.status_code")])])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'}")]),i("div",[t._v("response = requests.get(url=url, headers=headers)")]),i("div",[i("br")]),i("div",[t._v("status_code = "),i("font",{staticStyle:{color:"rgb(250, 122, 0)"}},[t._v("response.status_code")])],1),i("div",[i("br")]),i("div",[t._v("print(status_code)  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 200")])],1)]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("h2",{staticStyle:{margin:"10px 0px 12px",padding:"0px 0px 0px 15px","font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-align":"center","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[i("span",{staticStyle:{"font-size":"21px","background-color":"#3eaf7c","border-radius":"3px","text-shadow":"rgb(34, 34, 34) 1px 1px 2px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"white","font-family":'"Helvetica Neue", Helvetica, Verdana, Arial, sans-serif',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold","line-height":"1.5"}},[t._v("爬虫案例")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取搜狗网页")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/'")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, headers=headers)")]),i("div",[t._v("page_text = response.text")]),i("div",[t._v("with open('./sogou.html', 'w', encoding='utf-8') as f:")]),i("div",[t._v("    f.write(page_text)")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取搜狗指定词条搜索后的页面数据")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.sogou.com/web'")]),i("div",[i("br")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[i("br")]),i("div",[t._v("wd = input('请输入你要搜索的内容:')")]),i("div",[i("br")]),i("div",[t._v("param = {")]),i("div",[t._v("    'query': wd")]),i("div",[t._v("}")]),i("div",[i("br")]),i("div",[t._v("response = requests.get(url=url, params=param)")]),i("div",[t._v("page_text = response.content")]),i("div",[t._v("file_name = '%s.html' % wd")]),i("div",[t._v("with open(file_name, 'wb') as f:")]),i("div",[t._v("    f.write(page_text)")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取百度翻译结果")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://fanyi.baidu.com/sug'")]),i("div",[i("br")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[i("br")]),i("div",[t._v("wd = input('请输入你要翻译的内容:')")]),i("div",[i("br")]),i("div",[t._v("data = {")]),i("div",[t._v("    'kw': wd")]),i("div",[t._v("}")]),i("div",[i("br")]),i("div",[t._v("response = requests.post(url=url, data=data, headers=headers)")]),i("div",[t._v("print(response.json())")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取豆瓣电影分类排行榜中的电影详情数据")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://movie.douban.com/j/chart/top_list'")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[t._v("params = {")]),i("div",[t._v("    'type': 5,")]),i("div",[t._v("    'interval_id': '100:90',")]),i("div",[t._v("    'action': '',")]),i("div",[t._v("    'start': 20,")]),i("div",[t._v("    'limit': 20,")]),i("div",[t._v("}")]),i("div",[t._v("response = requests.get(url=url, params=params, headers=headers)")]),i("div",[t._v("print(response.json())")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("5.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取国家药品监督管理总局中基于中华人民共和国化妆品生产许可证相关数据")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsList'")]),i("div",[t._v("headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'}")]),i("div",[t._v("id_list = []")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取公司的id")])],1),i("div",[t._v("for page in range(1, 11):")]),i("div",[t._v("    data = {")]),i("div",[t._v("        'on': 'true',")]),i("div",[t._v("        'page': page,")]),i("div",[t._v("        'pageSize': 15,")]),i("div",[t._v("        'productName': '',")]),i("div",[t._v("        'conditionType': 1,")]),i("div",[t._v("        'applyname': '',")]),i("div",[t._v("        'applysn': '',")]),i("div",[t._v("    }")]),i("div",[t._v("    response = requests.post(url=url, data=data, headers=headers)")]),i("div",[t._v("    json_data = response.json()")]),i("div",[t._v("    for data in json_data['list']:")]),i("div",[t._v("        id = data['ID']")]),i("div",[t._v("        id_list.append(id)")]),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 通过公司id查询公司的详情")])],1),i("div",[t._v("detail_url = 'http://125.35.6.84:81/xk/itownet/portalAction.do?method=getXkzsById'")]),i("div",[t._v("for id in id_list:")]),i("div",[t._v("    detail_data = {")]),i("div",[t._v("        'id': id")]),i("div",[t._v("    }")]),i("div",[t._v("    detail_response = requests.post(url=detail_url, data=detail_data, headers=headers)")]),i("div",[t._v("    detail_json = detail_response.json()")]),i("div",[t._v("    print(detail_json)")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("6.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("爬取图片")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[i("br")]),i("div",[t._v("url = 'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1575719684752&di=478b3ebe5d21cac01d47ab26302811d4&imgtype=0&src=http%3A%2F%2Fn.sinaimg.cn%2Ffront%2F266%2Fw640h426%2F20181010%2F5O8K-hkrzyan5860450.jpg'")]),i("div",[i("br")]),i("div",[t._v("headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'}")]),i("div",[i("br")]),i("div",[t._v("img_data = requests.get(url=url, headers=headers).content")]),i("div",[i("br")]),i("div",[t._v("with open('./哈士奇.jpg', 'wb') as f:")]),i("div",[t._v("    f.write(img_data)")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("7.")]),t._v(" "),i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("使用正则批量爬取图片")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i("br")])]),i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[i("div",[t._v("import requests")]),i("div",[t._v("import re")]),i("div",[t._v("import os")]),i("div",[t._v("from urllib.request import urlretrieve")]),i("div",[i("br")]),i("div",[t._v("url = 'https://www.hahamx.cn/pic/new/%d'")]),i("div",[i("br")]),i("div",[t._v("headers = {")]),i("div",[t._v("    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36'")]),i("div",[t._v("}")]),i("div",[i("br")]),i("div",[t._v("if not os.path.exists('./imgs'):  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 判断是否存在该文件夹")])],1),i("div",[t._v("    os.mkdir('./imgs')  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 创建文件夹")])],1),i("div",[i("br")]),i("div",[i("font",{attrs:{color:"#41AD1C"}},[t._v("# 输入爬取第几页到第几页的图片")])],1),i("div",[t._v("start_page = int(input('请输入起始页码：'))")]),i("div",[t._v("end_page = int(input('请输入结束页码：'))")]),i("div",[i("br")]),i("div",[t._v("for page in range(start_page, end_page + 1):")]),i("div",[t._v("    new_url = url % page "),i("font",{attrs:{color:"#41AD1C"}},[t._v(" # 拼接网址")])],1),i("div",[t._v("    page_text = requests.get(url=new_url, headers=headers).text  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取网页内容")])],1),i("div",[t._v('    img_data_list = re.findall(\'<div class="joke-main-content clearfix">.*?class="clearfix joke-main-gif-suspend joke-main-img-wrapper joke-main-img-gif-wrapper".*?data-path="(.*?)" data-filename="(.*?)">\', page_text, re.S)  '),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取图片网址的相关参数")])],1),i("div",[t._v("    for img_data in img_data_list:")]),i("div",[t._v("        img_url = 'https://image.hahamx.cn/%s/normal/%s' % img_data  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 拼接图片网址")])],1),i("div",[t._v("        img_path = './imgs/' + img_data[1]  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 设置图片保存路径")])],1),i("div",[t._v("        urlretrieve(url=img_url, filename=img_path)  "),i("font",{attrs:{color:"#41AD1C"}},[t._v("# 保存图片")])],1),i("div",[t._v("        print(img_path, '下载成功！')")]),i("div",[i("br")]),i("div",[t._v("print('over!!')")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i("br")])]),i("div",[i("span",{staticStyle:{"font-size":"14pt"}},[i("br")])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);