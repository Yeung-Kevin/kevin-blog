(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{636:function(t,i,r){"use strict";r.r(i);var e=r(25),o=Object(e.a)({},(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量其实就是将异步执行变成了同步执行")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量和锁其实差不多，锁每一次允许一个线程对数据进行修改，而")]),r("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量每次允许 num")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("个线程对数据进行修改")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[t._v("信号量了解就可以了")])]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("br")])],1),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from threading import Semaphore")]),r("div",[r("br")]),r("div",[t._v("sem = Semaphore(4)  # 每次允许4个线程同时进来")]),r("div",[t._v("sem.acquire()  # 上锁")]),r("div",[t._v("print(0)")]),r("div",[t._v("sem.acquire()  # 上锁")]),r("div",[t._v("print(1)")]),r("div",[t._v("sem.acquire()  # 上锁")]),r("div",[t._v("print(2)")]),r("div",[t._v("sem.acquire()  # 上锁")]),r("div",[t._v("print(3)")]),r("div",[t._v("# sem.release()  # 解锁，如果一个都没有解锁后面的线程是无法进来的")]),r("div",[t._v("sem.acquire()  # 上锁")]),r("div",[t._v("print(4)")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-family":'"Courier New"',"font-weight":"bold","line-height":"1.75"}},[t._v("1.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("迷你唱吧例子")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal","line-height":"1.5"}},[t._v("假设商场里有4个迷你唱吧，所以同时可以进去4个人，如果来了第五个人就要在外面等待，等到有人出来才能再进去玩。")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[t._v("import random")]),r("div",[t._v("from threading import Semaphore")]),r("div",[t._v("from threading import Thread")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def sing(i, sem):")]),r("div",[t._v("    sem.acquire()  "),r("font",{attrs:{color:"#E30000"}},[t._v("# 上锁，如果已经进入了4个线程，其他线程就无法进入")])],1),r("div",[t._v("    print('%s : 进来KTV' % i)")]),r("div",[t._v("    time.sleep(random.randint(1, 10))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 随机延时1-10秒之间")])],1),r("div",[t._v("    print('%s : 离开KTV' % i)")]),r("div",[t._v("    sem.release() "),r("font",{attrs:{color:"#E30000"}},[t._v(" # 解锁，允许下一个等待的线程进入")])],1),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("sem = Semaphore(4)  "),r("font",{attrs:{color:"#E30000"}},[t._v("# 每次允许4个线程进入")])],1),r("div",[t._v("for i in range(20):")]),r("div",[t._v("    t = Thread(target=sing, args=(i, sem))")]),r("div",[t._v("    t.start()")])]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("br")])])])])])}),[],!1,null,null,null);i.default=o.exports}}]);