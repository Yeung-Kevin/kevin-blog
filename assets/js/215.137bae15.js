(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{569:function(t,o,r){"use strict";r.r(o);var s=r(25),e=Object(s.a)({},(function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("div",[r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("1.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("pymysql的介绍")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[r("br")])]),r("ul",[r("li",[r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[t._v("作用: 用于变成原生SQL语句的模块")])],1)])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("b",[r("br")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("2.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("pymysql 和 ")]),r("span",{staticStyle:{"font-size":"14pt"}},[r("b",[t._v("MySQLdb 的区别")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("b",[r("br")])])]),r("ul",[r("li",[r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[t._v("pymysql 和 MySQLdb 的语法和用法都是一样的，只是所导入的模块名不一样")])],1)])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("b",[r("br")])])]),r("ul",[r("li",[r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[t._v("pymysql 支持 python2、3")])],1)])]),r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[t._v("MySQLdb 支持 python2")])],1)])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("3.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("pymysql的安装")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("pip3 install pymysql -i https://pypi.douban.com/simple  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 使用豆瓣的镜像")])],1)]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("4.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("pymysql的基本使用")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("import pymysql")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("username = input('用户名：')")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("password = input('密码：')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1'")]),t._v(", charset='utf8'"),r("span",{staticStyle:{"font-size":"9pt"}},[t._v(") ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v(" # 连接数据库")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor = conn.cursor()  ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 游标: 操作数据")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("sql = 'select * from userinfo where username=%s and password=%s'")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor.execute(sql, [username, password])  ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 执行sql语句")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("result = cursor.fetchone()  ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 获取查询到的数据中的一条数据")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("print(result)  ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 返回结果: (1, 'Kevin', '123')")])]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor.close() ")]),t._v(" "),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 关闭游标")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn.close() ")]),t._v(" "),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 关闭对数据库的连接")])])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("5.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("防止SQL注入")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("不要在sql语句后面直接使用 % 拼接上变量名，而是将所要拼接的变量放入数组，元祖或字典中变成可迭代对象传入到 cursor.execute(sql, 变量名的可迭代对象) 当中，而这么做就是为了防止sql注入")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("写法一")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("import pymysql")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("username = input('用户名：')")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("password = input('密码：')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1'")]),t._v(", charset='utf8'"),r("span",{staticStyle:{"font-size":"9pt"}},[t._v(") ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}})]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor = conn.cursor()  ")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("sql = 'select * from userinfo where username="),r("font",{attrs:{color:"#FA7A00"}},[t._v("%s")]),t._v(" and password="),r("font",{attrs:{color:"#FA7A00"}},[t._v("%s")]),t._v("'")],1)]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor.execute("),r("font",{attrs:{color:"#FA7A00"}},[t._v("sql, [username, password]")]),t._v(")  ")],1),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}},[t._v("# 执行sql语句")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("result = cursor.fetchone()  ")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("print(result)")])]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor.close()")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn.close()")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("写法二")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("import pymysql")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("username = input('用户名：')")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("password = input('密码：')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1'")]),t._v(", charset='utf8'"),r("span",{staticStyle:{"font-size":"9pt"}},[t._v(") ")]),r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)"}})]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor = conn.cursor()  ")])]),r("div",[t._v("sql = 'select * from userinfo where username="),r("font",{attrs:{color:"#FA7A00"}},[t._v("%(username)s")]),t._v(" and password="),r("font",{attrs:{color:"#FA7A00"}},[t._v("%(password)s")]),t._v("'")],1),r("div",[t._v("cursor.execute("),r("font",{attrs:{color:"#FA7A00"}},[t._v("sql, {'username': username, 'password': password}")]),t._v(")  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 执行sql语句")])],1),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("result = cursor.fetchone()  ")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("print(result)")])]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("cursor.close()")])]),r("div",[r("span",{staticStyle:{"font-size":"9pt"}},[t._v("conn.close()")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("错误示范")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("username = input('用户名：') "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # xxx' or 1=1 --")])]),r("div",[t._v("password = input('密码：') "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # 123")])]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = \"select * from userinfo where username='%s' and password='%s'\" % (username, password)  "),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("# 不要在sql语句后面直接使用 % 拼接上变量名")])]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("'''")])],1),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("    sql注入:")])],1),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("        如果此时 username 输入了 xxx' or 1=1 -- (-- 在sql语句中代表注释，且 -- 后面一定要带上空格),")])],1),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("        sql 语句就会变成 select * from userinfo where username='xxx' or 1=1 -- ' and password='123'")])],1),r("div",[r("font",{attrs:{color:"#E30000"}},[t._v("'''")])],1),r("div",[r("br")]),r("div",[t._v("print(sql)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# select * from userinfo where username='xxx' or 1=1 -- ' and password='123'")])]),r("div",[r("br")]),r("div",[t._v("cursor.execute(sql)")]),r("div",[t._v("result = cursor.fetchone()")]),r("div",[t._v("print(result)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 返回结果: (1, 'Kevin', '123')")])]),r("div",[r("br")]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("6.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("cursor.execute(sql, 可迭代对象) -> 使用方法")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("数据形式的可迭代对象")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("username = input('用户名：')")]),r("div",[t._v("password = input('密码：')")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'select * from userinfo where username=%s and password=%s'")]),r("div",[t._v("cursor.execute(sql, [username, password])  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 执行sql语句 -> cursor.execute(sql, 数据形式的可迭代对象)")])]),r("div",[t._v("result = cursor.fetchone()")]),r("div",[t._v("print(result)")]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("对象形式的可迭代对象")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("username = input('用户名：')")]),r("div",[t._v("password = input('密码：')")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'select * from userinfo where username=%(u)s and password=%(p)s'")]),r("div",[t._v("cursor.execute(sql, {'u': username, 'p': password})  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# 执行sql语句 -> cursor.execute(sql, 对象形式的可迭代对象) ->")]),t._v(" "),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("如果使用了对象形式的可迭代对象，那么sql语句的格式化输出也要进行修改")])]),r("div",[t._v("result = cursor.fetchone()")]),r("div",[t._v("print(result)")]),r("div",[t._v("print('登录成功' if result else '登录失败')")]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-weight":"bold"}},[t._v("7.")]),t._v(" "),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("查询数据")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchone()")])])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("获取查询到的数据中的一条数据 ")])])]),r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchone() 有点类似于 next() 方法，如果执行多次 .fetchone() 方法，每一次都会接着上一次的位置继续获取")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'select * from userinfo'")]),r("div",[t._v("cursor.execute(sql)")]),r("div",[r("br")]),r("div",[t._v("result1 = cursor.fetchone()")]),r("div",[t._v("print(result1)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# (1, 'Kevin', '123')")])]),r("div",[t._v("result2 = cursor.fetchone()")]),r("div",[t._v("print(result2)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# (2, 'Yeung', '123')")])]),r("div",[t._v("result3 = cursor.fetchone()")]),r("div",[t._v("print(result3)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# (3, 'Jack', '123')")])]),r("div",[t._v("result4 = cursor.fetchone()")]),r("div",[t._v("print(result4)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# (4, 'Timmy', '123')")])]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchmany(num) ")])])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("获取查询到的数据中的num条数据")])])]),r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("fetchmany")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("(num) 有点类似于 next() 方法，如果执行多次 ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("fetchmany")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("(num) ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("方法，每一次都会接着上一次的位置继续获取")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'select * from userinfo'")]),r("div",[t._v("cursor.execute(sql)")]),r("div",[r("br")]),r("div",[t._v("result1 = cursor.fetchmany(2)")]),r("div",[t._v("print(result1)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# ((1, 'Kevin', '123'), (2, 'Yeung', '123'))")])]),r("div",[t._v("result2 = cursor.fetchmany(2)")]),r("div",[t._v("print(result2) "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # ((3, 'Jack', '123'), (4, 'Timmy', '123'))")])]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".")]),t._v("fetchall"),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("() ")])])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("获取查询到的数据中的全部数据")])])]),r("li",[r("div",[t._v("如果 "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".")]),t._v("fetchall"),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("() 上面还执行了 ")]),r("span",{staticStyle:{"font-size":"16px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v(".fetchone() 或 ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchmany(num) 那么它就会接着")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("上一次的位置获取剩余的数据 -> 下面有相应的例子")])])]),r("li",[r("div",[t._v("在实现分页功能的时候不要将所有数据一次性查询出来后通过 .fetchall() 获取查询到的数据，然后在进行分页的操作，而是使用 sql 进行分页查询，最后通过 .fetchall() / "),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchone() / ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".fetchmany(num) 获取查询到的数据然后再进行处理")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'select * from userinfo'")]),r("div",[t._v("cursor.execute(sql)")]),r("div",[r("br")]),r("div",[t._v("result = cursor.fetchall()")]),r("div",[t._v("print(result)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# ((1, 'Kevin', '123'), (2, 'Yeung', '123'), (3, 'Jack', '123'), (4, 'Timmy', '123'))")])]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v(".cursor(cursor=pymysql.cursors.DictCursor) -> ")]),r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("将查询到的数据以字典的形式展示")])])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("默认情况下，我们")]),r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("获取查询到的数据一般")]),r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("是以元组的形式展示出来，只能看到每行的数据，却不知道每一列代表的是什么，这个时候可以使用以下方式来返回字典，每一行的数据都会生成一个字典")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor(cursor=pymysql.cursors.DictCursor) "),r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v(" # 将查询到的数据以字典的形式展示")])]),r("div",[t._v("sql = 'select * from userinfo'")]),r("div",[t._v("cursor.execute(sql)")]),r("div",[r("br")]),r("div",[t._v("result1 = cursor.fetchone()")]),r("div",[t._v("print(result1) "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v(" # {'id': 1, 'username': 'Kevin', 'password': '123'}")])]),r("div",[t._v("result2 = cursor.fetchmany(2)")]),r("div",[t._v("print(result2)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# [{'id': 2, 'username': 'Yeung', 'password': '123'}, {'id': 3, 'username': 'Jack', 'password': '123'}]")])]),r("div",[t._v("result3 = cursor.fetchall()")]),r("div",[t._v("print(result3)  "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[t._v("# [{'id': 4, 'username': 'Timmy', 'password': '123'}]")])]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("8.")]),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("添加/修改/删除数据")]),t._v(" "),r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("->")]),t._v(" "),r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("这里只使用添加数据做说明，因为修改和删除的用法都是一样的只是SQL语句不一样")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("注意事项: ")])])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("在进行")]),r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"12pt",color:"rgb(227, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("添加/修改/删除数据的时候一定执行 .commit() 方法 将数据提交到数据库，不然会没有效果")])])]),r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v(".execute(sql语句, 可迭代对象) 方法的返回值是受影响的行数")])])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("添加一条数据")])])]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("username = 'Aimer'")]),r("div",[t._v("password = '123'")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'insert into userinfo(username,password) values (%s,%s)'")]),r("div",[t._v("result = cursor.execute(sql, [username, password])  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 执行sql语句，返回受影响的行数，可以不用接受返回值直接执行 ")]),r("font",{attrs:{color:"#41AD1C"}},[t._v("execute() 方法（这里这么做只是为了查看返回值是什么）")])],1),r("div",[t._v("print(result)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 1")])],1),r("div",[r("br")]),r("div",[t._v("conn.commit() "),r("font",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v(" # 事务: 提交数据到数据库 -> 一定执行 .commit() 方法 将数据提交到数据库，不然会没有效果")])],1),r("div",[t._v("conn.close()")]),r("div",[t._v("cursor.close()")])]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[t._v(".executemany(sql语句,[可迭代对象, 可迭代对象, ……]) ->  "),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("executemany一般用于批量添加数据，批量删除和修改数据都可以通过SQL语句实现")]),t._v(" -> 批量添加数据")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'insert into userinfo(username,password) values (%s,%s)'")]),r("div",[t._v("result = cursor.executemany(sql, [('凯文', 123), ('张三', 123), ('李四', 123), ('王五', 123)]) "),r("font",{attrs:{color:"#41AD1C"}},[t._v(" # 执行sql语句，返回受影响的行数，可以不用接受返回值直接执行 executemany() 方法（这里这么做只是为了查看返回值是什么）")])],1),r("div",[t._v("print(result)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 4")])],1),r("div",[r("br")]),r("div",[t._v("conn.commit()  "),r("font",{attrs:{color:"#E30000"}},[t._v("# 事务: 提交数据到数据库 -> 一定执行 .commit() 方法 将数据提交到数据库，不然会没有效果")])],1),r("div",[t._v("conn.close()")]),r("div",[t._v("cursor.close()")])]),r("div",[r("br")])]),r("ul",[r("li",[r("div",[t._v(".lastrowid -> 获取新插入数据的自增id")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'insert into userinfo(username,password) values (%s,%s)'")]),r("div",[t._v("cursor.execute(sql, ['狗蛋', 123])")]),r("div",[r("br")]),r("div",[t._v("print(cursor.lastrowid)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 14 -> 获取新插入数据的自增id")])],1),r("div",[r("br")]),r("div",[t._v("conn.commit()")]),r("div",[t._v("conn.close()")]),r("div",[t._v("cursor.close()")])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[r("span",{staticStyle:{color:"rgb(227, 0, 0)"}},[t._v("注意事项: 如果使用 .lastrowid 去获取批量添加数据的自增id，那么 .lastrowid 只会获取到批量添加的第一条数据的自增id")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host='localhost', user='root', password='', database='db1', charset='utf8')")]),r("div",[t._v("cursor = conn.cursor()")]),r("div",[t._v("sql = 'insert into userinfo(username,password) values (%s,%s)'")]),r("div",[t._v("cursor.executemany(sql, [('Eric', 123), ('Amy', 123), ('Tony', 123)])")]),r("div",[r("br")]),r("div",[t._v("print(cursor.lastrowid)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 15 -> 如果使用 .lastrowid 去获取批量添加数据的自增id，那么 .lastrowid 只会获取到批量添加的第一条数据的自增id")])],1),r("div",[r("br")]),r("div",[t._v("conn.commit()")]),r("div",[t._v("conn.close()")]),r("div",[t._v("cursor.close()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt","white-space":"pre-wrap",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("9.")]),r("span",{staticStyle:{"font-size":"medium","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal"}}),r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt",color:"rgb(0, 0, 0)","font-family":'"Courier New"',"font-variant-caps":"normal","font-variant-ligatures":"normal","font-weight":"bold"}},[t._v("调用存储过程")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v(".callproc('存储过程名称', 可迭代对象) -> 将要传递的参数放进可迭代对象里")])])])]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host=\"localhost\", user='root', password='', database=\"db2\", charset='utf8')")]),r("div",[t._v("cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)")]),r("div",[t._v("cursor.callproc('p1', (5,))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 调用名为 p1 的存储过程")])],1),r("div",[t._v("conn.commit()")]),r("div",[r("br")]),r("div",[t._v("result = cursor.fetchall()  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取存储过程的结果集")])],1),r("div",[t._v("print(result)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# [{'id': 1, 'name': 'Kevin', 'age': 18, 'sex': '男'}, {'id': 2, 'name': 'Yeung', 'age': 23, 'sex': '男'}]")])],1),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("span",{staticStyle:{"box-sizing":"border-box","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"14pt"}},[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# sql语句 -> 存储过程")])],1),r("div",[r("br")]),r("div",[t._v("delimiter //")]),r("div",[t._v("create procedure p1 (")]),r("div",[t._v("    in d1 int")]),r("div",[t._v(")")]),r("div",[t._v("begin")]),r("div",[t._v("    select * from t1 where id < d1;")]),r("div",[t._v("end //")]),r("div",[t._v("delimiter ;")])]),r("div",[r("br")])]),r("ul",[r("li",[r("div",[t._v("获取存储过程的返回值")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[t._v("获取存储过程的返回值需要再进行一次 SQL 语句查询才能获取到 -> cursor.execute('select @_存储过程名称_1, @_存储过程名称_2, @_存储过程名称_3, ……')")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import pymysql")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("conn = pymysql.connect(host=\"localhost\", user='root', password='', database=\"db2\", charset='utf8')")]),r("div",[t._v("cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)")]),r("div",[t._v("cursor.callproc('p1', (3, 2, 3))  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 调用名为 p1 的存储过程")])],1),r("div",[t._v("conn.commit()")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("result1 = cursor.fetchall()  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 获取存储过程的结果集")])],1),r("div",[t._v("print(result1)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# [{'id': 1, 'name': 'Kevin', 'age': 18, 'sex': '男'}, {'id': 2, 'name': 'Yeung', 'age': 23, 'sex': '男'}]")])],1),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("cursor.execute('select @_p1_1, @_p1_2')  "),r("font",{attrs:{color:"#E30000"}},[t._v("# 获取存储过程的返回值需要再进行一次 SQL 语句查询才能获取到")])],1),r("div",[t._v("result2 = cursor.fetchall()")]),r("div",[t._v("print(result2)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# [{'@_p1_1': 20, '@_p1_2': 33}]")])],1),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("cursor.close()")]),r("div",[t._v("conn.close()")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# sql语句 -> 存储过程")])],1),r("div",[r("br")]),r("div",[t._v("delimiter //")]),r("div",[t._v("create procedure p1 (")]),r("div",[t._v("    in d1 int,")]),r("div",[t._v("    out d2 int,")]),r("div",[t._v("    inout d3 int")]),r("div",[t._v(")")]),r("div",[t._v("begin")]),r("div",[t._v("    select * from t1 where id < d1;")]),r("div",[t._v("    set d2 = 20;")]),r("div",[t._v("    set d3 = d3 + 30;")]),r("div",[t._v("end //")]),r("div",[t._v("delimiter ;")])]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);o.default=e.exports}}]);