(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{639:function(t,i,r){"use strict";r.r(i);var e=r(25),n=Object(e.a)({},(function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("1. ")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("装饰器的原则 -> 开放封闭原则")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("2. ")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("装饰器的作用 -> 在不改变函数调用方式的基础上在函数的前、后添加功能")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("3. 引子")])])]),r("div",[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("作为一个会写函数的python开发，我们从今天开始要去公司上班了。写了一个函数，就交给其他开发用了。")])])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px",color:"rgb(0, 0, 0)","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")])]),r("div",[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("季度末，公司的领导要给大家发绩效奖金了，就提议对这段日子所有人开发的成果进行审核，审核的标准是什么呢？就是统计每个函数的执行时间。")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("这个时候你要怎么做呀？")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("你一想，这好办，把函数一改：")])])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px",color:"rgb(0, 0, 0)","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun():")]),r("div",[t._v("    s_time = time.time()")]),r("div",[t._v("    time.sleep(0.01)")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[t._v("    e_time = time.time()")]),r("div",[t._v("    print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun()")])]),r("div",[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("来公司半年，写了2000+函数，挨个改一遍，1个礼拜过去了，等领导审核完，再挨个给删了。。。又1个礼拜过去了。。。这是不是很闹心？")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("你觉得不行，不能让自己费劲儿，告诉所有开发，现在你们都在自己原本的代码上加上一句计算时间的语句？")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}})]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("s_time = time.time()")]),r("div",[t._v("time.sleep(0.01)")]),r("div",[t._v("fun()")]),r("div",[t._v("e_time = time.time()")]),r("div",[t._v("print('代码运行时间：{}'.format(e_time - s_time))")])]),r("div",[r("br")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px",color:"rgb(0, 0, 0)","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("还是不行，因为这样对于开发同事来讲实在是太麻烦了。")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("那怎么办呢？你灵机一动，写了一个timer函数。。。")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    s_time = time.time()")]),r("div",[t._v("    time.sleep(0.01)")]),r("div",[t._v("    fun()")]),r("div",[t._v("    e_time = time.time()")]),r("div",[t._v("    print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun2():")]),r("div",[t._v("    print('已经写好的函数2')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("timer(fun)")]),r("div",[t._v("timer(fun2)")])]),r("div",[r("br")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px",color:"rgb(0, 0, 0)","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("这样看起来是不是简单多啦？不管我们写了多少个函数都可以调用这个计时函数来计算函数的执行时间了。。。尽管现在修改成本已经变得很小很小了，但是对于同事来说还是改变了这个函数的调用方式，假如某同事因为相信你，在他的代码里用你的方法用了2w多次，那他修改完代码你们友谊的小船也就彻底地翻了。")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("你要做的就是，让你的同事依然调用func1，但是能实现调用timer方法的效果。")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    s_time = time.time()")]),r("div",[t._v("    time.sleep(0.01)")]),r("div",[t._v("    fun()")]),r("div",[t._v("    e_time = time.time()")]),r("div",[t._v("    print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun = timer  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 要是能这样的就完美了。。。可惜报错")])],1),r("div",[t._v("fun()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"text-indent":"0px","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px","font-size":"11pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("非常可惜，上面这段代码是会报错的，因为timer方法需要传递一个func参数，我们不能在赋值的时候传参，因为只要执行func1 = timer(func1)，timer方法就直接执行了，下面的那句func1根本就没有意义。到这里，我们的思路好像陷入了僵局。。。")])]),r("div",[r("br")])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("4. 装饰器的形成")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 装饰器简单版本1 -> 通过闭包实现")])],1),r("div",[r("br")]),r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    def inner():")]),r("div",[t._v("        s_time = time.time()")]),r("div",[t._v("        time.sleep(0.01)")]),r("div",[t._v("        fun()")]),r("div",[t._v("        e_time = time.time()")]),r("div",[t._v("        print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun = timer(fun) "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 实际上是调用了 inner 函数")])],1),r("div",[t._v("fun()")])]),r("div",[r("br")]),r("div",{staticStyle:{"text-align":"left"}},[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("忙活了这么半天，终于初具规模了！现在已经基本上完美了，唯一碍眼的那句话就是还要在做一次赋值调用。。。")])]),r("div",{staticStyle:{"text-align":"left"}},[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("你觉得碍眼，python的开发者也觉得碍眼，所以就为我们提供了一句语法糖来解决这个问题！")])]),r("div",{staticStyle:{"text-align":"left"}},[r("br")]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px",color:"rgb(0, 0, 0)","font-family":"Helvetica, Verdana, Arial, sans-serif","font-size":"14px","font-variant-ligatures":"normal","font-variant-caps":"normal","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}}),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","font-size":"14px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 装饰器 -> 语法糖")])],1),r("div",[r("br")]),r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    def inner():")]),r("div",[t._v("        s_time = time.time()")]),r("div",[t._v("        time.sleep(0.01)")]),r("div",[t._v("        fun()")]),r("div",[t._v("        e_time = time.time()")]),r("div",[t._v("        print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 语法糖: @装饰器函数名 -> 等价于 fun = timer(fun)")])],1),r("div",[t._v("def fun():")]),r("div",[t._v("    print('已经写好的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun()")])]),r("div",[r("br")]),r("div",[r("br")]),r("div",{staticStyle:{"text-align":"left"}},[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("到这里，我们可以简单的总结一下：")])]),r("ul",[r("li",[r("div",{staticStyle:{"text-align":"left"}},[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("装饰器的本质：一个闭包函数")])])]),r("li",[r("div",{staticStyle:{"text-align":"left"}},[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("装饰器的功能：在不修改原函数及其调用方式的情况下对原函数功能进行扩展")])])])]),r("div",{staticStyle:{margin:"10px auto",padding:"0px","text-indent":"0px","font-size":"14px","letter-spacing":"normal",orphans:"2","text-align":"left","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[r("span",{staticStyle:{"text-indent":"0px","font-size":"11pt","letter-spacing":"normal",orphans:"2","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[t._v("还有最后一个问题要解决，刚刚我们讨论的装饰器都是装饰不带参数的函数，现在要装饰一个带参数的函数怎么办呢？")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 装饰器 -> 传递一个参数")])],1),r("div",[r("br")]),r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    def inner(s):")]),r("div",[t._v("        s_time = time.time()")]),r("div",[t._v("        time.sleep(0.01)")]),r("div",[t._v("        fun(s)")]),r("div",[t._v("        e_time = time.time()")]),r("div",[t._v("        print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer")]),r("div",[t._v("def fun(s):")]),r("div",[t._v("    print(s)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun('已经写好的函数')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("其实装饰带参的函数并不是什么难事，但假如你有两个函数，需要传递的参数不一样呢？")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 装饰器 -> 传递不同参数 -> 解决办法 *args **kwargs")])],1),r("div",[r("br")]),r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        s_time = time.time()")]),r("div",[t._v("        time.sleep(0.01)")]),r("div",[t._v("        fun(*args, **kwargs)")]),r("div",[t._v("        e_time = time.time()")]),r("div",[t._v("        print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer")]),r("div",[t._v("def fun(a, b, c):")]),r("div",[t._v("    print(a, b, c)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer")]),r("div",[t._v("def fun2(x, y):")]),r("div",[t._v("    print(x, y)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fun('fun参数1', 'fun参数2', 'fun参数3')")]),r("div",[t._v("fun2('fun2X', 'funY')")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14px","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none","white-space":"normal",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal"}},[t._v("现在参数的问题已经完美的解决了，可是如果你的函数是有返回值的呢？")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer(fun):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        s_time = time.time()")]),r("div",[t._v("        time.sleep(0.01)")]),r("div",[t._v("        re = fun(*args, **kwargs)")]),r("div",[t._v("        e_time = time.time()")]),r("div",[t._v("        print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[t._v("        return re")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer")]),r("div",[t._v("def fun(a):")]),r("div",[t._v("    print(a)")]),r("div",[t._v("    return '这是返回值'")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("return_val = fun('fun参数1')")]),r("div",[t._v("print(return_val)")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"11pt"}},[t._v("如果该装饰器被100个函数使用，那么有一天突然说这100个函数不用这个装饰器了，那么就要把 @xxx 删除100遍，我们可以通过 装饰器传参 解决这个问题 -> 详细看第6点")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import time")]),r("div",[r("br")]),r("div",[t._v("flag = False")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def timer_out(flag):")]),r("div",[t._v("    def timer(fun):")]),r("div",[t._v("        def inner(*args, **kwargs):")]),r("div",[t._v("            if flag:")]),r("div",[t._v("                s_time = time.time()")]),r("div",[t._v("                time.sleep(0.01)")]),r("div",[t._v("                re = fun(*args, **kwargs)")]),r("div",[t._v("                e_time = time.time()")]),r("div",[t._v("                print('代码运行时间：{}'.format(e_time - s_time))")]),r("div",[t._v("                return re")]),r("div",[t._v("            else:")]),r("div",[t._v("                re = fun(*args, **kwargs)")]),r("div",[t._v("                return re")]),r("div",[r("br")]),r("div",[t._v("        return inner")]),r("div",[r("br")]),r("div",[t._v("    return timer")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@timer_out(flag)")]),r("div",[t._v("def fun(a):")]),r("div",[t._v("    print(a)")]),r("div",[t._v("    return '这是返回值'")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("return_val = fun('fun参数1')")]),r("div",[t._v("print(return_val)")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt",color:"rgb(255, 0, 0)","font-weight":"bold"}},[t._v("5. 装饰器的固定模式")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def wrapper(fn):  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 装饰器函数，fn是被装饰的函数")])],1),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v(" # 在被装饰函数之前要做的事")])],1),r("div",[t._v("        re = fn(*args, **kwargs)  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 被装饰的函数")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("# 在被装饰函数之后要做的事")])],1),r("div",[t._v("        return re")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@wrapper")]),r("div",[t._v("def be_wrapper(data):")]),r("div",[t._v("    print(data)")]),r("div",[t._v("    return '返回值'")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("return_val = be_wrapper('参数1')")]),r("div",[t._v("print(return_val)")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("6. 带参数的装饰器")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("@wrapper_out('参数') -> @ 和 ")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("wrapper_out('参数') 拆开来看就明白了，")]),r("span",{staticStyle:{"font-size":"12pt"}},[t._v("wrapper_out() 返回的是 wrapper 函数，然后再将 wrapper 给 @")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("flag = False")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def wrapper_out(flag):")]),r("div",[t._v("    def wrapper(fn):")]),r("div",[t._v("        def inner(*args, **kwargs):")]),r("div",[t._v("            print(flag)")]),r("div",[r("br")]),r("div",[t._v("            if flag:")]),r("div",[t._v("                print('扩展的代码一')")]),r("div",[t._v("                re = fn(*args, **kwargs)")]),r("div",[t._v("                print('扩展的代码二')")]),r("div",[t._v("                return re")]),r("div",[t._v("            else:")]),r("div",[t._v("                re = fn(*args, **kwargs)")]),r("div",[t._v("                return re")]),r("div",[r("br")]),r("div",[t._v("        return inner")]),r("div",[r("br")]),r("div",[t._v("    return wrapper")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("'''")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("    wrapper = wrapper_out(flag)")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("    be_wrapper = wrapper(be_wrapper)")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}})],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("    等价于")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}})],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("    @wrapper_out(flag) 将 @ 和 wrapper_out(flag) 拆开看就明白了")])],1),r("div",[r("font",{attrs:{color:"#41AD1C"}},[t._v("'''")])],1),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@wrapper_out(flag)")]),r("div",[t._v("def be_wrapper():")]),r("div",[t._v("    print('被装饰的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("be_wrapper()")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("7. 多个装饰器装饰1个函数 -> 先记现象再理解步骤")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def wrapper1(func):")]),r("div",[t._v("    def inner1():")]),r("div",[t._v("        print('wrapper1 ,before func')")]),r("div",[t._v("        ret = func()")]),r("div",[t._v("        print('wrapper1 ,after func')")]),r("div",[t._v("        return ret")]),r("div",[r("br")]),r("div",[t._v("    return inner1")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def wrapper2(func):")]),r("div",[t._v("    def inner2():")]),r("div",[t._v("        print('wrapper2 ,before func')")]),r("div",[t._v("        ret = func()")]),r("div",[t._v("        print('wrapper2 ,after func')")]),r("div",[t._v("        return ret")]),r("div",[r("br")]),r("div",[t._v("    return inner2")]),r("div",[r("br")]),r("div",[t._v("@wrapper2")]),r("div",[t._v("@wrapper1")]),r("div",[t._v("def f():")]),r("div",[t._v("    print('in f')")]),r("div",[t._v("    return '哈哈哈'")]),r("div",[r("br")]),r("div",[t._v("print(f()) "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 哈哈哈")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("现象")])])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{staticStyle:{"font-size":"9pt"}},[t._v("wrapper2 ,before func")])],1),r("div",[r("font",{staticStyle:{"font-size":"9pt"}},[t._v("wrapper1 ,before func")])],1),r("div",[r("font",{staticStyle:{"font-size":"9pt"}},[t._v("in f")])],1),r("div",[r("font",{staticStyle:{"font-size":"9pt"}},[t._v("wrapper1 ,after func")])],1),r("div",[r("font",{staticStyle:{"font-size":"9pt"}},[t._v("wrapper2 ,after func")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("步骤 -> 装饰器会先执行离函数最近的装饰器")])])])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"步骤图.png",src:"/kevin-blog/Python/装饰器_files/步骤图.png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("8. ")]),r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("wraps 装饰器修复技术")])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[r("br")])])]),r("ul",[r("li",[r("div",[r("font",{staticStyle:{"font-size":"12pt"}},[r("span",{staticStyle:{"font-weight":"bold"}},[t._v("当函数使用了装饰器，我们在调用该函数的时候实际上是装饰器里的函数，此时我们想获取该函数的基本信息的时候实际上是获取了装饰器里面函数的基本信息，可以通过 ")]),r("span",{staticStyle:{"font-weight":"bold"}},[t._v("wraps 将")]),r("span",{staticStyle:{"font-weight":"bold"}},[t._v("装饰器里的函数基本信息指向被装饰的函数上")])])],1)])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)"}},[t._v("在以后编写装饰器的时候最好使用上 wraps，以免报错")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("没加 wraps 获取函数的基本信息")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def wrapper(fn):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        re = fn(*args, **kwargs)")]),r("div",[t._v("        return re")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@wrapper")]),r("div",[t._v("def be_wrapper():")]),r("div",[t._v("    print('被装饰的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fn_name = be_wrapper.__name__  "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 函数名：inner")])],1)]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("加了 wraps 获取函数的基本信息")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("from functools import wraps")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def wrapper(fn):")]),r("div",[t._v("    @wraps(fn)")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        rt = fn(*args, **kwargs)")]),r("div",[t._v("        return rt")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@wrapper")]),r("div",[t._v("def be_wrapper():")]),r("div",[t._v("    print('被装饰的函数')")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("fn_name = be_wrapper.__name__ "),r("font",{attrs:{color:"#41AD1C"}},[t._v("# 函数名：be_wrapper")])],1)]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("9. 作业")])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("编写装饰器：在多个函数在执行之前验证是否登录了，如果登录了后面的函数执行就不需要验证")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("flag = False")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def wrapper(fn):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        global flag")]),r("div",[t._v("        if flag:")]),r("div",[t._v("            re = fn()")]),r("div",[t._v("            return re")]),r("div",[t._v("        else:")]),r("div",[t._v("            username = input('账号：')")]),r("div",[t._v("            password = input('密码：')")]),r("div",[t._v("            if username == 'Kevin' and password == '123':")]),r("div",[t._v("                flag = True")]),r("div",[t._v("                re = fn()")]),r("div",[t._v("                return re")]),r("div",[t._v("            else:")]),r("div",[t._v("                print('登录失败')")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[t._v("@wrapper")]),r("div",[t._v("def features():")]),r("div",[t._v("    print(1)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@wrapper")]),r("div",[t._v("def features2():")]),r("div",[t._v("    print(2)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("features()")]),r("div",[t._v("features2()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[t._v("编写装饰器：")]),t._v("编写装饰器，为多个函数加上记录调用功能，要求每次调用函数都将被调用的函数名称写入文件")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("def log(fn):")]),r("div",[t._v("    def inner():")]),r("div",[r("br")]),r("div",[t._v("        with open('log.txt', 'a', encoding='utf-8') as f:")]),r("div",[t._v("            f.write(fn.__name__ + '\\n')")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@log")]),r("div",[t._v("def log_fn1():")]),r("div",[t._v("    print(1)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@log")]),r("div",[t._v("def log_fn2():")]),r("div",[t._v("    print(1)")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("log_fn1()")]),r("div",[t._v("log_fn2()")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[t._v("编写下载网页内容的函数，要求功能是：用户传入一个url，函数返回下载页面的结果")])]),r("li",[r("div",[t._v("为题目1编写装饰器，实现缓存网页内容的功能：")])]),r("li",[r("div",[t._v("具体：实现下载的页面存放于文件中，如果文件内有值（文件大小不为0），就优先从文件中读取网页内容，否则，就去下载，然后存到文件中")])])]),r("div",[r("br")])]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[t._v("import os")]),r("div",[t._v("from urllib.request import urlopen")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("def save_html(fn):")]),r("div",[t._v("    def inner(*args, **kwargs):")]),r("div",[t._v("        code = fn(*args, **kwargs)")]),r("div",[r("br")]),r("div",[t._v("        if os.path.getsize('save_html.txt'):")]),r("div",[t._v("            with open('save_html.txt', 'rb') as f:")]),r("div",[t._v("                print('读取文件中内容')")]),r("div",[t._v("                return f.read()")]),r("div",[t._v("        with open('save_html.txt', 'wb') as f:")]),r("div",[t._v("            f.write(code)")]),r("div",[t._v("            print('新增网页内容到文件中')")]),r("div",[t._v("            return code")]),r("div",[r("br")]),r("div",[t._v("    return inner")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("@save_html")]),r("div",[t._v("def get_html(url):")]),r("div",[t._v("    code = urlopen(url).read()")]),r("div",[t._v("    return code")]),r("div",[r("br")]),r("div",[r("br")]),r("div",[t._v("print(get_html('http://www.baidu.com'))")]),r("div",[t._v("print(get_html('http://www.baidu.com'))")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);i.default=n.exports}}]);