(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{526:function(i,o,r){"use strict";r.r(o);var e=r(25),t=Object(e.a)({},(function(){var i=this,o=i.$createElement,r=i._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":i.$parent.slotKey}},[r("div",[r("span",[r("div",[r("div",[r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt"}},[r("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[i._v("limit不能作为子查询，但是可以作为临时表")])])]),r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt"}},[r("br")])]),r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("1.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v(" limit 分页")])]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[i._v("该表的所有数据")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image.png",type:"image/png"}})])]),r("div",[r("font",{staticStyle:{"font-size":"14pt"}},[r("br")])],1),r("ul",[r("li",[r("div",[i._v("获取前4条数据 ")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[i._v("select * from t1 limit 4;  ")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [1].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[i._v("从第2行开始（不包括2），获取4条数据")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[i._v("select * from t1 limit 2,4;")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [2].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[i._v("获取4条数据，从第2行开始（不包括2）-> 和上面的功能是一样的只是写法不一样")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[i._v("select * from t1 limit 4 offset 2; ")])])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [3].png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{"white-space":"pre-wrap","font-size":"14pt","font-weight":"bold"}},[i._v("2.")]),r("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[i._v(" limit 分页性能的优化 -> 记录当前页最大或最小的id -> 一般搭配着后台语言（Python，PHP）实现")])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[i._v("这里所使用到的 userinfo 表是索引章节中的表")])])])]),r("div",[r("span",{staticStyle:{"font-size":"14pt"}},[r("br")])]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[i._v("不建议使用 between 去做分页的优化，因为 id 有可能不是连续的（1,2,3,5,6,7,8,9,10,11），例如每一页有10数据，我要取第一页的数据此时 id 为 4 的这条数据被删除了，在不知情的情况下")]),r("span",{staticStyle:{"font-size":"12pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[i._v("我们使用 between 1 and 10 获取数据那么只会获取到9条数据，而不是10条，如果真的要使用 between 去做分页优化的前提是 id 是连续不间断的")])])])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[r("span",{staticStyle:{"font-size":"12pt"}},[i._v("如果直接使用 limit 在不做任何优化的情况下，页数越大速度越慢")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("font",{attrs:{color:"#41AD1C"}},[i._v("# 比如现在有一百万条数据，每一页有10条数据，现在要取第100页的数据, MySQL会将前面的1000条数据查找（扫描）一遍找到第1000条数据，然后再从第1000条数据开始往后取10条数据")])],1),r("div",[r("br")]),r("div",[i._v("select * from userinfo limit 10000,10;")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[i._v("上一页和下一页功能的分页优化")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 下一页的SQL语句 -> 记录当前页最后一条数据的id，然后查找大于该id的所有数据，然后再通过limit取该堆数据中的前10条数据 -> 因为MySQL是直接从该页的最后一条数据的开始查找数据，这样就不会像直接使用limit一样，需要从头开始扫描到指定的数据然后在进行获取该数据的后 num 位数据")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)","font-size":"9pt","font-family":"Monaco"}},[i._v("# 比如该页最后一条数据的id是")]),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("999990，然后查找id大于999990的数据，然后再通过limit取该堆数据中的前10条数据")])]),r("div",[r("br")]),r("div",[i._v("select * from userinfo where id>999990 limit 10;")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [4].png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [5].png",type:"image/png"}})]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 上一页的SQL语句 -> 记录当前页的第一条数据的id，然后查找小于该id的所有数据，然后进行倒序排序再通过limit取该堆数据中的前10条数据")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 比如该页第一条数据的id是999991，然后查找id小于999991的数据，然后进行倒序排序再通过limit取该堆数据中的前10条数据")])]),r("div",[r("br")]),r("div",[i._v("select * from (select * from userinfo where id<999991 order by id desc limit 10) as A order by id asc;")])]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [6].png",type:"image/png"}})]),r("div",[r("br")]),r("div",[r("img",{attrs:{"data-filename":"Image.png",src:"/kevin-blog/MySQL/limit 分页_files/Image [7].png",type:"image/png"}})]),r("div",[r("br")]),r("ul",[r("li",[r("div",[i._v("基于当前的页数往后跳几页的分页优化")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[i._v("上一页 98 99 [100] 101 102 103 下一页")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 思路")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 计算所要跳转的页数和当前页数相差多少条数据，获取这堆相差的数据，然后进行倒序排序后使用limit获取这堆相差数据的前10条数据（前提是每一页数据为10条），而这前10条数据就是所要跳转页数的数据，最后对这10条数据进行正序排序")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 例如：当前页数是100，然后要获取103页数的数据，前提每一页数据为10条，因为103页数和当前页数相差30数据，所以首先要获取这相差的30条数据，然后再对这30条数据进行倒序排序后使用 limit 获取前10条，而这前10条就是103页数的数据，最后对这10条数据进行正序排序")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法一的固定写法")])]),r("div",[r("br")]),r("div",[i._v("select * from "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("表名")]),i._v(" where id>=(")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id > "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("当前页数最后一条数据的id")]),i._v(" limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数 * (需要跳转的页码 - 当前页码)")])]),r("div",[i._v("    ) as A order by A.id desc limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数")])]),r("div",[i._v("  ) as B order by B.id asc limit 1")]),r("div",[i._v(") limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数")]),i._v(";")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{"font-size":"9pt",color:"rgb(65, 173, 28)","font-family":"Monaco"}},[i._v("# 写法一")])]),r("div",[r("br")]),r("div",[i._v("select * from userinfo where id>=(")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id > 1000 limit 30")]),r("div",[i._v("    ) as A order by A.id desc limit 10")]),r("div",[i._v("  ) as B order by B.id asc limit 1")]),r("div",[i._v(") limit 10;")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法二的固定写法")])]),r("div",[r("br")]),r("div",[i._v("select * from "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("表名")]),i._v(" where id in (")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id>"),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("当前页数最后一条数据的id")]),i._v(" limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数 * (需要跳转的页码 - 当前页码)")])]),r("div",[i._v("    ) as A order by A.id desc limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数")])]),r("div",[i._v("  ) as B")]),r("div",[i._v(") order by id asc;")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法二")])]),r("div",[r("br")]),r("div",[i._v("select * from userinfo where id in (")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id>1000 limit 30")]),r("div",[i._v("    ) as A order by A.id desc limit 10")]),r("div",[i._v("  ) as B")]),r("div",[i._v(") order by id asc;")])]),r("div",[r("br")]),r("ul",[r("li",[r("div",[i._v("基于当前的页数往前跳几页的分页优化")])])]),r("div",[r("br")]),r("ul",[r("ul",[r("li",[r("div",[i._v("上一页 98 99 100 101 102 [103] 下一页")])])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 计算所要跳转的页数和当前页数相差多少条数据，获取这堆相差的数据，然后进行倒序排序后使用limit获取这堆相差数据的前10条数据（前提是每一页数据为10条），而这前10条数据就是所要跳转页数的数据，最后对这10条数据进行正序排序")])]),r("div",[r("br")]),r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 例如：当前页数是103，然后要获取100页数的数据，前提每一页数据为10条，因为100页数和当前页数相差30数据，所以首先要获取这相差的30条数据，然后再对这30条数据进行倒序排序后使用 limit 获取前10条，而这前10条就是100页数的数据，最后对这10条数据进行正序排序")])])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法一的固定写法")])]),r("div",[r("br")]),r("div",[i._v("select * from "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("表名")]),i._v(" where id>=(")]),r("div",[i._v("  select A.id from (")]),r("div",[i._v("    select id from userinfo where id < "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("当前页数第一条数据的id")]),i._v(" order by id desc limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数 * (当前页码 - 需要跳转的页码)")])]),r("div",[i._v("  ) as A order by A.id asc limit 1")]),r("div",[i._v(") limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数")]),i._v(";")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法一")])]),r("div",[r("br")]),r("div",[i._v("select * from userinfo where id>=(")]),r("div",[i._v("  select A.id from (")]),r("div",[i._v("    select id from userinfo where id < 1021 order by id desc limit 30")]),r("div",[i._v("  ) as A order by A.id asc limit 1")]),r("div",[i._v(") limit 10;")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法二的固定写法")])]),r("div",[r("br")]),r("div",[i._v("select * from "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("表名")]),i._v(" where id in (")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id < "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("当前页数第一条数据的id")]),i._v(" order by id desc limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数 * (当前页码 - 需要跳转的页码)")])]),r("div",[i._v("    ) as A order by id asc limit "),r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("每一页数据的总数")])]),r("div",[i._v("  ) as B")]),r("div",[i._v(");")])]),r("div",[r("br")]),r("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[r("div",[r("span",{staticStyle:{color:"rgb(65, 173, 28)"}},[i._v("# 写法二")])]),r("div",[r("br")]),r("div",[i._v("select * from userinfo where id in (")]),r("div",[i._v("  select B.id from (")]),r("div",[i._v("    select A.id from (")]),r("div",[i._v("      select id from userinfo where id<1021 order by id desc limit 30")]),r("div",[i._v("    ) as A order by id asc limit 10")]),r("div",[i._v("  ) as B")]),r("div",[i._v(");")])]),r("div",[r("br")])]),r("div",[r("br")])])])])}),[],!1,null,null,null);o.default=t.exports}}]);