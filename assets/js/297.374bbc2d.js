(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{650:function(t,i,e){"use strict";e.r(i);var o=e(25),r=Object(o.a)({},(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",[e("span",[e("div",[e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量其实就是将异步执行变成了同步执行")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap"}},[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量和锁其实差不多，锁每一次允许一个进程对数据进行修改，而")]),e("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("信号量每次允许 num")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt",color:"rgb(227, 0, 0)","font-weight":"bold"}},[t._v("个进程对数据进行修改")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[t._v("信号量了解就可以了")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("from multiprocessing import Semaphore")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[t._v("sem = Semaphore(4)  # 每次允许4个进程同时进来")]),e("div",[t._v("sem.acquire()  # 上锁")]),e("div",[t._v("print(0)")]),e("div",[t._v("sem.acquire()  # 上锁")]),e("div",[t._v("print(1)")]),e("div",[t._v("sem.acquire()  # 上锁")]),e("div",[t._v("print(2)")]),e("div",[t._v("sem.acquire()  # 上锁")]),e("div",[t._v("print(3)")]),e("div",[t._v("# sem.release()  # 解锁，如果一个都没有解锁后面的进程是无法进来的")]),e("div",[t._v("sem.acquire()  # 上锁")]),e("div",[t._v("print(4)")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt","white-space":"pre-wrap","font-family":'"Courier New"',"font-weight":"bold","line-height":"1.75"}},[t._v("1.")]),t._v(" "),e("span",{staticStyle:{"font-size":"14pt","font-weight":"bold"}},[t._v("迷你唱吧例子")])]),e("div",[e("span",{staticStyle:{"font-size":"14pt"}},[e("br")])]),e("ul",[e("li",[e("div",[e("span",{staticStyle:{"white-space":"pre-wrap","overflow-wrap":"break-word","letter-spacing":"normal",orphans:"2","text-indent":"0px","text-transform":"none",widows:"2","word-spacing":"0px","-webkit-text-stroke-width":"0px"}},[e("span",{staticStyle:{"font-size":"12pt",color:"rgb(0, 0, 0)","font-variant-caps":"normal","font-variant-ligatures":"normal","line-height":"1.5"}},[t._v("假设商场里有4个迷你唱吧，所以同时可以进去4个人，如果来了第五个人就要在外面等待，等到有人出来才能再进去玩。")])])])])]),e("div",[e("br")]),e("div",{staticStyle:{"box-sizing":"border-box",padding:"8px","font-family":'Monaco, Menlo, Consolas, "Courier New", monospace',"font-size":"12px",color:"rgb(51, 51, 51)","border-radius":"4px","background-color":"rgb(251, 250, 248)",border:"1px solid rgba(0, 0, 0, 0.15)","-en-codeblock":"true"}},[e("div",[t._v("import time")]),e("div",[t._v("import random")]),e("div",[t._v("from multiprocessing import Semaphore")]),e("div",[t._v("from multiprocessing import Process")]),e("div",[e("br")]),e("div",[e("br")]),e("div",[t._v("def sing(i, sem):")]),e("div",[t._v("    sem.acquire()  "),e("font",{attrs:{color:"#E30000"}},[t._v("# 上锁，如果已经进入了4个进程，其他进程就无法进入")])],1),e("div",[t._v("    print('%s : 进来KTV' % i)")]),e("div",[t._v("    time.sleep(random.randint(1, 10))  "),e("font",{attrs:{color:"#41AD1C"}},[t._v("# 随机延时1-10秒之间")])],1),e("div",[t._v("    print('%s : 离开KTV' % i)")]),e("div",[t._v("    sem.release()  "),e("font",{attrs:{color:"#E30000"}},[t._v("# 解锁，允许下一个等待的进程进入")])],1),e("div",[e("br")]),e("div",[t._v("if __name__ == '__main__':")]),e("div",[t._v("    sem = Semaphore(4)  "),e("font",{attrs:{color:"#E30000"}},[t._v("# 每次允许4个进程进入")])],1),e("div",[t._v("    for i in range(20):")]),e("div",[t._v("        p = Process(target=sing, args=(i, sem))")]),e("div",[t._v("        p.start()")])]),e("div",[e("br")])]),e("div",[e("br")])])])])}),[],!1,null,null,null);i.default=r.exports}}]);