<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>视图系统 | Kevin-Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/kevin-blog/logo.png">
    <meta name="description" content="">
    <link rel="preload" href="/kevin-blog/assets/css/0.styles.267bc68b.css" as="style"><link rel="preload" href="/kevin-blog/assets/js/app.dd46475d.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/2.97d04891.js" as="script"><link rel="preload" href="/kevin-blog/assets/js/74.7b652913.js" as="script"><link rel="prefetch" href="/kevin-blog/assets/js/10.2b686438.js"><link rel="prefetch" href="/kevin-blog/assets/js/100.cfc5acd5.js"><link rel="prefetch" href="/kevin-blog/assets/js/101.628bd39e.js"><link rel="prefetch" href="/kevin-blog/assets/js/102.41585307.js"><link rel="prefetch" href="/kevin-blog/assets/js/103.5d18350a.js"><link rel="prefetch" href="/kevin-blog/assets/js/104.85cd65cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/105.9d303bac.js"><link rel="prefetch" href="/kevin-blog/assets/js/106.73f6a263.js"><link rel="prefetch" href="/kevin-blog/assets/js/107.9dfe114c.js"><link rel="prefetch" href="/kevin-blog/assets/js/108.315e8c63.js"><link rel="prefetch" href="/kevin-blog/assets/js/109.ef21ffa0.js"><link rel="prefetch" href="/kevin-blog/assets/js/11.2b0f6358.js"><link rel="prefetch" href="/kevin-blog/assets/js/110.dfe062a3.js"><link rel="prefetch" href="/kevin-blog/assets/js/111.08f0c3e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/112.0e180f10.js"><link rel="prefetch" href="/kevin-blog/assets/js/113.295f1fca.js"><link rel="prefetch" href="/kevin-blog/assets/js/114.5645d09d.js"><link rel="prefetch" href="/kevin-blog/assets/js/115.ebe19212.js"><link rel="prefetch" href="/kevin-blog/assets/js/116.b3eb5cab.js"><link rel="prefetch" href="/kevin-blog/assets/js/117.076c6372.js"><link rel="prefetch" href="/kevin-blog/assets/js/118.226fb513.js"><link rel="prefetch" href="/kevin-blog/assets/js/119.298c0302.js"><link rel="prefetch" href="/kevin-blog/assets/js/12.01390043.js"><link rel="prefetch" href="/kevin-blog/assets/js/120.943d0d71.js"><link rel="prefetch" href="/kevin-blog/assets/js/121.2d1bd8ef.js"><link rel="prefetch" href="/kevin-blog/assets/js/122.84b9dff1.js"><link rel="prefetch" href="/kevin-blog/assets/js/123.85d93d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/124.4913aefd.js"><link rel="prefetch" href="/kevin-blog/assets/js/125.cf667169.js"><link rel="prefetch" href="/kevin-blog/assets/js/126.eefd3250.js"><link rel="prefetch" href="/kevin-blog/assets/js/127.f9697daf.js"><link rel="prefetch" href="/kevin-blog/assets/js/128.aff6033d.js"><link rel="prefetch" href="/kevin-blog/assets/js/129.fa7ec9a8.js"><link rel="prefetch" href="/kevin-blog/assets/js/13.e55a4126.js"><link rel="prefetch" href="/kevin-blog/assets/js/130.9d50b78d.js"><link rel="prefetch" href="/kevin-blog/assets/js/131.f384aa34.js"><link rel="prefetch" href="/kevin-blog/assets/js/132.e60091dc.js"><link rel="prefetch" href="/kevin-blog/assets/js/133.09a9de16.js"><link rel="prefetch" href="/kevin-blog/assets/js/134.a7739a99.js"><link rel="prefetch" href="/kevin-blog/assets/js/135.bea491db.js"><link rel="prefetch" href="/kevin-blog/assets/js/136.92af3a82.js"><link rel="prefetch" href="/kevin-blog/assets/js/137.dbda7b02.js"><link rel="prefetch" href="/kevin-blog/assets/js/138.9fea4ca4.js"><link rel="prefetch" href="/kevin-blog/assets/js/139.0a81aff9.js"><link rel="prefetch" href="/kevin-blog/assets/js/14.efd69f3b.js"><link rel="prefetch" href="/kevin-blog/assets/js/140.3f048218.js"><link rel="prefetch" href="/kevin-blog/assets/js/141.002d7568.js"><link rel="prefetch" href="/kevin-blog/assets/js/142.aec10062.js"><link rel="prefetch" href="/kevin-blog/assets/js/143.2e682c5b.js"><link rel="prefetch" href="/kevin-blog/assets/js/144.d05092f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/145.358437b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/146.af219f24.js"><link rel="prefetch" href="/kevin-blog/assets/js/147.061cb5fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/148.422d1f87.js"><link rel="prefetch" href="/kevin-blog/assets/js/149.c97f27f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/15.271f58eb.js"><link rel="prefetch" href="/kevin-blog/assets/js/150.177533a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/151.d70f314c.js"><link rel="prefetch" href="/kevin-blog/assets/js/152.ca40e6fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/153.a2bca317.js"><link rel="prefetch" href="/kevin-blog/assets/js/154.22edbf9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/155.e59b2d87.js"><link rel="prefetch" href="/kevin-blog/assets/js/156.d5a38de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/157.cbe5199a.js"><link rel="prefetch" href="/kevin-blog/assets/js/158.31c5b8b2.js"><link rel="prefetch" href="/kevin-blog/assets/js/159.0763ed0c.js"><link rel="prefetch" href="/kevin-blog/assets/js/16.e92cdd55.js"><link rel="prefetch" href="/kevin-blog/assets/js/160.a05ced02.js"><link rel="prefetch" href="/kevin-blog/assets/js/161.7e52ed13.js"><link rel="prefetch" href="/kevin-blog/assets/js/162.f5df7208.js"><link rel="prefetch" href="/kevin-blog/assets/js/163.78a78de8.js"><link rel="prefetch" href="/kevin-blog/assets/js/164.54fd347c.js"><link rel="prefetch" href="/kevin-blog/assets/js/165.a0347ed3.js"><link rel="prefetch" href="/kevin-blog/assets/js/166.0702e96e.js"><link rel="prefetch" href="/kevin-blog/assets/js/167.69136cd0.js"><link rel="prefetch" href="/kevin-blog/assets/js/168.d0aa7e0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/169.6229f0ca.js"><link rel="prefetch" href="/kevin-blog/assets/js/17.9a006e5d.js"><link rel="prefetch" href="/kevin-blog/assets/js/170.b6571721.js"><link rel="prefetch" href="/kevin-blog/assets/js/171.600f9683.js"><link rel="prefetch" href="/kevin-blog/assets/js/172.6e1792a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/173.cef126b3.js"><link rel="prefetch" href="/kevin-blog/assets/js/174.97b3e897.js"><link rel="prefetch" href="/kevin-blog/assets/js/175.fcefca30.js"><link rel="prefetch" href="/kevin-blog/assets/js/176.31862a66.js"><link rel="prefetch" href="/kevin-blog/assets/js/177.089b09c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/178.a5dcd25c.js"><link rel="prefetch" href="/kevin-blog/assets/js/179.a9d685f2.js"><link rel="prefetch" href="/kevin-blog/assets/js/18.a1c24192.js"><link rel="prefetch" href="/kevin-blog/assets/js/180.4ad69266.js"><link rel="prefetch" href="/kevin-blog/assets/js/181.691d48a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/182.e77aa679.js"><link rel="prefetch" href="/kevin-blog/assets/js/183.2b4341f4.js"><link rel="prefetch" href="/kevin-blog/assets/js/184.b3610e8b.js"><link rel="prefetch" href="/kevin-blog/assets/js/185.08107897.js"><link rel="prefetch" href="/kevin-blog/assets/js/186.9f5a3f65.js"><link rel="prefetch" href="/kevin-blog/assets/js/187.ac2fe2c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/188.09023a78.js"><link rel="prefetch" href="/kevin-blog/assets/js/189.409b4ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/19.c733cdfe.js"><link rel="prefetch" href="/kevin-blog/assets/js/190.ca5d775c.js"><link rel="prefetch" href="/kevin-blog/assets/js/191.8052fe42.js"><link rel="prefetch" href="/kevin-blog/assets/js/192.31ebe059.js"><link rel="prefetch" href="/kevin-blog/assets/js/193.9bf32e11.js"><link rel="prefetch" href="/kevin-blog/assets/js/194.0667554a.js"><link rel="prefetch" href="/kevin-blog/assets/js/195.ea249ba4.js"><link rel="prefetch" href="/kevin-blog/assets/js/196.6278ec5a.js"><link rel="prefetch" href="/kevin-blog/assets/js/197.90f6af7b.js"><link rel="prefetch" href="/kevin-blog/assets/js/198.2e358b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/199.a0bd0085.js"><link rel="prefetch" href="/kevin-blog/assets/js/20.890583ea.js"><link rel="prefetch" href="/kevin-blog/assets/js/200.bc1e237a.js"><link rel="prefetch" href="/kevin-blog/assets/js/201.767e166e.js"><link rel="prefetch" href="/kevin-blog/assets/js/202.a52f0e94.js"><link rel="prefetch" href="/kevin-blog/assets/js/203.06f0ebab.js"><link rel="prefetch" href="/kevin-blog/assets/js/204.7ae45191.js"><link rel="prefetch" href="/kevin-blog/assets/js/205.b8412fbc.js"><link rel="prefetch" href="/kevin-blog/assets/js/206.682f9a3e.js"><link rel="prefetch" href="/kevin-blog/assets/js/207.8978346c.js"><link rel="prefetch" href="/kevin-blog/assets/js/208.35db8c05.js"><link rel="prefetch" href="/kevin-blog/assets/js/209.1eebeab0.js"><link rel="prefetch" href="/kevin-blog/assets/js/21.48328b6a.js"><link rel="prefetch" href="/kevin-blog/assets/js/210.b56db64f.js"><link rel="prefetch" href="/kevin-blog/assets/js/211.31da36f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/212.2f2d2d1f.js"><link rel="prefetch" href="/kevin-blog/assets/js/213.be55b8cc.js"><link rel="prefetch" href="/kevin-blog/assets/js/214.aeffc247.js"><link rel="prefetch" href="/kevin-blog/assets/js/215.137bae15.js"><link rel="prefetch" href="/kevin-blog/assets/js/216.2692c636.js"><link rel="prefetch" href="/kevin-blog/assets/js/217.a6a9cf62.js"><link rel="prefetch" href="/kevin-blog/assets/js/218.7353ed7a.js"><link rel="prefetch" href="/kevin-blog/assets/js/219.f1fdfe8e.js"><link rel="prefetch" href="/kevin-blog/assets/js/22.5fd865e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/220.e20ab2b5.js"><link rel="prefetch" href="/kevin-blog/assets/js/221.0d06c8b0.js"><link rel="prefetch" href="/kevin-blog/assets/js/222.e39491a9.js"><link rel="prefetch" href="/kevin-blog/assets/js/223.ae98df72.js"><link rel="prefetch" href="/kevin-blog/assets/js/224.4ba5d334.js"><link rel="prefetch" href="/kevin-blog/assets/js/225.913ee059.js"><link rel="prefetch" href="/kevin-blog/assets/js/226.b8d730bd.js"><link rel="prefetch" href="/kevin-blog/assets/js/227.69ee92e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/228.1cf17cff.js"><link rel="prefetch" href="/kevin-blog/assets/js/229.6ce44fac.js"><link rel="prefetch" href="/kevin-blog/assets/js/23.9ef4ab20.js"><link rel="prefetch" href="/kevin-blog/assets/js/230.30c28e05.js"><link rel="prefetch" href="/kevin-blog/assets/js/231.ef327150.js"><link rel="prefetch" href="/kevin-blog/assets/js/232.6cb791d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/233.473fa94b.js"><link rel="prefetch" href="/kevin-blog/assets/js/234.848de787.js"><link rel="prefetch" href="/kevin-blog/assets/js/235.f5db4ed9.js"><link rel="prefetch" href="/kevin-blog/assets/js/236.5da3f87c.js"><link rel="prefetch" href="/kevin-blog/assets/js/237.018a543d.js"><link rel="prefetch" href="/kevin-blog/assets/js/238.74d22845.js"><link rel="prefetch" href="/kevin-blog/assets/js/239.fca187a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/24.3dff5faa.js"><link rel="prefetch" href="/kevin-blog/assets/js/240.0dbbfe84.js"><link rel="prefetch" href="/kevin-blog/assets/js/241.8b1ccf29.js"><link rel="prefetch" href="/kevin-blog/assets/js/242.f5216a9f.js"><link rel="prefetch" href="/kevin-blog/assets/js/243.8e5c5e34.js"><link rel="prefetch" href="/kevin-blog/assets/js/244.8f78ae9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/245.e0b2e7b9.js"><link rel="prefetch" href="/kevin-blog/assets/js/246.7700207e.js"><link rel="prefetch" href="/kevin-blog/assets/js/247.c1e13b57.js"><link rel="prefetch" href="/kevin-blog/assets/js/248.63d6adf8.js"><link rel="prefetch" href="/kevin-blog/assets/js/249.500fdd00.js"><link rel="prefetch" href="/kevin-blog/assets/js/25.0ebddc27.js"><link rel="prefetch" href="/kevin-blog/assets/js/250.ebbb5c92.js"><link rel="prefetch" href="/kevin-blog/assets/js/251.4e51605e.js"><link rel="prefetch" href="/kevin-blog/assets/js/252.2534bb33.js"><link rel="prefetch" href="/kevin-blog/assets/js/253.330d0073.js"><link rel="prefetch" href="/kevin-blog/assets/js/254.da99904b.js"><link rel="prefetch" href="/kevin-blog/assets/js/255.f9a1774e.js"><link rel="prefetch" href="/kevin-blog/assets/js/256.7ee8ac66.js"><link rel="prefetch" href="/kevin-blog/assets/js/257.41594669.js"><link rel="prefetch" href="/kevin-blog/assets/js/258.9d8beffc.js"><link rel="prefetch" href="/kevin-blog/assets/js/259.1539043a.js"><link rel="prefetch" href="/kevin-blog/assets/js/26.7e91ac9d.js"><link rel="prefetch" href="/kevin-blog/assets/js/260.034695f0.js"><link rel="prefetch" href="/kevin-blog/assets/js/261.953910a0.js"><link rel="prefetch" href="/kevin-blog/assets/js/262.e2b0764f.js"><link rel="prefetch" href="/kevin-blog/assets/js/263.fe9b0b70.js"><link rel="prefetch" href="/kevin-blog/assets/js/264.489e20f7.js"><link rel="prefetch" href="/kevin-blog/assets/js/265.43596b34.js"><link rel="prefetch" href="/kevin-blog/assets/js/266.07bb7008.js"><link rel="prefetch" href="/kevin-blog/assets/js/267.5caf5b93.js"><link rel="prefetch" href="/kevin-blog/assets/js/268.fc6e09e2.js"><link rel="prefetch" href="/kevin-blog/assets/js/269.764500c0.js"><link rel="prefetch" href="/kevin-blog/assets/js/27.55c7093f.js"><link rel="prefetch" href="/kevin-blog/assets/js/270.9760648a.js"><link rel="prefetch" href="/kevin-blog/assets/js/271.019b1f9a.js"><link rel="prefetch" href="/kevin-blog/assets/js/272.bce07ec6.js"><link rel="prefetch" href="/kevin-blog/assets/js/273.038ff1e3.js"><link rel="prefetch" href="/kevin-blog/assets/js/274.2cb7fd59.js"><link rel="prefetch" href="/kevin-blog/assets/js/275.3c831af6.js"><link rel="prefetch" href="/kevin-blog/assets/js/276.8d0732f8.js"><link rel="prefetch" href="/kevin-blog/assets/js/277.5aa0c664.js"><link rel="prefetch" href="/kevin-blog/assets/js/278.a3cdd3b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/279.d049a479.js"><link rel="prefetch" href="/kevin-blog/assets/js/28.da28db4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/280.6b7f68c4.js"><link rel="prefetch" href="/kevin-blog/assets/js/281.eff251cb.js"><link rel="prefetch" href="/kevin-blog/assets/js/282.f0dc7866.js"><link rel="prefetch" href="/kevin-blog/assets/js/283.36ca2fb9.js"><link rel="prefetch" href="/kevin-blog/assets/js/284.470e6db4.js"><link rel="prefetch" href="/kevin-blog/assets/js/285.a9c60b36.js"><link rel="prefetch" href="/kevin-blog/assets/js/286.3eff6f51.js"><link rel="prefetch" href="/kevin-blog/assets/js/287.f406cf63.js"><link rel="prefetch" href="/kevin-blog/assets/js/288.d6bb5731.js"><link rel="prefetch" href="/kevin-blog/assets/js/289.518409f3.js"><link rel="prefetch" href="/kevin-blog/assets/js/29.37ea8137.js"><link rel="prefetch" href="/kevin-blog/assets/js/290.e4795980.js"><link rel="prefetch" href="/kevin-blog/assets/js/291.6ca97e3d.js"><link rel="prefetch" href="/kevin-blog/assets/js/292.f434852f.js"><link rel="prefetch" href="/kevin-blog/assets/js/293.256f39e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/294.0e051edc.js"><link rel="prefetch" href="/kevin-blog/assets/js/295.d6a1cfbb.js"><link rel="prefetch" href="/kevin-blog/assets/js/296.9a3f4bb2.js"><link rel="prefetch" href="/kevin-blog/assets/js/297.374bbc2d.js"><link rel="prefetch" href="/kevin-blog/assets/js/298.c37b0145.js"><link rel="prefetch" href="/kevin-blog/assets/js/299.008098d2.js"><link rel="prefetch" href="/kevin-blog/assets/js/3.0c6053de.js"><link rel="prefetch" href="/kevin-blog/assets/js/30.24e20f30.js"><link rel="prefetch" href="/kevin-blog/assets/js/300.ab07139a.js"><link rel="prefetch" href="/kevin-blog/assets/js/301.69ee5ffa.js"><link rel="prefetch" href="/kevin-blog/assets/js/302.05af46d8.js"><link rel="prefetch" href="/kevin-blog/assets/js/303.cec1cf65.js"><link rel="prefetch" href="/kevin-blog/assets/js/304.7c82ba6c.js"><link rel="prefetch" href="/kevin-blog/assets/js/305.7ac25f4a.js"><link rel="prefetch" href="/kevin-blog/assets/js/306.82149841.js"><link rel="prefetch" href="/kevin-blog/assets/js/307.f56afc9c.js"><link rel="prefetch" href="/kevin-blog/assets/js/308.7c084ed0.js"><link rel="prefetch" href="/kevin-blog/assets/js/309.feb89623.js"><link rel="prefetch" href="/kevin-blog/assets/js/31.19d1e3af.js"><link rel="prefetch" href="/kevin-blog/assets/js/310.1e33889a.js"><link rel="prefetch" href="/kevin-blog/assets/js/311.416e7d20.js"><link rel="prefetch" href="/kevin-blog/assets/js/312.ee11dbec.js"><link rel="prefetch" href="/kevin-blog/assets/js/313.f58bb112.js"><link rel="prefetch" href="/kevin-blog/assets/js/314.543b2b1c.js"><link rel="prefetch" href="/kevin-blog/assets/js/315.18b9a70e.js"><link rel="prefetch" href="/kevin-blog/assets/js/316.6dfba854.js"><link rel="prefetch" href="/kevin-blog/assets/js/317.19590777.js"><link rel="prefetch" href="/kevin-blog/assets/js/318.a3ec0c19.js"><link rel="prefetch" href="/kevin-blog/assets/js/319.f990a61a.js"><link rel="prefetch" href="/kevin-blog/assets/js/32.07887ecb.js"><link rel="prefetch" href="/kevin-blog/assets/js/320.a3c5cbbf.js"><link rel="prefetch" href="/kevin-blog/assets/js/321.1f58e49c.js"><link rel="prefetch" href="/kevin-blog/assets/js/322.032ff5a2.js"><link rel="prefetch" href="/kevin-blog/assets/js/323.cdd3ba68.js"><link rel="prefetch" href="/kevin-blog/assets/js/324.5238a4e1.js"><link rel="prefetch" href="/kevin-blog/assets/js/325.df06c071.js"><link rel="prefetch" href="/kevin-blog/assets/js/33.9539a78e.js"><link rel="prefetch" href="/kevin-blog/assets/js/34.fa08dd12.js"><link rel="prefetch" href="/kevin-blog/assets/js/35.d6823664.js"><link rel="prefetch" href="/kevin-blog/assets/js/36.5e074071.js"><link rel="prefetch" href="/kevin-blog/assets/js/37.f4a65a95.js"><link rel="prefetch" href="/kevin-blog/assets/js/38.4f127420.js"><link rel="prefetch" href="/kevin-blog/assets/js/39.a5427f94.js"><link rel="prefetch" href="/kevin-blog/assets/js/4.a60d4c06.js"><link rel="prefetch" href="/kevin-blog/assets/js/40.859a530c.js"><link rel="prefetch" href="/kevin-blog/assets/js/41.b61d8247.js"><link rel="prefetch" href="/kevin-blog/assets/js/42.cd204014.js"><link rel="prefetch" href="/kevin-blog/assets/js/43.8076c8fc.js"><link rel="prefetch" href="/kevin-blog/assets/js/44.8a85cf72.js"><link rel="prefetch" href="/kevin-blog/assets/js/45.f46f354b.js"><link rel="prefetch" href="/kevin-blog/assets/js/46.5990e5be.js"><link rel="prefetch" href="/kevin-blog/assets/js/47.9381b746.js"><link rel="prefetch" href="/kevin-blog/assets/js/48.77d95473.js"><link rel="prefetch" href="/kevin-blog/assets/js/49.fc6dff0d.js"><link rel="prefetch" href="/kevin-blog/assets/js/5.6b8c7ebc.js"><link rel="prefetch" href="/kevin-blog/assets/js/50.297dac6d.js"><link rel="prefetch" href="/kevin-blog/assets/js/51.c6ed15a6.js"><link rel="prefetch" href="/kevin-blog/assets/js/52.8bb5ec6f.js"><link rel="prefetch" href="/kevin-blog/assets/js/53.32ab5818.js"><link rel="prefetch" href="/kevin-blog/assets/js/54.1fe541f9.js"><link rel="prefetch" href="/kevin-blog/assets/js/55.6084b23b.js"><link rel="prefetch" href="/kevin-blog/assets/js/56.242cd75a.js"><link rel="prefetch" href="/kevin-blog/assets/js/57.a3aa61b8.js"><link rel="prefetch" href="/kevin-blog/assets/js/58.5dc813ec.js"><link rel="prefetch" href="/kevin-blog/assets/js/59.0649b9f5.js"><link rel="prefetch" href="/kevin-blog/assets/js/6.8f60ce79.js"><link rel="prefetch" href="/kevin-blog/assets/js/60.e912e60f.js"><link rel="prefetch" href="/kevin-blog/assets/js/61.2348484b.js"><link rel="prefetch" href="/kevin-blog/assets/js/62.43b03d30.js"><link rel="prefetch" href="/kevin-blog/assets/js/63.6e56096d.js"><link rel="prefetch" href="/kevin-blog/assets/js/64.c45908b4.js"><link rel="prefetch" href="/kevin-blog/assets/js/65.aab0a20e.js"><link rel="prefetch" href="/kevin-blog/assets/js/66.2555ebea.js"><link rel="prefetch" href="/kevin-blog/assets/js/67.80828b1b.js"><link rel="prefetch" href="/kevin-blog/assets/js/68.5b1b38ff.js"><link rel="prefetch" href="/kevin-blog/assets/js/69.d735686b.js"><link rel="prefetch" href="/kevin-blog/assets/js/7.8fc0c0e7.js"><link rel="prefetch" href="/kevin-blog/assets/js/70.fd567fdf.js"><link rel="prefetch" href="/kevin-blog/assets/js/71.3dc39cbd.js"><link rel="prefetch" href="/kevin-blog/assets/js/72.6fe3454c.js"><link rel="prefetch" href="/kevin-blog/assets/js/73.80c96fab.js"><link rel="prefetch" href="/kevin-blog/assets/js/75.a9cc5506.js"><link rel="prefetch" href="/kevin-blog/assets/js/76.81bca567.js"><link rel="prefetch" href="/kevin-blog/assets/js/77.1851c464.js"><link rel="prefetch" href="/kevin-blog/assets/js/78.06a9be2e.js"><link rel="prefetch" href="/kevin-blog/assets/js/79.89ac9186.js"><link rel="prefetch" href="/kevin-blog/assets/js/8.d7f3575e.js"><link rel="prefetch" href="/kevin-blog/assets/js/80.76b8cfc2.js"><link rel="prefetch" href="/kevin-blog/assets/js/81.7c87b7a7.js"><link rel="prefetch" href="/kevin-blog/assets/js/82.1995f469.js"><link rel="prefetch" href="/kevin-blog/assets/js/83.dd77915d.js"><link rel="prefetch" href="/kevin-blog/assets/js/84.d167dd7d.js"><link rel="prefetch" href="/kevin-blog/assets/js/85.b858e7d4.js"><link rel="prefetch" href="/kevin-blog/assets/js/86.c4508e18.js"><link rel="prefetch" href="/kevin-blog/assets/js/87.e5015ac2.js"><link rel="prefetch" href="/kevin-blog/assets/js/88.03ea7184.js"><link rel="prefetch" href="/kevin-blog/assets/js/89.6c4aecd6.js"><link rel="prefetch" href="/kevin-blog/assets/js/9.541bf307.js"><link rel="prefetch" href="/kevin-blog/assets/js/90.e64c083e.js"><link rel="prefetch" href="/kevin-blog/assets/js/91.208ff0cf.js"><link rel="prefetch" href="/kevin-blog/assets/js/92.0247f769.js"><link rel="prefetch" href="/kevin-blog/assets/js/93.1d51e9e8.js"><link rel="prefetch" href="/kevin-blog/assets/js/94.52fd5e59.js"><link rel="prefetch" href="/kevin-blog/assets/js/95.3641a4fe.js"><link rel="prefetch" href="/kevin-blog/assets/js/96.a96da06a.js"><link rel="prefetch" href="/kevin-blog/assets/js/97.877152bf.js"><link rel="prefetch" href="/kevin-blog/assets/js/98.4fe249c2.js"><link rel="prefetch" href="/kevin-blog/assets/js/99.400d0dc4.js">
    <link rel="stylesheet" href="/kevin-blog/assets/css/0.styles.267bc68b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kevin-blog/" class="home-link router-link-active"><!----> <span class="site-name">Kevin-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web" class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/ES6/Map 数据结构.html" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Python/DBUtils 数据库连接池模块.html" class="nav-link">
  Python
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Django" class="dropdown-title"><span class="title">Django</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kevin-blog/Django/Ajax.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django ORM/ORM-ContentType.html" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/kevin-blog/Django Rest-Framework/JWT - JSON Web Tokens.html" class="nav-link">
  Rest-Framework
</a></li></ul></div></div><div class="nav-item"><a href="/kevin-blog/Flask/Flask 文件上传.html" class="nav-link">
  Flask
</a></div><div class="nav-item"><a href="/kevin-blog/Git GitHub/Git.html" class="nav-link">
  Git GitHub
</a></div><div class="nav-item"><a href="/kevin-blog/Linux/CentOS 下载和安装.html" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/kevin-blog/MySQL/distinct 去重.html" class="nav-link">
  MySQL
</a></div><div class="nav-item"><a href="/kevin-blog/爬虫/Anaconda环境.html" class="nav-link">
  爬虫
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Django</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kevin-blog/Django/Ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/kevin-blog/Django/App 概念.html" class="sidebar-link">App 概念</a></li><li><a href="/kevin-blog/Django/Cookie.html" class="sidebar-link">Cookie</a></li><li><a href="/kevin-blog/Django/Django 文件上传.html" class="sidebar-link">Django 文件上传</a></li><li><a href="/kevin-blog/Django/Django 日志配置.html" class="sidebar-link">Django 日志配置</a></li><li><a href="/kevin-blog/Django/Django使用Redis.html" class="sidebar-link">Django使用Redis</a></li><li><a href="/kevin-blog/Django/Django的时间问题.html" class="sidebar-link">Django的时间问题</a></li><li><a href="/kevin-blog/Django/Form 组件.html" class="sidebar-link">Form 组件</a></li><li><a href="/kevin-blog/Django/HTML协议.html" class="sidebar-link">HTML协议</a></li><li><a href="/kevin-blog/Django/HTML模板.html" class="sidebar-link">HTML模板</a></li><li><a href="/kevin-blog/Django/JWT - JSON Web Tokens.html" class="sidebar-link">JWT - JSON Web Tokens</a></li><li><a href="/kevin-blog/Django/MVC框架和MTV框架（了解即可）.html" class="sidebar-link">MVC框架和MTV框架（了解即可）</a></li><li><a href="/kevin-blog/Django/ModelForm 组件.html" class="sidebar-link">ModelForm 组件</a></li><li><a href="/kevin-blog/Django/RESTful 规范.html" class="sidebar-link">RESTful 规范</a></li><li><a href="/kevin-blog/Django/Session.html" class="sidebar-link">Session</a></li><li><a href="/kevin-blog/Django/Web框架的本质（重要+理解）.html" class="sidebar-link">Web框架的本质（重要+理解）</a></li><li><a href="/kevin-blog/Django/admin 的使用.html" class="sidebar-link">admin 的使用</a></li><li><a href="/kevin-blog/Django/auth 认证模块.html" class="sidebar-link">auth 认证模块</a></li><li><a href="/kevin-blog/Django/cache 缓存系统.html" class="sidebar-link">cache 缓存系统</a></li><li><a href="/kevin-blog/Django/csrf token.html" class="sidebar-link">csrf token</a></li><li><a href="/kevin-blog/Django/media 多媒体文件的配置.html" class="sidebar-link">media 多媒体文件的配置</a></li><li><a href="/kevin-blog/Django/rest-framework token认证.html" class="sidebar-link">rest-framework token认证</a></li><li><a href="/kevin-blog/Django/rest-framework 框架.html" class="sidebar-link">rest-framework 框架</a></li><li><a href="/kevin-blog/Django/中间件.html" class="sidebar-link">中间件</a></li><li><a href="/kevin-blog/Django/使用Django的注意事项.html" class="sidebar-link">使用Django的注意事项</a></li><li><a href="/kevin-blog/Django/使用Python脚本调用Django环境.html" class="sidebar-link">使用Python脚本调用Django环境</a></li><li><a href="/kevin-blog/Django/内置分页（了解）.html" class="sidebar-link">内置分页（了解）</a></li><li><a href="/kevin-blog/Django/安装和启动.html" class="sidebar-link">安装和启动</a></li><li><a href="/kevin-blog/Django/自定义分页.html" class="sidebar-link">自定义分页</a></li><li><a href="/kevin-blog/Django/视图系统.html" class="active sidebar-link">视图系统</a></li><li><a href="/kevin-blog/Django/跨域.html" class="sidebar-link">跨域</a></li><li><a href="/kevin-blog/Django/路由系统.html" class="sidebar-link">路由系统</a></li><li><a href="/kevin-blog/Django/配置文件.html" class="sidebar-link">配置文件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><span><div><div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:16pt;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">基本的视图函数</span></h2><div><span style="font-size:14pt;"><br></span></div><ul><li><div>基本格式</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import HttpResponse, render, redirect</div><div><br></div><div>def <span style="color:rgb(250, 122, 0);">视图函数名称</span>(request):</div><div><span style="color:rgb(227, 0, 0);"># 所有跟请求相关的数据，Django都帮你封装到 request 里面了</span></div><div>    return render(request, '<font style="color:rgb(250, 122, 0);">html路径</font>')</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import HttpResponse, render, redirect</div><div><br></div><div>def view_fn(request):</div><div><font color="#E30000"># 所有跟请求相关的数据，Django都帮你封装到 request 里面了</font></div><div>    return render(request, 'index.html')</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">CBV 和 FBV</span></h2><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <span style="font-size:14pt;font-weight:bold;">CBV </span><span style="font-size:14pt;">-&gt; class base views</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">CBV的本质还是FBV</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">基于类编写的视图</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># CBV版的添加班级</font></div><div><br></div><div>from django.views import View</div><div><br></div><div><br></div><div>class AddClass(View):</div><div><font color="#41AD1C"># get的请求所执行的代码</font></div><div>    def get(self, request):</div><div>        return render(request, &quot;add_class.html&quot;)</div><div><br></div><div><font color="#41AD1C"># post的请求所执行的代码，在post的请求中也是可以获取get请求参数 -&gt; request.GET.get('xxx')</font></div><div>    def post(self, request):</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div><span style="font-size:12pt;">CBV接收url的参数</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size:9pt;font-family:Monaco;"><font color="#41AD1C"># urls.py</font></span></div><div><span style="font-size:9pt;color:rgb(51, 51, 51);font-family:Monaco;"><br></span></div><div>from django.conf.urls import url</div><div>from django.contrib import admin</div><div>from app01 import views</div><div><br></div><div>urlpatterns = [</div><div>    url(r'^index/(\d+)/', views.AddClass.as_view())</div><div>]</div></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>class AddClass(View):</div><div><br></div><div>    def get(self, request, id):</div><div>        print(id)</div><div>        return HttpResponse('get')</div><div><br></div><div>    def post(self, request, id):</div><div>        print(id)</div><div>        return HttpResponse('post')</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div>dispatch方法</div></li></ul><div><br></div><ul><ul><li><div>dispatch方法其实是CBV源码中用于根据不同的请求方式调用不同的方法（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）</div></li></ul></ul><div><br></div><ul><ul><li><div>在执行CBV中处理请求的方法（即: 你所创建的CBV中的处理get/post请求的方法）之前都会先执行一次 dispatch 方法，因为dispatch方法的作用就是根据不同的请求方式调用不同的方法（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）</div></li></ul></ul><div><br></div><ul><ul><li><div><span style="color:rgb(227, 0, 0);">注意: 如果在CBV中使用dispatch方法，那么一定要返回调用父类View中的dispatch方法的返回值</span>，除非自己实现请求方法的分发功能（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法）</div></li></ul></ul><div><br></div><ul><ul><li><div>使用场景:</div></li></ul></ul><div><br></div><ul><ul><ul><li><div>CBV处理请求的方法（即: 你所创建的CBV中的处理get/post请求的方法）中出现相同的操作时，可以将该相同的操作放到 dispatch 方法中执行</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.views import View</div><div><br></div><div><br></div><div>class AddClass(View):</div><div>    def dispatch(self, request, *args, **kwargs):</div><div>        print('执行 get方法 和 post方法 都有的操作')</div><div>        return super(AddClass, self).dispatch(request, *args, **kwargs)  <font color="#41AD1C"># 调用父类View的dispatch方法，根据不同的请求方式调用不同方法（即: 如果是GET请求，那么就会执行下方get方法）</font></div><div><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"></span><font color="#41AD1C"></font><font color="#E30000"># 一定要返回调用父类View中的dispatch方法的返回值</font></div><div><br></div><div>    def get(self, request):</div><div>        return HttpResponse('get')</div><div><br></div><div>    def post(self, request):</div><div>        return HttpResponse('post')</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><ul><ul><li><div>自己实现请求方法的分发功能（即: 如果是GET请求，那么就会执行你所创建的CBV中的处理get请求的方法），类似于中间件的功能</div></li></ul></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.views import View</div><div><br></div><div><br></div><div>class AddClass(View):</div><div>    def dispatch(self, request, *args, **kwargs):</div><div>        if request.method == 'GET':</div><div>            return self.get(request)</div><div>        else:</div><div>            return self.post(request)</div><div><br></div><div>    def get(self, request):</div><div>        return HttpResponse('get')</div><div><br></div><div>    def post(self, request):</div><div>        return HttpResponse('post')</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div><span style="color:rgb(227, 0, 0);">注意:</span> 使用CBV时，需要对urls.py做出相应的修改</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># urls.py</font></div><div><br></div><div>url(r'^add_class/$', AddClass.as_view())</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><div><span style="white-space:pre-wrap;font-size:14pt;font-weight:bold;">2.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">FBV</span> <span style="font-size:14pt;">-&gt; function base views</span></div><div><font style="font-size:12pt;"><br></font></div><ul><li><div><span style="font-size:12pt;">基于函数编写的视图</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># FBV版的添加班级</font></div><div><br></div><div>def add_class(request):</div><div>    if request.method == &quot;POST&quot;:</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div><div>    return render(request, &quot;add_class.html&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:16pt;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">给视图添加装饰器</span></h2><div><span style="font-size:14pt;"><br></span></div><div><font style="font-size:14pt;"><span style="box-sizing:border-box;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">1.</span><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">使用装饰器装饰FBV</span></font></div><div><br></div><ul><li><div>FBV本身就是一个函数，所以和给普通的函数加装饰器无差</div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 计算执行时间的装饰器</font></div><div>def wrapper(func):</div><div>    def inner(*args, **kwargs):</div><div>        start_time = time.time()</div><div>        ret = func(*args, **kwargs)</div><div>        end_time = time.time()</div><div>        print(&quot;used:&quot;, end_time-start_time)</div><div>        return ret</div><div>    return inner</div><div><br></div><div><br></div><div><font color="#41AD1C"># FBV版添加班级@wrapper</font></div><div>def add_class(request):</div><div>    if request.method == &quot;POST&quot;:</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div><div>    return render(request, &quot;add_class.html&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><div><font style="font-size:14pt;"><span style="box-sizing:border-box;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">2.</span><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">使用装饰器装饰CBV</span></font></div><div><br></div><ul><li><div>类中的方法与独立函数不完全相同，因此不能直接将函数装饰器应用于类中的方法 ，我们需要先将其转换为方法装饰器</div></li><li><div>Django中提供了<span style="color:rgb(227, 0, 0);">method_decorator</span>装饰器用于将函数装饰器转换为方法装饰器</div></li></ul><div><br></div><ul><li><div>使用装饰器装饰类中的方法</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># CBV版添加班级</font></div><div>from django.views import View</div><div>from django.utils.decorators import method_decorator</div><div><font color="#41AD1C"><br></font></div><div><font color="#41AD1C"># 计算执行时间的装饰器</font></div><div>def wrapper(func):</div><div>    def inner(*args, **kwargs):</div><div>        start_time = time.time()</div><div>        ret = func(*args, **kwargs)</div><div>        end_time = time.time()</div><div>        print(&quot;used:&quot;, end_time-start_time)</div><div>        return ret</div><div>    return inner</div><div><br></div><div>class AddClass(View):</div><div><br></div><div>    @method_decorator(wrapper)  <font color="#41AD1C"># 使用method_decorator装饰器用于将函数装饰器转换为方法装饰器</font></div><div>    def get(self, request):</div><div>        return render(request, &quot;add_class.html&quot;)</div><div><br></div><div>    def post(self, request):</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div>使用装饰器直接装饰类</div></li></ul><div><br></div><ul><ul><li><div>通过name指定要装饰的方法，且name参数必传</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># CBV版添加班级</font></div><div>from django.views import View</div><div>from django.utils.decorators import method_decorator</div><div><br></div><div><br></div><div><font color="#41AD1C"># 计算执行时间的装饰器</font></div><div>def wrapper(func):</div><div>    def inner(*args, **kwargs):</div><div>        start_time = time.time()</div><div>        ret = func(*args, **kwargs)</div><div>        end_time = time.time()</div><div>        print(&quot;used:&quot;, end_time - start_time)</div><div>        return ret</div><div><br></div><div>    return inner</div><div><br></div><div><br></div><div><font color="#41AD1C"># 使用装饰器直接装饰类</font><font color="#41AD1C">，且name参数必传</font></div><div>@method_decorator(wrapper, name='get')  <font color="#41AD1C"># name 是指定装饰get请求方法，还是post请求方法</font></div><div>@method_decorator(wrapper, name='post')  <font color="#41AD1C"># 同时装饰get和post方法</font></div><div>class AddClass(View):</div><div><br></div><div>    def get(self, request):</div><div>        return render(request, &quot;add_class.html&quot;)</div><div><br></div><div>    def post(self, request):</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div><span style="font-size:12pt;">在dispatch方法添加装饰器</span></div></li></ul><div><br></div><ul><ul><li><div>在执行get方法和post方法之前先会执行<span style="font-size:12pt;">dispatch方法，因为</span><span style="font-size:12pt;">dispatch方法是分配执行get方法还是post方法，所以在</span><span style="font-size:12pt;">dispatch方法上添加了装饰器等同于同时给get方法和post方法都添加上了装饰器</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># CBV版添加班级</font></div><div>from django.views import View</div><div>from django.utils.decorators import method_decorator</div><div><br></div><div><br></div><div><font color="#41AD1C"># 计算执行时间的装饰器</font></div><div>def wrapper(func):</div><div>    def inner(*args, **kwargs):</div><div>        start_time = time.time()</div><div>        ret = func(*args, **kwargs)</div><div>        end_time = time.time()</div><div>        print(&quot;used:&quot;, end_time - start_time)</div><div>        return ret</div><div><br></div><div>    return inner</div><div><br></div><div><br></div><div>class AddClass(View):</div><div><br></div><div>    @method_decorator(wrapper)  <font color="#41AD1C"># 在dispatch方法上添加装饰器</font></div><div>    def dispatch(self, request, *args, **kwargs):</div><div>        return super(AddClass, self).dispatch(request, *args, **kwargs)</div><div><br></div><div>    def get(self, request):</div><div>        return render(request, &quot;add_class.html&quot;)</div><div><br></div><div>    def post(self, request):</div><div>        class_name = request.POST.get(&quot;class_name&quot;)</div><div>        models.Classes.objects.create(name=class_name)</div><div>        return redirect(&quot;/class_list/&quot;)</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">Response对象</span></h2><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div>render、<span style="font-size:12pt;">HttpResponse、</span>redirect、<span style="font-size:12pt;">JsonResponse</span> 方法都会返回一个Response对象</div></li></ul><div><br></div><ul><li><div>Response对象中的属性</div></li><ul><li><div><span style="font-size:12pt;">.content:</span> <span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">响应内容</span><span style="font-size:12pt;"></span></div></li><li><div><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">.charset: 响应内容的编码</span></span></div></li><li><div><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">.status_code: 响应的状态码</span></span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def view_fn(request):</div><div>    res_obj = render(request, 'test.html')</div><div><br></div><div>    print(res_obj.content)  <font color="#41AD1C"># 响应的内容 -&gt; bytes类型的html代码</font></div><div>    print(res_obj.charset)  <font color="#41AD1C"># 响应内容的编码 -&gt; utf-8</font></div><div>    print(res_obj.status_code)  <font color="#41AD1C"># 响应的状态码 -&gt; 200</font></div><div><font color="#41AD1C"><br></font></div><div>    return res_obj</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;background-color:#3eaf7c;border-radius:3px;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">JsonResponse对象</span></h2><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">JsonResponse 和 </span><span style="font-size:12pt;">HttpResponse 的区别: </span></div></li></ul><div><br></div><ul><ul><li><div>响应头的区别，通过 <span style="font-size:12pt;">JsonResponse 将数据</span>发送给浏览器，就算Ajax不设置 date_type='json'，接收到的也会是一个对象，因为响应头向浏览器说明了这是一个json数据，所以ajax会自动将他转换为对象</div></li></ul></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">JsonResponse 默认只能接受字典类型，如果想接受列表类型的参数，那么就要修改safe关键字参数，下面有提到</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">JsonResponse 的作用生成一个Json格式的字符串，而不需要使用 json 模块去生成Json格式的字符串，直接使用 JsonResponse 就可以了</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.http import JsonResponse</div><div><br></div><div>def view_fn(request):</div><div>    dic = {'name': 'Kevin', 'age': 18}</div><div>    res_obj = JsonResponse(dic)</div><div>    print(res_obj.content)  <font color="#41AD1C"># b'{&quot;name&quot;: &quot;Kevin&quot;, &quot;age&quot;: 18}'</font></div><div>    return res_obj</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div>如果要生成一个Json格式的列表，就需要修改safe关键字参数（且safe关键字参数默认等于 True），因为JsonResponse默认只能传递字典类型</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.http import JsonResponse</div><div><br></div><div>def view_fn(request):</div><div>    dic = [1, 2, 3, 4]</div><div>    res_obj = JsonResponse(dic, safe=False)</div><div>    print(res_obj.content)  <font color="#41AD1C"># b'[1, 2, 3, 4]'</font></div><div>    return res_obj</div></div><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><font style="font-size:16pt;"><span style="font-size:16pt;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">视图函数基础三件套</span></font></h2><div><span style="font-size:14pt;white-space:pre-wrap;"><br></span></div><ul><li><div><span style="color:rgb(227, 0, 0);">所有跟请求相关的数据，Django都帮你封装到 request 里面了</span></div></li></ul><div><br></div><div><font style="font-size:14pt;"><span style="box-sizing:border-box;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">1.</span><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">HttpResponse</span></font></div><div><br></div><ul><li><div>传入一个字符串参数，将该字符串发送给浏览器</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import HttpResponse</div><div><br></div><div>def views_fn(request):</div><div><span style="color:rgb(65, 173, 28);"># 所有跟请求相关的数据，Django都帮你封装到 request 里面了</span></div><div><span style="color:rgb(65, 173, 28);"># 业务逻辑代码</span></div><div>    return HttpResponse('文字')</div></div><div><br></div><ul><li><div>使用 <span style="font-size:12pt;">HttpResponse 实现简单的 </span>render 的功能</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    print(sys.path)</div><div>    with open('templates/login.html', 'r', encoding='utf-8') as f:</div><div>        data = f.read()</div><div>    return HttpResponse(data)</div></div><div><br></div><ul><li><div>django.http 中的 HttpResponse 和 django.shortcuts 中的 HttpResponse 是一样的</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.http import HttpResponse</div><div><br></div><div><span style="font-size:9pt;font-family:Monaco;"><font color="#41AD1C"># 等同于</font></span></div><div><br></div><div>from django.shortcuts import HttpResponse</div></div><div><br></div><ul><li><div>status 参数</div></li></ul><div><br></div><ul><ul><li><div>默认情况下数据返回成功后状态码为200，可以通过 status 参数修改数据返回成功后的状态码</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import HttpResponse</div><div>import json</div><div><br></div><div><br></div><div>def index(request):</div><div>    return HttpResponse(json.dumps({'msg': 'hello'}), <font color="#FA7A00">status</font>=400)</div></div><div><br></div><div><span style="font-size:14pt;box-sizing:border-box;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">2.</span><span style="font-size:14pt;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"></span><font style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">render</span></font></div><div><br></div><ul><li><div>将指定的HTML文件内容发送给浏览器</div></li></ul><div><br></div><ul><li><div>render 是在 django.http 中的 HttpResponse 基础上封装的</div></li></ul><div><br></div><ul><li><div>render方法所接收的参数（常用的就只有前三个）:</div></li></ul><div><br></div><div><img data-filename="867021-20180329215116152-275073384.png" src="/kevin-blog/Django/视图系统_files/867021-20180329215116152-275073384.png" type="image/png"></div><div><br></div><ul><ul><li><div><span style="font-size:12pt;color:rgb(227, 0, 0);">requset</span><span style="font-size:12pt;">: </span><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">用于生成响应的请求对象</span></div></li><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(255, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">template_name</span></span><span style="font-size:12pt;">: 待渲染的HTML模板文件名称</span></div></li><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:12pt;color:rgb(255, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">context</span></span><span style="font-size:12pt;">: 保存具体数据的字典，用于将字典中的数据填充到HTML模板文件中（类似于我们自己写的Web框架中所用到的 jinja2）</span></div></li><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">content_type:</span> <span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">生成的文档要使用的MIME类型。默认为 DEFAULT_CONTENT_TYPE 设置的值。默认为'text/html'</span></div></li><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">status:</span> <span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">响应的状态码。默认为200</span></div></li><li><div><span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">useing:</span> <span style="white-space:pre-wrap;overflow-wrap:break-word;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:12pt;color:rgb(0, 0, 0);font-variant-caps:normal;font-variant-ligatures:normal;">用于加载模板的模板引擎的名称</span></div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import render</div><div><br></div><div>def views_fn(request):</div><div><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"># 所有跟请求相关的数据，Django都帮你封装到 request 里面了</span></div><div><span style="color:rgb(65, 173, 28);"> # 业务逻辑代码</span></div><div>    return render(request, &quot;index.html&quot;, {&quot;name&quot;: &quot;Alex&quot;, &quot;hobby_list&quot;: [&quot;烫头&quot;, &quot;泡吧&quot;]})</div></div><div><br></div><div><font style="font-size:14pt;"><span style="box-sizing:border-box;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;white-space:pre-wrap;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;">3.</span><span style="letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-size:14pt;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">redirect</span></font></div><div><br></div><ul><li><div>网页重定向</div></li><li><div>接收一个 URL 参数, 表示让浏览器跳转到指定的 URL（网址）</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>from django.shortcuts import redirect</div><div><br></div><div>def views_fn(request):</div><div><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"># 所有跟请求相关的数据，Django都帮你封装到 request 里面了</span></div><div><span style="color:rgb(65, 173, 28);"> # 业务逻辑代码</span></div><div>    return redirect(&quot;/login&quot;)</div><div><span style="color:rgb(65, 173, 28);"></span><span style="color:rgb(65, 173, 28);"># return redirect(&quot;<a href="http://www.baidu.com/">http://www.baidu.com</a>&quot;)</span></div></div><div><br></div><ul><li><div>网址重定向的本质: 我要重定向到百度，首先浏览器访问了127.0.0.1:8080/login网址，然后网页服务器接收到消息进行处理后发送消息告诉浏览器叫浏览器请求百度的服务器，然后浏览器再发送消息给百度的服务器请求百度的页面</div></li></ul><div><br></div><div><img data-filename="867021-20180614134305941-1759258226.png" src="/kevin-blog/Django/视图系统_files/867021-20180614134305941-1759258226.png" type="image/png"></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">获取请求的数据</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">1.</span> <font style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">request.path_info -&gt; 获取用户</span></font><span style="font-size:14pt;font-weight:bold;">访问的url，不包括域名和参数</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">request.path_info</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def view_fn(request):</div><div>    print(request.path_info)  <font color="#41AD1C"># /view_fn</font></div><div>    return HttpResponse('view_fn页面')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span> <span style="font-size:14pt;font-weight:bold;">request.get_full_path() -&gt; 获</span><span style="font-size:14pt;font-weight:bold;">取用户访问的url，不包括域名，但是包括参数</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">request.get_full_path()</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def view_fn(request):</div><div>    print(request.get_full_path())  <font color="#41AD1C"># /view_fn?a=123</font></div><div>    return HttpResponse('view_fn页面')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">3.</span> <span style="font-size:14pt;font-weight:bold;">request.method -&gt; 获取使用了什么请求方式</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">request.method</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;color:rgb(227, 0, 0);">注意：所有的请求方式都必须大写</span></div></li></ul><div><br></div><ul><li><div>获取使用了什么请求方式 -&gt; 一般用于判断是使用了 GET请求 还是使用了 POST请求</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    print(request.method)  <span style="color:rgb(65, 173, 28);"># GET / POST</span></div><div>    return HttpResponse('文字')</div></div><div><br></div><ul><li><div><span style="color:rgb(227, 0, 0);">注意: 如果要判断使用什么方式进行请求，首先判断 POST 请求</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    if request.method == 'POST':</div><div>        return HttpResponse('文字')</div><div>    else:</div><div>        return render(request, 'login.html')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">4.</span> <span style="font-size:14pt;font-weight:bold;">request.is_ajax() -&gt; 判断是否</span><span style="font-size:14pt;font-weight:bold;">是ajax请求</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">request.is_ajax()</span></div></li></ul><div><br></div><ul><li><div>无论是GET或POST的ajax请求，返回的都是 True，只要是ajax请求返回的都是 True</div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    if request.is_ajax():</div><div>        return HttpResponse('文字')</div><div>    else:</div><div>        return render(request, 'login.html')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span> <span style="font-size:14pt;font-weight:bold;">request.META -&gt; 获取请求头中的信息</span></div><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    print(request.META)  <font color="#41AD1C"># 获取请求头的所有信息</font></div><div>    print(request.META.get('CONTENT_TYPE'))  <font color="#41AD1C"># 获取请求类型 -&gt; content_type: application/x-www-form-urlencoded</font></div><div>    print(request.META.get('REMOTE_ADDR'))  <font color="#41AD1C"># 获取当前的网址 -&gt; 127.0.0.1</font></div><div>    print(request.META.get('HTTP_HOST'))  <font color="#41AD1C"># 获取请求的网址+端口号 -&gt; 127.0.0.1:8000</font></div><div>    print(request.META.get('SERVER_PORT'))  <font color="#41AD1C"># 获取请求的端口号 -&gt; 8000</font></div><div>    print(request.META.get('HTTP_USER_AGENT'))  <font color="#41AD1C"># 获取请求当前网址的设备信息 -&gt; 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) ……'</font></div><div><font color="#41AD1C">                                                                            # 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) ……'</font></div><div>    return HttpResponse('获取请求头的参数')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">6.</span> <font style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">request.body -&gt; 获取请求</span></font><span style="font-size:14pt;font-weight:bold;">的元数据</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">元</span><span style="font-size:12pt;">数据: 前端发送过来的数据，且没有被wsgi进行解析</span></div></li></ul><div><font style="font-size:12pt;"><br></font></div><ul><li><div>一般我们都会使用 request.body 获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，因为 wsgi 只能解析 <span style="font-size:12pt;">contentType=</span>application/x-www-form-urlencoded 发送过来的数据，然后放到 request.POST 中，所以 request.POST 无法获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，只能通过 request.body 获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，然后自行解析这些数据</div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div>request.body -&gt; 只作用于有请求体的请求，因为request.body是从请求体中获取元数据的，且GET请求中没有请求体，所以在GET请求中request.body是获取不到任何元数据的</div></li></ul><div><span style="font-size:14pt;"><br></span></div><ul><li><div>request.body -&gt; 返回值: bytes类型的元数据</div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    if request.method == 'POST':</div><div>        body_data = request.body  <font color="#41AD1C"># 前端发送过来的数据，且没有被wsgi进行解析</font></div><div>        print(body_data)  <font style="color:rgb(65, 173, 28);"># b'username=Kevin&amp;age=23' -&gt; 当 contentType 为 application/x-www-form-urlencoded 所接受到的数据结构</font></div><div><font color="#41AD1C">                          # b'{&quot;username&quot;:&quot;Kevin&quot;, &quot;age&quot;:18}' -&gt; 当 contentType 为 application/json 所接受到的数据结构</font></div><div>    return render(request, 'login.html')</div></div><div><br></div><ul><li><div>获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，并且对数据进行解析</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><br></div><div>import json</div><div><br></div><div>def views_fn(request):</div><div>    if request.method == 'POST':</div><div><br></div><div>        bytes_data = request.body  <font color="#41AD1C"># b'{&quot;username&quot;:&quot;Kevin&quot;,&quot;age&quot;:18}'</font></div><div><br></div><div>        json_data = bytes_data.decode('utf-8') <font color="#41AD1C"> # {&quot;username&quot;:&quot;Kevin&quot;,&quot;age&quot;:18}</font></div><div><br></div><div>        data = json.loads(json_data)  <font color="#41AD1C"># {'age': 18, 'username': 'Kevin'}</font></div><div><br></div><div>    return render(request, 'login.html')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># login.html</font></div><div><br></div><div>$.ajax({</div><div>    url: '/views_fn/',</div><div>    type: 'POST',</div><div>    contentType: '<font color="#FA7A00">application/json</font>',</div><div>    data: JSON.stringify({username: 'Kevin', age: 18}),</div><div>    success:function (res) {</div><div>        console.log(res)</div><div>    }</div><div>})</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">7.</span> <span style="font-size:14pt;font-weight:bold;">request.GET -&gt; 获取 GE</span><span style="font-size:14pt;font-weight:bold;">T 请求的数据</span></div><div><br></div><ul><li><div><span style="font-size:12pt;color:rgb(227, 0, 0);">注意：</span><span style="font-size:12pt;color:rgb(227, 0, 0);">所有的请求方式都必须大写</span></div></li></ul><div><br></div><ul><li><div>通常我们访问一个网址就是使用了 GET 请求</div></li></ul><div><br></div><ul><li><div>获取 GET 请求的数据 -&gt; request.GET</div></li></ul><div><br></div><ul><li><div>request.GET -&gt; 返回值: &lt;QueryDict: {'sid': ['15']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt; -&gt; 类似于一个字典</div></li></ul><div><br></div><ul><li><div>注意: 从 request.GET 中获取到的值都是字符串类型的</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div><span style="color:rgb(65, 173, 28);"> # 获取所有 GET 请求的数据</span></div><div>    get_all_data = request.GET</div><div>    print(get_all_data)  <span style="color:rgb(65, 173, 28);"># &lt;QueryDict: {'sid': ['15']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;</span></div><div><br></div><div><span style="color:rgb(227, 0, 0);"></span><span style="color:rgb(227, 0, 0);"># </span><span style="color:rgb(227, 0, 0);">使用 .get() 方法获取 GET 请求中指定的数据，防止没有该值而报错，因为 request.GET 的返回值是字典，所以可以使用 .get() 方法，如果不懂可以看会字典中的 .get() 方法</span></div><div>    get_data = request.GET.get('sid')</div><div>    print(get_data)  <span style="color:rgb(65, 173, 28);"># 15</span></div><div><br></div><div>    return render(request, 'login.html')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">8.</span> <span style="font-size:14pt;font-weight:bold;">request.POST -&gt; 获取</span><span style="font-size:14pt;font-weight:bold;"> POST 请求的数据</span></div><div><br></div><ul><li><div><span style="font-size:12pt;color:rgb(227, 0, 0);">注意：</span><span style="font-size:12pt;color:rgb(227, 0, 0);">所有的请求方式都必须大写</span></div></li></ul><div><br></div><ul><li><div>获取 POST 请求的数据 -&gt; request.POST</div></li></ul><div><br></div><ul><li><div>request.POST 只能获取 <span style="font-size:12pt;">contentType=</span>application/x-www-form-urlencoded 发送过来的数据，不能获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，因为 wsgi 只能解析 <span style="font-size:12pt;">contentType=</span>application/x-www-form-urlencoded 发送过来的数据，然后放到 request.POST 中，所以 request.POST 无法获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，只能通过 request.body 获取 <span style="font-size:12pt;">contentType=</span>application/json 发送过来的数据，然后自行解析这些数据</div></li></ul><div><br></div><ul><li><div>request.POST 什么时候有值:</div></li></ul><div><br></div><ul><ul><li><div>以 application/x-www-form-urlencoded 编码格式发送过来的数据，那么 request.POST 中是有值的</div></li><li><div>以 application/json 编码格式发送过来的数据，那么 request.POST 中是没有值的，只能在 request.body 中获取发送过来的数据自行解析</div></li></ul></ul><div><br></div><ul><li><div><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">reques</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">t.POST -</span><span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;">&gt; 返回值: </span>&lt;QueryDict: {'username': ['Kevin'], 'password': ['123']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;<span style="font-size:medium;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;font-family:&quot;Courier New&quot;;font-variant-caps:normal;font-variant-ligatures:normal;"> -&gt; 类似于一个字典</span></div></li></ul><div><br></div><ul><li><div>注意: 从 request.POST 中获取到的值都是字符串类型的</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div><span style="color:rgb(65, 173, 28);"># 获取所有 POST 请求的数据</span></div><div>    post_all_data = request.POST</div><div>    print(post_all_data)  <span style="color:rgb(65, 173, 28);"># &lt;QueryDict: {'username': ['Kevin'], 'password': ['123']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;</span></div><div><br></div><div><span style="color:rgb(227, 0, 0);"># 使用 .get() 方法获取 POST 请求中指定的数据，防止没有该值而报错，因为 request.POST 的返回值是字典，所以可以使用 .get() 方法，如果不懂可以看会字典中的 .get() 方法</span></div><div>    username = request.POST.get('username')</div><div>    password = request.POST.get('password')</div><div>    print(username, password)  <span style="color:rgb(65, 173, 28);"># Kevin 123</span></div><div><br></div><div>    return render(request, 'login2.html')</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">9.</span> <span style="font-size:14pt;font-weight:bold;">获取 GET/POST 中实际数据的三种方法</span></div><div><br></div><ul><li><div>request.POST['xxx'] -&gt; <span style="color:rgb(198, 197, 0);">不推荐使用</span></div></li></ul><div><br></div><ul><ul><li><div>和获取字典中的值是一样的 </div></li><li><div>如果没有该值就会报错</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># GET/POST 用法都是一样的，这里就使用 POST 举例</span></div><div><br></div><div>def views_fn(request):</div><div>    post_all_data = request.POST</div><div>    print(post_all_data)  <span style="color:rgb(65, 173, 28);"># &lt;QueryDict: {'username': ['Kevin'], 'password': ['123']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;</span></div><div><br></div><div>    username = request.POST['username']  <span style="color:rgb(65, 173, 28);"># Kevin</span></div><div>    password = request.POST['password']  <span style="color:rgb(65, 173, 28);"># 123</span></div><div><br></div><div>    return render(request, 'login2.html')</div></div><div><br></div><ul><li><div>.get('xxx')</div></li></ul><div><br></div><ul><ul><li><div>获取key名为xxx，value为列表中最后一个值（因为value值都是以列表的形式存放的）</div></li><li><div>如果没有该值不会报错，则会返回一个 None</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># GET/POST 用法都是一样的，这里就使用 POST 举例</span></div><div><br></div><div>def views_fn(request):</div><div>    post_all_data = request.POST</div><div>    print(post_all_data) <span style="color:rgb(65, 173, 28);"> # &lt;QueryDict: {'username': ['Kevin'], 'password': ['123']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;</span></div><div><br></div><div>    username = request.POST.get('username')  <span style="color:rgb(65, 173, 28);"># Kevin</span></div><div>    password = request.POST.get('password')  <span style="color:rgb(65, 173, 28);"># 123</span></div><div>    xxx = request.POST.get('xxx')  <span style="color:rgb(65, 173, 28);"># None</span></div><div><br></div><div>    return render(request, 'login2.html')</div></div><div><br></div><ul><li><div><span style="font-size:12pt;">.getlist('xxx')</span></div></li></ul><div><br></div><ul><ul><li><div>获取key名为xxx的值，返回值: 列表（因为value值都是以列表的形式存放的）</div></li><li><div>如果没有该值不会报错，则会返回一个 [] 空列表</div></li><li><div>用处: 有的时候我们要获取POST过来多选框的值（值会有多个），如果使用 .get() 方法获取，只能获取到列表中最后一个值，所有只能使用 .getlist() 方法获取POST过来多选框所有的值</div></li></ul></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def views_fn(request):</div><div>    post_all_data = request.POST</div><div>    print(post_all_data) <span style="color:rgb(65, 173, 28);"> # &lt;QueryDict: {'teacher_id': ['2'], 'teacher_name': ['Eva_J'], 'class_name': ['1', '2', '4']}&gt;，如果没有值会返回一个空字典：&lt;QueryDict: {}&gt;</span></div><div><br></div><div>    teacher_id = request.POST.get('teacher_id')  <span style="color:rgb(65, 173, 28);"># 2</span></div><div>    teacher_name = request.POST.get('teacher_name')  <span style="color:rgb(65, 173, 28);"># Eva_J</span></div><div><span style="color:rgb(65, 173, 28);"></span>class_name = request.POST.get('class_name')  <span style="color:rgb(198, 197, 0);"># 4</span></div><div>    class_name = request.POST.getlist('class_name') <span style="color:rgb(227, 0, 0);"> # ['1', '2', '4']</span></div><div><br></div><div>    return render(request, 'teacher.html')</div></div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">10.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;font-weight:bold;">request.FILES.get('file_name') -&gt; 获取上传的文件</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">详细请查看 Django 文件上传 的章节</span></div></li></ul><div><br></div><ul><li><div><span style="font-size:12pt;">request.FILES.get('file_name')</span></div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def upload_file(request):</div><div>    if request.method == 'POST':</div><div>        file_obj = request.FILES.get('img_file') <span style="color:rgb(65, 173, 28);"> # 获取上传文件</span></div><div>    return render(request, 'upload_file.html')</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">其他</span></h2><div><br></div><div><font style="font-size:14pt;"><span style="white-space:pre-wrap;font-size:14pt;font-weight:bold;">1.</span><span style="font-size:14pt;font-weight:bold;"> mark_safe -&gt; 不对html标签进行转义</span></font></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">mark_safe</span></div></li></ul><div><span style="font-size:14pt;"><br></span></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># views.py</font></div><div><font color="#41AD1C"><br></font></div><div>from django.utils.safestring import mark_safe  <font color="#41AD1C"># 不对html标签进行转义</font></div><div><br></div><div>def index(request):</div><div>    a = mark_safe('&lt;a href=&quot;https://www.baidu.com&quot;&gt;百度&lt;/a&gt;')</div><div>    return render(request, 'index.html', {'a': a})</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># index.html</font></div><div><br></div><div>{{ a }}</div></div><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">2.</span><span style="font-size:14pt;font-weight:bold;"></span><span style="font-size:14pt;"><span style="font-size:14pt;font-weight:bold;">request.GET.urlencode() -&gt; </span></span><span style="font-size:14pt;font-weight:bold;">将 request.GET （即: 字典）转化成 encode 编码格式的字符串</span></div><div><span style="font-size:14pt;"><br></span></div><ul><li><div><span style="font-size:12pt;">request.GET.urlencode()</span></div></li></ul><div><br></div><ul><li><div>只作用于GET的请求参数</div></li></ul><div><br></div><ul><li><div>和Python中的 urllib 库中 urlencode 功能是一样的</div></li></ul><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#41AD1C"># 访问的网址</font></div><div><br></div><div>http://127.0.0.1:8000/index/<font color="#FA7A00">?a=1&amp;b=2&amp;c=3</font></div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>def index(request):</div><div><br></div><div>    encode_str = request.GET<font color="#FA7A00">.urlencode()</font></div><div><br></div><div>    print(encode_str)  <font color="#41AD1C"># c=3&amp;b=2&amp;a=1</font></div><div><br></div><div>    print(request.GET)  <font color="#41AD1C"># &lt;QueryDict: {'c': ['3'], 'b': ['2'], 'a': ['1']}&gt;</font></div><div><br></div><div>    return render(request, 'index.html')</div></div><div><br></div><h2 style="margin:10px 0px 12px;padding:0px 0px 0px 15px;font-size:21px;background-color:#3eaf7c;border-radius:3px;text-align:center;text-shadow:rgb(34, 34, 34) 1px 1px 2px;letter-spacing:normal;orphans:2;text-indent:0px;text-transform:none;white-space:normal;widows:2;word-spacing:0px;-webkit-text-stroke-width:0px;"><span style="font-size:21px;color:white;font-family:&quot;Helvetica Neue&quot;, Helvetica, Verdana, Arial, sans-serif;font-variant-caps:normal;font-variant-ligatures:normal;font-weight:bold;line-height:1.5;">例子</span></h2><div><br></div><div><span style="font-size:14pt;white-space:pre-wrap;font-weight:bold;">5.</span> <span style="font-size:14pt;font-weight:bold;">登录例子</span></div><div><br></div><ul><li><div>将视图函数直接写在了 urls.py 文件里</div></li></ul><div><br></div><div><a href="/kevin-blog/Django/视图系统_files/mysite_no_views.rar"><img alt="mysite_no_views.rar" src="/kevin-blog/Django/视图系统_files/3e7975ed2b12b04f5f2c10a06adea313.png"></a></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># urls.py</span></div><div><br></div><div>from django.conf.urls import url</div><div>from django.contrib import admin</div><div>from django.shortcuts import HttpResponse, render, redirect</div><div><br></div><div><br></div><div>def login(request):</div><div>    error_msg = ''</div><div>    if request.method == 'POST':</div><div>        email = request.POST.get('email')</div><div>        password = request.POST.get('password')</div><div>        if email == '<a href="mailto:123@qq.com">123@qq.com</a>' and password == '123':</div><div>            return redirect('<a href="http://www.baidu.com/">http://www.baidu.com</a>')</div><div>        else:</div><div>            error_msg = '登录失败'</div><div>    return render(request, 'login.html', {'error_msg': error_msg})</div><div><br></div><div><br></div><div>def login2(request):</div><div>    if request.method == 'POST':</div><div>        username = request.POST.get('username')</div><div>        password = request.POST.get('password')</div><div>        if username == 'Kevin' and password == '123':</div><div>            ret = '登录成功'</div><div>        else:</div><div>            ret = '登录失败'</div><div>        return HttpResponse(ret)</div><div>    return render(request, 'login2.html')</div><div><br></div><div><br></div><div>urlpatterns = [</div><div>    url(r'^admin/', admin.site.urls),</div><div>    url(r'^login/', login),</div><div>    url(r'^login2/', login2)</div><div>]</div></div><div><br></div><ul><li><div>将视图函数写在了单独的 views.py 文件里，然后通过相对导入，导入到 urls.py 文件里</div></li></ul><div><br></div><div><a href="/kevin-blog/Django/视图系统_files/mysite_views.rar"><img alt="mysite_views.rar" src="/kevin-blog/Django/视图系统_files/ad791923abd11edb7747cc5e9e4d1a12.png"></a></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># views.py</span></div><div><br></div><div>from django.shortcuts import HttpResponse, render, redirect</div><div><br></div><div><br></div><div>def login(request):</div><div>    error_msg = ''</div><div>    if request.method == 'POST':</div><div>        email = request.POST.get('email')</div><div>        password = request.POST.get('password')</div><div>        if email == '<a href="mailto:123@qq.com">123@qq.com</a>' and password == '123':</div><div>            return redirect('<a href="http://www.baidu.com/">http://www.baidu.com</a>')</div><div>        else:</div><div>            error_msg = '登录失败'</div><div>    return render(request, 'login.html', {'error_msg': error_msg})</div><div><br></div><div><br></div><div>def login2(request):</div><div>    if request.method == 'POST':</div><div>        username = request.POST.get('username')</div><div>        password = request.POST.get('password')</div><div>        if username == 'Kevin' and password == '123':</div><div>            ret = '登录成功'</div><div>        else:</div><div>            ret = '登录失败'</div><div>        return HttpResponse(ret)</div><div>    return render(request, 'login2.html')</div></div><div><br></div><div style="box-sizing:border-box;padding:8px;font-family:Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace;font-size:12px;color:rgb(51, 51, 51);border-radius:4px;background-color:rgb(251, 250, 248);border:1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color:rgb(65, 173, 28);"># urls.py</span></div><div><br></div><div>from django.conf.urls import url</div><div>from django.contrib import admin</div><div>from .views import *</div><div><br></div><div>urlpatterns = [</div><div>    url(r'^admin/', admin.site.urls),</div><div>    url(r'^login/', login),</div><div>    url(r'^login2/', login2)</div><div>]</div></div><div><br></div></div><div><br></div></span></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kevin-blog/Django/自定义分页.html" class="prev">
        自定义分页
      </a></span> <span class="next"><a href="/kevin-blog/Django/跨域.html">
        跨域
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/kevin-blog/assets/js/app.dd46475d.js" defer></script><script src="/kevin-blog/assets/js/2.97d04891.js" defer></script><script src="/kevin-blog/assets/js/74.7b652913.js" defer></script>
  </body>
</html>
